/**
 * Live2D Cubism Core
 * (C) 2019 Live2D Inc. All rights reserved.
 *
 * This file is licensed pursuant to the license agreement below.
 * This file corresponds to the "Redistributable Code" in the agreement.
 * https://www.live2d.com/eula/live2d-proprietary-software-license-agreement_en.html
 */
var Live2DCubismCore;!function(Live2DCubismCore){var _scriptDir,_csm=function(){function _csm(){}return _csm.getVersion=function(){return _em.ccall("csmGetVersion","number",[],[])},_csm.getLatestMocVersion=function(){return _em.ccall("csmGetLatestMocVersion","number",[],[])},_csm.getMocVersion=function(moc,mocSize){return _em.ccall("csmGetMocVersion","number",["number","number"],[moc,mocSize])},_csm.getSizeofModel=function(moc){return _em.ccall("csmGetSizeofModel","number",["number"],[moc])},_csm.reviveMocInPlace=function(memory,mocSize){return _em.ccall("csmReviveMocInPlace","number",["number","number"],[memory,mocSize])},_csm.initializeModelInPlace=function(moc,memory,modelSize){return _em.ccall("csmInitializeModelInPlace","number",["number","number","number"],[moc,memory,modelSize])},_csm.getParameterCount=function(model){return _em.ccall("csmGetParameterCount","number",["number"],[model])},_csm.getParameterIds=function(model){return _em.ccall("csmGetParameterIds","number",["number"],[model])},_csm.getParameterMinimumValues=function(model){return _em.ccall("csmGetParameterMinimumValues","number",["number"],[model])},_csm.getParameterTypes=function(model){return _em.ccall("csmGetParameterTypes","number",["number"],[model])},_csm.getParameterMaximumValues=function(model){return _em.ccall("csmGetParameterMaximumValues","number",["number"],[model])},_csm.getParameterDefaultValues=function(model){return _em.ccall("csmGetParameterDefaultValues","number",["number"],[model])},_csm.getParameterValues=function(model){return _em.ccall("csmGetParameterValues","number",["number"],[model])},_csm.getParameterKeyCounts=function(model){return _em.ccall("csmGetParameterKeyCounts","number",["number"],[model])},_csm.getParameterKeyValues=function(model){return _em.ccall("csmGetParameterKeyValues","number",["number"],[model])},_csm.getPartCount=function(model){return _em.ccall("csmGetPartCount","number",["number"],[model])},_csm.getPartIds=function(model){return _em.ccall("csmGetPartIds","number",["number"],[model])},_csm.getPartOpacities=function(model){return _em.ccall("csmGetPartOpacities","number",["number"],[model])},_csm.getPartParentPartIndices=function(model){return _em.ccall("csmGetPartParentPartIndices","number",["number"],[model])},_csm.getDrawableCount=function(model){return _em.ccall("csmGetDrawableCount","number",["number"],[model])},_csm.getDrawableIds=function(model){return _em.ccall("csmGetDrawableIds","number",["number"],[model])},_csm.getDrawableConstantFlags=function(model){return _em.ccall("csmGetDrawableConstantFlags","number",["number"],[model])},_csm.getDrawableDynamicFlags=function(model){return _em.ccall("csmGetDrawableDynamicFlags","number",["number"],[model])},_csm.getDrawableTextureIndices=function(model){return _em.ccall("csmGetDrawableTextureIndices","number",["number"],[model])},_csm.getDrawableDrawOrders=function(model){return _em.ccall("csmGetDrawableDrawOrders","number",["number"],[model])},_csm.getDrawableRenderOrders=function(model){return _em.ccall("csmGetDrawableRenderOrders","number",["number"],[model])},_csm.getDrawableOpacities=function(model){return _em.ccall("csmGetDrawableOpacities","number",["number"],[model])},_csm.getDrawableMaskCounts=function(model){return _em.ccall("csmGetDrawableMaskCounts","number",["number"],[model])},_csm.getDrawableMasks=function(model){return _em.ccall("csmGetDrawableMasks","number",["number"],[model])},_csm.getDrawableVertexCounts=function(model){return _em.ccall("csmGetDrawableVertexCounts","number",["number"],[model])},_csm.getDrawableVertexPositions=function(model){return _em.ccall("csmGetDrawableVertexPositions","number",["number"],[model])},_csm.getDrawableVertexUvs=function(model){return _em.ccall("csmGetDrawableVertexUvs","number",["number"],[model])},_csm.getDrawableIndexCounts=function(model){return _em.ccall("csmGetDrawableIndexCounts","number",["number"],[model])},_csm.getDrawableIndices=function(model){return _em.ccall("csmGetDrawableIndices","number",["number"],[model])},_csm.getDrawableMultiplyColors=function(model){return _em.ccall("csmGetDrawableMultiplyColors","number",["number"],[model])},_csm.getDrawableScreenColors=function(model){return _em.ccall("csmGetDrawableScreenColors","number",["number"],[model])},_csm.getDrawableParentPartIndices=function(model){return _em.ccall("csmGetDrawableParentPartIndices","number",["number"],[model])},_csm.mallocMoc=function(mocSize){return _em.ccall("csmMallocMoc","number",["number"],[mocSize])},_csm.mallocModelAndInitialize=function(moc){return _em.ccall("csmMallocModelAndInitialize","number",["number"],[moc])},_csm.malloc=function(size){return _em.ccall("csmMalloc","number",["number"],[size])},_csm.setLogFunction=function(handler){_em.ccall("csmSetLogFunction",null,["number"],[handler])},_csm.updateModel=function(model){_em.ccall("csmUpdateModel",null,["number"],[model])},_csm.readCanvasInfo=function(model,outSizeInPixels,outOriginInPixels,outPixelsPerUnit){_em.ccall("csmReadCanvasInfo",null,["number","number","number","number"],[model,outSizeInPixels,outOriginInPixels,outPixelsPerUnit])},_csm.resetDrawableDynamicFlags=function(model){_em.ccall("csmResetDrawableDynamicFlags",null,["number"],[model])},_csm.free=function(memory){_em.ccall("csmFree",null,["number"],[memory])},_csm}(),Version=(Live2DCubismCore.AlignofMoc=64,Live2DCubismCore.AlignofModel=16,Live2DCubismCore.MocVersion_Unknown=0,Live2DCubismCore.MocVersion_30=1,Live2DCubismCore.MocVersion_33=2,Live2DCubismCore.MocVersion_40=3,Live2DCubismCore.MocVersion_42=4,Live2DCubismCore.ParameterType_Normal=0,Live2DCubismCore.ParameterType_BlendShape=1,function(){function Version(){}return Version.csmGetVersion=function(){return _csm.getVersion()},Version.csmGetLatestMocVersion=function(){return _csm.getLatestMocVersion()},Version.csmGetMocVersion=function(moc,mocBytes){return _csm.getMocVersion(moc._ptr,mocBytes.byteLength)},Version}()),Version=(Live2DCubismCore.Version=Version,function(){function Logging(){}return Logging.csmSetLogFunction=function(handler){Logging.logFunction=handler;handler=_em.addFunction(Logging.wrapLogFunction,"vi");_csm.setLogFunction(handler)},Logging.csmGetLogFunction=function(){return Logging.logFunction},Logging.wrapLogFunction=function(messagePtr){messagePtr=_em.UTF8ToString(messagePtr);Logging.logFunction(messagePtr)},Logging}()),Version=(Live2DCubismCore.Logging=Version,function(){function Moc(mocBytes){var memory=_csm.mallocMoc(mocBytes.byteLength);memory&&(new Uint8Array(_em.HEAPU8.buffer,memory,mocBytes.byteLength).set(new Uint8Array(mocBytes)),this._ptr=_csm.reviveMocInPlace(memory,mocBytes.byteLength),this._ptr||_csm.free(memory))}return Moc.fromArrayBuffer=function(buffer){if(!buffer)return null;buffer=new Moc(buffer);return buffer._ptr?buffer:null},Moc.prototype._release=function(){_csm.free(this._ptr),this._ptr=0},Moc}()),Version=(Live2DCubismCore.Moc=Version,function(){function Model(moc){this._ptr=_csm.mallocModelAndInitialize(moc._ptr),this._ptr&&(this.parameters=new Parameters(this._ptr),this.parts=new Parts(this._ptr),this.drawables=new Drawables(this._ptr),this.canvasinfo=new CanvasInfo(this._ptr))}return Model.fromMoc=function(moc){moc=new Model(moc);return moc._ptr?moc:null},Model.prototype.update=function(){_csm.updateModel(this._ptr)},Model.prototype.release=function(){_csm.free(this._ptr),this._ptr=0},Model}()),CanvasInfo=(Live2DCubismCore.Model=Version,function(modelPtr){var _canvasSize_data,_canvasSize_dataPtr,_canvasSize_nDataBytes,_canvasOrigin_dataPtr,_canvasOrigin_nDataBytes,_canvasPPU_nDataBytes,_canvasPPU_dataPtr;modelPtr&&(_canvasSize_nDataBytes=(_canvasSize_data=new Float32Array(2)).length*_canvasSize_data.BYTES_PER_ELEMENT,_canvasSize_dataPtr=_csm.malloc(_canvasSize_nDataBytes),(_canvasSize_dataPtr=new Uint8Array(_em.HEAPU8.buffer,_canvasSize_dataPtr,_canvasSize_nDataBytes)).set(new Uint8Array(_canvasSize_data.buffer)),_canvasOrigin_nDataBytes=(_canvasSize_nDataBytes=new Float32Array(2)).length*_canvasSize_nDataBytes.BYTES_PER_ELEMENT,_canvasOrigin_dataPtr=_csm.malloc(_canvasOrigin_nDataBytes),(_canvasOrigin_dataPtr=new Uint8Array(_em.HEAPU8.buffer,_canvasOrigin_dataPtr,_canvasOrigin_nDataBytes)).set(new Uint8Array(_canvasSize_nDataBytes.buffer)),_canvasPPU_nDataBytes=(_canvasOrigin_nDataBytes=new Float32Array(1)).length*_canvasOrigin_nDataBytes.BYTES_PER_ELEMENT,_canvasPPU_dataPtr=_csm.malloc(_canvasPPU_nDataBytes),(_canvasPPU_dataPtr=new Uint8Array(_em.HEAPU8.buffer,_canvasPPU_dataPtr,_canvasPPU_nDataBytes)).set(new Uint8Array(_canvasOrigin_nDataBytes.buffer)),_csm.readCanvasInfo(modelPtr,_canvasSize_dataPtr.byteOffset,_canvasOrigin_dataPtr.byteOffset,_canvasPPU_dataPtr.byteOffset),_canvasSize_data=new Float32Array(_canvasSize_dataPtr.buffer,_canvasSize_dataPtr.byteOffset,_canvasSize_dataPtr.length),_canvasSize_nDataBytes=new Float32Array(_canvasOrigin_dataPtr.buffer,_canvasOrigin_dataPtr.byteOffset,_canvasOrigin_dataPtr.length),_canvasOrigin_nDataBytes=new Float32Array(_canvasPPU_dataPtr.buffer,_canvasPPU_dataPtr.byteOffset,_canvasPPU_dataPtr.length),this.CanvasWidth=_canvasSize_data[0],this.CanvasHeight=_canvasSize_data[1],this.CanvasOriginX=_canvasSize_nDataBytes[0],this.CanvasOriginY=_canvasSize_nDataBytes[1],this.PixelsPerUnit=_canvasOrigin_nDataBytes[0],_csm.free(_canvasSize_dataPtr.byteOffset),_csm.free(_canvasOrigin_dataPtr.byteOffset),_csm.free(_canvasPPU_dataPtr.byteOffset))}),Parameters=(Live2DCubismCore.CanvasInfo=CanvasInfo,function(modelPtr){this.count=_csm.getParameterCount(modelPtr),length=_csm.getParameterCount(modelPtr),this.ids=new Array(length);for(var length,length2,_ids=new Uint32Array(_em.HEAPU32.buffer,_csm.getParameterIds(modelPtr),length),i=0;i<_ids.length;i++)this.ids[i]=_em.UTF8ToString(_ids[i]);length=_csm.getParameterCount(modelPtr),this.minimumValues=new Float32Array(_em.HEAPF32.buffer,_csm.getParameterMinimumValues(modelPtr),length),length=_csm.getParameterCount(modelPtr),this.types=new Int32Array(_em.HEAP32.buffer,_csm.getParameterTypes(modelPtr),length),length=_csm.getParameterCount(modelPtr),this.maximumValues=new Float32Array(_em.HEAPF32.buffer,_csm.getParameterMaximumValues(modelPtr),length),length=_csm.getParameterCount(modelPtr),this.defaultValues=new Float32Array(_em.HEAPF32.buffer,_csm.getParameterDefaultValues(modelPtr),length),length=_csm.getParameterCount(modelPtr),this.values=new Float32Array(_em.HEAPF32.buffer,_csm.getParameterValues(modelPtr),length),length=_csm.getParameterCount(modelPtr),this.keyCounts=new Int32Array(_em.HEAP32.buffer,_csm.getParameterKeyCounts(modelPtr),length),length=_csm.getParameterCount(modelPtr),length2=new Int32Array(_em.HEAP32.buffer,_csm.getParameterKeyCounts(modelPtr),length),this.keyValues=new Array(length);for(var _keyValues=new Uint32Array(_em.HEAPU32.buffer,_csm.getParameterKeyValues(modelPtr),length),i=0;i<_keyValues.length;i++)this.keyValues[i]=new Float32Array(_em.HEAPF32.buffer,_keyValues[i],length2[i])}),Parts=(Live2DCubismCore.Parameters=Parameters,function(modelPtr){this.count=_csm.getPartCount(modelPtr),length=_csm.getPartCount(modelPtr),this.ids=new Array(length);for(var length,_ids=new Uint32Array(_em.HEAPU32.buffer,_csm.getPartIds(modelPtr),length),i=0;i<_ids.length;i++)this.ids[i]=_em.UTF8ToString(_ids[i]);length=_csm.getPartCount(modelPtr),this.opacities=new Float32Array(_em.HEAPF32.buffer,_csm.getPartOpacities(modelPtr),length),length=_csm.getPartCount(modelPtr),this.parentIndices=new Int32Array(_em.HEAP32.buffer,_csm.getPartParentPartIndices(modelPtr),length)}),Drawables=(Live2DCubismCore.Parts=Parts,function(){function Drawables(modelPtr){this._modelPtr=modelPtr;for(var length,length2=null,_ids=(this.count=_csm.getDrawableCount(modelPtr),length=_csm.getDrawableCount(modelPtr),this.ids=new Array(length),new Uint32Array(_em.HEAPU32.buffer,_csm.getDrawableIds(modelPtr),length)),i=0;i<_ids.length;i++)this.ids[i]=_em.UTF8ToString(_ids[i]);length=_csm.getDrawableCount(modelPtr),this.constantFlags=new Uint8Array(_em.HEAPU8.buffer,_csm.getDrawableConstantFlags(modelPtr),length),length=_csm.getDrawableCount(modelPtr),this.dynamicFlags=new Uint8Array(_em.HEAPU8.buffer,_csm.getDrawableDynamicFlags(modelPtr),length),length=_csm.getDrawableCount(modelPtr),this.textureIndices=new Int32Array(_em.HEAP32.buffer,_csm.getDrawableTextureIndices(modelPtr),length),length=_csm.getDrawableCount(modelPtr),this.drawOrders=new Int32Array(_em.HEAP32.buffer,_csm.getDrawableDrawOrders(modelPtr),length),length=_csm.getDrawableCount(modelPtr),this.renderOrders=new Int32Array(_em.HEAP32.buffer,_csm.getDrawableRenderOrders(modelPtr),length),length=_csm.getDrawableCount(modelPtr),this.opacities=new Float32Array(_em.HEAPF32.buffer,_csm.getDrawableOpacities(modelPtr),length),length=_csm.getDrawableCount(modelPtr),this.maskCounts=new Int32Array(_em.HEAP32.buffer,_csm.getDrawableMaskCounts(modelPtr),length),length=_csm.getDrawableCount(modelPtr),this.vertexCounts=new Int32Array(_em.HEAP32.buffer,_csm.getDrawableVertexCounts(modelPtr),length),length=_csm.getDrawableCount(modelPtr),this.indexCounts=new Int32Array(_em.HEAP32.buffer,_csm.getDrawableIndexCounts(modelPtr),length),length=_csm.getDrawableCount(modelPtr),this.multiplyColors=new Float32Array(_em.HEAPF32.buffer,_csm.getDrawableMultiplyColors(modelPtr),4*length),length=_csm.getDrawableCount(modelPtr),this.screenColors=new Float32Array(_em.HEAPF32.buffer,_csm.getDrawableScreenColors(modelPtr),4*length),length=_csm.getDrawableCount(modelPtr),this.parentPartIndices=new Int32Array(_em.HEAP32.buffer,_csm.getDrawableParentPartIndices(modelPtr),length),length=_csm.getDrawableCount(modelPtr),length2=new Int32Array(_em.HEAP32.buffer,_csm.getDrawableMaskCounts(modelPtr),length),this.masks=new Array(length);for(var _masks=new Uint32Array(_em.HEAPU32.buffer,_csm.getDrawableMasks(modelPtr),length),i=0;i<_masks.length;i++)this.masks[i]=new Int32Array(_em.HEAP32.buffer,_masks[i],length2[i]);length=_csm.getDrawableCount(modelPtr),length2=new Int32Array(_em.HEAP32.buffer,_csm.getDrawableVertexCounts(modelPtr),length),this.vertexPositions=new Array(length);for(var _vertexPositions=new Uint32Array(_em.HEAPU32.buffer,_csm.getDrawableVertexPositions(modelPtr),length),i=0;i<_vertexPositions.length;i++)this.vertexPositions[i]=new Float32Array(_em.HEAPF32.buffer,_vertexPositions[i],2*length2[i]);length=_csm.getDrawableCount(modelPtr),length2=new Int32Array(_em.HEAP32.buffer,_csm.getDrawableVertexCounts(modelPtr),length),this.vertexUvs=new Array(length);for(var _vertexUvs=new Uint32Array(_em.HEAPU32.buffer,_csm.getDrawableVertexUvs(modelPtr),length),i=0;i<_vertexUvs.length;i++)this.vertexUvs[i]=new Float32Array(_em.HEAPF32.buffer,_vertexUvs[i],2*length2[i]);length=_csm.getDrawableCount(modelPtr),length2=new Int32Array(_em.HEAP32.buffer,_csm.getDrawableIndexCounts(modelPtr),length),this.indices=new Array(length);for(var _indices=new Uint32Array(_em.HEAPU32.buffer,_csm.getDrawableIndices(modelPtr),length),i=0;i<_indices.length;i++)this.indices[i]=new Uint16Array(_em.HEAPU16.buffer,_indices[i],length2[i])}return Drawables.prototype.resetDynamicFlags=function(){_csm.resetDrawableDynamicFlags(this._modelPtr)},Drawables}()),Version=(Live2DCubismCore.Drawables=Drawables,function(){function Utils(){}return Utils.hasBlendAdditiveBit=function(bitfield){return 1==(1&bitfield)},Utils.hasBlendMultiplicativeBit=function(bitfield){return 2==(2&bitfield)},Utils.hasIsDoubleSidedBit=function(bitfield){return 4==(4&bitfield)},Utils.hasIsInvertedMaskBit=function(bitfield){return 8==(8&bitfield)},Utils.hasIsVisibleBit=function(bitfield){return 1==(1&bitfield)},Utils.hasVisibilityDidChangeBit=function(bitfield){return 2==(2&bitfield)},Utils.hasOpacityDidChangeBit=function(bitfield){return 4==(4&bitfield)},Utils.hasDrawOrderDidChangeBit=function(bitfield){return 8==(8&bitfield)},Utils.hasRenderOrderDidChangeBit=function(bitfield){return 16==(16&bitfield)},Utils.hasVertexPositionsDidChangeBit=function(bitfield){return 32==(32&bitfield)},Utils.hasBlendColorDidChangeBit=function(bitfield){return 64==(64&bitfield)},Utils}()),_em_module=(Live2DCubismCore.Utils=Version,_scriptDir="undefined"!=typeof document&&document.currentScript?document.currentScript.src:void 0,function(_em_module){_em_module=_em_module||{};var b,m,e={};for(m in b=b||(void 0!==_em_module?_em_module:{}))b.hasOwnProperty(m)&&(e[m]=b[m]);var w,z,A,v,x,r=!1,n="object"==typeof window,q="function"==typeof importScripts,r="object"==typeof process&&"object"==typeof process.versions&&"string"==typeof process.versions.node&&!n&&!q,t=!n&&!r&&!q,u="",G=(r?(u=__dirname+"/",v=function(a,c){var d=B(a);return d||(z=z||require("fs"),a=(A=A||require("path")).normalize(a),d=z.readFileSync(a)),c?d:d.toString()},x=function(a){return assert((a=(a=v(a,!0)).buffer?a:new Uint8Array(a)).buffer),a},1<process.argv.length&&process.argv[1].replace(/\\/g,"/"),process.argv.slice(2),process.on("uncaughtException",function(a){throw a}),process.on("unhandledRejection",C),b.inspect=function(){return"[Emscripten Module object]"}):t?("undefined"!=typeof read&&(v=function(a){var c=B(a);return c?D(c):read(a)}),x=function(a){var c;if(!(c=B(a))){if("function"==typeof readbuffer)return new Uint8Array(readbuffer(a));assert("object"==typeof(c=read(a,"binary")))}return c},"undefined"!=typeof print&&((console="undefined"==typeof console?{}:console).log=print,console.warn=console.error="undefined"!=typeof printErr?printErr:print)):(n||q)&&(q?u=self.location.href:document.currentScript&&(u=document.currentScript.src),u=0!==(u=_scriptDir||u).indexOf("blob:")?u.substr(0,u.lastIndexOf("/")+1):"",v=function(a){try{var c=new XMLHttpRequest;return c.open("GET",a,!1),c.send(null),c.responseText}catch(d){if(a=B(a))return D(a);throw d}},q&&(x=function(a){try{var c=new XMLHttpRequest;return c.open("GET",a,!1),c.responseType="arraybuffer",c.send(null),new Uint8Array(c.response)}catch(d){if(a=B(a))return a;throw d}}),w=function(a){var c=E,d=F,f=new XMLHttpRequest;f.open("GET",c,!0),f.responseType="arraybuffer",f.onload=function(){var g;200==f.status||0==f.status&&f.response?d(f.response):(g=B(c))?d(g.buffer):a()},f.onerror=a,f.send(null)}),b.print||console.log.bind(console)),H=b.printErr||console.warn.bind(console);for(m in e)e.hasOwnProperty(m)&&(b[m]=e[m]);var e=null,I=Array(1),J=0,K=!1;function assert(a,c){a||C("Assertion failed: "+c)}var buffer,N,M,O,L="undefined"!=typeof TextDecoder?new TextDecoder("utf8"):void 0;function ca(a,c,d){var f=c+d;for(d=c;a[d]&&!(f<=d);)++d;if(16<d-c&&a.subarray&&L)return L.decode(a.subarray(c,d));for(f="";c<d;){var h,p,g=a[c++];128&g?(h=63&a[c++],192==(224&g)?f+=String.fromCharCode((31&g)<<6|h):(p=63&a[c++],(g=224==(240&g)?(15&g)<<12|h<<6|p:(7&g)<<18|h<<12|p<<6|63&a[c++])<65536?f+=String.fromCharCode(g):(g-=65536,f+=String.fromCharCode(55296|g>>10,56320|1023&g)))):f+=String.fromCharCode(g)}return f}function da(a,c){return a?ca(M,a,c):""}function ea(a){return 0<a%16777216&&(a+=16777216-a%16777216),a}function fa(a){buffer=a,b.HEAP8=N=new Int8Array(a),b.HEAP16=new Int16Array(a),b.HEAP32=O=new Int32Array(a),b.HEAPU8=M=new Uint8Array(a),b.HEAPU16=new Uint16Array(a),b.HEAPU32=new Uint32Array(a),b.HEAPF32=new Float32Array(a),b.HEAPF64=new Float64Array(a)}function P(a){for(;0<a.length;){var d,c=a.shift();"function"==typeof c?c():"number"==typeof(d=c.C)?void 0===c.w?b.dynCall_v(d):b.dynCall_vi(d,c.w):d(void 0===c.w?null:c.w)}}"undefined"!=typeof TextDecoder&&new TextDecoder("utf-16le"),n=b.TOTAL_MEMORY||16777216,n=(buffer=b.buffer||new ArrayBuffer(n)).byteLength,fa(buffer),O[1052]=5247296;var ia=[],ja=[],ka=[],la=[],Q=(Math.imul&&-5===Math.imul(4294967295,5)||(Math.imul=function(a,c){var d=65535&a,f=65535&c;return d*f+((a>>>16)*f+d*(c>>>16)<<16)|0}),Math.clz32||(Math.clz32=function(a){var c=32,d=a>>16;return d&&(c-=16,a=d),(d=a>>8)&&(c-=8,a=d),(d=a>>4)&&(c-=4,a=d),(d=a>>2)&&(c-=2,a=d),a>>1?c-2:c-a}),Math.trunc||(Math.trunc=function(a){return a<0?Math.ceil(a):Math.floor(a)}),0),S=null,T=null;function C(a){throw b.onAbort&&b.onAbort(a),G(a),H(a),K=!0,"abort("+a+"). Build with -s ASSERTIONS=1 for more info."}b.preloadedImages={},b.preloadedAudios={};var E=null,U="data:application/octet-stream;base64,";function na(a){return a.replace(/\b__Z[\w\d_]+/g,function(a){return a==a?a:a+" ["+a+"]"})}function oa(){var a=Error();if(!a.stack){try{throw Error(0)}catch(c){a=c}if(!a.stack)return"(no stack trace available)"}return a.stack.toString()}var V=[null,[],[]];function W(a,c){var d=V[a];0===c||10===c?((1===a?G:H)(ca(d,0)),d.length=0):d.push(c)}function pa(a,c,d,f){try{for(var g=0,h=0;h<d;h++){for(var p=O[c+8*h>>2],k=O[c+(8*h+4)>>2],y=0;y<k;y++)W(a,M[p+y]);g+=k}return O[f>>2]=g,0}catch(R){return"undefined"!=typeof FS&&R instanceof FS.A||C(R),R.B}}function qa(){return N.length}function ra(a){try{var c=new ArrayBuffer(a);if(c.byteLength==a)return new Int8Array(c).set(N),sa(c),fa(c),1}catch(d){}}var ta=!(E="data:application/octet-stream;base64,AAAAAAAAAAARAAoAERERAAAAAAUAAAAAAAAJAAAAAAsAAAAAAAAAABEADwoREREDCgcAARMJCwsAAAkGCwAACwAGEQAAABEREQAAAAAAAAAAAAAAAAAAAAALAAAAAAAAAAARAAoKERERAAoAAAIACQsAAAAJAAsAAAsAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADAAAAAAAAAAAAAAADAAAAAAMAAAAAAkMAAAAAAAMAAAMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4AAAAAAAAAAAAAAA0AAAAEDQAAAAAJDgAAAAAADgAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAPAAAAAA8AAAAACRAAAAAAABAAABAAABIAAAASEhIAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEgAAABISEgAAAAAAAAkAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAsAAAAAAAAAAAAAAAoAAAAACgAAAAAJCwAAAAAACwAACwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAAAAAAAAAMAAAAAAwAAAAACQwAAAAAAAwAAAwAADAxMjM0NTY3ODlBQkNERUYFAAAAAAAAAAAAAAACAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACAAAAAgAAABgKAAAABAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAK/////wAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAD//////wAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABBbiBlcnJvciBvY2N1cnJlZCBpbiB0aGUgaW50ZXJwb2xhdGlvbiBmb3IgYmxlbmQgc2hhcGVzLiBDb21iaW5hdGlvbkNvdW50IGlzICVkLgBbQ1NNXSBbRV1XYXJwRGVmb3JtZXI6OlRyYW5zZm9ybVRhcmdldCgpIGVycm9yLiBbJWRdIHAwMT0oJS40ZiAsICUuNGYpCgBbQ1NNXSBbRV1Jbml0aWFsaXplRGVmb3JtZXJzKCk6IFVua25vd24gRGVmb3JtZXIgVHlwZS4KAExpdmUyRCBDdWJpc20gU0RLIENvcmUgVmVyc2lvbiAlZC4lZC4lZABNT0MzAFtDU01dIFtFXWNzbVJldml2ZU1vY0luUGxhY2UgaXMgZmFpbGVkLiBDb3JydXB0ZWQgIG1vYzMgZmlsZS4KAFtDU01dIFtFXWNzbVJldml2ZU1vY0luUGxhY2UgaXMgZmFpbGVkLiBUaGUgQ29yZSB1bnN1cHBvcnQgbGF0ZXIgdGhhbiBtb2MzIHZlcjpbJWRdLiBUaGlzIG1vYzMgdmVyIGlzIFslZF0uCgBbQ1NNXSBbRV1jc21HZXRNb2NWZXJzaW9uIGlzIGZhaWxlZC4gQ29ycnVwdGVkIG1vYzMgZmlsZS4KAFtDU01dIFtFXSVzOiAlcwoAY3NtR2V0TW9jVmVyc2lvbgAiYWRkcmVzcyIgaXMgbnVsbC4AY3NtUmV2aXZlTW9jSW5QbGFjZQAiYWRkcmVzcyIgYWxpZ25tZW50IGlzIGludmFsaWQuACJzaXplIiBpcyBpbnZhbGlkLgBjc21SZWFkQ2FudmFzSW5mbwAibW9kZWwiIGlzIGludmFsaWQuACJvdXRTaXplSW5QaXhlbHMiIGlzIG51bGwuACJvdXRPcmlnaW5JblBpeGVscyIgaXMgbnVsbC4AIm91dFBpeGVsc1BlclVuaXQiIGlzIG51bGwuAGNzbUdldFNpemVvZk1vZGVsACJtb2MiIGlzIGludmFsaWQuAGNzbUluaXRpYWxpemVNb2RlbEluUGxhY2UAInNpemUiIGlzIGludmFsaWQAY3NtVXBkYXRlTW9kZWwAY3NtR2V0UGFyYW1ldGVyQ291bnQAY3NtR2V0UGFyYW1ldGVySWRzAGNzbUdldFBhcmFtZXRlclR5cGVzAGNzbUdldFBhcmFtZXRlck1pbmltdW1WYWx1ZXMAY3NtR2V0UGFyYW1ldGVyTWF4aW11bVZhbHVlcwBjc21HZXRQYXJhbWV0ZXJEZWZhdWx0VmFsdWVzAGNzbUdldFBhcmFtZXRlclZhbHVlcwBjc21HZXRQYXJ0Q291bnQAY3NtR2V0UGFydElkcwBjc21HZXRQYXJ0T3BhY2l0aWVzAGNzbUdldFBhcnRQYXJlbnRQYXJ0SW5kaWNlcwBjc21HZXREcmF3YWJsZUNvdW50AGNzbUdldERyYXdhYmxlSWRzAGNzbUdldERyYXdhYmxlQ29uc3RhbnRGbGFncwBjc21HZXREcmF3YWJsZUR5bmFtaWNGbGFncwBjc21HZXREcmF3YWJsZVRleHR1cmVJbmRpY2VzAGNzbUdldERyYXdhYmxlRHJhd09yZGVycwBjc21HZXREcmF3YWJsZVJlbmRlck9yZGVycwBjc21HZXREcmF3YWJsZU9wYWNpdGllcwBjc21HZXREcmF3YWJsZU1hc2tDb3VudHMAY3NtR2V0RHJhd2FibGVNYXNrcwBjc21HZXREcmF3YWJsZVZlcnRleENvdW50cwBjc21HZXREcmF3YWJsZVZlcnRleFBvc2l0aW9ucwBjc21HZXREcmF3YWJsZVZlcnRleFV2cwBjc21HZXREcmF3YWJsZUluZGV4Q291bnRzAGNzbUdldERyYXdhYmxlSW5kaWNlcwBjc21HZXREcmF3YWJsZU11bHRpcGx5Q29sb3JzAGNzbUdldERyYXdhYmxlU2NyZWVuQ29sb3JzAGNzbUdldERyYXdhYmxlUGFyZW50UGFydEluZGljZXMAY3NtUmVzZXREcmF3YWJsZUR5bmFtaWNGbGFncwBjc21HZXRQYXJhbWV0ZXJLZXlDb3VudHMAY3NtR2V0UGFyYW1ldGVyS2V5VmFsdWVzAFtDU01dIFtXXVJvdGF0aW9uRGVmb3JtZXI6IE5vdCBmb3VuZCB0cmFuc2Zvcm1lZCBEaXJlY3Rpb24uCgBbQ1NNXSBbRV1VcGRhdGVEZWZvcm1lckhpZXJhcmNoeSgpOiBVbmtub3duIERlZm9ybWVyIFR5cGUuCgAlcwoALSsgICAwWDB4AChudWxsKQAtMFgrMFggMFgtMHgrMHggMHgAaW5mAElORgBuYW4ATkFOAC4=");function D(a){for(var c=[],d=0;d<a.length;d++){var f=a[d];255<f&&(ta&&assert(!1,"Character code "+f+" ("+String.fromCharCode(f)+")  at offset "+d+" not in 0x00-0xFF."),f&=255),c.push(String.fromCharCode(f))}return c.join("")}var ua="function"==typeof atob?atob:function(a){var c="",d=0;a=a.replace(/[^A-Za-z0-9\+\/=]/g,"");do{var f="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".indexOf(a.charAt(d++)),g="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".indexOf(a.charAt(d++)),h="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".indexOf(a.charAt(d++)),p="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".indexOf(a.charAt(d++)),f=f<<2|g>>4,g=(15&g)<<4|h>>2,k=(3&h)<<6|p}while(c+=String.fromCharCode(f),64!==h&&(c+=String.fromCharCode(g)),64!==p&&(c+=String.fromCharCode(k)),d<a.length);return c};function B(a){if(String.prototype.startsWith?a.startsWith(U):0===a.indexOf(U)){if(a=a.slice(U.length),"boolean"==typeof r&&r){try{var c=Buffer.from(a,"base64")}catch(h){c=new Buffer(a,"base64")}var d=new Uint8Array(c.buffer,c.byteOffset,c.byteLength)}else try{for(var f=ua(a),g=new Uint8Array(f.length),c=0;c<f.length;++c)g[c]=f.charCodeAt(c);d=g}catch(h){throw Error("Converting base64 string to bytes failed.")}return d}}var F,Ca,Y,q=function(global,env,buffer){var a=new global.Int8Array(buffer),b=new global.Int16Array(buffer),c=new global.Int32Array(buffer),d=new global.Uint8Array(buffer),e=new global.Uint16Array(buffer),f=new global.Float32Array(buffer),g=new global.Float64Array(buffer),h=0|env.v,q=global.Math.floor,r=global.Math.pow,s=global.Math.cos,t=global.Math.sin,u=global.Math.atan2,v=global.Math.imul,w=global.Math.clz32,x=env.a,y=env.b,z=env.c,A=env.d,B=env.e,C=env.f,D=env.g,E=env.h,F=env.i,G=env.j,H=env.k,I=env.l,J=env.m,S=4416;function ea(a){var b,d,g,h,i,j,n,o,p,q,r,s,t,u,v,w,x,y,k=0,l=0,m=0|c[500+(a|=0)>>2];if(!((0|m)<=0)){n=0|c[a+504>>2],o=0|c[a+444>>2],d=0|c[a+536>>2],l=0;do{if(g=0|c[n+(24*l|0)+12>>2],h=0|c[o+(c[n+(24*l|0)+4>>2]<<2)>>2],i=0|c[o+(c[n+(24*l|0)+8>>2]<<2)>>2],j=0|c[n+(24*l|0)+16>>2],a=0|c[n+(24*l|0)+20>>2],b=+f[d+(l<<2)>>2],0<(0|g))for(k=0;x=+f[j+(k<<2)>>2],s=+f[j+((p=1|k)<<2)>>2],w=(0|e[a+(k<<1)>>1])<<1&65534,v=+f[(y=h+(w<<2)|0)>>2],r=+f[(w=h+((1|w)<<2)|0)>>2],p=(0|e[a+(p<<1)>>1])<<1&65534,u=+f[(t=i+(p<<2)|0)>>2],q=+f[(p=i+((1|p)<<2)|0)>>2],f[y>>2]=v+x*(u-v)*b,f[w>>2]=r+x*(q-r)*b,f[t>>2]=u+s*(v-u)*b,f[p>>2]=q+s*(r-q)*b,(0|(k=k+2|0))<(0|g););}while((0|(l=l+1|0))!=(0|m))}}function fa(a){var b=0|c[(a|=0)>>2];(0|d[4+b>>0])<4||ga(a,0|c[a+596>>2],0|c[a+600>>2],0|c[984+b>>2],0|c[a+152>>2],0|c[796+b>>2])}function ga(a,b,d,e,g,h){a|=0,e|=0,g|=0,h|=0;var l,o,p,q,r,s,t,u,w,i=0,j=0,k=0,m=0,n=0,v=S;if(S=S+16|0,u=v+8|0,t=v,s=(d|=0)+(12*(b|=0)|0)|0,(0|b)<=0)S=v;else{do{b=0|c[d>>2],o=0|c[g+(b<<2)>>2],q=(b=0|c[h+(b<<2)>>2])<<1,n=0|c[d+4>>2],i=0|c[d+8>>2],p=0|c[1028+(0|c[a>>2])>>2],r=i+(48*n|0)|0;a:do{if(0<(0|n)){if((0|b)<=0)for(;;)if(3<=(b=0|c[i+8>>2])>>>0&&(c[u>>2]=b,ia(0,784,u)),r>>>0<=(i=i+48|0)>>>0)break a;do{j=e+(c[i+4>>2]<<2)|0,b=0|c[i+8>>2];b:do{if(0|b)switch(n=p+(c[j+(c[i+12>>2]<<2)>>2]<<2)|0,0|b){case 1:for(j=i+20|0,b=i+44|0,k=0;f[(m=o+(k<<2)|0)>>2]=+f[m>>2]+ +f[b>>2]*(+f[n+(k<<2)>>2]*+f[j>>2]),(0|(k=k+1|0))!=(0|q););break;case 2:for(j=p+(c[j+(c[i+16>>2]<<2)>>2]<<2)|0,k=i+20|0,l=i+24|0,b=i+44|0,m=0;f[(w=o+(m<<2)|0)>>2]=+f[w>>2]+ +f[b>>2]*(+f[n+(m<<2)>>2]*+f[k>>2]+ +f[j+(m<<2)>>2]*+f[l>>2]),(0|(m=m+1|0))!=(0|q););break;default:c[t>>2]=b,ia(0,784,t);break b}}while(0)}while((i=i+48|0)>>>0<r>>>0)}}while(0)}while((d=d+12|0)>>>0<s>>>0);S=v}}function ha(a){var b=0|c[(a|=0)>>2];(0|d[4+b>>0])<4||ga(a,0|c[a+604>>2],0|c[a+608>>2],0|c[1024+b>>2],0|c[a+444>>2],0|c[892+b>>2])}function ia(a,b,d){a|=0,b|=0,d|=0;var e,f,g=S;S=S+272|0,a=g+16|0,f=g,(e=0|c[904])&&(c[f>>2]=d,_b(a,b,f),Z[1&e](a)),S=g}function ma(b,d,e){e|=0;var m,f=0,g=0,h=0,i=0,j=0,k=0,l=0,n=0,o=0,p=0,o=0|a[4+(b|=0)>>0];if(c[(d|=0)>>2]=628,p=0|c[(n=b+704|0)>>2],0<(0|(j=0|c[p>>2]))){for(f=0|c[b+1048>>2],g=0|c[b+720>>2],i=h=0;i=(1<<c[f+(c[g+(h<<2)>>2]<<2)>>2])+i|0,(0|(h=h+1|0))!=(0|j););f=i<<2}else f=0;if(c[d+4>>2]=12*j,c[d+8>>2]=c[p>>2]<<2,c[d+12>>2]=c[p>>2]<<2,c[d+16>>2]=c[p>>2]<<2,c[d+20>>2]=c[p>>2]<<2,c[d+24>>2]=c[p>>2]<<2,c[d+28>>2]=f,c[d+32>>2]=c[p>>2]<<2,c[d+36>>2]=f,c[d+40>>2]=f,c[d+44>>2]=c[(m=p+4|0)>>2]<<5,c[d+48>>2]=c[m>>2]<<2,c[d+52>>2]=c[m>>2]<<2,c[d+56>>2]=c[m>>2]<<2,c[d+60>>2]=c[m>>2]<<4,c[d+64>>2]=c[m>>2]<<4,0<(0|(l=0|c[(m=p+8|0)>>2]))){for(g=0|c[b+796>>2],h=0|c[b+1048>>2],i=0|c[b+780>>2],f=k=j=0;f=(15+(c[g+(j<<2)>>2]<<3)&-16)+f|0,k=(1<<c[h+(c[i+(j<<2)>>2]<<2)>>2])+k|0,(0|(j=j+1|0))!=(0|l););g=k<<2}else f=g=0;if(c[d+68>>2]=24*l,c[d+72>>2]=c[m>>2]<<2,c[d+76>>2]=c[m>>2]<<2,c[d+80>>2]=c[m>>2]<<2,c[d+84>>2]=f,c[d+88>>2]=c[m>>2]<<4,c[d+92>>2]=c[m>>2]<<4,c[d+96>>2]=c[m>>2]<<2,c[d+100>>2]=g,c[d+104>>2]=c[m>>2]<<2,c[d+108>>2]=g,c[d+112>>2]=g,c[d+116>>2]=g,c[d+120>>2]=g,c[d+124>>2]=g,c[d+128>>2]=g,c[d+132>>2]=g,c[d+136>>2]=g,c[d+140>>2]=g,c[d+144>>2]=c[m>>2]<<2,c[d+148>>2]=c[m>>2]<<2,c[d+152>>2]=c[m>>2]<<2,c[d+156>>2]=c[m>>2]<<2,c[d+160>>2]=c[m>>2]<<2,c[d+164>>2]=c[m>>2]<<2,0<(0|(j=0|c[(k=p+12|0)>>2]))){for(f=0|c[b+1048>>2],g=0|c[b+812>>2],i=h=0;i=(1<<c[f+(c[g+(h<<2)>>2]<<2)>>2])+i|0,(0|(h=h+1|0))!=(0|j););f=i<<2}else f=0;if(c[d+168>>2]=12*j,c[d+172>>2]=c[k>>2]<<2,c[d+176>>2]=c[k>>2]<<2,c[d+180>>2]=c[k>>2]<<2,c[d+184>>2]=c[k>>2]<<2,c[d+188>>2]=c[k>>2]<<2,c[d+192>>2]=c[k>>2]<<2,c[d+196>>2]=c[k>>2]<<2,c[d+200>>2]=c[k>>2]<<2,c[d+204>>2]=c[k>>2]<<4,c[d+208>>2]=c[k>>2]<<4,c[d+212>>2]=c[k>>2]<<2,c[d+216>>2]=f,c[d+220>>2]=c[k>>2]<<2,c[d+224>>2]=f,c[d+228>>2]=f,c[d+232>>2]=f,c[d+236>>2]=f,c[d+240>>2]=f,c[d+244>>2]=f,c[d+248>>2]=f,c[d+252>>2]=f,c[d+256>>2]=f,c[d+260>>2]=f,c[d+264>>2]=f,c[d+268>>2]=f,c[d+272>>2]=c[k>>2]<<2,c[d+276>>2]=c[k>>2]<<2,c[d+280>>2]=c[k>>2]<<2,c[d+284>>2]=c[k>>2]<<2,c[d+288>>2]=c[k>>2]<<2,c[d+292>>2]=c[k>>2]<<2,0<(0|(l=0|c[(m=p+16|0)>>2]))){for(g=0|c[b+892>>2],h=0|c[b+1048>>2],i=0|c[b+852>>2],f=k=j=0;f=(15+(c[g+(j<<2)>>2]<<3)&-16)+f|0,k=(1<<c[h+(c[i+(j<<2)>>2]<<2)>>2])+k|0,(0|(j=j+1|0))!=(0|l););g=k<<2}else f=g=0;if(c[d+296>>2]=20*l,c[d+300>>2]=c[m>>2]<<2,c[d+304>>2]=c[m>>2],c[d+308>>2]=c[m>>2]<<2,c[d+312>>2]=c[m>>2]<<2,c[d+316>>2]=c[m>>2]<<2,c[d+320>>2]=f,c[d+324>>2]=c[m>>2]<<2,c[d+328>>2]=c[m>>2]<<4,c[d+332>>2]=c[m>>2]<<4,c[d+336>>2]=c[m>>2]<<2,c[d+340>>2]=c[m>>2]<<2,c[d+344>>2]=c[m>>2]<<2,c[d+348>>2]=c[m>>2]<<4,c[d+352>>2]=c[m>>2]<<4,c[d+356>>2]=c[m>>2]<<2,c[d+360>>2]=g,c[d+364>>2]=c[m>>2]<<2,c[d+368>>2]=g,c[d+372>>2]=g,c[d+376>>2]=g,c[d+380>>2]=g,c[d+384>>2]=g,c[d+388>>2]=g,c[d+392>>2]=g,c[d+396>>2]=g,c[d+400>>2]=g,c[d+404>>2]=g,c[d+408>>2]=c[m>>2]<<2,c[d+412>>2]=c[m>>2]<<2,c[d+416>>2]=c[m>>2]<<2,c[d+420>>2]=c[m>>2]<<2,c[d+424>>2]=c[m>>2]<<2,c[d+428>>2]=c[m>>2]<<2,n=0|c[n>>2],c[d+432>>2]=52*(0|c[(g=n+20|0)>>2]),f=(m=3<(255&o))?0:c[g>>2]<<2,c[d+436>>2]=f,c[d+440>>2]=c[g>>2]<<2,c[d+444>>2]=28*(0|c[n+52>>2]),0<(0|(j=0|c[p+48>>2]))){for(f=0|c[b+1048>>2],i=h=g=0;h=(o=0|c[f+(g<<2)>>2])+h|0,i=(1<<o)+i|0,(0|(g=g+1|0))!=(0|j););g=h<<2,f=i<<2}else f=g=0;if(c[d+448>>2]=36*j,c[d+452>>2]=g,c[d+456>>2]=f,c[d+460>>2]=f,c[d+488>>2]=28*(0|c[(g=p+72|0)>>2]),0<(0|(g=0|c[g>>2]))){for(h=0|c[b+1152>>2],i=0|c[b+1160>>2],f=0|c[b+1164>>2],l=k=j=0;k=(0|k)<(0|(o=0|c[h+(j<<2)>>2]))?o:k,l=(0|(o=(0|c[i+(j<<2)>>2])-(0|c[f+(j<<2)>>2])|0))<(0|l)?l:o+1|0,(0|(j=j+1|0))!=(0|g););g=k<<2,f=l<<2}else f=g=0;if(c[d+492>>2]=c[p+76>>2]<<4,c[d+496>>2]=f,c[d+500>>2]=g,c[d+504>>2]=f,0<(0|(j=0|c[(k=p+80|0)>>2]))){for(f=0|c[b+1048>>2],g=0|c[b+1188>>2],i=h=0;i=(1<<c[f+(c[g+(h<<2)>>2]<<2)>>2])+i|0,(0|(h=h+1|0))!=(0|j););f=i<<2}else f=0;if(c[d+508>>2]=24*j,c[d+512>>2]=c[k>>2]<<2,c[d+516>>2]=c[k>>2]<<2,c[d+520>>2]=f,c[d+524>>2]=c[k>>2]<<2,c[d+528>>2]=f,c[d+532>>2]=f,m){if(c[d+464>>2]=20*(0|c[n+120>>2]),c[d+468>>2]=28*(0|c[n+100>>2]),0<(0|(i=0|c[p+104>>2]))){for(f=0|c[b+1080>>2],h=g=0;h=(0|c[f+(g<<2)>>2])+h|0,(0|(g=g+1|0))!=(0|i););f=h<<2}else f=0;c[d+472>>2]=48*i,c[d+476>>2]=f,c[d+480>>2]=12*(0|c[n+108>>2]),c[d+484>>2]=12*(0|c[n+112>>2]),f=g=c[d+540>>2]=0}else{if(0<(0|(m=0|c[(n=p+20|0)>>2]))){k=0|c[b+948>>2],l=0|c[b+952>>2],i=0|c[b+1036>>2],f=j=0;do{if(b=0|c[l+(j<<2)>>2],h=(g=i+(c[k+(j<<2)>>2]<<2)|0)+(b<<2)|0,0<(0|b))for(;f=(0|c[g>>2])+f|0,(g=g+4|0)>>>0<h>>>0;);}while((0|(j=j+1|0))!=(0|m))}else f=0;c[d+540>>2]=m<<2,g=f<<2,f=c[n>>2]<<2}for(c[d+536>>2]=f,c[d+544>>2]=g,g=f=0;g=(b=15+(0|c[(p=d+(f<<2)|0)>>2])&-16)+(c[p>>2]=g)|0,137!=(0|(f=f+1|0)););c[e>>2]=g}function na(b,e,g){b|=0,e|=0,g|=0;var C,D,G,J,M,V,h=0,i=0,j=0,k=0,l=0,m=0,n=0,o=0,p=0,q=0,s=0,t=0,u=0,v=0,w=0,x=0,y=0,z=0,A=0,B=0,E=0,F=0,H=0,I=0,K=0,L=0,N=0,O=0,P=0,Q=0,R=0,T=0,U=0,W=0,X=0,Y=0,Z=0,_=S;if(S=S+560|0,H=_+552|0,h=(p=_)+556|0,Vc(0|p,0,548),ma(b,p,h),g>>>0<(h=0|c[h>>2])>>>0)return S=_,(Z=0)|Z;if(Vc(0|e,0,0|h),Z=e+(0|c[p>>2])|0,c[(D=Z+8|0)>>2]=e+(0|c[p+4>>2]),c[Z+40>>2]=e+(0|c[p+8>>2]),c[Z+44>>2]=e+(0|c[p+12>>2]),c[Z+48>>2]=e+(0|c[p+16>>2]),c[(E=Z+52|0)>>2]=e+(0|c[p+20>>2]),c[(F=Z+16|0)>>2]=e+(0|c[p+24>>2]),c[Z+24>>2]=e+(0|c[p+28>>2]),c[Z+28>>2]=e+(0|c[p+32>>2]),c[Z+32>>2]=e+(0|c[p+36>>2]),c[Z+36>>2]=e+(0|c[p+40>>2]),j=0|c[(Y=b+704|0)>>2],c[(G=Z+308|0)>>2]=e+(0|c[p+44>>2]),c[Z+312>>2]=e+(0|c[p+48>>2]),c[Z+316>>2]=e+(0|c[p+52>>2]),c[Z+320>>2]=e+(0|c[p+56>>2]),c[Z+324>>2]=e+(0|c[p+60>>2]),c[Z+328>>2]=e+(0|c[p+64>>2]),c[(L=Z+60|0)>>2]=e+(0|c[p+68>>2]),c[Z+144>>2]=e+(0|c[p+72>>2]),c[Z+148>>2]=e+(0|c[p+76>>2]),h=e+(0|c[p+80>>2])|0,c[(k=Z+152|0)>>2]=h,0<(0|(j=0|c[j+8>>2]))&&(l=e+(0|c[p+84>>2])|0,m=b+796|0,c[h>>2]=l,1!=(0|j)))for(h=0,i=1,g=l;g=g+(15+(c[(0|c[m>>2])+(h<<2)>>2]<<3)&-16)|0,c[(0|c[k>>2])+(i<<2)>>2]=g,!((0|j)<=(0|(h=i+1|0)));)W=i,i=h,h=W;if(c[Z+156>>2]=e+(0|c[p+88>>2]),c[Z+160>>2]=e+(0|c[p+92>>2]),c[(I=Z+68|0)>>2]=e+(0|c[p+96>>2]),c[Z+76>>2]=e+(0|c[p+100>>2]),c[Z+80>>2]=e+(0|c[p+104>>2]),c[Z+84>>2]=e+(0|c[p+108>>2]),c[Z+88>>2]=e+(0|c[p+112>>2]),c[Z+92>>2]=e+(0|c[p+116>>2]),c[Z+96>>2]=e+(0|c[p+120>>2]),c[Z+100>>2]=e+(0|c[p+124>>2]),c[Z+104>>2]=e+(0|c[p+128>>2]),c[Z+108>>2]=e+(0|c[p+132>>2]),c[Z+112>>2]=e+(0|c[p+136>>2]),c[Z+116>>2]=e+(0|c[p+140>>2]),c[Z+120>>2]=e+(0|c[p+144>>2]),c[Z+124>>2]=e+(0|c[p+148>>2]),c[Z+128>>2]=e+(0|c[p+152>>2]),c[Z+132>>2]=e+(0|c[p+156>>2]),c[Z+136>>2]=e+(0|c[p+160>>2]),c[Z+140>>2]=e+(0|c[p+164>>2]),c[(J=Z+168|0)>>2]=e+(0|c[p+168>>2]),c[Z+264>>2]=e+(0|c[p+172>>2]),c[Z+268>>2]=e+(0|c[p+176>>2]),c[Z+272>>2]=e+(0|c[p+180>>2]),c[Z+276>>2]=e+(0|c[p+184>>2]),c[Z+280>>2]=e+(0|c[p+188>>2]),c[Z+284>>2]=e+(0|c[p+192>>2]),c[Z+288>>2]=e+(0|c[p+196>>2]),c[Z+292>>2]=e+(0|c[p+200>>2]),c[Z+296>>2]=e+(0|c[p+204>>2]),c[Z+300>>2]=e+(0|c[p+208>>2]),c[(K=Z+176|0)>>2]=e+(0|c[p+212>>2]),c[Z+184>>2]=e+(0|c[p+216>>2]),c[Z+188>>2]=e+(0|c[p+220>>2]),c[Z+192>>2]=e+(0|c[p+224>>2]),c[Z+196>>2]=e+(0|c[p+228>>2]),c[Z+200>>2]=e+(0|c[p+232>>2]),c[Z+204>>2]=e+(0|c[p+236>>2]),c[Z+208>>2]=e+(0|c[p+240>>2]),c[Z+212>>2]=e+(0|c[p+244>>2]),c[Z+216>>2]=e+(0|c[p+248>>2]),c[Z+220>>2]=e+(0|c[p+252>>2]),c[Z+224>>2]=e+(0|c[p+256>>2]),c[Z+228>>2]=e+(0|c[p+260>>2]),c[Z+232>>2]=e+(0|c[p+264>>2]),c[Z+236>>2]=e+(0|c[p+268>>2]),c[Z+240>>2]=e+(0|c[p+272>>2]),c[Z+244>>2]=e+(0|c[p+276>>2]),c[Z+248>>2]=e+(0|c[p+280>>2]),c[Z+252>>2]=e+(0|c[p+284>>2]),c[Z+256>>2]=e+(0|c[p+288>>2]),c[Z+260>>2]=e+(0|c[p+292>>2]),j=0|c[Y>>2],c[(O=Z+336|0)>>2]=e+(0|c[p+296>>2]),c[Z+424>>2]=e+(0|c[p+300>>2]),c[Z+432>>2]=e+(0|c[p+304>>2]),c[Z+436>>2]=e+(0|c[p+308>>2]),c[Z+440>>2]=e+(0|c[p+312>>2]),h=e+(0|c[p+316>>2])|0,c[(k=Z+444|0)>>2]=h,0<(0|(j=0|c[j+16>>2]))&&(n=e+(0|c[p+320>>2])|0,o=b+892|0,c[h>>2]=n,1!=(0|j)))for(h=0,i=1,g=n;g=g+(15+(c[(0|c[o>>2])+(h<<2)>>2]<<3)&-16)|0,c[(0|c[k>>2])+(i<<2)>>2]=g,!((0|j)<=(0|(h=i+1|0)));)W=i,i=h,h=W;if(c[Z+448>>2]=e+(0|c[p+324>>2]),c[(P=Z+452|0)>>2]=e+(0|c[p+328>>2]),c[(Q=Z+456|0)>>2]=e+(0|c[p+332>>2]),c[Z+460>>2]=e+(0|c[p+336>>2]),c[Z+464>>2]=e+(0|c[p+340>>2]),c[Z+468>>2]=e+(0|c[p+344>>2]),c[Z+472>>2]=e+(0|c[p+348>>2]),c[Z+476>>2]=e+(0|c[p+352>>2]),c[(N=Z+344|0)>>2]=e+(0|c[p+356>>2]),c[Z+352>>2]=e+(0|c[p+360>>2]),c[Z+356>>2]=e+(0|c[p+364>>2]),c[Z+360>>2]=e+(0|c[p+368>>2]),c[Z+364>>2]=e+(0|c[p+372>>2]),c[Z+368>>2]=e+(0|c[p+376>>2]),c[Z+372>>2]=e+(0|c[p+380>>2]),c[Z+376>>2]=e+(0|c[p+384>>2]),c[Z+380>>2]=e+(0|c[p+388>>2]),c[Z+384>>2]=e+(0|c[p+392>>2]),c[Z+388>>2]=e+(0|c[p+396>>2]),c[Z+392>>2]=e+(0|c[p+400>>2]),c[Z+396>>2]=e+(0|c[p+404>>2]),c[Z+400>>2]=e+(0|c[p+408>>2]),c[Z+404>>2]=e+(0|c[p+412>>2]),c[Z+408>>2]=e+(0|c[p+416>>2]),c[Z+412>>2]=e+(0|c[p+420>>2]),c[Z+416>>2]=e+(0|c[p+424>>2]),c[Z+420>>2]=e+(0|c[p+428>>2]),A=0|c[p+436>>2],C=0|c[p+440>>2],c[(W=Z+544|0)>>2]=e+(0|c[p+432>>2]),c[(B=Z+548|0)>>2]=e+A,c[(A=Z+552|0)>>2]=e+C,c[(C=Z+560|0)>>2]=e+(0|c[p+444>>2]),h=0|c[Y>>2],j=e+(0|c[p+448>>2])|0,c[(U=Z+568|0)>>2]=j,0<(0|(h=0|c[h+48>>2])))for(g=0|c[b+1048>>2],k=e+(0|c[p+452>>2])|0,m=e+((l=0)|c[p+456>>2])|0,o=e+(0|c[p+460>>2])|0;c[j+(36*l|0)>>2]=k,c[j+(36*l|0)+16>>2]=m,c[j+(36*l|0)+20>>2]=o,n=1<<(i=0|c[g+(l<<2)>>2]),(0|(l=l+1|0))!=(0|h);)k=k+(i<<2)|0,m=m+(n<<2)|0,o=o+(n<<2)|0;if(h=0|c[Y>>2],i=e+(0|c[p+488>>2])|0,c[(M=Z+484|0)>>2]=i,0<(0|(h=0|c[h+72>>2])))for(g=0|c[b+1152>>2],k=e+((j=0)|c[p+492>>2])|0;k=(c[i+(28*j|0)+12>>2]=k)+(c[g+(j<<2)>>2]<<4)|0,(0|(j=j+1|0))!=(0|h););if(c[Z+488>>2]=e+(0|c[p+496>>2]),c[Z+492>>2]=e+(0|c[p+500>>2]),c[Z+496>>2]=e+(0|c[p+504>>2]),c[(R=Z+504|0)>>2]=e+(0|c[p+508>>2]),c[Z+536>>2]=e+(0|c[p+512>>2]),c[(T=Z+512|0)>>2]=e+(0|c[p+516>>2]),c[Z+520>>2]=e+(0|c[p+520>>2]),c[Z+524>>2]=e+(0|c[p+524>>2]),c[Z+528>>2]=e+(0|c[p+528>>2]),c[Z+532>>2]=e+(0|c[p+532>>2]),z=3<(0|d[(V=b+4|0)>>0])){if(c[Z+576>>2]=e+(0|c[p+464>>2]),c[Z+584>>2]=e+(0|c[p+468>>2]),h=0|c[p+476>>2],j=0|c[Y>>2],l=e+(0|c[p+472>>2])|0,c[Z+592>>2]=l,0<(0|(j=0|c[j+104>>2])))for(k=0|c[b+1080>>2],h=e+h|0,g=0;c[l+(48*g|0)+40>>2]=h,(0|(i=g+1|0))!=(0|j);)h=h+(c[k+(g<<2)>>2]<<2)|0,g=i;c[Z+600>>2]=e+(0|c[p+480>>2]),c[Z+608>>2]=e+(0|c[p+484>>2]),g=0|c[Y>>2],h=0|c[g+20>>2]}else if(g=0|c[p+536>>2],i=0|c[p+544>>2],c[Z+616>>2]=e+(0|c[p+540>>2]),c[(p=Z+612|0)>>2]=e+g,g=0|c[Y>>2],0<(0|(h=0|c[g+20>>2])))for(m=b+948|0,n=b+952|0,l=b+1036|0,k=e+i|(o=0);;){if(h=0|c[(0|c[m>>2])+(o<<2)>>2],i=(y=0|c[(0|c[n>>2])+(o<<2)>>2])+h|0,0<(0|y)){for(g=0|c[l>>2],j=0;j=(0|c[g+(h<<2)>>2])+j|0,(0|(h=h+1|0))<(0|i););h=(0|c[p>>2])+(o<<2)|0,j?(g=k,i=j):X=27}else h=(0|c[p>>2])+(o<<2)|0,X=27;if(27==(0|X)&&(i=g=X=0),c[h>>2]=g,g=0|c[Y>>2],(0|(h=0|c[g+20>>2]))<=(0|(o=o+1|0)))break;k=k+(i<<2)|0}c[Z>>2]=b,c[Z+620>>2]=1,c[Z+624>>2]=1&a[20+(0|c[b+708>>2])>>0],k=(c[Z+540>>2]=h)+-1|0;a:do{if(0<(0|h)){if(e=0|c[W>>2],q=0|c[b+928>>2],s=0|c[b+924>>2],u=0|c[b+936>>2],v=0|c[b+932>>2],w=0|c[b+940>>2],x=0|c[b+952>>2],y=b+948|0,p=0|c[A>>2],o=Z+584|0,n=b+956|0,!z)for(;;){if(c[e+(52*k|0)>>2]=0,c[e+(52*k|0)+4>>2]=c[(i=q+(k<<2)|0)>>2],c[e+(52*k|0)+8>>2]=c[(A=s+(k<<2)|0)>>2],f[e+(52*k|0)+12>>2]=+f[A>>2]-+f[i>>2],c[e+(52*k|0)+16>>2]=c[u+(k<<2)>>2],c[e+(52*k|0)+44>>2]=c[(i=v+(k<<2)|0)>>2],t=+r(.10000000149011612,0|c[w+(k<<2)>>2]),f[e+(52*k|0)+20>>2]=t,f[e+(52*k|0)+24>>2]=1.5*t,A=0|c[x+(k<<2)>>2],j=(c[e+(52*k|0)+32>>2]=A)?(0|c[C>>2])+(28*(0|c[(0|c[y>>2])+(k<<2)>>2])|0)|0:0,c[e+(52*k|0)+28>>2]=j,c[e+(52*k|0)+48>>2]=1,c[p+(k<<2)>>2]=c[i>>2],!(0<(0|k)))break a;k=k+-1|0}for(l=0|c[b+944>>2],m=0|c[b+960>>2];c[e+(52*k|0)>>2]=c[l+(k<<2)>>2],c[e+(52*k|0)+4>>2]=c[(j=q+(k<<2)|0)>>2],c[e+(52*k|0)+8>>2]=c[(A=s+(k<<2)|0)>>2],f[e+(52*k|0)+12>>2]=+f[A>>2]-+f[j>>2],c[e+(52*k|0)+16>>2]=c[u+(k<<2)>>2],c[e+(52*k|0)+44>>2]=c[(j=v+(k<<2)|0)>>2],t=+r(.10000000149011612,0|c[w+(k<<2)>>2]),f[e+(52*k|0)+20>>2]=t,f[e+(52*k|0)+24>>2]=1.5*t,A=0|c[x+(k<<2)>>2],i=(c[e+(52*k|0)+32>>2]=A)?(0|c[C>>2])+(28*(0|c[(0|c[y>>2])+(k<<2)>>2])|0)|0:0,c[e+(52*k|0)+28>>2]=i,A=0|c[m+(k<<2)>>2],i=(c[e+(52*k|0)+40>>2]=A)?(0|c[o>>2])+(28*(0|c[(0|c[n>>2])+(k<<2)>>2])|0)|0:0,c[e+(52*k|0)+36>>2]=i,c[e+(52*k|0)+48>>2]=1,c[p+(k<<2)>>2]=c[j>>2],0<(0|k);)k=k+-1|0}}while(0);if(z?(c[B>>2]=c[b+944>>2],l=g,m=b):(Vc(0|c[B>>2],0,h<<2|0),m=0|c[Z>>2],l=0|c[m+704>>2]),h=0|c[l+52>>2],0<(0|(c[Z+556>>2]=h)))for(g=0|c[C>>2],i=0|c[m+1036>>2],j=0|c[m+1132>>2],k=0|c[m+1032>>2];c[g+(28*(h=(B=h)+-1|0)|0)>>2]=c[i+(h<<2)>>2],c[g+(28*h|0)+4>>2]=j+(c[k+(h<<2)>>2]<<2),c[g+(28*h|0)+8>>2]=0,f[g+(28*h|0)+12>>2]=0,c[g+(28*h|0)+16>>2]=0,c[g+(28*h|0)+20>>2]=1,(c[g+(28*h|0)+24>>2]=1)<(0|B););if(h=0|c[l+48>>2],0<(0|(c[Z+564>>2]=h))){n=m+1048|0,o=m+1040|0,m=m+1044|0;do{if(l=h,g=0|c[U>>2],i=0|c[(0|c[n>>2])+((h=h+-1|0)<<2)>>2],0<(0|(c[g+(36*h|0)+4>>2]=i)))for(j=g+(36*h|0)|0,k=0;c[(0|c[j>>2])+(k<<2)>>2]=(0|c[C>>2])+(28*(0|c[(0|c[o>>2])+((0|c[(0|c[m>>2])+(h<<2)>>2])+k<<2)>>2])|0),(0|(k=k+1|0))!=(0|i););}while(c[g+(36*h|0)+8>>2]=1<<i,c[g+(36*h|0)+24>>2]=1,(c[g+(36*h|0)+28>>2]=1)<(0|l));q=0|c[Z>>2],l=0|c[q+704>>2]}else q=m;if(g=0|c[l>>2],0<(0|(c[(e=Z+4|0)>>2]=g))){for(j=0|c[D>>2],o=0|c[U>>2],p=0|c[q+720>>2],k=0|c[q+740>>2],m=0|c[q+736>>2],n=0|c[q+732>>2],h=0|c[E>>2],i=g;c[j+(12*(i=(E=i)+-1|0)|0)>>2]=o+(36*(0|c[p+(i<<2)>>2])|0),c[j+(12*i|0)+4>>2]=c[k+(i<<2)>>2],c[j+(12*i|0)+8>>2]=c[m+(i<<2)>>2],f[h+(i<<2)>>2]=0==(0|c[n+(i<<2)>>2])?0:1,1<(0|E););for(i=0|c[F>>2],h=0;E=0|c[o+(36*(0|c[p+((g=(F=g)+-1|0)<<2)>>2])|0)+8>>2],h=(c[i+(g<<2)>>2]=E)+h|0,1<(0|F););g=0|c[e>>2]}else h=0;if(c[Z+20>>2]=h,c[Z+12>>2]=g,h=0|c[l+4>>2],0<(0|(c[Z+304>>2]=h))){m=q+752|0,o=q+764|0,n=q+768|0,l=q+772|0,p=q+776|0,k=q+760|0;do{switch(j=h,g=0|c[G>>2],c[g+((h=h+-1|0)<<5)>>2]=(0|c[U>>2])+(36*(0|c[(0|c[m>>2])+(h<<2)>>2])|0),c[g+(h<<5)+4>>2]=c[(0|c[o>>2])+(h<<2)>>2],c[g+(h<<5)+8>>2]=c[(0|c[n>>2])+(h<<2)>>2],F=0|c[(0|c[l>>2])+(h<<2)>>2],c[g+(h<<5)+12>>2]=F,i=0|c[(0|c[p>>2])+(h<<2)>>2],c[g+(h<<5)+16>>2]=i,c[g+(h<<5)+28>>2]=c[(0|c[k>>2])+(h<<2)>>2],0|F){case 0:c[(0|c[L>>2])+(24*i|0)+20>>2]=h,c[g+(h<<5)+20>>2]=2,c[g+(h<<5)+24>>2]=2;break;case 1:c[(0|c[J>>2])+(12*i|0)+8>>2]=h,c[g+(h<<5)+20>>2]=3,c[g+(h<<5)+24>>2]=3;break;default:ia(0,937,H)}}while(1<(0|j));B=0|c[Z>>2],z=0|c[B+704>>2]}else z=l,B=q;if(i=0|c[z+8>>2],h=(c[(e=Z+56|0)>>2]=i)+-1|0,p=0<(0|i))if(j=0|c[L>>2],k=0|c[U>>2],l=0|c[B+780>>2],m=0|c[B+800>>2],n=0|c[B+804>>2],o=0|c[B+796>>2],1<(0|d[B+4>>0]))for(g=0|c[B+808>>2];c[j+(24*h|0)>>2]=k+(36*(0|c[l+(h<<2)>>2])|0),c[j+(24*h|0)+4>>2]=c[m+(h<<2)>>2],c[j+(24*h|0)+8>>2]=c[n+(h<<2)>>2],c[j+(24*h|0)+16>>2]=c[o+(h<<2)>>2],c[j+(24*h|0)+12>>2]=c[g+(h<<2)>>2],0<(0|h);)h=h+-1|0;else for(;c[j+(24*h|0)>>2]=k+(36*(0|c[l+(h<<2)>>2])|0),c[j+(24*h|0)+4>>2]=c[m+(h<<2)>>2],c[j+(24*h|0)+8>>2]=c[n+(h<<2)>>2],c[j+(24*h|0)+16>>2]=c[o+(h<<2)>>2],(c[j+(24*h|0)+12>>2]=0)<(0|h);)h=h+-1|0;if(g=0|c[z+12>>2],0<(0|(c[(n=Z+164|0)>>2]=g)))for(h=0|c[J>>2],j=0|c[U>>2],k=0|c[B+812>>2],l=0|c[B+828>>2],m=g;c[h+(12*(m=(H=m)+-1|0)|0)>>2]=j+(36*(0|c[k+(m<<2)>>2])|0),c[h+(12*m|0)+4>>2]=c[l+(m<<2)>>2],1<(0|H););if(p){for(j=0|c[L>>2],g=0|c[I>>2],h=0;I=0|c[8+(0|c[j+(24*(i=(L=i)+-1|0)|0)>>2])>>2],h=(c[g+(i<<2)>>2]=I)+h|0,1<(0|L););i=0|c[e>>2],g=0|c[n>>2]}else h=0;if(c[Z+72>>2]=h,c[Z+64>>2]=i,0<(0|g)){for(j=0|c[J>>2],i=0|c[K>>2],h=0;K=0|c[8+(0|c[j+(12*(g=(L=g)+-1|0)|0)>>2])>>2],h=(c[i+(g<<2)>>2]=K)+h|0,1<(0|L););g=0|c[n>>2]}else h=0;if(c[Z+180>>2]=h,c[Z+172>>2]=g,A=B+704|0,h=0|c[z+16>>2],0<(0|(c[(p=Z+332|0)>>2]=h))){for(g=0|c[O>>2],n=0|c[U>>2],o=0|c[B+852>>2],i=0|c[B+876>>2],j=0|c[B+880>>2],k=0|c[B+892>>2],l=0|c[B+872>>2],m=h;c[g+(20*(m=(O=m)+-1|0)|0)>>2]=n+(36*(0|c[o+(m<<2)>>2])|0),c[g+(20*m|0)+4>>2]=c[i+(m<<2)>>2],c[g+(20*m|0)+8>>2]=c[j+(m<<2)>>2],c[g+(20*m|0)+16>>2]=c[k+(m<<2)>>2],c[g+(20*m|0)+12>>2]=c[l+(m<<2)>>2],1<(0|O););for(g=0|c[N>>2],i=0;N=0|c[n+(36*(0|c[o+((h=(O=h)+-1|0)<<2)>>2])|0)+8>>2],i=(c[g+(h<<2)>>2]=N)+i|0,1<(0|O););if(h=0|c[p>>2],c[Z+348>>2]=i,0<(0|(c[Z+340>>2]=h)))for(j=0|c[P>>2],g=0|c[Q>>2],i=h<<2;f[j+((i=(Q=i)+-4|0)<<2)>>2]=1,f[j+((O=Q+-3|0)<<2)>>2]=1,f[j+((P=Q+-2|0)<<2)>>2]=1,f[j+((Q=Q+-1|0)<<2)>>2]=1,f[g+(i<<2)>>2]=0,f[g+(O<<2)>>2]=0,!(((f[g+(P<<2)>>2]=0)|h)<=(f[g+(Q<<2)>>2]=1));)h=h+-1|0}else c[Z+348>>2]=0,c[Z+340>>2]=h;if(y=0|c[z+72>>2],0<(0|(c[Z+480>>2]=y))){h=0|c[M>>2],g=0|c[B+1152>>2],i=0|c[B+1156>>2],j=0|c[B+1160>>2],k=0|c[B+1164>>2],l=0|c[B+1148>>2],s=B+1172|0,v=B+1168|0,u=B+1176|0,w=0;do{if(m=0|c[g+(w<<2)>>2],c[h+(28*w|0)+4>>2]=m,c[h+(28*w|0)>>2]=c[i+(w<<2)>>2],Q=0|c[j+(w<<2)>>2],c[h+(28*w|0)+16>>2]=Q,n=0|c[k+(w<<2)>>2],c[h+(28*w|0)+20>>2]=n,c[h+(28*w|0)+24>>2]=Q+1-n,n=(c[h+(28*w|0)+8>>2]=0)|c[l+(w<<2)>>2],0<(0|m))for(o=0|c[h+(28*w|0)+12>>2],p=0|c[s>>2],e=0|c[v>>2],q=0|c[u>>2],x=0;c[o+(x<<4)+4>>2]=c[p+((Q=x+n|0)<<2)>>2],c[o+(x<<4)>>2]=c[e+(Q<<2)>>2],c[o+(x<<4)+8>>2]=c[q+(Q<<2)>>2],(0|(x=x+1|(c[o+(x<<4)+12>>2]=0)))!=(0|m););}while((0|(w=w+1|0))!=(0|y))}g=0|c[z+80>>2],c[(e=Z+500|0)>>2]=g;do{if(0<(0|g)){for(n=0|c[R>>2],o=0|c[U>>2],p=0|c[B+1188>>2],h=0|c[B+1200>>2],i=0|c[B+1204>>2],j=0|c[B+1212>>2],k=0|c[B+1216>>2],l=0|c[B+1208>>2],m=0|c[B+1220>>2];c[n+(24*(g=(U=g)+-1|0)|0)>>2]=o+(36*(0|c[p+(g<<2)>>2])|0),c[n+(24*g|0)+4>>2]=c[h+(g<<2)>>2],c[n+(24*g|0)+8>>2]=c[i+(g<<2)>>2],c[n+(24*g|0)+12>>2]=c[j+(g<<2)>>2],R=0|c[l+(g<<2)>>2],c[n+(24*g|0)+16>>2]=k+(R<<2),c[n+(24*g|0)+20>>2]=m+(R<<1),1<(0|U););if((0|(g=0|c[e>>2]))<=0){h=0;break}for(i=0|c[T>>2],h=0;T=0|c[o+(36*(0|c[p+((g=(U=g)+-1|0)<<2)>>2])|0)+8>>2],h=(c[i+(g<<2)>>2]=T)+h|0,1<(0|U););g=0|c[e>>2]}else h=0}while(0);c[Z+516>>2]=h,c[Z+508>>2]=g;do{if(3<(0|d[V>>0])){if((255&(h=0|a[B+4>>0]))<4)break;if(g=0|c[z+120>>2],0<(0|(c[Z+572>>2]=g)))for(o=0|c[Z+576>>2],i=0|c[W>>2],j=0|c[B+1112>>2],k=0|c[B+1124>>2],l=0|c[B+1116>>2],m=0|c[B+1128>>2],n=0|c[B+1120>>2];c[o+(20*(g=(X=g)+-1|0)|0)>>2]=i+(52*(0|c[j+(g<<2)>>2])|0),W=0|c[l+(g<<2)>>2],c[o+(20*g|0)+4>>2]=k+(W<<2),c[o+(20*g|0)+8>>2]=m+(W<<2),c[o+(20*g|0)+12>>2]=c[n+(g<<2)>>2],1<(0|X););if(g=0|c[z+100>>2],0<(0|(c[Z+580>>2]=g)))for(i=0|c[Z+584>>2],j=0|c[B+1056>>2],k=0|c[B+1132>>2],l=0|c[B+1052>>2],m=0|c[B+1060>>2];c[i+(28*(g=(X=g)+-1|0)|0)>>2]=c[j+(g<<2)>>2],c[i+(28*g|0)+4>>2]=k+(c[l+(g<<2)>>2]<<2),c[i+(28*g|0)+8>>2]=c[m+(g<<2)>>2],c[i+(28*g|0)+12>>2]=0,f[i+(28*g|0)+16>>2]=0,c[i+(28*g|0)+20>>2]=1,(c[i+(28*g|0)+24>>2]=1)<(0|X););if(g=0|c[z+104>>2],0<(0|(c[Z+588>>2]=g))){p=Z+592|0,q=Z+584|0,o=B+1064|0,s=B+1068|0,m=B+1080|0,e=Z+576|0,n=B+1108|0,l=B+1076|0;do{if(k=g,h=0|c[p>>2],c[h+(48*(g=g+-1|0)|0)>>2]=(0|c[q>>2])+(28*(0|c[(0|c[o>>2])+(g<<2)>>2])|0),c[h+(48*g|0)+4>>2]=c[(0|c[s>>2])+(g<<2)>>2],c[h+(48*g|0)+8>>2]=0,c[h+(48*g|0)+28>>2]=1,c[h+(48*g|0)+32>>2]=1,j=0|c[(0|c[m>>2])+(g<<2)>>2],0<(0|(c[h+(48*g|0)+36>>2]=j)))for(h=h+(48*g|0)+40|0,i=0;c[(0|c[h>>2])+(i<<2)>>2]=(0|c[e>>2])+(20*(0|c[(0|c[n>>2])+((0|c[(0|c[l>>2])+(g<<2)>>2])+i<<2)>>2])|0),(0|(i=i+1|0))!=(0|j););}while(1<(0|k));o=0|c[Z>>2],h=0|a[o+4>>0]}else o=B;if(n=0|c[Y>>2],g=0|c[n+108>>2],(255&h)<4)break;if(0<(0|(c[Z+596>>2]=g)))for(i=0|c[Z+600>>2],j=0|c[b+1084>>2],k=0|c[b+1092>>2],l=0|c[Z+592>>2],m=0|c[b+1088>>2],h=g;c[i+(12*(h=(Y=h)+-1|0)|0)>>2]=c[j+(h<<2)>>2],c[i+(12*h|0)+4>>2]=c[k+(h<<2)>>2],c[i+(12*h|0)+8>>2]=l+(48*(0|c[m+(h<<2)>>2])|0),1<(0|Y););if(h=0|c[n+112>>2],0<(0|(c[Z+604>>2]=h)))for(i=0|c[Z+608>>2],j=0|c[b+1096>>2],k=0|c[b+1104>>2],l=0|c[Z+592>>2],g=0|c[b+1100>>2];c[i+(12*(h=(b=h)+-1|0)|0)>>2]=c[j+(h<<2)>>2],c[i+(12*h|0)+4>>2]=c[k+(h<<2)>>2],c[i+(12*h|0)+8>>2]=l+(48*(0|c[g+(h<<2)>>2])|0),1<(0|b););if(i=0|c[o+1132>>2],j=0|c[20+(0|c[o+704>>2])>>2],k=Z+612|0,c[Z+616>>2]=c[o+972>>2],h=0|c[o+964>>2],c[k>>2]=h,(0|j)<=0)break;if(c[h>>2]=i+(c[c[(g=o+968|0)>>2]>>2]<<2),1==(0|j))break;for(h=1;c[(0|c[k>>2])+(h<<2)>>2]=i+(c[(0|c[g>>2])+(h<<2)>>2]<<2),(0|(h=h+1|0))!=(0|j););}else{if((0|c[z+20>>2])<=0)break;y=B+948|0,z=B+952|0,v=Z+612|0,w=B+1032|0,x=B+1036|0,q=B+1132|0,s=Z+616|0,u=0;do{if(h=0|c[(0|c[y>>2])+(u<<2)>>2],p=(b=0|c[(0|c[z>>2])+(u<<2)>>2])+h|0,e=0|c[(0|c[v>>2])+(u<<2)>>2],0<(0|b)){n=0|c[w>>2],o=0|c[x>>2],m=h,h=0;do{if(g=0|c[n+(m<<2)>>2],l=(b=0|c[o+(m<<2)>>2])+g|0,0<(0|b)){k=0|c[q>>2];do{t=+f[k+(g<<2)>>2],i=e+(h<<2)|0;b:do{if(0<(0|h))for(j=e;;){if(+f[j>>2]==t)break b;if(i>>>0<=(j=j+4|0)>>>0){X=146;break}}else X=146}while(0)}while(146==(0|X)&&(X=0,f[i>>2]=t,h=h+1|0),(0|(g=g+1|0))<(0|l))}}while((0|(m=m+1|0))<(0|p))}else h=0;!function(a,b){a|=0;var h,j,k,m,d=0,e=0,f=0,g=0,i=0,l=0;S=(m=S)+208|0,f=(b|=0)<<2,c[(i=k=(j=m)+192|0)>>2]=1,c[i+4>>2]=0;a:do{if(0|f){for(c[j+4>>2]=4,d=b=c[j>>2]=4,e=2;(c[j+(e<<2)>>2]=b=b+4+d|0)>>>0<f>>>0;)i=d,d=b,e=e+1|0,b=i;if(a>>>0<(g=a+f+-4|0)>>>0){h=g,i=4+k|0,d=a,e=b=1;do{do{if(3!=(3&b|0)){if((0|c[j+((f=e+-1|0)<<2)>>2])>>>0<(h-d|0)>>>0?xc(d,e,j):zc(d,b,0|c[i>>2],e,0,j),1==(0|e)){Ac(k,1),e=0;break}Ac(k,f),e=1;break}}while(xc(d,e,j),yc(k,2),e=e+2|0,0)}while(b=1|c[k>>2],c[k>>2]=b,(d=d+4|0)>>>0<g>>>0);f=0|c[(g=i)>>2]}else g=4+k|0,f=0,d=a,e=b=1;for(zc(d,b,f,e,0,j),f=4+k|0;;){if(1==(0|e)&1==(0|b)){if(!(0|c[f>>2]))break a;l=21}else(0|e)<2?l=21:(Ac(k,2),a=e+-2|0,c[k>>2]=7^c[k>>2],yc(k,1),zc(d+(0-(0|c[j+(a<<2)>>2]))+-4|0,0|c[k>>2],0|c[g>>2],e+-1|0,1,j),Ac(k,1),b=1|c[k>>2],zc(d=d+-4|0,c[k>>2]=b,0|c[g>>2],a,1,j),e=a);21==(0|l)&&(yc(k,a=(l=0)|Bc(k)),b=0|c[k>>2],d=d+-4|0,e=a+e|0)}}}while(0);S=m}(e,h),c[(0|c[s>>2])+(u<<2)>>2]=h,u=u+1|0}while((0|u)<(0|c[20+(0|c[A>>2])>>2]))}}while(0);return Gb(Z),S=_,0|Z}function oa(a,b){return 0|((a=+f[(a|=0)>>2])<(b=+f[(b|=0)>>2])?-1:b<a&1)}function pa(b){var d=0|a[4+(b|=0)>>0];c[b+704>>2]=b+(0|c[b+64>>2]),c[b+708>>2]=b+(0|c[b+68>>2]),c[b+712>>2]=b+(0|c[b+72>>2]),c[b+716>>2]=b+(0|c[b+76>>2]),c[b+720>>2]=b+(0|c[b+80>>2]),c[b+724>>2]=b+(0|c[b+84>>2]),c[b+728>>2]=b+(0|c[b+88>>2]),c[b+732>>2]=b+(0|c[b+92>>2]),c[b+736>>2]=b+(0|c[b+96>>2]),c[b+740>>2]=b+(0|c[b+100>>2]),c[b+744>>2]=b+(0|c[b+104>>2]),c[b+748>>2]=b+(0|c[b+108>>2]),c[b+752>>2]=b+(0|c[b+112>>2]),c[b+756>>2]=b+(0|c[b+116>>2]),c[b+760>>2]=b+(0|c[b+120>>2]),c[b+764>>2]=b+(0|c[b+124>>2]),c[b+768>>2]=b+(0|c[b+128>>2]),c[b+772>>2]=b+(0|c[b+132>>2]),c[b+776>>2]=b+(0|c[b+136>>2]),c[b+780>>2]=b+(0|c[b+140>>2]),c[b+784>>2]=b+(0|c[b+144>>2]),c[b+788>>2]=b+(0|c[b+148>>2]),c[b+796>>2]=b+(0|c[b+152>>2]),c[b+800>>2]=b+(0|c[b+156>>2]),c[b+804>>2]=b+(0|c[b+160>>2]),c[b+812>>2]=b+(0|c[b+164>>2]),c[b+816>>2]=b+(0|c[b+168>>2]),c[b+820>>2]=b+(0|c[b+172>>2]),c[b+828>>2]=b+(0|c[b+176>>2]),c[b+832>>2]=b+(0|c[b+180>>2]),c[b+836>>2]=b+(0|c[b+184>>2]),c[b+840>>2]=b+(0|c[b+188>>2]),c[b+844>>2]=b+(0|c[b+192>>2]),c[b+848>>2]=b+(0|c[b+196>>2]),c[b+852>>2]=b+(0|c[b+200>>2]),c[b+856>>2]=b+(0|c[b+204>>2]),c[b+860>>2]=b+(0|c[b+208>>2]),c[b+868>>2]=b+(0|c[b+212>>2]),c[b+872>>2]=b+(0|c[b+216>>2]),c[b+876>>2]=b+(0|c[b+220>>2]),c[b+880>>2]=b+(0|c[b+224>>2]),c[b+884>>2]=b+(0|c[b+228>>2]),c[b+888>>2]=b+(0|c[b+232>>2]),c[b+892>>2]=b+(0|c[b+236>>2]),c[b+896>>2]=b+(0|c[b+240>>2]),c[b+900>>2]=b+(0|c[b+244>>2]),c[b+904>>2]=b+(0|c[b+248>>2]),c[b+908>>2]=b+(0|c[b+252>>2]),c[b+912>>2]=b+(0|c[b+256>>2]),c[b+916>>2]=b+(0|c[b+260>>2]),c[b+920>>2]=b+(0|c[b+264>>2]),c[b+924>>2]=b+(0|c[b+268>>2]),c[b+928>>2]=b+(0|c[b+272>>2]),c[b+932>>2]=b+(0|c[b+276>>2]),c[b+936>>2]=b+(0|c[b+280>>2]),c[b+940>>2]=b+(0|c[b+284>>2]),c[b+948>>2]=b+(0|c[b+288>>2]),c[b+952>>2]=b+(0|c[b+292>>2]),c[b+976>>2]=b+(0|c[b+296>>2]),c[b+980>>2]=b+(0|c[b+300>>2]),c[b+984>>2]=b+(0|c[b+304>>2]),c[b+988>>2]=b+(0|c[b+308>>2]),c[b+992>>2]=b+(0|c[b+312>>2]),c[b+996>>2]=b+(0|c[b+316>>2]),c[b+1e3>>2]=b+(0|c[b+320>>2]),c[b+1004>>2]=b+(0|c[b+324>>2]),c[b+1008>>2]=b+(0|c[b+328>>2]),c[b+1012>>2]=b+(0|c[b+332>>2]),c[b+1016>>2]=b+(0|c[b+336>>2]),c[b+1020>>2]=b+(0|c[b+340>>2]),c[b+1024>>2]=b+(0|c[b+344>>2]),c[b+1028>>2]=b+(0|c[b+348>>2]),c[b+1040>>2]=b+(0|c[b+352>>2]),c[b+1044>>2]=b+(0|c[b+356>>2]),c[b+1048>>2]=b+(0|c[b+360>>2]),c[b+1032>>2]=b+(0|c[b+364>>2]),c[b+1036>>2]=b+(0|c[b+368>>2]),c[b+1132>>2]=b+(0|c[b+372>>2]),c[b+1136>>2]=b+(0|c[b+376>>2]),c[b+1140>>2]=b+(0|c[b+380>>2]),c[b+1144>>2]=b+(0|c[b+384>>2]),c[b+1148>>2]=b+(0|c[b+388>>2]),c[b+1152>>2]=b+(0|c[b+392>>2]),c[b+1156>>2]=b+(0|c[b+396>>2]),c[b+1160>>2]=b+(0|c[b+400>>2]),c[b+1164>>2]=b+(0|c[b+404>>2]),c[b+1168>>2]=b+(0|c[b+408>>2]),c[b+1172>>2]=b+(0|c[b+412>>2]),c[b+1176>>2]=b+(0|c[b+416>>2]),c[b+1180>>2]=b+(0|c[b+420>>2]),c[b+1184>>2]=b+(0|c[b+424>>2]),c[b+1188>>2]=b+(0|c[b+428>>2]),c[b+1192>>2]=b+(0|c[b+432>>2]),c[b+1196>>2]=b+(0|c[b+436>>2]),c[b+1200>>2]=b+(0|c[b+440>>2]),c[b+1204>>2]=b+(0|c[b+444>>2]),c[b+1208>>2]=b+(0|c[b+448>>2]),c[b+1212>>2]=b+(0|c[b+452>>2]),c[b+1216>>2]=b+(0|c[b+456>>2]),c[b+1220>>2]=b+(0|c[b+460>>2]),c[b+1224>>2]=b+(0|c[b+464>>2]),(255&d)<=1||(c[b+808>>2]=b+(0|c[b+468>>2]),(255&d)<=3||(c[b+964>>2]=b+(0|c[b+472>>2]),c[b+968>>2]=b+(0|c[b+476>>2]),c[b+972>>2]=b+(0|c[b+480>>2]),c[b+792>>2]=b+(0|c[b+484>>2]),c[b+824>>2]=b+(0|c[b+488>>2]),c[b+864>>2]=b+(0|c[b+492>>2]),c[b+1228>>2]=b+(0|c[b+496>>2]),c[b+1232>>2]=b+(0|c[b+500>>2]),c[b+1236>>2]=b+(0|c[b+504>>2]),c[b+1240>>2]=b+(0|c[b+508>>2]),c[b+1244>>2]=b+(0|c[b+512>>2]),c[b+1248>>2]=b+(0|c[b+516>>2]),c[b+944>>2]=b+(0|c[b+520>>2]),c[b+956>>2]=b+(0|c[b+524>>2]),c[b+960>>2]=b+(0|c[b+528>>2]),c[b+1052>>2]=b+(0|c[b+532>>2]),c[b+1056>>2]=b+(0|c[b+536>>2]),c[b+1060>>2]=b+(0|c[b+540>>2]),c[b+1064>>2]=b+(0|c[b+544>>2]),c[b+1068>>2]=b+(0|c[b+548>>2]),c[b+1072>>2]=b+(0|c[b+552>>2]),c[b+1076>>2]=b+(0|c[b+556>>2]),c[b+1080>>2]=b+(0|c[b+560>>2]),c[b+1084>>2]=b+(0|c[b+564>>2]),c[b+1088>>2]=b+(0|c[b+568>>2]),c[b+1092>>2]=b+(0|c[b+572>>2]),c[b+1096>>2]=b+(0|c[b+576>>2]),c[b+1100>>2]=b+(0|c[b+580>>2]),c[b+1104>>2]=b+(0|c[b+584>>2]),c[b+1108>>2]=b+(0|c[b+588>>2]),c[b+1112>>2]=b+(0|c[b+592>>2]),c[b+1116>>2]=b+(0|c[b+596>>2]),c[b+1120>>2]=b+(0|c[b+600>>2]),c[b+1124>>2]=b+(0|c[b+604>>2]),c[b+1128>>2]=b+(0|c[b+608>>2])))}function qa(d){d|=0;var n,o,p,e=0,g=0,h=0,i=0,j=0,k=0,l=0,m=0,q=0,r=0,s=0,t=S;if(S=S+32|0,g=t+24|0,c[(s=t)>>2]=4,c[s+4>>2]=2,c[s+8>>2]=2,function(a,b){var d,e;S=(a=S)+272|0,d=a+16|0,c[(e=a)>>2]=b|=0,_b(d,993,e),function(a){var b,d;S=(b=S)+16|0,c[(d=b)>>2]=a|=0,function(a,b,d){S=(b=S)+16|0,c[(a=b)>>2]=d|=0,$b(496,2518,a),S=b}(0,0,d),S=b}(d),S=a}(0,s),0|uc(d))return ia(0,1038,t+16|0),S=t,(s=0)|s;if(4<(255&(e=0|a[(h=d+4|0)>>0])))return c[g>>2]=4,c[g+4>>2]=255&e,ia(0,1101,g),S=t,(s=0)|s;if(0|a[(e=d+5|0)>>0]?(pb(h,1),qb(d+64|0,4,160),a[e>>0]=0,pa(d),e=0|a[h>>0],qb(0|c[(g=d+704|0)>>2],4,32),pb(0|c[(s=d+708|0)>>2],4),pb(4+(0|c[s>>2])|0,4),pb(8+(0|c[s>>2])|0,4),pb(12+(0|c[s>>2])|0,4),pb(16+(0|c[s>>2])|0,4),pb(20+(0|c[s>>2])|0,1),qb(0|c[d+720>>2],4,0|c[c[g>>2]>>2]),qb(0|c[d+724>>2],4,0|c[c[g>>2]>>2]),qb(0|c[d+728>>2],4,0|c[c[g>>2]>>2]),qb(0|c[d+732>>2],4,0|c[c[g>>2]>>2]),qb(0|c[d+736>>2],4,0|c[c[g>>2]>>2]),qb(0|c[d+740>>2],4,0|c[c[g>>2]>>2]),qb(0|c[d+752>>2],4,0|c[4+(0|c[g>>2])>>2]),qb(0|c[d+756>>2],4,0|c[4+(0|c[g>>2])>>2]),qb(0|c[d+760>>2],4,0|c[4+(0|c[g>>2])>>2]),qb(0|c[d+764>>2],4,0|c[4+(0|c[g>>2])>>2]),qb(0|c[d+768>>2],4,0|c[4+(0|c[g>>2])>>2]),qb(0|c[d+772>>2],4,0|c[4+(0|c[g>>2])>>2]),qb(0|c[d+776>>2],4,0|c[4+(0|c[g>>2])>>2]),qb(0|c[d+780>>2],4,0|c[8+(0|c[g>>2])>>2]),qb(0|c[d+784>>2],4,0|c[8+(0|c[g>>2])>>2]),qb(0|c[d+788>>2],4,0|c[8+(0|c[g>>2])>>2]),qb(0|c[d+796>>2],4,0|c[8+(0|c[g>>2])>>2]),qb(0|c[d+800>>2],4,0|c[8+(0|c[g>>2])>>2]),qb(0|c[d+804>>2],4,0|c[8+(0|c[g>>2])>>2]),qb(0|c[d+812>>2],4,0|c[12+(0|c[g>>2])>>2]),qb(0|c[d+816>>2],4,0|c[12+(0|c[g>>2])>>2]),qb(0|c[d+820>>2],4,0|c[12+(0|c[g>>2])>>2]),qb(0|c[d+828>>2],4,0|c[12+(0|c[g>>2])>>2]),qb(0|c[d+852>>2],4,0|c[16+(0|c[g>>2])>>2]),qb(0|c[d+856>>2],4,0|c[16+(0|c[g>>2])>>2]),qb(0|c[d+860>>2],4,0|c[16+(0|c[g>>2])>>2]),qb(0|c[d+868>>2],4,0|c[16+(0|c[g>>2])>>2]),qb(0|c[d+872>>2],4,0|c[16+(0|c[g>>2])>>2]),qb(0|c[d+876>>2],4,0|c[16+(0|c[g>>2])>>2]),qb(0|c[d+880>>2],4,0|c[16+(0|c[g>>2])>>2]),qb(0|c[d+884>>2],4,0|c[16+(0|c[g>>2])>>2]),qb(0|c[d+888>>2],1,0|c[16+(0|c[g>>2])>>2]),qb(0|c[d+892>>2],4,0|c[16+(0|c[g>>2])>>2]),qb(0|c[d+896>>2],4,0|c[16+(0|c[g>>2])>>2]),qb(0|c[d+900>>2],4,0|c[16+(0|c[g>>2])>>2]),qb(0|c[d+904>>2],4,0|c[16+(0|c[g>>2])>>2]),qb(0|c[d+908>>2],4,0|c[16+(0|c[g>>2])>>2]),qb(0|c[d+912>>2],4,0|c[16+(0|c[g>>2])>>2]),qb(0|c[d+924>>2],4,0|c[20+(0|c[g>>2])>>2]),qb(0|c[d+928>>2],4,0|c[20+(0|c[g>>2])>>2]),qb(0|c[d+932>>2],4,0|c[20+(0|c[g>>2])>>2]),qb(0|c[d+936>>2],4,0|c[20+(0|c[g>>2])>>2]),qb(0|c[d+940>>2],4,0|c[20+(0|c[g>>2])>>2]),qb(0|c[d+948>>2],4,0|c[20+(0|c[g>>2])>>2]),qb(0|c[d+952>>2],4,0|c[20+(0|c[g>>2])>>2]),qb(0|c[d+976>>2],4,0|c[24+(0|c[g>>2])>>2]),qb(0|c[d+980>>2],4,0|c[28+(0|c[g>>2])>>2]),qb(0|c[d+984>>2],4,0|c[28+(0|c[g>>2])>>2]),qb(0|c[d+988>>2],4,0|c[32+(0|c[g>>2])>>2]),qb(0|c[d+992>>2],4,0|c[32+(0|c[g>>2])>>2]),qb(0|c[d+996>>2],4,0|c[32+(0|c[g>>2])>>2]),qb(0|c[d+1e3>>2],4,0|c[32+(0|c[g>>2])>>2]),qb(0|c[d+1004>>2],4,0|c[32+(0|c[g>>2])>>2]),qb(0|c[d+1008>>2],4,0|c[32+(0|c[g>>2])>>2]),qb(0|c[d+1012>>2],4,0|c[32+(0|c[g>>2])>>2]),qb(0|c[d+1016>>2],4,0|c[36+(0|c[g>>2])>>2]),qb(0|c[d+1020>>2],4,0|c[36+(0|c[g>>2])>>2]),qb(0|c[d+1024>>2],4,0|c[36+(0|c[g>>2])>>2]),qb(0|c[d+1028>>2],4,0|c[40+(0|c[g>>2])>>2]),qb(0|c[d+1040>>2],4,0|c[44+(0|c[g>>2])>>2]),qb(0|c[d+1044>>2],4,0|c[48+(0|c[g>>2])>>2]),qb(0|c[d+1048>>2],4,0|c[48+(0|c[g>>2])>>2]),qb(0|c[d+1032>>2],4,0|c[52+(0|c[g>>2])>>2]),qb(0|c[d+1036>>2],4,0|c[52+(0|c[g>>2])>>2]),qb(0|c[d+1132>>2],4,0|c[56+(0|c[g>>2])>>2]),qb(0|c[d+1136>>2],4,0|c[60+(0|c[g>>2])>>2]),qb(0|c[d+1140>>2],2,0|c[64+(0|c[g>>2])>>2]),qb(0|c[d+1144>>2],4,0|c[68+(0|c[g>>2])>>2]),qb(0|c[d+1148>>2],4,0|c[72+(0|c[g>>2])>>2]),qb(0|c[d+1152>>2],4,0|c[72+(0|c[g>>2])>>2]),qb(0|c[d+1156>>2],4,0|c[72+(0|c[g>>2])>>2]),qb(0|c[d+1160>>2],4,0|c[72+(0|c[g>>2])>>2]),qb(0|c[d+1164>>2],4,0|c[72+(0|c[g>>2])>>2]),qb(0|c[d+1168>>2],4,0|c[76+(0|c[g>>2])>>2]),qb(0|c[d+1172>>2],4,0|c[76+(0|c[g>>2])>>2]),qb(0|c[d+1176>>2],4,0|c[76+(0|c[g>>2])>>2]),qb(0|c[d+1188>>2],4,0|c[80+(0|c[g>>2])>>2]),qb(0|c[d+1192>>2],4,0|c[80+(0|c[g>>2])>>2]),qb(0|c[d+1196>>2],4,0|c[80+(0|c[g>>2])>>2]),qb(0|c[d+1200>>2],4,0|c[80+(0|c[g>>2])>>2]),qb(0|c[d+1204>>2],4,0|c[80+(0|c[g>>2])>>2]),qb(0|c[d+1208>>2],4,0|c[80+(0|c[g>>2])>>2]),qb(0|c[d+1212>>2],4,0|c[80+(0|c[g>>2])>>2]),qb(0|c[d+1216>>2],4,0|c[84+(0|c[g>>2])>>2]),qb(0|c[d+1220>>2],2,0|c[84+(0|c[g>>2])>>2]),qb(0|c[d+1224>>2],4,0|c[88+(0|c[g>>2])>>2]),1<(255&e)&&(qb(0|c[d+808>>2],4,0|c[8+(0|c[g>>2])>>2]),3<(255&e))&&(qb(0|c[d+968>>2],4,0|c[20+(0|c[g>>2])>>2]),qb(0|c[d+972>>2],4,0|c[20+(0|c[g>>2])>>2]),qb(0|c[d+792>>2],4,0|c[8+(0|c[g>>2])>>2]),qb(0|c[d+824>>2],4,0|c[12+(0|c[g>>2])>>2]),qb(0|c[d+864>>2],4,0|c[16+(0|c[g>>2])>>2]),qb(0|c[d+1228>>2],4,0|c[92+(0|c[g>>2])>>2]),qb(0|c[d+1232>>2],4,0|c[92+(0|c[g>>2])>>2]),qb(0|c[d+1236>>2],4,0|c[92+(0|c[g>>2])>>2]),qb(0|c[d+1240>>2],4,0|c[96+(0|c[g>>2])>>2]),qb(0|c[d+1244>>2],4,0|c[96+(0|c[g>>2])>>2]),qb(0|c[d+1248>>2],4,0|c[96+(0|c[g>>2])>>2]),qb(0|c[d+944>>2],4,0|c[20+(0|c[g>>2])>>2]),qb(0|c[d+956>>2],4,0|c[20+(0|c[g>>2])>>2]),qb(0|c[d+960>>2],4,0|c[20+(0|c[g>>2])>>2]),qb(0|c[d+1052>>2],4,0|c[100+(0|c[g>>2])>>2]),qb(0|c[d+1056>>2],4,0|c[100+(0|c[g>>2])>>2]),qb(0|c[d+1060>>2],4,0|c[100+(0|c[g>>2])>>2]),qb(0|c[d+1064>>2],4,0|c[104+(0|c[g>>2])>>2]),qb(0|c[d+1068>>2],4,0|c[104+(0|c[g>>2])>>2]),qb(0|c[d+1072>>2],4,0|c[104+(0|c[g>>2])>>2]),qb(0|c[d+1076>>2],4,0|c[104+(0|c[g>>2])>>2]),qb(0|c[d+1080>>2],4,0|c[104+(0|c[g>>2])>>2]),qb(0|c[d+1084>>2],4,0|c[108+(0|c[g>>2])>>2]),qb(0|c[d+1088>>2],4,0|c[108+(0|c[g>>2])>>2]),qb(0|c[d+1092>>2],4,0|c[108+(0|c[g>>2])>>2]),qb(0|c[d+1096>>2],4,0|c[112+(0|c[g>>2])>>2]),qb(0|c[d+1100>>2],4,0|c[112+(0|c[g>>2])>>2]),qb(0|c[d+1104>>2],4,0|c[112+(0|c[g>>2])>>2]),qb(0|c[d+1108>>2],4,0|c[116+(0|c[g>>2])>>2]),qb(0|c[d+1112>>2],4,0|c[120+(0|c[g>>2])>>2]),qb(0|c[d+1116>>2],4,0|c[120+(0|c[g>>2])>>2]),qb(0|c[d+1120>>2],4,0|c[120+(0|c[g>>2])>>2]),qb(0|c[d+1124>>2],4,0|c[124+(0|c[g>>2])>>2]),qb(0|c[d+1128>>2],4,0|c[124+(0|c[g>>2])>>2]))):(pa(d),g=d+704|0),0|c[905]||(c[905]=1),e=0|c[g>>2],0<(0|c[e>>2]))for(h=d+716|0,i=d+712|0,j=0;c[(0|c[i>>2])+(j<<2)>>2]=(0|c[h>>2])+(j<<6),e=0|c[g>>2],(0|(j=j+1|0))<(0|c[e>>2]););if(0<(0|c[e+4>>2]))for(h=d+748|0,i=d+744|0,j=0;c[(0|c[i>>2])+(j<<2)>>2]=(0|c[h>>2])+(j<<6),e=0|c[g>>2],(0|(j=j+1|0))<(0|c[e+4>>2]););if(0<(0|c[e+16>>2]))for(k=d+848|0,l=d+832|0,r=d+1136|0,p=d+896|0,q=d+836|0,m=d+1140|0,n=d+900|0,o=d+840|0,h=d+1144|0,i=d+908|0,j=d+844|0,s=0;c[(0|c[l>>2])+(s<<2)>>2]=(0|c[k>>2])+(s<<6),c[(0|c[q>>2])+(s<<2)>>2]=(0|c[r>>2])+(c[(0|c[p>>2])+(s<<2)>>2]<<2),c[(0|c[o>>2])+(s<<2)>>2]=(0|c[m>>2])+(c[(0|c[n>>2])+(s<<2)>>2]<<1),c[(0|c[j>>2])+(s<<2)>>2]=(0|c[h>>2])+(c[(0|c[i>>2])+(s<<2)>>2]<<2),e=0|c[g>>2],(0|(s=s+1|0))<(0|c[e+16>>2]););if(0<(0|c[e+20>>2]))for(h=d+920|0,i=d+916|0,j=0;c[(0|c[i>>2])+(j<<2)>>2]=(0|c[h>>2])+(j<<6),e=0|c[g>>2],(0|(j=j+1|0))<(0|c[e+20>>2]););if(0<(0|c[e+80>>2]))for(h=d+1184|0,i=d+1180|0,j=0;c[(0|c[i>>2])+(j<<2)>>2]=(0|c[h>>2])+(j<<6),e=0|c[g>>2],(0|(j=j+1|0))<(0|c[e+80>>2]););if(!(1&a[20+(0|c[d+708>>2])>>0]||(0|(m=0|c[e+16>>2]))<=0)){e=0|c[d+1140>>2],g=0|c[d+900>>2],h=0|c[d+904>>2],j=0;do{if(i=e+(c[g+(j<<2)>>2]<<1)|0,l=(s=0|c[h+(j<<2)>>2])-1|0,1<(0|s))for(k=0;r=0|b[(q=i+(k<<1)|0)>>1],b[q>>1]=0|b[(s=i+(k+2<<1)|0)>>1],b[s>>1]=r,(0|(k=k+3|0))<(0|l););}while((0|(j=j+1|0))!=(0|m));g=0|c[d+1136>>2],h=0|c[d+896>>2],i=0|c[d+892>>2],k=0;do{if(j=(e=g+(c[h+(k<<2)>>2]<<2)|0)+((s=0|c[i+(k<<2)>>2])<<1<<2)|0,0<(0|s))for(e=e+4|0;f[e>>2]=1-+f[e>>2],(e=e+8|0)>>>0<j>>>0;);}while((0|(k=k+1|0))!=(0|m))}return S=t,0|d}function ra(a){var b=S;return S=S+16|0,0|uc(a|=0)?(ia(0,1210,b),S=b,(a=0)|a):(a=0|d[a+4>>0],S=b,0|a)}function ta(a){var j,k,l,m,b=0,e=0,f=0,g=0,h=0,i=0,e=64+(a|=0)|0,b=a+144|0;if(xa(e,0|c[a+88>>2],0|c[a+148>>2],0|c[b>>2]),za(e,0|c[a+92>>2],0|c[a+152>>2],0|c[796+(0|c[a>>2])>>2],2,0|c[b>>2]),!((0|d[4+(0|c[a>>2])>>0])<4||(xa(e,0|c[a+96>>2],0|c[(m=a+120|0)>>2],0|c[b>>2]),xa(e,0|c[a+100>>2],0|c[(f=a+124|0)>>2],0|c[b>>2]),xa(e,0|c[a+104>>2],0|c[(g=a+128|0)>>2],0|c[b>>2]),xa(e,0|c[a+108>>2],0|c[(j=a+132|0)>>2],0|c[b>>2]),xa(e,0|c[a+112>>2],0|c[(k=a+136|0)>>2],0|c[b>>2]),xa(e,0|c[a+116>>2],0|c[(l=a+140|0)>>2],0|c[b>>2]),b=0|c[a+156>>2],e=0|c[m>>2],f=0|c[f>>2],g=0|c[g>>2],(0|(m=0|c[a+56>>2]))<=0))){for(i=h=0;c[b+(h<<2)>>2]=c[e+(i<<2)>>2],c[b+((1|h)<<2)>>2]=c[f+(i<<2)>>2],c[b+((2|h)<<2)>>2]=c[g+(i<<2)>>2],(0|(i=i+1|0))!=(0|m);)h=h+4|0;for(i=0|c[a+160>>2],h=0|c[j>>2],g=0|c[k>>2],b=0|c[l>>2],f=e=0;c[i+(e<<2)>>2]=c[h+(f<<2)>>2],c[i+((1|e)<<2)>>2]=c[g+(f<<2)>>2],c[i+((2|e)<<2)>>2]=c[b+(f<<2)>>2],(0|(f=f+1|0))!=(0|m);)e=e+4|0}}function ua(a){var j,k,l,m,b=0,e=0,f=0,g=0,h=0,i=0,e=172+(a|=0)|0,b=a+264|0;if(xa(e,0|c[a+196>>2],0|c[a+268>>2],0|c[b>>2]),xa(e,0|c[a+200>>2],0|c[a+284>>2],0|c[b>>2]),xa(e,0|c[a+204>>2],0|c[a+276>>2],0|c[b>>2]),xa(e,0|c[a+208>>2],0|c[a+280>>2],0|c[b>>2]),xa(e,0|c[a+212>>2],0|c[a+272>>2],0|c[b>>2]),!((0|d[4+(0|c[a>>2])>>0])<4||(xa(e,0|c[a+216>>2],0|c[(m=a+240|0)>>2],0|c[b>>2]),xa(e,0|c[a+220>>2],0|c[(f=a+244|0)>>2],0|c[b>>2]),xa(e,0|c[a+224>>2],0|c[(g=a+248|0)>>2],0|c[b>>2]),xa(e,0|c[a+228>>2],0|c[(j=a+252|0)>>2],0|c[b>>2]),xa(e,0|c[a+232>>2],0|c[(k=a+256|0)>>2],0|c[b>>2]),xa(e,0|c[a+236>>2],0|c[(l=a+260|0)>>2],0|c[b>>2]),b=0|c[a+296>>2],e=0|c[m>>2],f=0|c[f>>2],g=0|c[g>>2],(0|(m=0|c[a+164>>2]))<=0))){for(i=h=0;c[b+(h<<2)>>2]=c[e+(i<<2)>>2],c[b+((1|h)<<2)>>2]=c[f+(i<<2)>>2],c[b+((2|h)<<2)>>2]=c[g+(i<<2)>>2],(0|(i=i+1|0))!=(0|m);)h=h+4|0;for(i=0|c[a+300>>2],h=0|c[j>>2],g=0|c[k>>2],b=0|c[l>>2],f=e=0;c[i+(e<<2)>>2]=c[h+(f<<2)>>2],c[i+((1|e)<<2)>>2]=c[g+(f<<2)>>2],c[i+((2|e)<<2)>>2]=c[b+(f<<2)>>2],(0|(f=f+1|0))!=(0|m);)e=e+4|0}}function va(a){var j,k,l,m,b=0,e=0,f=0,g=0,h=0,i=0,e=340+(a|=0)|0,b=a+424|0;if(xa(e,0|c[a+364>>2],0|c[a+448>>2],0|c[b>>2]),ya(e,0|c[a+368>>2],0|c[a+440>>2],0|c[b>>2]),za(e,0|c[a+372>>2],0|c[a+444>>2],0|c[892+(0|c[a>>2])>>2],2,0|c[b>>2]),!((0|d[4+(0|c[a>>2])>>0])<4||(xa(e,0|c[a+376>>2],0|c[(m=a+400|0)>>2],0|c[b>>2]),xa(e,0|c[a+380>>2],0|c[(f=a+404|0)>>2],0|c[b>>2]),xa(e,0|c[a+384>>2],0|c[(g=a+408|0)>>2],0|c[b>>2]),xa(e,0|c[a+388>>2],0|c[(j=a+412|0)>>2],0|c[b>>2]),xa(e,0|c[a+392>>2],0|c[(k=a+416|0)>>2],0|c[b>>2]),xa(e,0|c[a+396>>2],0|c[(l=a+420|0)>>2],0|c[b>>2]),b=0|c[a+452>>2],e=0|c[m>>2],f=0|c[f>>2],g=0|c[g>>2],(0|(m=0|c[a+332>>2]))<=0))){for(i=h=0;c[b+(h<<2)>>2]=c[e+(i<<2)>>2],c[b+((1|h)<<2)>>2]=c[f+(i<<2)>>2],c[b+((2|h)<<2)>>2]=c[g+(i<<2)>>2],(0|(i=i+1|0))!=(0|m);)h=h+4|0;for(i=0|c[a+456>>2],h=0|c[j>>2],g=0|c[k>>2],b=0|c[l>>2],f=e=0;c[i+(e<<2)>>2]=c[h+(f<<2)>>2],c[i+((1|e)<<2)>>2]=c[g+(f<<2)>>2],c[i+((2|e)<<2)>>2]=c[b+(f<<2)>>2],(0|(f=f+1|0))!=(0|m);)e=e+4|0}}function xa(a,b,d,e){b|=0,d|=0,e|=0;var m,n,o,g=0,h=0,i=0,j=0,k=0,l=0;if(0<(0|(g=0|c[8+(a|=0)>>2])))for(h=0|c[a+20>>2],i=0|c[a+12>>2],j=0;f[i+(j<<2)>>2]=+f[b+(j<<2)>>2]*+f[h+(j<<2)>>2],(0|(j=j+1|0))!=(0|g););if(!((0|(n=0|c[a>>2]))<=0))if(l=a+16|0,o=0|c[a+4>>2],m=a+12|0,e)for(b=j=0;;){if(0|c[e>>2]){if(h=(a=0|c[(0|c[l>>2])+(b<<2)>>2])+j|0,0<(0|a))for(g=0|c[m>>2],i=j,k=0;k+=+f[g+(i<<2)>>2],(0|(i=i+1|0))<(0|h););else k=0;f[d+(b<<2)>>2]=k}if((0|(g=b+1|0))==(0|n))break;e=e+4|0,j=(0|c[o+(b<<2)>>2])+j|0,b=g}else for(j=0|c[l>>2],a=b=0;;){if(h=(l=0|c[j+(a<<2)>>2])+b|0,0<(0|l))for(g=0|c[m>>2],i=b,k=0;k+=+f[g+(i<<2)>>2],(0|(i=i+1|0))<(0|h););else k=0;if(f[d+(a<<2)>>2]=k,(0|(g=a+1|0))==(0|n))break;b=(0|c[o+(a<<2)>>2])+b|0,a=g}}function ya(a,b,d,e){b|=0,d|=0,e|=0;var m,n,g=0,h=0,i=0,j=0,k=0,l=0;if(0<(0|(g=0|c[8+(a|=0)>>2])))for(h=0|c[a+20>>2],i=0|c[a+12>>2],j=0;f[i+(j<<2)>>2]=+f[b+(j<<2)>>2]*+f[h+(j<<2)>>2],(0|(j=j+1|0))!=(0|g););if(!((0|(g=0|c[a>>2]))<=0))if(l=a+16|0,m=0|c[a+4>>2],n=a+12|0,e)for(b=j=0;;){if(0|c[e>>2]){if(h=(i=0|c[(0|c[l>>2])+(b<<2)>>2])+j|0,0<(0|i))for(g=0|c[n>>2],i=j,k=0;k+=+f[g+(i<<2)>>2],(0|(i=i+1|0))<(0|h););else k=0;c[d+(b<<2)>>2]=~~(k+.0010000000474974513),g=0|c[a>>2]}if(!((0|(h=b+1|0))<(0|g)))break;e=e+4|0,j=(0|c[m+(b<<2)>>2])+j|0,b=h}else for(j=0|c[l>>2],e=b=0;;){if(h=(l=0|c[j+(e<<2)>>2])+b|0,0<(0|l))for(g=0|c[n>>2],i=b,k=0;k+=+f[g+(i<<2)>>2],(0|(i=i+1|0))<(0|h););else k=0;if(c[d+(e<<2)>>2]=~~(k+.0010000000474974513),!((0|(g=e+1|0))<(0|c[a>>2])))break;b=(0|c[m+(e<<2)>>2])+b|0,e=g}}function za(a,b,d,e,g,h){b|=0,d|=0,e|=0,g|=0,h|=0;var r,s,u,w,x,i=0,j=0,k=0,l=0,m=0,n=0,o=0,p=0,q=0,t=0|c[(a|=0)>>2];if(!((0|t)<=0))if(w=a+16|0,u=0|c[a+4>>2],s=a+20|0,r=g<<2,h)for(p=o=0;;){if(0|c[h>>2]&&(l=0|c[d+(p<<2)>>2],a=0|c[e+(p<<2)>>2],n=0|v(a,g),m=(i=0|c[(0|c[w>>2])+(p<<2)>>2])+o|0,(k=0<(0|n))&&Vc(0|l,0,0|v(r,a)),0<(0|i)&&(q=0|c[s>>2],k))){i=o;do{for(a=0|c[b+(i<<2)>>2],j=+f[q+(i<<2)>>2],k=0;f[(x=l+(k<<2)|0)>>2]=+f[x>>2]+j*+f[a+(k<<2)>>2],(0|(k=k+1|0))!=(0|n););}while((0|(i=i+1|0))<(0|m))}if((0|(a=p+1|0))==(0|t))break;h=h+4|0,o=(0|c[u+(p<<2)>>2])+o|0,p=a}else for(o=n=0;;){if(k=0|c[d+(o<<2)>>2],a=0|c[e+(o<<2)>>2],m=0|v(a,g),l=(h=0|c[(0|c[w>>2])+(o<<2)>>2])+n|0,(i=0<(0|m))&&Vc(0|k,0,0|v(r,a)),0<(0|h)&&(p=0|c[s>>2],i)){h=n;do{for(a=0|c[b+(h<<2)>>2],j=+f[p+(h<<2)>>2],i=0;f[(q=k+(i<<2)|0)>>2]=+f[q>>2]+j*+f[a+(i<<2)>>2],(0|(i=i+1|0))!=(0|m););}while((0|(h=h+1|0))<(0|l))}if((0|(a=o+1|0))==(0|t))break;n=(0|c[u+(o<<2)>>2])+n|0,o=a}}function Ha(a){var b=0,d=S;return S=S+16|0,b=d,(a|=0)?(b=0|function(a){a|=0;var b,e,d=S;return S=S+560|0,b=(e=d)+548|0,Vc(0|e,0,548),ma(a,e,b),S=d,0|c[b>>2]}(a),S=d,0|b):(c[b>>2]=1515,c[b+4>>2]=1533,ia(0,1269,b),S=d,(b=0)|b)}function Ia(a,b,d){b|=0,d|=0;var e,g,f=0,h=0,i=S;return S=S+32|0,h=i+24|0,g=i+16|0,f=i+8|0,e=i,(a|=0)?b?((f=b)+15&-16|0)!=(0|f)?(c[g>>2]=1551,c[4+g>>2]=1342,ia(0,1269,g),S=i,(h=0)|h):(b=0|na(a,b,d))?(S=i,0|b):(c[h>>2]=1551,c[h+4>>2]=1577,ia(0,1269,h),S=i,(h=0)|h):(c[f>>2]=1551,c[f+4>>2]=1303,ia(0,1269,f),S=i,(h=0)|h):(c[e>>2]=1551,c[e+4>>2]=1533,ia(0,1269,e),S=i,(h=0)|h)}function ob(a,b,c,d){if(c=+c,d=+d,(b=+u(b=+b,a=+a)-+u(+d,+c))<-3.1415927410125732)for(;(b+=6.2831854820251465)<-3.1415927410125732;);if(3.1415927410125732<b)for(;3.1415927410125732<(b+=-6.2831854820251465););return+b}function pb(b,c){var d;if(!((c=(b|=0)+(c|=0)+-1|0)>>>0<=b>>>0))for(;d=0|a[b>>0],a[b>>0]=0|a[c>>0],b=b+1|0,a[c>>0]=d,b>>>0<(c=c+-1|0)>>>0;);}function qb(b,c,d){b|=0,c|=0;var g,e=0,f=0;if(d|=0)do{if(d=d+-1|0,(f=b)>>>0<(e=(b=b+c|0)-1|0)>>>0)for(;g=0|a[f>>0],a[f>>0]=0|a[e>>0],f=f+1|0,a[e>>0]=g,f>>>0<(e=e+-1|0)>>>0;);}while(0!=(0|d))}function xb(a){var s,l,o,b=0,e=0,g=0,h=0,i=0,j=0,k=0,n=0,p=0,q=0,r=0,t=0,u=0,v=0,m=(b=0|c[(l=336+(a|=0)|0)>>2])+(20*(n=0|c[(o=a+332|0)>>2])|0)|0,p=a+424|0,i=0|c[a+48>>2],j=0|c[a+316>>2],k=0|c[a+308>>2];if(0<(0|n))for(n=0|c[p>>2],g=0|c[a+448>>2],h=0|c[a+444>>2];0|c[n>>2]&&(-1!=(0|(e=0|c[b+4>>2]))&&(f[g>>2]=+f[i+(e<<2)>>2]*+f[g>>2]),-1!=(0|(e=0|c[b+8>>2]))&&(f[g>>2]=+f[j+(e<<2)>>2]*+f[g>>2],r=0|c[h>>2],$[3&c[k+(e<<5)+24>>2]](a,e,r,r,0|c[b+16>>2]))),!(m>>>0<=(b=b+20|0)>>>0);)n=n+4|0,g=g+4|0,h=h+4|0;if(!((0|d[4+(0|c[a>>2])>>0])<4||(k=(b=0|c[l>>2])+(20*(r=0|c[o>>2])|0)|0,i=0|c[a+324>>2],j=0|c[a+328>>2],(0|r)<=0)))for(h=0|c[p>>2],e=b,g=0|c[a+452>>2],b=0|c[a+456>>2];0|c[h>>2]&&-1!=(0|(q=0|c[e+8>>2]))&&(t=+f[g>>2]*+f[(o=i+((p=q<<2)<<2)|0)>>2],f[g>>2]=t,u=+f[(r=g+4|0)>>2]*+f[4+o>>2],f[r>>2]=u,v=+f[(a=g+8|0)>>2]*+f[8+o>>2],f[g>>2]=t<0?0:1<t?1:t,f[r>>2]=u<0?0:1<u?1:u,f[a>>2]=v<0?0:1<v?1:v,f[g+12>>2]=1,v=+f[b>>2],u=+f[(p=j+(p<<2)|0)>>2],f[b>>2]=u=v+u-v*u,v=+f[(a=b+4|0)>>2],t=+f[p+4>>2],f[a>>2]=t=v+t-v*t,s=(v=+f[(r=b+8|0)>>2])+(s=+f[p+8>>2])-v*s,f[b>>2]=u<0?0:1<u?1:u,f[a>>2]=t<0?0:1<t?1:t,f[r>>2]=s<0?0:1<s?1:s,f[b+12>>2]=1),!(k>>>0<=(e=e+20|0)>>>0);)h=h+4|0,g=g+16|0,b=b+16|0}function yb(a){var e,b=0|c[332+(a|=0)>>2];0|c[a+428>>2]&&(Uc(0|c[a+460>>2],0|c[a+436>>2],0|(e=b<<2)),Uc(0|c[a+464>>2],0|c[a+440>>2],0|e),Uc(0|c[a+468>>2],0|c[a+448>>2],0|e),(0|d[4+(0|c[a>>2])>>0])<=3||(Uc(0|c[a+472>>2],0|c[a+452>>2],0|(e=b<<4)),Uc(0|c[a+476>>2],0|c[a+456>>2],0|e)))}function zb(b){var j,k,m,n,o,p,q,r,s,t,y,d=0,e=0,g=0,h=0,i=0,l=0,u=0,v=0,x=0,e=0|a[4+(0|c[(b|=0)>>2])>>0],w=0|c[b+332>>2],d=b+428|0;if(0|c[b+620>>2]){if(!(((c[d>>2]=0)|w)<=0))for(h=b+424|0,i=b+432|0,d=b+448|0,e=0;g=0!=(0|c[(0|c[h>>2])+(e<<2)>>2])&&0!=+f[(0|c[d>>2])+(e<<2)>>2]?127:126,a[(0|c[i>>2])+e>>0]=g,(0|(e=e+1|0))!=(0|w););}else if(0|c[d>>2]){if(!(((c[d>>2]=0)|w)<=0))if(m=b+424|0,p=b+432|0,o=b+448|0,r=b+468|0,n=b+440|0,q=b+464|0,t=b+436|0,s=b+460|0,j=b+452|0,l=b+472|0,k=b+456|0,i=b+476|0,(255&e)<=3)for(d=0;l=0==(0|c[(0|c[m>>2])+(d<<2)>>2]),x=+f[(0|c[o>>2])+(d<<2)>>2],v=(0|c[p>>2])+d|0,u=(1&a[v>>0])==(u=0!=x&(1^l)&1)<<24>>24?u:2|u,u=x!=+f[(0|c[r>>2])+(d<<2)>>2]?4|u:u,u=(0|c[(0|c[n>>2])+(d<<2)>>2])==(0|c[(0|c[q>>2])+(d<<2)>>2])?u:8|u,u=(0|c[(0|c[t>>2])+(d<<2)>>2])==(0|c[(0|c[s>>2])+(d<<2)>>2])?u:16|u,a[v>>0]=l?u:32|u,(0|(d=d+1|0))!=(0|w););else for(h=g=0;y=0==(0|c[(0|c[m>>2])+(g<<2)>>2]),x=+f[(0|c[o>>2])+(g<<2)>>2],e=(0|c[p>>2])+g|0,d=(1&a[e>>0])==(d=0!=x&(1^y)&1)<<24>>24?d:2|d,d=x!=+f[(0|c[r>>2])+(g<<2)>>2]?4|d:d,d=(0|c[(0|c[n>>2])+(g<<2)>>2])==(0|c[(0|c[q>>2])+(g<<2)>>2])?d:8|d,d=(0|c[(0|c[t>>2])+(g<<2)>>2])==(0|c[(0|c[s>>2])+(g<<2)>>2])?d:16|d,d=y?d:32|d,y=(0|c[j>>2])+(h<<2)|0,b=(0|c[l>>2])+(h<<2)|0,+f[y>>2]==+f[b>>2]&&+f[4+y>>2]==+f[b+4>>2]&&+f[8+y>>2]==+f[b+8>>2]&&+f[12+y>>2]==+f[b+12>>2]&&(u=(0|c[k>>2])+(h<<2)|0,v=(0|c[i>>2])+(h<<2)|0,+f[u>>2]==+f[v>>2])&&+f[u+4>>2]==+f[v+4>>2]&&+f[u+8>>2]==+f[v+8>>2]&&+f[u+12>>2]==+f[v+12>>2]||(d|=64),a[e>>0]=d,(0|(g=g+1|0))!=(0|w);)h=h+4|0}else if(!((0|w)<=0))for(g=b+424|0,h=b+432|0,d=b+448|0,e=0;0!=(0|c[(0|c[g>>2])+(e<<2)>>2])&&0!=+f[(0|c[d>>2])+(e<<2)>>2]?(v=(0|c[h>>2])+e|0,a[v>>0]=1|a[v>>0]):(v=(0|c[h>>2])+e|0,a[v>>0]=-2&a[v>>0]),(0|(e=e+1|0))!=(0|w););}function Bb(a){var C,D,E,F,G,A,B,b=0,e=0,f=0,g=0,h=0,i=0,j=0,k=0,l=0,m=0,n=0,o=0,p=0,q=0,r=0,s=0,t=0,u=0,v=0,w=0,x=0,y=0,z=0,H=0,I=0,J=0,K=0,k=0|c[(A=60+(a|=0)|0)>>2],b=0|c[a>>2],l=0|c[b+784>>2],m=0|c[(B=a+56|0)>>2],n=0|c[b+1028>>2];if(0<(0|m)){for(s=a+80|0,v=a+92|0,u=a+88|0,w=a+84|0,t=b+984|0,h=b+980|0,j=i=0;;){if(g=0|c[k+(24*i|0)>>2],15==(0|(z=0!=(0|c[(b=g+24|0)>>2])||0|c[g+28>>2]?15:z))&&(c[((z=0)|c[s>>2])+(i<<2)>>2]=c[(r=g+12|0)>>2],0|c[b>>2])&&(o=0|c[l+(i<<2)>>2],x=(p=0|c[g+16>>2])+((H=0|c[r>>2])<<2)|0,0<(0|H)))for(b=p,e=(0|c[u>>2])+(j<<2)|0,f=(0|c[v>>2])+(j<<2)|0;H=(0|c[b>>2])+o|0,c[f>>2]=n+(c[(0|c[t>>2])+(H<<2)>>2]<<2),c[e>>2]=c[(0|c[h>>2])+(H<<2)>>2],!(x>>>0<=(b=b+4|0)>>>0);)e=e+4|0,f=f+4|0;if(0|c[g+28>>2]&&(y=(q=0|c[g+20>>2])+((H=0|c[g+12>>2])<<2)|0,0<(0|H)))for(b=(0|c[w>>2])+(j<<2)|0,e=q;c[b>>2]=c[e>>2],!(y>>>0<=(e=e+4|0)>>>0);)b=b+4|0;if((0|(i=i+1|0))==(0|m))break;j=(0|c[g+8>>2])+j|0}b=0|c[a>>2]}if(!((0|d[b+4>>0])<4||(G=0|c[A>>2],H=0|c[b+792>>2],(0|(A=0|c[B>>2]))<=0)))for(D=a+96|0,C=a+100|0,B=a+104|0,F=a+108|0,E=a+112|0,z=a+116|0,x=b+1228|0,v=b+1232|0,u=b+1236|0,y=b+1240|0,w=b+1244|0,k=b+1248|0,m=l=0;;){if(b=0|c[G+(24*l|0)>>2],0|c[b+24>>2]&&(I=0|c[H+(l<<2)>>2],K=(J=0|c[b+16>>2])+((a=0|c[b+12>>2])<<2)|0,0<(0|a)))for(e=0|c[x>>2],f=0|c[v>>2],g=0|c[u>>2],h=0|c[y>>2],i=0|c[w>>2],j=0|c[k>>2],n=J,o=(0|c[B>>2])+(m<<2)|0,p=(0|c[C>>2])+(m<<2)|0,q=(0|c[D>>2])+(m<<2)|0,r=(0|c[z>>2])+(m<<2)|0,s=(0|c[E>>2])+(m<<2)|0,t=(0|c[F>>2])+(m<<2)|0;a=(0|c[n>>2])+I|0,c[q>>2]=c[e+(a<<2)>>2],c[p>>2]=c[f+(a<<2)>>2],c[o>>2]=c[g+(a<<2)>>2],c[t>>2]=c[h+(a<<2)>>2],c[s>>2]=c[i+(a<<2)>>2],c[r>>2]=c[j+(a<<2)>>2],!(K>>>0<=(n=n+4|0)>>>0);)o=o+4|0,p=p+4|0,q=q+4|0,r=r+4|0,s=s+4|0,t=t+4|0;if((0|(l=l+1|0))==(0|A))break;m=(0|c[b+8>>2])+m|0}}function Cb(a){var H,I,J,K,L,Q,b=0,e=0,f=0,g=0,h=0,i=0,j=0,k=0,l=0,m=0,n=0,o=0,p=0,q=0,r=0,s=0,t=0,u=0,v=0,w=0,x=0,y=0,z=0,A=0,B=0,C=0,D=0,E=0,F=0,G=0,M=0,N=0,O=0,P=0,T=0,U=0,V=0,W=0,S=0|c[168+(a|=0)>>2],R=0|c[a>>2],r=0|c[816+R>>2];if(0<(0|(s=0|c[(Q=a+164|0)>>2])))for(A=a+188|0,w=a+200|0,E=a+204|0,G=a+208|0,K=a+212|0,B=a+196|0,L=a+192|0,v=992+R|0,D=996+R|0,F=1e3+R|0,J=1004+R|0,C=988+R|0,H=1008+R|0,x=a+288|0,I=1012+R|0,y=a+292|0,O=N=0;;){if(t=0|c[S+(12*N|0)>>2],14==(0|(P=0!=(0|c[(b=t+24|0)>>2])||0|c[t+28>>2]?14:P))&&(c[((P=0)|c[A>>2])+(N<<2)>>2]=c[(z=t+12|0)>>2],0|c[b>>2])){if(b=0|c[r+(N<<2)>>2],k=(e=0|c[t+16>>2])+((q=0|c[z>>2])<<2)|0,0<(0|q))for(f=0|c[v>>2],g=0|c[D>>2],h=0|c[F>>2],i=0|c[J>>2],j=0|c[C>>2],l=(0|c[w>>2])+(O<<2)|0,m=e,n=(0|c[B>>2])+(O<<2)|0,o=(0|c[E>>2])+(O<<2)|0,p=(0|c[G>>2])+(O<<2)|0,q=(0|c[K>>2])+(O<<2)|0;W=(0|c[m>>2])+b|0,c[l>>2]=c[f+(W<<2)>>2],c[o>>2]=c[g+(W<<2)>>2],c[p>>2]=c[h+(W<<2)>>2],c[q>>2]=c[i+(W<<2)>>2],c[n>>2]=c[j+(W<<2)>>2],!(k>>>0<=(m=m+4|0)>>>0);)l=l+4|0,n=n+4|0,o=o+4|0,p=p+4|0,q=q+4|0;W=(0|c[e>>2])+b|0,c[(0|c[x>>2])+(N<<2)>>2]=c[(0|c[H>>2])+(W<<2)>>2],c[(0|c[y>>2])+(N<<2)>>2]=c[(0|c[I>>2])+(W<<2)>>2]}if(0|c[t+28>>2]&&(M=(u=0|c[t+20>>2])+((W=0|c[t+12>>2])<<2)|0,0<(0|W)))for(b=(0|c[L>>2])+(O<<2)|0,e=u;c[b>>2]=c[e>>2],!(M>>>0<=(e=e+4|0)>>>0);)b=b+4|0;if((0|(N=N+1|0))==(0|s))break;O=(0|c[t+8>>2])+O|0}if(!((0|d[4+R>>0])<4||(G=0|c[824+R>>2],(0|(A=0|c[Q>>2]))<=0)))for(D=a+216|0,C=a+220|0,B=a+224|0,F=a+228|0,E=a+232|0,z=a+236|0,x=1228+R|0,v=1232+R|0,u=1236+R|0,y=1240+R|0,w=1244+R|0,k=1248+R|0,m=l=0;;){if(j=0|c[S+(12*l|0)>>2],0|c[j+24>>2]&&(U=0|c[G+(l<<2)>>2],V=(T=0|c[j+16>>2])+((W=0|c[j+12>>2])<<2)|0,0<(0|W)))for(b=0|c[x>>2],e=0|c[v>>2],f=0|c[u>>2],g=0|c[y>>2],h=0|c[w>>2],i=0|c[k>>2],n=T,o=(0|c[B>>2])+(m<<2)|0,p=(0|c[C>>2])+(m<<2)|0,q=(0|c[D>>2])+(m<<2)|0,r=(0|c[z>>2])+(m<<2)|0,s=(0|c[E>>2])+(m<<2)|0,t=(0|c[F>>2])+(m<<2)|0;W=(0|c[n>>2])+U|0,c[q>>2]=c[b+(W<<2)>>2],c[p>>2]=c[e+(W<<2)>>2],c[o>>2]=c[f+(W<<2)>>2],c[t>>2]=c[g+(W<<2)>>2],c[s>>2]=c[h+(W<<2)>>2],c[r>>2]=c[i+(W<<2)>>2],!(V>>>0<=(n=n+4|0)>>>0);)o=o+4|0,p=p+4|0,q=q+4|0,r=r+4|0,s=s+4|0,t=t+4|0;if((0|(l=l+1|0))==(0|A))break;m=(0|c[j+8>>2])+m|0}}function Db(a){var F,G,D,E,b=0,e=0,f=0,g=0,h=0,i=0,j=0,k=0,l=0,m=0,n=0,o=0,p=0,q=0,r=0,s=0,t=0,u=0,v=0,w=0,x=0,y=0,z=0,A=0,B=0,C=0,H=0,I=0,J=0,K=0,l=0|c[(D=336+(a|=0)|0)>>2],b=0|c[a>>2],m=0|c[b+856>>2],n=0|c[(E=a+332|0)>>2],o=0|c[b+1028>>2];if(0<(0|n)){for(t=a+356|0,y=a+372|0,w=a+364|0,u=a+368|0,z=a+360|0,v=b+1024|0,x=b+1016|0,i=b+1020|0,k=j=0;;){if(h=0|c[l+(20*j|0)>>2],15==(0|(C=0!=(0|c[(b=h+24|0)>>2])||0|c[h+28>>2]?15:C))&&(c[((C=0)|c[t>>2])+(j<<2)>>2]=c[(s=h+12|0)>>2],0|c[b>>2])&&(p=0|c[m+(j<<2)>>2],A=(q=0|c[h+16>>2])+((H=0|c[s>>2])<<2)|0,0<(0|H)))for(b=(0|c[u>>2])+(k<<2)|0,e=q,f=(0|c[w>>2])+(k<<2)|0,g=(0|c[y>>2])+(k<<2)|0;H=(0|c[e>>2])+p|0,c[g>>2]=o+(c[(0|c[v>>2])+(H<<2)>>2]<<2),c[f>>2]=c[(0|c[x>>2])+(H<<2)>>2],c[b>>2]=c[(0|c[i>>2])+(H<<2)>>2],!(A>>>0<=(e=e+4|0)>>>0);)b=b+4|0,f=f+4|0,g=g+4|0;if(0|c[h+28>>2]&&(B=(r=0|c[h+20>>2])+((H=0|c[h+12>>2])<<2)|0,0<(0|H)))for(b=(0|c[z>>2])+(k<<2)|0,e=r;c[b>>2]=c[e>>2],!(B>>>0<=(e=e+4|0)>>>0);)b=b+4|0;if((0|(j=j+1|0))==(0|n))break;k=(0|c[h+8>>2])+k|0}b=0|c[a>>2]}if(!((0|d[b+4>>0])<4||(G=0|c[D>>2],H=0|c[b+864>>2],(0|(A=0|c[E>>2]))<=0)))for(D=a+376|0,C=a+380|0,B=a+384|0,F=a+388|0,E=a+392|0,z=a+396|0,x=b+1228|0,v=b+1232|0,u=b+1236|0,y=b+1240|0,w=b+1244|0,k=b+1248|0,m=l=0;;){if(b=0|c[G+(20*l|0)>>2],0|c[b+24>>2]&&(I=0|c[H+(l<<2)>>2],K=(J=0|c[b+16>>2])+((a=0|c[b+12>>2])<<2)|0,0<(0|a)))for(e=0|c[x>>2],f=0|c[v>>2],g=0|c[u>>2],h=0|c[y>>2],i=0|c[w>>2],j=0|c[k>>2],n=J,o=(0|c[B>>2])+(m<<2)|0,p=(0|c[C>>2])+(m<<2)|0,q=(0|c[D>>2])+(m<<2)|0,r=(0|c[z>>2])+(m<<2)|0,s=(0|c[E>>2])+(m<<2)|0,t=(0|c[F>>2])+(m<<2)|0;a=(0|c[n>>2])+I|0,c[q>>2]=c[e+(a<<2)>>2],c[p>>2]=c[f+(a<<2)>>2],c[o>>2]=c[g+(a<<2)>>2],c[t>>2]=c[h+(a<<2)>>2],c[s>>2]=c[i+(a<<2)>>2],c[r>>2]=c[j+(a<<2)>>2],!(K>>>0<=(n=n+4|0)>>>0);)o=o+4|0,p=p+4|0,q=q+4|0,r=r+4|0,s=s+4|0,t=t+4|0;if((0|(l=l+1|0))==(0|A))break;m=(0|c[b+8>>2])+m|0}}function Gb(a){var d,e,g,b=0;if(yb(a|=0),function(a){var e,g,b=0,d=0,h=0,j=0,k=0,i=(b=0|c[(a|=0)+4>>2])+(52*(h=0|c[a>>2])|0)|0;if(!((0|h)<=0))for(h=0|c[a+12>>2];d=+f[h>>2],a=b+4|0,d=(g=0==(0|c[b+16>>2]))?(k=+f[a>>2],j=+f[b+8>>2],d<k?k:j<d?j:d):(k=+f[b+12>>2],(j=+f[a>>2])+k*((d=(d-j)/k)-(0|~~+q(+d)))),a=b+48|0,+f[(e=b+44|0)>>2]!=d?(c[a>>2]=1,f[e>>2]=d):c[a>>2]=0,g&&(f[h>>2]=d),!(i>>>0<=(b=b+52|0)>>>0);)h=h+4|0}(a+540|0),function(a){var n,b=0,d=0,e=0,g=0,h=0,i=0,j=0,k=0,l=0,m=0,o=0,p=0,q=0,r=0,t=0,u=0,s=(b=0|c[(a|=0)+544>>2])+(52*(n=0|c[a+540>>2])|0)|0;if(!((0|n)<=0)){n=0==(0|c[a+620>>2]);do{a:do{if(0==(0|c[b>>2])&&(o=+f[b+44>>2],p=+f[b+20>>2],q=+f[b+24>>2],t=(r=0|c[b+28>>2])+(28*(l=0|c[b+32>>2])|0)|0,0<(0|l))){if(!n)for(l=r;;){h=0|c[l>>2];do{if(1<=(0|h)){if(g=0|c[l+4>>2],d=(e=+f[g>>2])-p,1==(0|h)){h=!(o<p+e)|!(d<o),d=a=0,m=41;break}if(o<d){g=l+16|0,i=1,d=a=0,m=43;break}if(o<p+e)d=a=h=0,m=41;else{for(a=1;!(o<p+(d=+f[g+(a<<2)>>2]));){if(!((0|(a=a+1|0))<(0|h))){m=40;break}e=d}if(40==(0|m)){g=l+16|0,a=h+-(i=1)|0,d=0,m=43;break}d=d-p<o?h=0:(a=a+-1|0,(d-=e)<q?h=0:(h=0,(o-e)/d)),m=41}}else d=a=h=0,m=41}while(0);if(41==(0|m)&&(h|(m=0)==(0|c[(g=l+16|0)>>2])?(i=1&h,m=43):(c[l+24>>2]=1,c[l+20>>2]=1,k=l+8|0,j=l+12|0,h=0)),43==(0|m)&&(e=+f[(j=l+12|(m=0))>>2],h=1&((0|c[(k=l+8|0)>>2])!=(0|a)|(u=e!=d)&(0==d|0==e)),c[l+24>>2]=1&u,c[l+20>>2]=h,h=i),f[j>>2]=d,c[k>>2]=a,c[g>>2]=h,t>>>0<=(l=l+28|0)>>>0)break a}if(!(0|c[b+48>>2]))for(a=r;;)if(c[a+24>>2]=0,t>>>(c[a+20>>2]=0)<=(a=a+28|0)>>>0)break a;l=r;do{h=0|c[l>>2];do{if(1<=(0|h)){if(g=0|c[l+4>>2],d=(e=+f[g>>2])-p,1==(0|h)){h=!(o<p+e)|!(d<o),d=a=0,m=24;break}if(o<d){g=l+16|0,i=1,d=a=0,m=26;break}if(o<p+e)d=a=h=0,m=24;else{for(a=1;!(o<p+(d=+f[g+(a<<2)>>2]));){if(!((0|(a=a+1|0))<(0|h))){m=21;break}e=d}if(21==(0|m)){g=l+16|0,a=h+-(i=1)|0,d=0,m=26;break}d=d-p<o?h=0:(a=a+-1|0,(d-=e)<q?h=0:(h=0,(o-e)/d)),m=24}}else d=a=h=0,m=24}while(0)}while(24==(0|m)&&(h|(m=0)==(0|c[(g=l+16|0)>>2])?(i=1&h,m=26):(c[l+24>>2]=1,c[l+20>>2]=1,k=l+8|0,j=l+12|0,h=0)),26==(0|m)&&(e=+f[(j=l+12|(m=0))>>2],h=1&((0|c[(k=l+8|0)>>2])!=(0|a)|(u=e!=d)&(0==d|0==e)),c[l+24>>2]=1&u,c[l+20>>2]=h,h=i),f[j>>2]=d,c[k>>2]=a,c[g>>2]=h,(l=l+28|0)>>>0<t>>>0)}}while(0)}while((b=b+52|0)>>>0<s>>>0)}}(a),Nb(a),function(a){var l,o,y,z,p,b=0,d=0,e=0,g=0,h=0,i=0,j=0,k=0,m=0,n=0,q=0,r=0,s=0,u=0,w=0,x=0,t=(b=0|c[(a|=0)+568>>2])+(36*(p=0|c[a+564>>2])|0)|0;if(!((0|p)<=0)){p=0==(0|c[a+620>>2]);do{o=0|c[b+4>>2];a:do{if(0<(0|o))for(i=0|c[b>>2],e=a=d=j=0;;){if(g=0|c[i+(j<<2)>>2],0|c[g+16>>2]){e=1,a=d=0;break a}if(e=e||0|c[g+24>>2],a=a||0|c[g+20>>2],d=d+(0!=+f[g+12>>2]&1)|0,(0|o)<=(0|(j=j+1|0))){i=d,x=11;break}}else e=a=i=0,x=11}while(0);b:do{if(11==(0|x))if(d=p?a:1,(x=0)!=((a=p?e:1)|d|0)&&(c[b+12>>2]=w=1<<i,q=0|c[b>>2],r=0|c[b+16>>2],s=0|c[b+20>>2],u=r+(w<<2)|0,31!=(0|i))){for(Vc(0|r,0,((e=r+4|0)>>>0<u>>>0?u:e)+~r+4&-4|0),e=s+(w<<2)|0,g=s;f[g>>2]=1,(g=g+4|0)>>>0<e>>>0;);if(1<=(0|o)){if(!i)for(i=0,k=1;;){if(g=0|c[q+(i<<2)>>2],j=0|v(0|c[g+8>>2],k),0==(h=+f[g+12>>2]))for(e=0;c[(n=r+(e<<2)|0)>>2]=(0|c[n>>2])+j,(0|(e=e+1|0))!=(0|w););else c[r>>2]=(0|c[r>>2])+j,f[s>>2]=(1-h)*+f[s>>2];if(k=0|v(0|c[g>>2],k),(0|(i=i+1|0))==(0|o)){e=0;break b}}m=0,n=e=1;do{if(l=0|c[q+(m<<2)>>2],g=0|c[8+l>>2],k=0|v(g,n),0==(h=+f[(j=12+l|0)>>2]))for(g=0;c[(j=r+(g<<2)|0)>>2]=(0|c[j>>2])+k,(0|(g=g+1|0))!=(0|w););else{for(i=0|v(g+1|0,n),c[r>>2]=(0|c[r>>2])+k,f[s>>2]=(1-h)*+f[s>>2],g=1;h=+f[j>>2],c[(y=r+(g<<2)|0)>>2]=((z=0!=(g&e|0))?i:k)+(0|c[y>>2]),f[(y=s+(g<<2)|0)>>2]=(z?h:1-h)*+f[y>>2],(0|(g=g+1|0))!=(0|w););e<<=1}}while(n=0|v(0|c[l>>2],n),(0|(m=m+1|0))!=(0|o));e=0}else e=0}else e=0}while(0)}while(c[b+28>>2]=a,c[b+24>>2]=d,c[b+32>>2]=e,(b=b+36|0)>>>0<t>>>0)}}(a),Ob(a),e=0|c[a+4>>2],d=(b=0|c[a+52>>2])+(e<<2)|0,0<(0|e))for(;g=+f[b>>2],f[b>>2]=g<0?0:1<g?1:g,(b=b+4|0)>>>0<d>>>0;);!function(a,b,d){d|=0;var e=0,f=(b|=0)+(12*(a|=0)|0)|0;if(!((0|a)<=0))for(e=d;;){do{if(0|c[b+8>>2]){if(-1!=(0|(a=0|c[b+4>>2]))&&0==(0|c[d+(a<<2)>>2])){a=0;break}a=0==(0|c[32+(0|c[b>>2])>>2])}else a=0}while(0);if(c[e>>2]=1&a,f>>>0<=(b=b+12|0)>>>0)break;e=e+4|0}}(e,0|c[a+8>>2],0|c[a+40>>2]),function(a){var e,f,i,q,r,b=0,d=0,g=0,h=0,k=0,l=0,o=0,p=0,s=0,t=0,u=0,j=0|c[8+(a|=0)>>2],b=0|c[a>>2],m=0|c[b+724>>2],n=0|c[a+4>>2];if(!((0|n)<=0))for(q=a+28|0,r=a+36|0,i=a+32|0,f=b+976|0,h=g=0;;){if(e=0|c[j+(12*g|0)>>2],6==(0|(u=0!=(0|c[(a=24+e|0)>>2])||0|c[28+e>>2]?6:u))&&(c[((u=0)|c[q>>2])+(g<<2)>>2]=c[(p=12+e|0)>>2],0|c[a>>2])&&(o=0|c[m+(g<<2)>>2],s=(k=0|c[16+e>>2])+((d=0|c[p>>2])<<2)|0,0<(0|d)))for(a=0|c[f>>2],b=(0|c[r>>2])+(h<<2)|0,d=k;c[b>>2]=c[a+((0|c[d>>2])+o<<2)>>2],!(s>>>0<=(d=d+4|0)>>>0);)b=b+4|0;if(0|c[28+e>>2]&&(t=(l=0|c[20+e>>2])+((d=0|c[12+e>>2])<<2)|0,0<(0|d)))for(a=(0|c[i>>2])+(h<<2)|0,b=l;c[a>>2]=c[b>>2],!(t>>>0<=(b=b+4|0)>>>0);)a=a+4|0;if((0|(g=g+1|0))==(0|n))break;h=(0|c[8+e>>2])+h|0}}(a),function(a){ya(12+(a|=0)|0,0|c[36+a>>2],0|c[44+a>>2],0|c[40+a>>2])}(a),function(a){var d,f,g,h,i,j,k,b=0,e=0;if(S=(k=S)+16|0,j=k,i=(b=0|c[308+(a|=0)>>2])+((e=0|c[a+304>>2])<<5)|0,f=0|c[a+40>>2],g=0|c[a+312>>2],h=0|c[a+144>>2],d=0|c[a+264>>2],(0|e)<=0)S=k;else{for(e=g;;){do{if(0|c[b+28>>2]){if(-1!=(0|(a=0|c[b+4>>2]))&&0==(0|c[f+(a<<2)>>2])){a=0;break}if(-1!=(0|(a=0|c[b+8>>2]))&&0==(0|c[g+(a<<2)>>2])){a=0;break}a=0==(0|c[32+(0|c[b>>2])>>2])}else a=0}while(0);switch(a&=1,c[e>>2]=a,0|c[b+12>>2]){case 0:c[h+(c[b+16>>2]<<2)>>2]=a;break;case 1:c[d+(c[b+16>>2]<<2)>>2]=a;break;default:ia(0,2458,j)}if(i>>>0<=(b=b+32|0)>>>0)break;e=e+4|0}S=k}}(a),Bb(a),Cb(a),ta(a),ua(a),function(a){var b=0,d=0,g=(b=0|c[(a|=0)+336>>2])+(20*(d=0|c[a+332>>2])|0)|0,e=0|c[a+40>>2],f=0|c[a+312>>2];if(!((0|d)<=0))for(d=0|c[a+424>>2];;){do{if(0|c[b+12>>2]){if(-1!=(0|(a=0|c[b+4>>2]))&&0==(0|c[e+(a<<2)>>2])){a=0;break}if(-1!=(0|(a=0|c[b+8>>2]))&&0==(0|c[f+(a<<2)>>2])){a=0;break}a=0==(0|c[32+(0|c[b>>2])>>2])}else a=0}while(0);if(c[d>>2]=1&a,g>>>0<=(b=b+20|0)>>>0)break;d=d+4|0}}(a),Db(a),va(a),function(a){var e,f,i,q,r,b=0,d=0,g=0,h=0,k=0,l=0,o=0,p=0,s=0,t=0,u=0,j=0|c[504+(a|=0)>>2],b=0|c[a>>2],m=0|c[b+1192>>2],n=0|c[a+500>>2];if(!((0|n)<=0))for(q=a+524|0,r=a+532|0,i=a+528|0,f=b+1224|0,h=g=0;;){if(e=0|c[j+(24*g|0)>>2],6==(0|(u=0!=(0|c[(a=24+e|0)>>2])||0|c[28+e>>2]?6:u))&&(c[((u=0)|c[q>>2])+(g<<2)>>2]=c[(p=12+e|0)>>2],0|c[a>>2])&&(o=0|c[m+(g<<2)>>2],s=(k=0|c[16+e>>2])+((d=0|c[p>>2])<<2)|0,0<(0|d)))for(a=0|c[f>>2],b=(0|c[r>>2])+(h<<2)|0,d=k;c[b>>2]=c[a+((0|c[d>>2])+o<<2)>>2],!(s>>>0<=(d=d+4|0)>>>0);)b=b+4|0;if(0|c[28+e>>2]&&(t=(l=0|c[20+e>>2])+((d=0|c[12+e>>2])<<2)|0,0<(0|d)))for(a=(0|c[i>>2])+(h<<2)|0,b=l;c[a>>2]=c[b>>2],!(t>>>0<=(b=b+4|0)>>>0);)a=a+4|0;if((0|(g=g+1|0))==(0|n))break;h=(0|c[8+e>>2])+h|0}}(a),function(a){xa(508+(a|=0)|0,0|c[532+a>>2],0|c[536+a>>2],0)}(a),fa(a),ha(a),function(a){var b=0,d=0,g=0,h=0,j=0,i=(b=0|c[8+(a|=0)>>2])+(12*(j=0|c[a+4>>2])|0)|0,e=0|c[a+48>>2];if(!((0|j)<=0))for(j=0|c[a+40>>2],d=e,a=0|c[a+52>>2];0|c[j>>2]&&(g=+f[a>>2],f[d>>2]=g,-1!=(0|(h=0|c[b+4>>2])))&&(f[d>>2]=g*+f[e+(h<<2)>>2]),!(i>>>0<=(b=b+12|0)>>>0);)j=j+4|0,d=d+4|0,a=a+4|0}(a),function(a){var d=0,e=0,f=0,b=0|c[304+(a|=0)>>2];if(!((0|b)<=0))for(d=0|c[312+a>>2],e=0|c[308+a>>2],f=0;0|c[d>>2]&&_[3&c[e+20>>2]](a,f),(0|(f=f+1|0))!=(0|b);)d=d+4|0,e=e+32|0}(a),xb(a),ea(a),function(a){var g,j,b=0,d=0,e=0,h=0,i=0;if(!(0|c[(a|=0)+624>>2]||(g=(b=0|c[a+336>>2])+(20*(h=0|c[a+332>>2])|0)|0,(0|h)<=0)))for(h=0|c[a+424>>2],a=0|c[a+444>>2];;){if(0|c[h>>2]&&(e=0|c[a>>2],i=(d=0|c[b+16>>2])<<1,0<(0|d)))for(d=1;f[(j=e+(d<<2)|0)>>2]=-+f[j>>2],(0|(d=d+2|0))<(0|i););if(g>>>0<=(b=b+20|0)>>>0)break;h=h+4|0,a=a+4|0}}(a),function(a){var n,r,b=0,d=0,e=0,f=0,g=0,h=0,i=0,j=0,k=0,l=0,m=0,o=0,p=0,q=0|c[(a|=0)+480>>2],j=(r=0|c[a+484>>2])+(28*q|0)|0,b=0|c[a+440>>2],d=0|c[a+44>>2],e=0|c[a+40>>2],f=0|c[a+424>>2];if(!((0|q)<=0)){k=r;do{if(0<(0|(g=0|c[k+4>>2])))for(h=0|c[k+12>>2],i=k+20|0,l=0;p=0|c[h+(l<<4)+4>>2],o=1==(0|c[h+(l<<4)>>2]),c[h+(l<<4)+12>>2]=c[(0==(0|c[(o?e:f)+(p<<2)>>2])?i:(o?d:b)+(p<<2)|0)>>2],(0|(l=l+1|0))!=(0|g););}while((k=k+28|0)>>>0<j>>>0);n=0|c[a+436>>2],o=a+488|0,p=a+492|0,l=a+496|0,m=0;do{if(0<(0|c[(a=r+(28*m|0)+24|0)>>2])){for(b=0|c[o>>2],e=0;c[b+(e<<2)>>2]=-1,(0|(e=e+1|0))<(0|(d=0|c[a>>2])););if(0<(0|d))for(b=0|c[l>>2],d=0;c[b+(d<<2)>>2]=-1,(0|(d=d+1|0))<(0|c[a>>2]););}if(0<(0|c[(k=r+(28*m|0)+4|0)>>2])){for(j=0|c[p>>2],d=0;c[j+(d<<2)>>2]=-1,(0|(d=d+1|0))<(0|(b=0|c[k>>2])););if(0<(0|b))for(e=0|c[r+(28*m|0)+12>>2],g=r+(28*m|0)+20|0,f=0|c[l>>2],i=0;d=(0|c[e+(i<<4)+12>>2])-(0|c[g>>2])|0,b=-1==(0|(b=0|c[(h=f+(d<<2)|0)>>2]))?(0|c[o>>2])+(d<<2)|0:j+(b<<2)|0,c[b>>2]=i,(0|(i=(c[h>>2]=i)+1|0))<(0|c[k>>2]););}if(0<(0|(b=0|c[a>>2]))){i=0|c[o>>2],j=r+(28*m|0)+12|0,d=(h=0)|c[r+(28*m|0)+8>>2];do{if(-1!=(0|(e=0|c[i+(h<<2)>>2]))){for(f=0|c[j>>2],g=0|c[p>>2];d=(b=1==(0|c[f+(e<<4)>>2])?(b=0|c[f+(e<<4)+8>>2],c[r+(28*b|0)+8>>2]=d,0|c[r+(28*b|0)>>2]):(c[n+(c[f+(e<<4)+4>>2]<<2)>>2]=d,1))+d|0,!((0|(e=0|c[g+((k=e)<<2)>>2]))<=(0|k)|-1==(0|e)););b=0|c[a>>2]}}while((0|(h=h+1|0))<(0|b))}}while((0|(m=m+1|0))!=(0|q))}}(a),zb(a),c[a+620>>2]=0}function Nb(a){var l,s,b=0,e=0,g=0,h=0,i=0,j=0,k=0,m=0,n=0,o=0,p=0,q=0,r=0,t=0,u=0;if(!((0|d[4+(0|c[(a|=0)>>2])>>0])<4||(s=(b=0|c[a+544>>2])+(52*(l=0|c[a+540>>2])|0)|0,(0|l)<=0))){l=0==(0|c[a+620>>2]);do{a:do{if(1==(0|c[b>>2])&&(q=+f[b+44>>2],t=(r=0|c[b+36>>2])+(28*(k=0|c[b+40>>2])|0)|0,0<(0|k))){if(!l)for(j=r;;){g=0|c[j>>2];do{if(2<=(0|g)&&(o=0|c[j+4>>2],!(q<=(p=+f[o>>2])))){for(h=1,i=p;;){if(a=h+1|0,q<(e=+f[o+(h<<2)>>2])){k=25;break}if(!((0|a)<(0|g))){k=26;break}h=a,i=e}if(25==(0|k)){a=h+-1|0,e=(q-i)/(e-i);break}if(26==(0|k)){a=g+-1|0,e=0;break}}else e=a=0}while(0);if(i=+f[(h=j+16|0)>>2],g=1&((0|c[(k=j+12|0)>>2])!=(0|a)|(u=i!=e)&(0==e|0==i)),c[j+24>>2]=1&u,c[j+20>>2]=g,f[h>>2]=e,c[k>>2]=a,t>>>0<=(j=j+28|0)>>>0)break a}if(!(0|c[b+48>>2]))for(a=r;;)if(c[a+24>>2]=0,t>>>(c[a+20>>2]=0)<=(a=a+28|0)>>>0)break a;j=r;do{g=0|c[j>>2];do{if(2<=(0|g)&&(m=0|c[j+4>>2],!(q<=(n=+f[m>>2])))){for(h=1,i=n;;){if(a=h+1|0,q<(e=+f[m+(h<<2)>>2])){k=17;break}if(!((0|a)<(0|g))){k=18;break}h=a,i=e}if(17==(0|k)){a=h+-1|0,e=(q-i)/(e-i);break}if(18==(0|k)){a=g+-1|0,e=0;break}}else e=a=0}while(0)}while(i=+f[(k=j+16|0)>>2],h=1&((0|c[(u=j+12|0)>>2])!=(0|a)|(g=i!=e)&(0==e|0==i)),c[j+24>>2]=1&g,c[j+20>>2]=h,f[k>>2]=e,c[u>>2]=a,(j=j+28|0)>>>0<t>>>0)}}while(0)}while((b=b+52|0)>>>0<s>>>0)}}function Ob(a){var q,r,s,t,b=0,e=0,g=0,h=0,i=0,j=0,k=0,l=0,m=0,n=0,o=0,p=0;if(!((0|d[4+(0|c[(a|=0)>>2])>>0])<4||(t=(b=0|c[a+592>>2])+(48*(s=0|c[a+588>>2])|0)|0,(0|s)<=0))){s=0==(0|c[a+620>>2]);do{if(a=0|c[b>>2],g=s?0|c[a+24>>2]:1,(l=s?0|c[a+20>>2]:1)|g){k=0|c[a+12>>2],e=+f[a+16>>2],j=(0|k)==(0|(a=0|c[a+8>>2]));do{if(0!=e){if(i=k+1|0,j){e=(g=a=c[b+8>>2]=1)-e,j=11;break}a=(0|i)==(0|a)?1:2,j=10;break}}while(a=1&(1^j),j=10,0);10==(0|j)&&(j=0,c[b+8>>2]=a,g?(i=k,a=l,j=11):(i=k,a=l,g=0)),11==(0|j)&&(f[b+20>>2]=1-e,f[b+24>>2]=e),a?(c[b+12>>2]=i,c[b+16>>2]=i+1):a=0}else a=l;q=0|c[b+36>>2];a:do{if(0<(0|q)){if(r=0|c[b+40>>2],!s)for(p=0,e=1;;){o=0|c[r+(p<<2)>>2],j=0|c[o+4>>2],k=0|c[o+8>>2],l=0|c[o+12>>2],n=+f[44+(0|c[o>>2])>>2];do{if(1<=(0|l)){if(1==(0|l)){h=+f[k>>2];break}if(n<=(h=+f[j>>2])){h=+f[k>>2];break}for(i=1;;){if(n<(m=+f[j+(i<<2)>>2])){j=40;break}if(!((0|(i=i+1|0))<(0|l))){j=41;break}h=m}if(40==(0|j)){h=(1-(h=(n-h)/(m-h)))*+f[k+(i+-1<<2)>>2]+h*+f[k+(i<<2)>>2];break}if(41==(0|j)){h=+f[k+(l+-1<<2)>>2];break}}else h=1}while(0);if(e=e<(f[o+16>>2]=h)?e:h,(0|(p=p+1|0))==(0|q))break a}p=0,e=1;do{if(o=0|c[r+(p<<2)>>2],i=0|c[o>>2],0|c[i+48>>2]){j=0|c[o+4>>2],k=0|c[o+8>>2],l=0|c[o+12>>2],n=+f[i+44>>2];do{if(1<=(0|l)){if(1==(0|l)){h=+f[k>>2];break}if(n<=(h=+f[j>>2])){h=+f[k>>2];break}for(i=1;;){if(n<(m=+f[j+(i<<2)>>2])){j=28;break}if(!((0|(i=i+1|0))<(0|l))){j=27;break}h=m}if(27==(0|j)){h=+f[k+(l+-1<<2)>>2];break}if(28==(0|j)){h=(1-(h=(n-h)/(m-h)))*+f[k+(i+-1<<2)>>2]+h*+f[k+(i<<2)>>2];break}}else h=1}while(0);f[o+16>>2]=h}else h=+f[o+16>>2]}while(e=e<h?e:h,(0|(p=p+1|0))!=(0|q))}else e=1}while(0)}while(f[b+44>>2]=e,c[b+28>>2]=a,c[b+32>>2]=g,(b=b+48|0)>>>0<t>>>0)}}function _b(b,d,e){b|=0,d|=0,e|=0;var f,i,j,h=0,g=S;S=S+144|0,Uc(0|(i=g),640,144),c[i+48>>2]=h=(h=-2-b|0)>>>0<256?h:256,c[(f=i+20|0)>>2]=b,j=(c[i+44>>2]=b)+h|0,c[(b=i+16|0)>>2]=j,c[i+28>>2]=j,$b(i,d,e),0|h&&(j=0|c[f>>2],a[j+(((0|j)==(0|c[b>>2]))<<31>>31)>>0]=0),S=g}function $b(a,b,c){cc(a|=0,b|=0,c|=0)}function ac(b,e,f,g,h,i){b|=0,e=+e,f|=0,g|=0,h|=0,i|=0;var C,B,j=0,k=0,l=0,m=0,n=0,o=0,p=0,q=0,r=0,s=0,t=0,u=0,w=0,x=0,y=0,A=0,D=0,E=0,F=0,G=0,H=S;S=S+560|0,m=H+32|0,E=12+(l=(F=G=H)+540|0)|(c[(t=H+536|0)>>2]=0),rc(e),B=(0|(j=0|z()))<0?(rc(e=-e),j=0|z(),D=1,2539):(D=0!=(2049&h|0)&1,0==(2048&h|0)?0==(1&h|0)?2540:2545:2542);do{if(!0&2146435072==(2146435072&j|0))G=0!=(32&i|0),mc(b,32,f,j=D+3|0,-65537&h),ec(b,B,D),ec(b,e!=e|!1?G?2566:2570:G?2558:2562,3),mc(b,32,f,j,8192^h);else{if((j=0!=(q=2*+sc(e,t)))&&(c[t>>2]=(0|c[t>>2])-1),97==(0|(w=32|i))){r=0==(0|(o=32&i))?B:9+B|0,p=2|D,j=12-g|0;do{if(!(11<g>>>0|0==(0|j))){for(e=8;e*=16,0!=(0|(j=j+-1|0)););if(45==(0|a[r>>0])){e=-(e+(-q-e));break}e=q+e-e;break}}while(e=q,0);for((0|(j=0|kc(j=(0|(k=0|c[t>>2]))<0?0-k|0:k,((0|j)<0)<<31>>31,E)))==(0|E)&&(a[(j=l+11|0)>>0]=48),a[j+-1>>0]=43+(k>>31&2),a[(n=j+-2|0)>>0]=i+15,k=(0|g)<1,l=0==(8&h|0),j=G;m=j+1|0,a[j>>0]=o|d[480+(D=~~e)>>0],e=16*(e-(0|D)),1!=(m-F|0)||l&k&0==e||(a[m>>0]=46,m=j+2|0),0!=e;)j=m;mc(b,32,f,E=(j=0!=(0|g)&&(-2-F+m|0)<(0|g)?g+2+(k=E)-(l=n)|0:(k=E)-F-(l=n)+m|0)+p|0,h),ec(b,r,p),mc(b,48,f,E,65536^h),ec(b,G,F=m-F|0),mc(b,48,j-(F+(G=k-l|0))|0,0,0),ec(b,n,G),mc(b,32,f,E,8192^h),j=E;break}for(k=(0|g)<0?6:g,e=j?(l=(0|c[t>>2])-28|0,c[t>>2]=l,268435456*q):(l=0|c[t>>2],q),m=C=(0|l)<0?m:m+288|0;c[m>>2]=y=~~e>>>0,m=m+4|0,0!=(e=1e9*(e-(y>>>0))););if(y=C,0<(0|l)){j=C;do{if(o=(0|l)<29?l:29,j>>>0<=(l=m+-4|0)>>>0){for(n=0;s=0|Mc(0|(s=0|Sc(0|c[l>>2],0,0|o)),0|z(),0|n,0),x=0|Mc(0|s,0|(u=0|z()),0|(x=0|Lc(0|(n=0|Qc(0|s,0|u,1e9,0)),0|z(),-1e9,-1)),0|z()),z(),c[l>>2]=x,j>>>0<=(l=l+-4|0)>>>0;);n&&(c[(j=j+-4|0)>>2]=n)}a:do{if(j>>>0<m>>>0)for(;;){if(0|c[(l=m+-4|0)>>2])break a;if(!(j>>>0<l>>>0)){m=l;break}m=l}}while(0)}while(l=(0|c[t>>2])-o|0,0<(0|(c[t>>2]=l)))}else j=C;if((0|l)<0){g=1+((k+25|0)/9|0)|0,s=102==(0|w);do{if(r=(0|(r=0-l|0))<9?r:9,j>>>0<m>>>0){for(o=(1<<r)-1|0,n=r?1e9>>>r:1e9,p=0,l=j;x=0|c[l>>2],c[l>>2]=(r?x>>>r:x)+p,p=0|v(x&o,n),(l=l+4|0)>>>0<m>>>0;);j=0==(0|c[j>>2])?j+4|0:j,p&&(c[m>>2]=p,m=m+4|0)}else j=0==(0|c[j>>2])?j+4|0:j}while(m=(0|g)<((x=m-(l=s?C:j)|0)>>2|0)?l+(g<<2)|0:m,l=(0|c[t>>2])+r|0,(0|(c[t>>2]=l))<0);s=m}else s=m;if(j>>>0<s>>>0){if(l=9*((y-j|0)>>2)|0,10<=(n=0|c[j>>2])>>>0)for(m=10;l=l+1|0,(m=10*m|0)>>>0<=n>>>0;);}else l=0;if((0|(m=k-(102==(0|w)?0:l)+(((u=0!=(0|k))&(t=103==(0|w)))<<31>>31)|0))<((9*((x=s-y|0)>>2)|0)-9|0)){if(g=C+4+((m=(0|(x=m+9216|0))/9|0)-1024<<2)|0,(0|(m=x+(0|v(m,-9))|0))<8)for(n=10;n=10*n|0,(0|m)<7;)m=m+1|0;else n=10;if((p=(g+4|0)==(0|s))&0==(0|(o=(o=0|c[g>>2])-(r=0|v(m=(o>>>0)/(n>>>0)|0,n))|0)))m=g;else if(q=0==(1&m|0)?9007199254740992:9007199254740994,e=o>>>0<(x=n>>>1)>>>0?.5:p&(0|o)==(0|x)?1:1.5,D&&(q=(x=45==(0|a[B>>0]))?-q:q,e=x?-e:e),c[g>>2]=r,q+e!=q){if(999999999<(c[g>>2]=x=r+n|0)>>>0)for(l=g;(m=l+-4|0)>>>(c[l>>2]=0)<j>>>0&&(c[(j=j+-4|0)>>2]=0),x=1+(0|c[m>>2])|0,999999999<(c[m>>2]=x)>>>0;)l=m;else m=g;if(l=9*((y-j|0)>>2)|0,10<=(o=0|c[j>>2])>>>0)for(n=10;l=l+1|0,(n=10*n|0)>>>0<=o>>>0;);}else m=g;x=j,j=(w=m+4|0)>>>0<s>>>0?w:s}else x=j,j=s;r=0-l|0;b:do{if(x>>>0<j>>>0)for(;;){if(0|c[(m=j+-4|0)>>2]){s=1,w=j;break b}if(!(x>>>0<m>>>0)){s=0,w=m;break}j=m}else s=0,w=j}while(0);do{if(t){if(n=(0|l)<(0|(j=k+(1&(1^u))|0))&-5<(0|l)?(k=j+-1-l|0,i+-1|0):(k=j+-1|0,i+-2|0),!(8&h)){if(s&&0!=(0|(A=0|c[w+-4>>2])))if((A>>>0)%10|0)m=0;else for(j=10,m=0;m=m+1|0,!((A>>>0)%((j=10*j|0)>>>0)|0););else m=9;if(j=(9*((w-y|0)>>2)|0)-9|0,102==(32|n)){k=(0|k)<(0|(i=0<(0|(i=j-m|0))?i:0))?k:i;break}k=(0|k)<(0|(i=0<(0|(i=j+l-m|0))?i:0))?k:i;break}}else n=i}while(0);if(o=(g=0!=(0|k))?1:h>>>3&1,p=102==(32|n))j=(u=0)<(0|l)?l:0;else{if(((m=E)-(j=0|kc(j=(0|l)<0?r:l,((0|j)<0)<<31>>31,E))|0)<2)for(;a[(j=j+-1|0)>>0]=48,(m-j|0)<2;);a[j+-1>>0]=43+(l>>31&2),a[(j=j+-2|0)>>0]=n,j=m-(u=j)|0}if(mc(b,32,f,j=D+1+k+o+j|0,h),ec(b,B,D),mc(b,48,f,j,65536^h),p){p=r=G+9|0,n=G+8|0,m=o=C>>>0<x>>>0?C:x;do{if(l=0|kc(0|c[m>>2],0,r),(0|m)==(0|o))(0|l)==(0|r)&&(a[n>>0]=48,l=n);else if(G>>>0<l>>>0)for(Vc(0|G,48,l-F|0);G>>>0<(l=l+-1|0)>>>0;);}while(ec(b,l,p-l|0),(m=m+4|0)>>>0<=C>>>0);if(0==(8&h|0)&(1^g)||ec(b,2574,1),m>>>0<w>>>0&0<(0|k))for(;;){if(G>>>0<(l=0|kc(0|c[m>>2],0,r))>>>0)for(Vc(0|G,48,l-F|0);G>>>0<(l=l+-1|0)>>>0;);if(ec(b,l,(0|k)<9?k:9),l=k+-9|0,!((m=m+4|0)>>>0<w>>>0&9<(0|k))){k=l;break}k=l}mc(b,48,k+9|0,9,0)}else{if(x>>>0<(g=s?w:x+4|0)>>>0&-1<(0|k)){t=0==(8&h|0),s=r=G+9|0,n=0-F|0,p=G+8|0,o=x;do{(0|(l=0|kc(0|c[o>>2],0,r)))==(0|r)&&(a[p>>0]=48,l=p);do{if((0|o)==(0|x)){if(m=l+1|0,ec(b,l,1),t&(0|k)<1){l=m;break}ec(b,2574,1),l=m}else{if(l>>>0<=G>>>0)break;for(Vc(0|G,48,l+n|0);G>>>0<(l=l+-1|0)>>>0;);}}while(0)}while(ec(b,l,(0|(F=s-l|0))<(0|k)?F:k),(o=o+4|0)>>>0<g>>>0&-1<(0|(k=k-F|0)))}mc(b,48,k+18|0,18,0),ec(b,u,E-u|0)}mc(b,32,f,j,8192^h)}}while(0);return S=H,0|((0|j)<(0|f)?f:j)}function cc(b,d,e){b|=0,d|=0,e|=0;var h,i,j,k,l,m,n,o,f=0,g=0,p=S;for(S=S+224|0,l=p+208|0,n=p+80|0,g=40+(f=o=(m=p)+160|0)|0;(0|(f=f+4|(c[f>>2]=0)))<(0|g););c[l>>2]=c[e>>2],0<=(0|dc(0,d,l,n,o))&&(k=32&(e=0|c[b>>2]),(0|a[b+74>>0])<1&&(c[b>>2]=-33&e),0|c[(g=b+48|0)>>2]?dc(b,d,l,n,o):(e=0|c[(f=b+44|0)>>2],c[f>>2]=m,c[(h=b+28|0)>>2]=m,c[(j=b+20|0)>>2]=m,c[g>>2]=80,c[(i=b+16|0)>>2]=m+80,dc(b,d,l,n,o),0|e&&(X[3&c[b+36>>2]](b,0,0),c[f>>2]=e,c[g>>2]=0,c[i>>2]=0,c[h>>2]=0,c[j>>2]=0)),c[b>>2]=c[b>>2]|k),S=p}function dc(d,e,f,h,i){d|=0,f|=0,h|=0,i|=0;var v,w,x,y,A,B,C,D,E,j=0,k=0,l=0,m=0,n=0,o=0,p=0,q=0,r=0,s=0,t=0,u=0,G=0,F=S;S=S+64|0,B=F+40|0,E=(w=F)+48|0,C=F+60|0,c[(D=F+56|0)>>2]=e|=0,A=0!=(0|d),y=v=w+40|0,w=w+39|0,x=4+E|0,m=j=e=0;a:for(;;){do{do{if(-1<(0|e)){if((2147483647-e|0)<(0|j)){c[922]=61,e=-1;break}e=j+e|0;break}}while(0);if(p=0|c[D>>2],!((j=0|a[p>>0])<<24>>24)){u=91;break a}k=p;b:for(;;){switch(j<<24>>24){case 37:u=10;break b;case 0:j=k;break b}c[D>>2]=t=k+1|0,j=0|a[t>>0],k=t}c:do{if(10==(0|u)){u=0,j=l=k;do{if(37!=(0|a[l+1>>0]))break c}while(j=j+1|0,c[D>>2]=l=l+2|0,37==(0|a[l>>0]))}}while(0)}while(j=j-p|0,A&&ec(d,p,j),0!=(0|j));if(l=0|c[D>>2],o=0|fc(j=0|a[l+1>>0])?(k=(o=36==(0|a[l+2>>0]))?3:1,r=o?j+-48|0:-1,o?1:m):(r=-(k=1),m),c[D>>2]=k=l+k|0,31<(l=((j=0|a[k>>0])<<24>>24)-32|0)>>>0|0==(1<<l&75913|0))n=0;else for(j=0;;){if(m=1<<l|j,c[D>>2]=k=k+1|0,31<(l=((j=0|a[k>>0])<<24>>24)-32|0)>>>0|0==(1<<l&75913|0)){n=m;break}j=m}if(j<<24>>24==42){if(0!=(0|fc(j=0|a[(l=k+1|0)>>0]))&&36==(0|a[k+2>>0]))c[i+(j+-48<<2)>>2]=10,m=1,j=k+3|0,k=0|c[h+((0|a[l>>0])-48<<3)>>2];else{if(0|o){e=-1;break}A?(m=3+(0|c[f>>2])&-4,k=0|c[m>>2],c[f>>2]=m+4,m=0,j=l):(j=l,k=m=0)}l=c[D>>2]=j,q=(s=(0|k)<0)?8192|n:n,t=m,s=s?0-k|0:k}else{if((0|(j=0|gc(D)))<0){e=-1;break}l=0|c[D>>2],q=n,t=o,s=j}do{if(46==(0|a[l>>0])){if(42!=(0|a[(j=l+1|0)>>0])){c[D>>2]=j,n=0|gc(D),j=0|c[D>>2];break}if(0|fc(k=0|a[(j=l+2|0)>>0])&&36==(0|a[l+3>>0])){c[i+(k+-48<<2)>>2]=10,n=0|c[h+((0|a[j>>0])-48<<3)>>2],c[D>>2]=j=l+4|0;break}if(0|t){e=-1;break a}A?(o=3+(0|c[f>>2])&-4,k=0|c[o>>2],c[f>>2]=o+4):k=0,c[D>>2]=j,n=k}else j=l,n=-1}while(0);for(o=0;;){if(57<((0|a[j>>0])-65|0)>>>0){e=-1;break a}if(c[D>>2]=k=j+1|0,!(((m=255&(l=0|a[(0|a[j>>0])-65+(16+(58*o|0))>>0]))-1|0)>>>0<8))break;j=k,o=m}if(!(l<<24>>24)){e=-1;break}k=-1<(0|r);do{if(l<<24>>24==19){if(k){e=-1;break a}u=52}else{if(k){c[i+(r<<2)>>2]=m,r=0|c[4+(m=h+(r<<3)|0)>>2],c[(u=B)>>2]=c[m>>2],c[u+4>>2]=r,u=52;break}if(!A){e=0;break a}hc(B,m,f),u=53}}while(0);52==(0|u)&&(u=0,A?u=53:j=0);d:do{if(53==(0|u)){l=(u=0)!=(0|o)&3==(15&(l=0|a[j>>0])|0)?-33&l:l,j=-65537&q,r=0==(8192&q|0)?q:j;e:do{switch(0|l){case 110:switch((255&o)<<24>>24){case 0:case 1:c[c[B>>2]>>2]=e,j=0;break d;case 2:j=0|c[B>>2],c[j>>2]=e,c[j+4>>2]=((0|e)<0)<<31>>31,j=0;break d;case 3:b[c[B>>2]>>1]=e,j=0;break d;case 4:a[c[B>>2]>>0]=e,j=0;break d;case 6:c[c[B>>2]>>2]=e,j=0;break d;case 7:j=0|c[B>>2],c[j>>2]=e,c[j+4>>2]=((0|e)<0)<<31>>31,j=0;break d;default:j=0;break d}case 112:j=8|r,k=8<n>>>0?n:8,m=120,u=65;break;case 88:case 120:j=r,k=n,m=l,u=65;break;case 111:n=0==(8&(j=r)|0)|(0|(l=y-(o=0|function(b,c,d){if(d|=0,!(0==(0|(b|=0))&0==(0|(c|=0))))for(;a[(d=d+-1|0)>>0]=7&b|48,!(0==(0|(b=0|Rc(0|b,0|c,3)))&0==(0|(c=0|z()))););return 0|d}(p=0|c[(q=B)>>2],q=0|c[q+4>>2],v))|0))<(0|n)?n:l+1|0,l=0,k=2522,u=71;break;case 105:case 100:if(j=0|c[(k=B)>>2],(0|(k=0|c[k+4>>2]))<0){j=0|Nc(0,0,0|j,0|k),k=0|z(),c[(l=B)>>2]=j,c[l+4>>2]=k,l=1,m=2522,u=70;break e}l=0!=(2049&r|0)&1,m=0==(2048&r|0)?0==(1&r|0)?2522:2524:2523,u=70;break e;case 117:j=0|c[(k=B)>>2],k=0|c[k+4>>2],l=0,m=2522,u=70;break;case 99:a[w>>0]=c[B>>2],p=w,o=j,m=1,l=0,k=2522,j=y;break;case 115:p=q=0==(0|(q=0|c[B>>2]))?2532:q,o=j,m=(G=0==(0|(r=0|function(b,d){b|=0;var e=0,f=0,e=0!=(0|(d|=0));a:do{if(e&0!=(3&b|0))for(;;){if(!(0|a[b>>0]))break a;if(!((e=0!=(0|(d=d+-1|0)))&0!=(3&(b=b+1|0)|0))){f=5;break}}else f=5}while(0);b:do{if(5==(0|f)){do{if(e){if(!(0|a[b>>0])){if(d)break b;break}c:do{if(3<d>>>0)for(;;){if((-2139062144&(e=0|c[b>>2])^-2139062144)&e+-16843009|0)break c;if(b=b+4|0,(d=d+-4|0)>>>0<=3){f=11;break}}else f=11}while(0);if(11==(0|f)&&!d)break;for(;;){if(!(0|a[b>>0]))break b;if(!(d=d+-1|0))break;b=b+1|0}}}while(0);b=0}}while(0);return 0|b}(q,n))))?n:r-q|0,l=0,k=2522,j=G?q+n|0:r;break;case 67:c[E>>2]=c[B>>2],c[x>>2]=0,l=c[B>>2]=E,n=-1,u=78;break;case 83:if(n){l=0|c[B>>2],u=78;break e}mc(d,32,s,0,r),j=0,u=88;break e;case 65:case 71:case 70:case 69:case 97:case 103:case 102:case 101:j=0|ac(d,+g[B>>3],s,n,r,l);break d;default:o=r,m=n,l=0,k=2522,j=y}}while(0);f:do{if(65==(0|u))o=0|ic(p=0|c[(q=B)>>2],q=0|c[q+4>>2],v,32&m),n=k,l=(G=0==(8&j|0)|0==(0|p)&0==(0|q))?0:2,k=G?2522:2522+(m>>>4)|0,u=71;else if(70==(0|u))o=0|kc(p=j,q=k,v),j=r,k=m,u=71;else if(78==(0|u)){for(j=u=0,o=l;k=0|c[o>>2];){if((m=(0|(k=0|nc(C,k)))<0)|(n-j|0)>>>0<k>>>0){u=82;break}if(!((j=k+j|0)>>>0<n>>>0))break;o=o+4|0}if(82==(0|u)&&(u=0,m)){e=-1;break a}if(mc(d,32,s,j,r),j)for(m=0;;){if(!(k=0|c[l>>2])){u=88;break f}if((0|j)<(0|(m=(k=0|nc(C,k))+m|0))){u=88;break f}if(ec(d,C,k),j>>>0<=m>>>0){u=88;break}l=l+4|0}else j=0,u=88}}while(0);if(71==(0|u))G=(u=0)!=(0|n)|(m=0!=(0|p)|0!=(0|q)),m=y-o+(1&(1^m))|0,p=G?o:v,o=-1<(0|n)?-65537&j:j,m=G?(0|m)<(0|n)?n:m:0,j=y;else if(88==(0|u)){u=0,mc(d,32,s,j,8192^r),j=(0|j)<(0|s)?s:j;break}mc(d,32,j=(0|s)<(0|(G=(q=(0|m)<(0|(r=j-p|0))?r:m)+l|0))?G:s,G,o),ec(d,k,l),mc(d,48,j,G,65536^o),mc(d,48,q,r,0),ec(d,p,r),mc(d,32,j,G,8192^o)}}while(0);m=t}g:do{if(91==(0|u)&&!d)if(m){for(e=1;j=0|c[i+(e<<2)>>2];)if(hc(h+(e<<3)|0,j,f),10<=(e=e+1|0)>>>0){e=1;break g}for(j=0;;){if(e=e+1|0,0|j){e=-1;break g}if(10<=e>>>0){e=1;break g}j=0|c[i+(e<<2)>>2]}}else e=0}while(0);return S=F,0|e}function ec(a,b,d){b|=0,d|=0,32&c[(a|=0)>>2]||pc(b,d,a)}function fc(a){return((0|a)-48|0)>>>0<10|0}function gc(b){var d=0,e=0,f=0,e=0|c[(b|=0)>>2];if(0|fc((d=0|a[e>>0])<<24>>24))for(f=d,d=0;d=(10*d|0)-48+(f<<24>>24)|0,c[b>>2]=e=e+1|0,0!=(0|fc((f=0|a[e>>0])<<24>>24)););else d=0;return 0|d}function hc(a,b,d){a|=0,b|=0,d|=0;var h,e=0,f=0;a:do{if(b>>>0<=20)switch(0|b){case 9:e=3+(0|c[d>>2])&-4,b=0|c[e>>2],c[d>>2]=e+4,c[a>>2]=b;break a;case 10:e=3+(0|c[d>>2])&-4,b=0|c[e>>2],c[d>>2]=e+4,c[(e=a)>>2]=b,c[e+4>>2]=((0|b)<0)<<31>>31;break a;case 11:e=3+(0|c[d>>2])&-4,b=0|c[e>>2],c[d>>2]=e+4,c[(e=a)>>2]=b,c[e+4>>2]=0;break a;case 12:e=7+(0|c[d>>2])&-8,f=0|c[(b=e)>>2],b=0|c[b+4>>2],c[d>>2]=e+8,c[(e=a)>>2]=f,c[e+4>>2]=b;break a;case 13:f=3+(0|c[d>>2])&-4,e=0|c[f>>2],c[d>>2]=f+4,c[(f=a)>>2]=e=(65535&e)<<16>>16,c[f+4>>2]=((0|e)<0)<<31>>31;break a;case 14:f=3+(0|c[d>>2])&-4,e=0|c[f>>2],c[d>>2]=f+4,c[(f=a)>>2]=65535&e,c[f+4>>2]=0;break a;case 15:f=3+(0|c[d>>2])&-4,e=0|c[f>>2],c[d>>2]=f+4,c[(f=a)>>2]=e=(255&e)<<24>>24,c[f+4>>2]=((0|e)<0)<<31>>31;break a;case 16:f=3+(0|c[d>>2])&-4,e=0|c[f>>2],c[d>>2]=f+4,c[(f=a)>>2]=255&e,c[f+4>>2]=0;break a;case 17:f=7+(0|c[d>>2])&-8,h=+g[f>>3],c[d>>2]=f+8,g[a>>3]=h;break a;case 18:!function(a,b){a|=0;var e=7+(0|c[(b|=0)>>2])&-8,d=+g[e>>3];c[b>>2]=8+e,g[a>>3]=d}(a,d);break a;default:break a}}while(0)}function ic(b,c,e,f){if(e|=0,f|=0,!(0==(0|(b|=0))&0==(0|(c|=0))))for(;a[(e=e+-1|0)>>0]=0|d[480+(15&b)>>0]|f,!(0==(0|(b=0|Rc(0|b,0|c,4)))&0==(0|(c=0|z()))););return 0|e}function kc(b,c,d){d|=0;var e,f=0,g=0;if(0<(c|=0)>>>0|0==(0|c)&4294967295<(b|=0)>>>0)for(;g=0|Mc(0|(e=b),0|(f=c),0|(g=0|Lc(0|(b=0|Qc(0|b,0|c,10,0)),0|(c=0|z()),-10,-1)),0|z()),z(),a[(d=d+-1|0)>>0]=255&g|48,9<f>>>0|9==(0|f)&4294967295<e>>>0;);if(b)for(;f=255&((g=b)+(0|v(b=(b>>>0)/10|0,-10))|48),a[(d=d+-1|0)>>0]=f,10<=g>>>0;);return 0|d}function mc(a,b,c,d,e){a|=0,b|=0;var f,g=S;if(S=S+256|0,f=g,(0|(d|=0))<(0|(c|=0))&0==(73728&(e|=0)|0)){if(Vc(0|f,b<<24>>24|0,0|((e=c-d|0)>>>0<256?e:256)),255<e>>>0){for(d=e;ec(a,f,256),255<(d=d+-256|0)>>>0;);e&=255}ec(a,f,e)}S=g}function nc(a,b){return b|=0,0|((a|=0)?0|oc(a,b):0)}function oc(b,d){b|=0,d|=0;do{if(b){if(d>>>0<128){a[b>>0]=d,b=1;break}if(!(0|c[916])){if(57216==(-128&d|0)){a[b>>0]=d,b=1;break}c[922]=25,b=-1;break}if(d>>>0<2048){a[b>>0]=d>>>6|192,a[b+1>>0]=63&d|128,b=2;break}if(d>>>0<55296|57344==(-8192&d|0)){a[b>>0]=d>>>12|224,a[b+1>>0]=d>>>6&63|128,a[b+2>>0]=63&d|128,b=3;break}if((d+-65536|0)>>>0<1048576){a[b>>0]=d>>>18|240,a[b+1>>0]=d>>>12&63|128,a[b+2>>0]=d>>>6&63|128,a[b+3>>0]=63&d|128,b=4;break}c[922]=25,b=-1;break}}while(b=1,0);return 0|b}function pc(b,d,e){b|=0,d|=0;var i,f=0,g=0,h=0;(f=0|c[(g=16+(e|=0)|0)>>2])?h=5:0|function(b){var d=0,e=0|a[(d=74+(b|=0)|0)>>0];return a[d>>0]=255+e|e,0|(d=8&(d=0|c[b>>2])?(c[b>>2]=32|d,-1):(c[8+b>>2]=0,d=(c[4+b>>2]=0)|c[44+b>>2],c[28+b>>2]=d,c[20+b>>2]=d,c[16+b>>2]=d+(0|c[48+b>>2]),0))}(e)||(f=0|c[g>>2],h=5);a:do{if(5==(0|h)){if((f-(g=h=0|c[(i=e+20|0)>>2])|0)>>>0<d>>>0){X[3&c[e+36>>2]](e,b,d);break}b:do{if((0|a[e+75>>0])<0|0==(0|d))f=d;else{for(h=d;10!=(0|a[b+(f=h+-1|0)>>0]);){if(!f){f=d;break b}h=f}if((0|X[3&c[e+36>>2]](e,b,h))>>>0<h>>>0)break a;g=0|c[i>>2],f=d-h|0,b=b+h|0}}while(0);Uc(0|g,0|b,0|f),c[i>>2]=(0|c[i>>2])+f}}while(0)}function rc(a){g[h>>3]=a=+a,a=0|c[h>>2],y(0|c[h+4>>2])}function sc(a,b){b|=0;var e,f,d=0;switch(g[h>>3]=a=+a,f=0|Rc(0|(d=0|c[h>>2]),0|(e=0|c[h+4>>2]),52),z(),2047&f){case 0:d=0!=a?(a=+sc(0x10000000000000000*a,b),(0|c[b>>2])-64|0):0,c[b>>2]=d;break;case 2047:break;default:c[b>>2]=(2047&f)-1022,c[h>>2]=d,c[h+4>>2]=-2146435073&e|1071644672,a=+g[h>>3]}return+a}function uc(b){var g,c=0,e=0,f=0,c=0|a[(b|=0)>>0];a:do{if(c<<24>>24)for(e=b,f=4,b=1033;;){if(!(c<<24>>24==(g=0|a[b>>0])<<24>>24&0!=(0|(f=f+-1|0))&g<<24>>24!=0))break a;if(b=b+1|0,!((c=0|a[(e=e+1|0)>>0])<<24>>24)){c=0;break}}else c=0,b=1033}while(0);return(255&c)-(0|d[b>>0])|0}function xc(a,b,d){b|=0,d|=0;var g,h,i,e=0,f=0,j=S;S=S+240|0,c[(i=j)>>2]=a|=0;a:do{if(1<(0|b))for(f=e=a,a=1;;){if(-1<(0|oa(e,g=(f=f+-4|0)+(0-(0|c[d+((h=b+-2|0)<<2)>>2]))|0))&&-1<(0|oa(e,f)))break a;if(e=i+(a<<2)|0,a=a+1|0,(0|(b=-1<(0|oa(g,f))?(f=c[e>>2]=g,b+-1|0):(c[e>>2]=f,h)))<=1)break a;e=0|c[i>>2]}else a=1}while(0);Dc(i,a),S=j}function yc(a,b){var d=0,e=0,f=4+(a|=0)|0;31<(b|=0)>>>0?(d=0|c[f>>2],c[a>>2]=d,b=b+-32|(e=c[f>>2]=0)):(d=0|c[a>>2],e=0|c[f>>2]),c[a>>2]=e<<32-b|(b?d>>>b:d),c[f>>2]=b?e>>>b:e}function zc(a,b,d,e,f,g){a|=0,d|=0,e|=0,f|=0,g|=0;var j,k,l,h=0,i=0,m=S;S=S+240|0,c[(k=(l=m)+232|0)>>2]=b|=0,c[(j=4+k|0)>>2]=d,c[l>>2]=a;a:do{if(1!=(0|b)|0!=(0|d)&&1<=(0|oa(h=a+(0-(0|c[g+(e<<2)>>2]))|0,a)))for(b=h,i=1,h=0==(0|f);;){if(h&1<(0|e)){if(-1<(0|oa(h=a+-4|0,b))){b=a,h=i,d=10;break a}if(-1<(0|oa(h+(0-(0|c[g+(e+-2<<2)>>2]))|0,b))){b=a,h=i,d=10;break a}}if(d=i+1|0,c[l+(i<<2)>>2]=b,yc(k,f=0|Bc(k)),e=f+e|0,!(1!=(0|c[k>>2])|0!=(0|c[j>>2]))){h=d,d=10;break a}if((0|oa(h=b+(0-(0|c[g+(e<<2)>>2]))|0,0|c[l>>2]))<1){h=d,d=10;break}a=b,b=h,i=d,h=1}else d=9}while(0);9==(0|d)&&0==(0|f)&&(b=a,h=1,d=10),10==(0|d)&&(Dc(l,h),xc(b,e,g)),S=m}function Ac(a,b){var d=0,e=0,f=4+(a|=0)|0;31<(b|=0)>>>0?(d=0|c[a>>2],c[f>>2]=d,b=b+-32|(e=c[a>>2]=0)):(d=0|c[f>>2],e=0|c[a>>2]),c[f>>2]=((f=32-b|0)?e>>>f:e)|d<<b,c[a>>2]=e<<b}function Bc(a){var b;return(b=0|Cc((0|c[(a|=0)>>2])-1|0))?0|b:0|(0==(0|(a=0|Cc(0|c[a+4>>2])))?0:a+32|0)}function Cc(a){var b=0;if(a|=0)if(1&a)b=0;else for(b=0;b=b+1|0,!(2&a);)a>>>=1;else b=32;return 0|b}function Dc(a,b){a|=0;var f,d=0,e=S;if(S=S+256|0,d=e,2<=(0|(b|=0)))for(Uc(0|(c[a+(b<<2)>>2]=d),0|c[a>>2],4),d=0;Uc(0|c[(f=a+(d<<2)|0)>>2],0|c[a+((d=d+1|0)<<2)>>2],4),c[f>>2]=4+(0|c[f>>2]),(0|d)!=(0|b););S=e}function Ec(a){a|=0;var b=0,d=0,e=0,f=0,g=0,h=0,i=0,j=0,k=0,l=0,m=0,n=0,o=0,p=0,q=0,r=0,s=0,t=0,u=0,v=0,w=S;S=S+16|0,n=w;do{if(a>>>0<245){if(m=0|c[923],3&(d=(a=(k=a>>>0<11?16:a+11&-8)>>>3)?m>>>a:m)|0)return a=0|c[(b=8+(f=3732+((e=(1&d^1)+a|0)<<1<<2)|0)|0)>>2],(0|(d=0|c[(g=a+8|0)>>2]))==(0|f)?c[923]=m&~(1<<e):(c[d+12>>2]=f,c[b>>2]=d),c[a+4>>2]=3|(v=e<<3),c[(v=a+v+4|0)>>2]=1|c[v>>2],S=w,0|g;if((l=0|c[925])>>>0<k>>>0){if(0|d)return g=0|c[(b=8+(d=3732+((e=((a=(e=(i=(e=((e=d<<a&((e=2<<a)|0-e))&0-e)-1|0)>>>12&16)?e>>>i:e)>>>5&8)|i|(g=(e=a?e>>>a:e)>>>2&4)|(b=(e=g?e>>>g:e)>>>1&2)|(d=(e=b?e>>>b:e)>>>1&1))+(d?e>>>d:e)|0)<<1<<2)|0)|0)>>2],(0|(a=0|c[(i=g+8|0)>>2]))==(0|d)?c[923]=a=m&~(1<<e):(c[a+12>>2]=d,c[b>>2]=a,a=m),h=(v=e<<3)-k|0,c[g+4>>2]=3|k,c[4+(f=g+k|0)>>2]=1|h,c[g+v>>2]=h,0|l&&(e=0|c[928],d=3732+((b=l>>>3)<<1<<2)|0,a=a&(b=1<<b)?0|c[(b=a=d+8|0)>>2]:(c[923]=a|b,b=d+8|0,d),c[b>>2]=e,c[a+12>>2]=e,c[e+8>>2]=a,c[e+12>>2]=d),c[925]=h,c[928]=f,S=w,0|i;if(g=0|c[924]){for(j=0|c[3996+(((e=(j=(f=(j=(g&0-g)-1|0)>>>12&16)?j>>>f:j)>>>5&8)|f|(h=(j=e?j>>>e:j)>>>2&4)|(d=(j=h?j>>>h:j)>>>1&2)|(i=(j=d?j>>>d:j)>>>1&1))+(i?j>>>i:j)<<2)>>2],i=(-8&c[j+4>>2])-k|0,d=j;(a=0|c[d+16>>2])||(a=0|c[d+20>>2]);)i=(h=(d=(-8&c[a+4>>2])-k|0)>>>0<i>>>0)?d:i,d=a,j=h?a:j;if(j>>>0<(h=j+k|0)>>>0){f=0|c[j+24>>2],b=0|c[j+12>>2];do{if((0|b)==(0|j)){if(!(b=0|c[(a=j+20|0)>>2])&&!(b=0|c[(a=j+16|0)>>2])){d=0;break}for(;;)if(d=0|c[(e=b+20|0)>>2])b=d,a=e;else{if(!(d=0|c[(e=b+16|0)>>2]))break;b=d,a=e}c[a>>2]=0,d=b}else d=0|c[j+8>>2],c[d+12>>2]=b,c[b+8>>2]=d,d=b}while(0);do{if(0|f){if(b=0|c[j+28>>2],(0|j)==(0|c[(a=3996+(b<<2)|0)>>2])){if(!(c[a>>2]=d)){c[924]=g&~(1<<b);break}}else if(!(c[((0|c[(v=f+16|0)>>2])==(0|j)?v:f+20|0)>>2]=d))break;c[d+24>>2]=f,0|(b=0|c[j+16>>2])&&(c[d+16>>2]=b,c[b+24>>2]=d),0|(b=0|c[j+20>>2])&&(c[d+20>>2]=b,c[b+24>>2]=d)}}while(0);return i>>>0<16?(c[j+4>>2]=3|(v=i+k|0),c[(v=j+v+4|0)>>2]=1|c[v>>2]):(c[j+4>>2]=3|k,c[h+4>>2]=1|i,c[h+i>>2]=i,0|l&&(e=0|c[928],d=3732+((b=l>>>3)<<1<<2)|0,a=(b=1<<b)&m?0|c[(b=a=d+8|0)>>2]:(c[923]=b|m,b=d+8|0,d),c[b>>2]=e,c[a+12>>2]=e,c[e+8>>2]=a,c[e+12>>2]=d),c[925]=i,c[928]=h),S=w,j+8|0}m=k}else m=k}else m=k}else if(a>>>0<=4294967231)if(k=-8&(a=a+11|0),e=0|c[924]){d=0-k|0,j=(a>>>=8)?16777215<k>>>0?31:1&((r=7+(j=14-((i=(520192+(j=a<<(m=(a+1048320|0)>>>16&8))|0)>>>16&4)|m|(r=(245760+(j<<=i)|0)>>>16&2))+(j<<r>>>15)|0)|0)?k>>>r:k)|j<<1:0,a=0|c[3996+(j<<2)>>2];a:do{if(a)for(h=k<<(31==((f=0)|j)?0:25-(j>>>1)|0),i=a,a=0;;){if((g=(-8&c[i+4>>2])-k|0)>>>0<d>>>0){if(!g){d=0,a=f=i,r=65;break a}d=g,a=i}if(f=0==(0|(r=0|c[i+20>>2]))|(0|r)==(0|(i=0|c[i+16+(h>>>31<<2)>>2]))?f:r,!i){r=61;break}h<<=1}else a=f=0,r=61}while(0);if(61==(0|r)){if(0==(0|f)&0==(0|a)){if(!(a=((a=2<<j)|0-a)&e)){m=k;break}f=0|c[3996+(((h=(f=(i=(f=(a&0-a)-1|0)>>>12&16)?f>>>i:f)>>>5&8)|i|(j=(f=h?f>>>h:f)>>>2&4)|(m=(f=j?f>>>j:f)>>>1&2)|(a=(f=m?f>>>m:f)>>>1&1))+(a?f>>>a:f)<<2)>>2],a=0}f?r=65:(i=d,g=a)}if(65==(0|r))for(;;){if(d=(g=(m=(-8&c[f+4>>2])-k|0)>>>0<d>>>0)?m:d,g=g?f:a,!(a=(a=0|c[f+16>>2])||0|c[f+20>>2])){i=d;break}f=a,a=g}if(0!=(0|g)&&i>>>0<((0|c[925])-k|0)>>>0&&g>>>0<(l=g+k|0)>>>0){h=0|c[g+24>>2],b=0|c[g+12>>2];do{if((0|b)==(0|g)){if(!(b=0|c[(a=g+20|0)>>2])&&!(b=0|c[(a=g+16|0)>>2])){b=0;break}for(;;)if(d=0|c[(f=b+20|0)>>2])b=d,a=f;else{if(!(d=0|c[(f=b+16|0)>>2]))break;b=d,a=f}c[a>>2]=0}else v=0|c[g+8>>2],c[v+12>>2]=b,c[b+8>>2]=v}while(0);do{if(h){if(a=0|c[g+28>>2],(0|g)==(0|c[(d=3996+(a<<2)|0)>>2])){if(!(c[d>>2]=b)){e&=~(1<<a),c[924]=e;break}}else if(!(c[((0|c[(v=h+16|0)>>2])==(0|g)?v:h+20|0)>>2]=b))break;c[b+24>>2]=h,0|(a=0|c[g+16>>2])&&(c[b+16>>2]=a,c[a+24>>2]=b),(a=0|c[g+20>>2])&&(c[b+20>>2]=a,c[a+24>>2]=b)}}while(0);b:do{if(i>>>0<16)c[g+4>>2]=3|(v=i+k|0),c[(v=g+v+4|0)>>2]=1|c[v>>2];else{if(c[g+4>>2]=3|k,c[l+4>>2]=1|i,b=(c[l+i>>2]=i)>>>3,i>>>0<256){d=3732+(b<<1<<2)|0,a=(a=0|c[923])&(b=1<<b)?0|c[(b=a=d+8|0)>>2]:(c[923]=a|b,b=d+8|0,d),c[b>>2]=l,c[a+12>>2]=l,c[l+8>>2]=a,c[l+12>>2]=d;break}if(b=3996+((d=(b=i>>>8)?16777215<i>>>0?31:1&((v=7+(d=14-((t=(520192+(d=b<<(u=(b+1048320|0)>>>16&8))|0)>>>16&4)|u|(v=(245760+(d<<=t)|0)>>>16&2))+(d<<v>>>15)|0)|0)?i>>>v:i)|d<<1:0)<<2)|0,c[l+28>>2]=d,c[4+(a=l+16|0)>>2]=0,c[a>>2]=0,!(e&(a=1<<d))){c[924]=e|a,c[b>>2]=l,c[l+24>>2]=b,c[l+12>>2]=l,c[l+8>>2]=l;break}b=0|c[b>>2];c:do{if((-8&c[b+4>>2]|0)!=(0|i)){for(e=i<<(31==(0|d)?0:25-(d>>>1)|0);a=0|c[(d=b+16+(e>>>31<<2)|0)>>2];){if((-8&c[a+4>>2]|0)==(0|i)){b=a;break c}e<<=1,b=a}c[d>>2]=l,c[l+24>>2]=b,c[l+12>>2]=l,c[l+8>>2]=l;break b}}while(0);v=0|c[(u=b+8|0)>>2],c[v+12>>2]=l,c[u>>2]=l,c[l+8>>2]=v,c[l+12>>2]=b,c[l+24>>2]=0}}while(0);return S=w,g+8|0}m=k}else m=k;else m=-1}while(0);if(m>>>0<=(d=0|c[925])>>>0)return b=0|c[928],15<(a=d-m|0)>>>0?(c[928]=v=b+m|0,c[925]=a,c[v+4>>2]=1|a,c[b+d>>2]=a,c[b+4>>2]=3|m):(c[925]=0,c[928]=0,c[b+4>>2]=3|d,c[(v=b+d+4|0)>>2]=1|c[v>>2]),S=w,b+8|0;if(m>>>0<(h=0|c[926])>>>0)return c[926]=t=h-m|0,v=0|c[929],c[929]=u=v+m|0,c[u+4>>2]=1|t,c[v+4>>2]=3|m,S=w,v+8|0;if(i=m+48|0,(k=(g=(a=0|c[1041]?0|c[1043]:(c[1043]=4096,c[1042]=4096,c[1044]=-1,c[1045]=-1,c[1046]=0,c[1034]=0,c[1041]=-16&n^1431655768,4096))+(j=m+47|0)|0)&(e=0-a|0))>>>0<=m>>>0)return S=w,(v=0)|v;if(0|(a=0|c[1033])&&(n=(l=0|c[1031])+k|0)>>>0<=l>>>0|a>>>0<n>>>0)return S=w,(v=0)|v;d:do{if(4&c[1034])b=0,r=143;else{d=0|c[929];e:do{if(d){for(f=4140;!((a=0|c[f>>2])>>>0<=d>>>0&&(a+(0|c[(q=f+4|0)>>2])|0)>>>0>d>>>0);){if(!(a=0|c[f+8>>2])){r=128;break e}f=a}if((b=g-h&e)>>>0<2147483647)if((0|(a=0|Jc(b)))==((0|c[f>>2])+(0|c[q>>2])|0)){if(-1!=(0|a)){h=a,g=b,r=145;break d}}else e=a,r=136;else b=0}else r=128}while(0);do{if(128==(0|r))if(-1!=(0|(d=0|Jc(0)))&&(b=d,p=(b=(0==((p=(o=0|c[1042])-1|0)&b|0)?0:(p+b&0-o)-b|0)+k|0)+(o=0|c[1031])|0,m>>>0<b>>>0&b>>>0<2147483647)){if(0|(q=0|c[1033])&&p>>>0<=o>>>0|q>>>0<p>>>0){b=0;break}if((0|(a=0|Jc(b)))==(0|d)){h=d,g=b,r=145;break d}e=a,r=136}else b=0}while(0);do{if(136==(0|r)){if(d=0-b|0,!(b>>>0<i>>>0&b>>>0<2147483647&-1!=(0|e))){if(-1==(0|e)){b=0;break}h=e,g=b,r=145;break d}if(2147483647<=(a=j-b+(a=0|c[1043])&0-a)>>>0){h=e,g=b,r=145;break d}if(-1==(0|Jc(a))){Jc(d),b=0;break}h=e,g=a+b|0,r=145;break d}}while(0);c[1034]=4|c[1034],r=143}}while(0);if(143==(0|r)&&k>>>0<2147483647&&!(-1==(0|(s=0|Jc(k)))|1^(t=(m+40|0)>>>0<(u=(q=0|Jc(0))-s|0)>>>0)|s>>>0<q>>>0&-1!=(0|s)&-1!=(0|q)^1)&&(h=s,g=t?u:b,r=145),145==(0|r)){b=(0|c[1031])+g|0,(c[1031]=b)>>>0>(0|c[1032])>>>0&&(c[1032]=b),j=0|c[929];f:do{if(j){for(f=4140;;){if((0|h)==((b=0|c[f>>2])+(a=0|c[(e=f+4|0)>>2])|0)){r=154;break}if(!(d=0|c[f+8>>2]))break;f=d}if(154==(0|r)&&0==(8&c[f+12>>2]|0)&&j>>>0<h>>>0&b>>>0<=j>>>0){c[e>>2]=a+g,u=j+(t=0==(7&(t=j+8|0)|0)?0:0-t&7)|0,t=(v=(0|c[926])+g|0)-t|0,c[929]=u,c[926]=t,c[u+4>>2]=1|t,c[j+v+4>>2]=40,c[930]=c[1045];break}for(h>>>0<(0|c[927])>>>0&&(c[927]=h),d=h+g|0,a=4140;;){if((0|c[a>>2])==(0|d)){r=162;break}if(!(b=0|c[a+8>>2]))break;a=b}if(162==(0|r)&&0==(8&c[a+12>>2]|0)){c[a>>2]=h,c[(l=a+4|0)>>2]=(0|c[l>>2])+g,k=(l=h+(0==(7&(l=h+8|0)|0)?0:0-l&7)|0)+m|0,i=(b=d+(0==(7&(b=d+8|0)|0)?0:0-b&7)|0)-l-m|0,c[l+4>>2]=3|m;g:do{if((0|j)==(0|b))v=(0|c[926])+i|0,c[926]=v,c[929]=k,c[k+4>>2]=1|v;else{if((0|c[928])==(0|b)){v=(0|c[925])+i|0,c[925]=v,c[928]=k,c[k+4>>2]=1|v,c[k+v>>2]=v;break}if(1==(3&(a=0|c[b+4>>2])|0)){h=-8&a,e=a>>>3;h:do{if(a>>>0<256){if(a=0|c[b+8>>2],(0|(d=0|c[b+12>>2]))==(0|a)){c[923]=c[923]&~(1<<e);break}c[a+12>>2]=d,c[d+8>>2]=a;break}g=0|c[b+24>>2],a=0|c[b+12>>2];do{if((0|a)==(0|b)){if(!(a=0|c[(d=4+(e=b+16|0)|0)>>2])){if(!(a=0|c[e>>2])){a=0;break}d=e}for(;;)if(e=0|c[(f=a+20|0)>>2])a=e,d=f;else{if(!(e=0|c[(f=a+16|0)>>2]))break;a=e,d=f}c[d>>2]=0}else v=0|c[b+8>>2],c[v+12>>2]=a,c[a+8>>2]=v}while(0);if(!g)break;e=3996+((d=0|c[b+28>>2])<<2)|0;do{if((0|c[e>>2])==(0|b)){if(0|(c[e>>2]=a))break;c[924]=c[924]&~(1<<d);break h}if(!(c[((0|c[(v=g+16|0)>>2])==(0|b)?v:g+20|0)>>2]=a))break h}while(0)}while(c[a+24>>2]=g,0|(d=0|c[(e=b+16|0)>>2])&&(c[a+16>>2]=d,c[d+24>>2]=a),(d=0|c[e+4>>2])&&(c[a+20>>2]=d,c[d+24>>2]=a,0));b=b+h|0,f=h+i|0}else f=i;if(c[(b=b+4|0)>>2]=-2&c[b>>2],c[k+4>>2]=1|f,b=(c[k+f>>2]=f)>>>3,f>>>0<256){d=3732+(b<<1<<2)|0,a=(a=0|c[923])&(b=1<<b)?0|c[(b=a=d+8|0)>>2]:(c[923]=a|b,b=d+8|0,d),c[b>>2]=k,c[a+12>>2]=k,c[k+8>>2]=a,c[k+12>>2]=d;break}b=f>>>8;do{if(b){if(16777215<f>>>0){e=31;break}e=1&((v=7+(e=14-((t=(520192+(e=b<<(u=(b+1048320|0)>>>16&8))|0)>>>16&4)|u|(v=(245760+(e<<=t)|0)>>>16&2))+(e<<v>>>15)|0)|0)?f>>>v:f)|e<<1}else e=0}while(0);if(a=3996+(e<<2)|0,c[k+28>>2]=e,c[4+(b=k+16|0)>>2]=0,!((b=(c[b>>2]=0)|c[924])&(d=1<<e))){c[924]=b|d,c[a>>2]=k,c[k+24>>2]=a,c[k+12>>2]=k,c[k+8>>2]=k;break}b=0|c[a>>2];i:do{if((-8&c[b+4>>2]|0)!=(0|f)){for(e=f<<(31==(0|e)?0:25-(e>>>1)|0);a=0|c[(d=b+16+(e>>>31<<2)|0)>>2];){if((-8&c[a+4>>2]|0)==(0|f)){b=a;break i}e<<=1,b=a}c[d>>2]=k,c[k+24>>2]=b,c[k+12>>2]=k,c[k+8>>2]=k;break g}}while(0);v=0|c[(u=b+8|0)>>2],c[v+12>>2]=k,c[u>>2]=k,c[k+8>>2]=v,c[k+12>>2]=b,c[k+24>>2]=0}}while(0);return S=w,l+8|0}for(a=4140;!((b=0|c[a>>2])>>>0<=j>>>0&&j>>>0<(v=b+(0|c[a+4>>2])|0)>>>0);)a=0|c[a+8>>2];for(b=(a=(a=(f=v+-47|0)+(0==(7&(a=f+8|0)|0)?0:0-a&7)|0)>>>0<(f=j+16|0)>>>0?j:a)+8|0,u=h+(t=0==(7&(t=h+8|0)|0)?0:0-t&7)|0,t=(d=g+-40|0)-t|0,c[929]=u,c[926]=t,c[u+4>>2]=1|t,c[h+d+4>>2]=40,c[930]=c[1045],c[(d=a+4|0)>>2]=27,c[b>>2]=c[1035],c[b+4>>2]=c[1036],c[b+8>>2]=c[1037],c[b+12>>2]=c[1038],c[1035]=h,c[1036]=g,c[1038]=0,c[1037]=b,b=a+24|0;c[(b=(u=b)+4|0)>>2]=7,(u+8|0)>>>0<v>>>0;);if((0|a)!=(0|j)){if(g=a-j|0,c[d>>2]=-2&c[d>>2],c[j+4>>2]=1|g,b=(c[a>>2]=g)>>>3,g>>>0<256){d=3732+(b<<1<<2)|0,a=(a=0|c[923])&(b=1<<b)?0|c[(b=a=d+8|0)>>2]:(c[923]=a|b,b=d+8|0,d),c[b>>2]=j,c[a+12>>2]=j,c[j+8>>2]=a,c[j+12>>2]=d;break}if(d=3996+((e=(b=g>>>8)?16777215<g>>>0?31:1&((v=7+(e=14-((t=(520192+(e=b<<(u=(b+1048320|0)>>>16&8))|0)>>>16&4)|u|(v=(245760+(e<<=t)|0)>>>16&2))+(e<<v>>>15)|0)|0)?g>>>v:g)|e<<1:0)<<2)|0,c[j+28>>2]=e,c[j+20>>2]=0,!((b=(c[f>>2]=0)|c[924])&(a=1<<e))){c[924]=b|a,c[d>>2]=j,c[j+24>>2]=d,c[j+12>>2]=j,c[j+8>>2]=j;break}b=0|c[d>>2];j:do{if((-8&c[b+4>>2]|0)!=(0|g)){for(e=g<<(31==(0|e)?0:25-(e>>>1)|0);a=0|c[(d=b+16+(e>>>31<<2)|0)>>2];){if((-8&c[a+4>>2]|0)==(0|g)){b=a;break j}e<<=1,b=a}c[d>>2]=j,c[j+24>>2]=b,c[j+12>>2]=j,c[j+8>>2]=j;break f}}while(0);v=0|c[(u=b+8|0)>>2],c[v+12>>2]=j,c[u>>2]=j,c[j+8>>2]=v,c[j+12>>2]=b,c[j+24>>2]=0}}else 0==(0|(v=0|c[927]))|h>>>0<v>>>0&&(c[927]=h),c[1035]=h,c[1036]=g,c[1038]=0,c[932]=c[1041],c[931]=-1,c[936]=3732,c[935]=3732,c[938]=3740,c[937]=3740,c[940]=3748,c[939]=3748,c[942]=3756,c[941]=3756,c[944]=3764,c[943]=3764,c[946]=3772,c[945]=3772,c[948]=3780,c[947]=3780,c[950]=3788,c[949]=3788,c[952]=3796,c[951]=3796,c[954]=3804,c[953]=3804,c[956]=3812,c[955]=3812,c[958]=3820,c[957]=3820,c[960]=3828,c[959]=3828,c[962]=3836,c[961]=3836,c[964]=3844,c[963]=3844,c[966]=3852,c[965]=3852,c[968]=3860,c[967]=3860,c[970]=3868,c[969]=3868,c[972]=3876,c[971]=3876,c[974]=3884,c[973]=3884,c[976]=3892,c[975]=3892,c[978]=3900,c[977]=3900,c[980]=3908,c[979]=3908,c[982]=3916,c[981]=3916,c[984]=3924,c[983]=3924,c[986]=3932,c[985]=3932,c[988]=3940,c[987]=3940,c[990]=3948,c[989]=3948,c[992]=3956,c[991]=3956,c[994]=3964,c[993]=3964,c[996]=3972,c[995]=3972,c[998]=3980,c[997]=3980,u=h+(t=0==(7&(t=h+8|0)|0)?0:0-t&7)|0,t=(v=g+-40|0)-t|0,c[929]=u,c[926]=t,c[u+4>>2]=1|t,c[h+v+4>>2]=40,c[930]=c[1045]}while(0);if(m>>>0<(b=0|c[926])>>>0)return c[926]=t=b-m|0,v=0|c[929],c[929]=u=v+m|0,c[u+4>>2]=1|t,c[v+4>>2]=3|m,S=w,v+8|0}return c[922]=48,S=w,(v=0)|v}function Fc(a){var b=0,d=0,e=0,f=0,g=0,h=0,i=0,j=0,k=0;if(a|=0){e=0|c[927],k=(d=a+-8|0)+(b=-8&(a=0|c[a+-4>>2]))|0;do{if(1&a)j=i=d;else{if(f=0|c[d>>2],!(3&a))return;if(h=f+b|0,(g=d+(0-f)|0)>>>0<e>>>0)return;if((0|c[928])==(0|g)){if(3==(3&(a=0|c[(b=k+4|0)>>2])|0))return c[925]=h,c[b>>2]=-2&a,c[g+4>>2]=1|h,void(c[g+h>>2]=h);j=i=g,b=h;break}if(d=f>>>3,f>>>0<256){if(a=0|c[g+8>>2],(0|(b=0|c[g+12>>2]))==(0|a)){c[923]=c[923]&~(1<<d),j=i=g,b=h;break}c[a+12>>2]=b,c[b+8>>2]=a,j=i=g,b=h;break}f=0|c[g+24>>2],a=0|c[g+12>>2];do{if((0|a)==(0|g)){if(!(a=0|c[(b=4+(d=g+16|0)|0)>>2])){if(!(a=0|c[d>>2])){d=0;break}b=d}for(;;)if(d=0|c[(e=a+20|0)>>2])a=d,b=e;else{if(!(d=0|c[(e=a+16|0)>>2]))break;a=d,b=e}c[b>>2]=0,d=a}else d=0|c[g+8>>2],c[d+12>>2]=a,c[a+8>>2]=d,d=a}while(0);if(f){if(a=0|c[g+28>>2],(0|c[(b=3996+(a<<2)|0)>>2])==(0|g)){if(!(c[b>>2]=d)){c[924]=c[924]&~(1<<a),j=i=g,b=h;break}}else if(!(c[((0|c[(j=f+16|0)>>2])==(0|g)?j:f+20|0)>>2]=d)){j=i=g,b=h;break}c[d+24>>2]=f,0|(a=0|c[(b=g+16|0)>>2])&&(c[d+16>>2]=a,c[a+24>>2]=d),(a=0|c[b+4>>2])&&(c[d+20>>2]=a,c[a+24>>2]=d),j=i=g,b=h}else j=i=g,b=h}}while(0);if(!(k>>>0<=i>>>0)&&1&(d=0|c[(a=k+4|0)>>2])){if(2&d)c[a>>2]=-2&d,c[j+4>>2]=1|b,f=c[i+b>>2]=b;else{if((0|c[929])==(0|k))return k=(0|c[926])+b|0,c[926]=k,c[929]=j,c[j+4>>2]=1|k,void((0|j)==(0|c[928])&&(c[928]=0,c[925]=0));if((0|c[928])==(0|k))return k=(0|c[925])+b|0,c[925]=k,c[928]=i,c[j+4>>2]=1|k,void(c[i+k>>2]=k);f=(-8&d)+b|0,e=d>>>3;do{if(d>>>0<256){if(b=0|c[k+8>>2],(0|(a=0|c[k+12>>2]))==(0|b)){c[923]=c[923]&~(1<<e);break}c[b+12>>2]=a,c[a+8>>2]=b;break}g=0|c[k+24>>2],a=0|c[k+12>>2];do{if((0|a)==(0|k)){if(!(a=0|c[(b=4+(d=k+16|0)|0)>>2])){if(!(a=0|c[d>>2])){d=0;break}b=d}for(;;)if(d=0|c[(e=a+20|0)>>2])a=d,b=e;else{if(!(d=0|c[(e=a+16|0)>>2]))break;a=d,b=e}c[b>>2]=0,d=a}else d=0|c[k+8>>2],c[d+12>>2]=a,c[a+8>>2]=d,d=a}while(0);if(0|g){if(a=0|c[k+28>>2],(0|c[(b=3996+(a<<2)|0)>>2])==(0|k)){if(!(c[b>>2]=d)){c[924]=c[924]&~(1<<a);break}}else if(!(c[((0|c[(h=g+16|0)>>2])==(0|k)?h:g+20|0)>>2]=d))break;c[d+24>>2]=g,0|(a=0|c[(b=k+16|0)>>2])&&(c[d+16>>2]=a,c[a+24>>2]=d),0|(a=0|c[b+4>>2])&&(c[d+20>>2]=a,c[a+24>>2]=d)}}while(0);if(c[j+4>>2]=1|f,c[i+f>>2]=f,(0|j)==(0|c[928]))return void(c[925]=f)}if(a=f>>>3,f>>>0<256)return d=3732+(a<<1<<2)|0,b=(b=0|c[923])&(a=1<<a)?0|c[(a=b=d+8|0)>>2]:(c[923]=b|a,a=d+8|0,d),c[a>>2]=j,c[b+12>>2]=j,c[j+8>>2]=b,void(c[j+12>>2]=d);b=3996+((e=(a=f>>>8)?16777215<f>>>0?31:1&((k=7+(e=14-((h=(520192+(e=a<<(i=(a+1048320|0)>>>16&8))|0)>>>16&4)|i|(k=(245760+(e<<=h)|0)>>>16&2))+(e<<k>>>15)|0)|0)?f>>>k:f)|e<<1:0)<<2)|0,c[j+28>>2]=e,c[j+20>>2]=0,a=(c[j+16>>2]=0)|c[924],d=1<<e;a:do{if(a&d){a=0|c[b>>2];b:do{if((-8&c[a+4>>2]|0)!=(0|f)){for(e=f<<(31==(0|e)?0:25-(e>>>1)|0);b=0|c[(d=a+16+(e>>>31<<2)|0)>>2];){if((-8&c[b+4>>2]|0)==(0|f)){a=b;break b}e<<=1,a=b}c[d>>2]=j,c[j+24>>2]=a,c[j+12>>2]=j,c[j+8>>2]=j;break a}}while(0);k=0|c[(i=a+8|0)>>2],c[k+12>>2]=j,c[i>>2]=j,c[j+8>>2]=k,c[j+12>>2]=a,c[j+24>>2]=0}else c[924]=a|d,c[b>>2]=j,c[j+24>>2]=b,c[j+12>>2]=j,c[j+8>>2]=j}while(0);if(k=(0|c[931])-1|0,!(0|(c[931]=k))){for(a=4148;a=0|c[a>>2];)a=a+8|0;c[931]=-1}}}}function Gc(a,b){var d=0,e=0,f=0,g=0,h=0,i=0,j=0,j=(a|=0)+(b|=0)|0,d=0|c[a+4>>2];do{if(1&d)i=a,a=b;else{if(e=0|c[a>>2],!(3&d))return;if(h=e+b|0,(0|c[928])==(0|(g=a+(0-e)|0))){if(3==(3&(d=0|c[(a=j+4|0)>>2])|0))return c[925]=h,c[a>>2]=-2&d,c[g+4>>2]=1|h,c[j>>2]=h;i=g,a=h;break}if(b=e>>>3,e>>>0<256){if(d=0|c[g+8>>2],(0|(a=0|c[g+12>>2]))==(0|d)){c[923]=c[923]&~(1<<b),i=g,a=h;break}c[d+12>>2]=a,c[a+8>>2]=d,i=g,a=h;break}f=0|c[g+24>>2],d=0|c[g+12>>2];do{if((0|d)==(0|g)){if(!(d=0|c[(a=4+(b=g+16|0)|0)>>2])){if(!(d=0|c[b>>2])){b=0;break}a=b}for(;;)if(b=0|c[(e=d+20|0)>>2])d=b,a=e;else{if(!(b=0|c[(e=d+16|0)>>2]))break;d=b,a=e}c[a>>2]=0,b=d}else b=0|c[g+8>>2],c[b+12>>2]=d,c[d+8>>2]=b,b=d}while(0);if(f){if(d=0|c[g+28>>2],(0|c[(a=3996+(d<<2)|0)>>2])==(0|g)){if(!(c[a>>2]=b)){c[924]=c[924]&~(1<<d),i=g,a=h;break}}else if(!(c[((0|c[(i=f+16|0)>>2])==(0|g)?i:f+20|0)>>2]=b)){i=g,a=h;break}c[b+24>>2]=f,0|(d=0|c[(a=g+16|0)>>2])&&(c[b+16>>2]=d,c[d+24>>2]=b),(d=0|c[a+4>>2])&&(c[b+20>>2]=d,c[d+24>>2]=b),i=g,a=h}else i=g,a=h}}while(0);if(2&(b=0|c[(d=j+4|0)>>2]))c[d>>2]=-2&b,c[i+4>>2]=1|a,c[i+a>>2]=a;else{if((0|c[929])==(0|j))return j=(0|c[926])+a|0,c[926]=j,c[929]=i,c[i+4>>2]=1|j,(0|i)==(0|c[928])&&(c[928]=0,c[925]=0);if((0|c[928])==(0|j))return j=(0|c[925])+a|0,c[925]=j,c[928]=i,c[i+4>>2]=1|j,c[i+j>>2]=j;g=(-8&b)+a|0,e=b>>>3;do{if(b>>>0<256){if(a=0|c[j+8>>2],(0|(d=0|c[j+12>>2]))==(0|a)){c[923]=c[923]&~(1<<e);break}c[a+12>>2]=d,c[d+8>>2]=a;break}f=0|c[j+24>>2],d=0|c[j+12>>2];do{if((0|d)==(0|j)){if(!(d=0|c[(a=4+(b=j+16|0)|0)>>2])){if(!(d=0|c[b>>2])){b=0;break}a=b}for(;;)if(b=0|c[(e=d+20|0)>>2])d=b,a=e;else{if(!(b=0|c[(e=d+16|0)>>2]))break;d=b,a=e}c[a>>2]=0,b=d}else b=0|c[j+8>>2],c[b+12>>2]=d,c[d+8>>2]=b,b=d}while(0);if(0|f){if(d=0|c[j+28>>2],(0|c[(a=3996+(d<<2)|0)>>2])==(0|j)){if(!(c[a>>2]=b)){c[924]=c[924]&~(1<<d);break}}else if(!(c[((0|c[(h=f+16|0)>>2])==(0|j)?h:f+20|0)>>2]=b))break;c[b+24>>2]=f,0|(d=0|c[(a=j+16|0)>>2])&&(c[b+16>>2]=d,c[d+24>>2]=b),0|(d=0|c[a+4>>2])&&(c[b+20>>2]=d,c[d+24>>2]=b)}}while(0);if(c[i+4>>2]=1|g,c[i+g>>2]=g,(0|i)==(0|c[928]))return c[925]=g;a=g}if(d=a>>>3,a>>>0<256)return b=3732+(d<<1<<2)|0,a=(a=0|c[923])&(d=1<<d)?0|c[(d=a=b+8|0)>>2]:(c[923]=a|d,d=b+8|0,b),c[d>>2]=i,c[a+12>>2]=i,c[i+8>>2]=a,c[i+12>>2]=b;if(b=3996+((f=(d=a>>>8)?16777215<a>>>0?31:1&((j=7+(f=14-((g=(520192+(f=d<<(h=(d+1048320|0)>>>16&8))|0)>>>16&4)|h|(j=(245760+(f<<=g)|0)>>>16&2))+(f<<j>>>15)|0)|0)?a>>>j:a)|f<<1:0)<<2)|0,c[i+28>>2]=f,c[i+20>>2]=0,!((d=(c[i+16>>2]=0)|c[924])&(e=1<<f)))return c[924]=d|e,c[b>>2]=i,c[i+24>>2]=b,c[i+12>>2]=i,c[i+8>>2]=i;d=0|c[b>>2];a:do{if((-8&c[d+4>>2]|0)!=(0|a)){for(f=a<<(31==(0|f)?0:25-(f>>>1)|0);b=0|c[(e=d+16+(f>>>31<<2)|0)>>2];){if((-8&c[b+4>>2]|0)==(0|a)){d=b;break a}f<<=1,d=b}return c[e>>2]=i,c[i+24>>2]=d,c[i+12>>2]=i,c[i+8>>2]=i}}while(0);j=0|c[(h=d+8|0)>>2],c[j+12>>2]=i,c[h>>2]=i,c[i+8>>2]=j,c[i+12>>2]=d,c[i+24>>2]=0}function Ic(a,b,d){var e;return a|=0,0!=(3&(b|=0)|0)|0==(0|(e=b>>>2))||1073741823+e&e|0?28:(-64-b|0)>>>0<(d|=0)>>>0||!(b=0|function(a,b){b|=0;var g,d=0,e=0,f=0,h=0,i=0;if((d=16<(a|=0)>>>0?a:16)+-1&d)for(a=16;a>>>0<d>>>0;)a<<=1;else a=d;if((-64-a|0)>>>0<=b>>>0)return c[922]=48,(h=0)|h;if(!(d=0|Ec(12+(g=b>>>0<11?16:b+11&-8)+a|0)))return(h=0)|h;f=d+-8|0;do{if(a+-1&d){if(e=15<((e=(d+a+-1&0-a)-8|0)-(b=f)|0)>>>0?e:e+a|0,d=(-8&(i=0|c[(a=d+-4|0)>>2]))-(b=e-b|0)|0,3&i){c[(i=e+4|0)>>2]=d|1&c[i>>2]|2,c[(d=e+d+4|0)>>2]=1|c[d>>2],c[a>>2]=b|1&c[a>>2]|2,c[i>>2]=1|c[i>>2],Gc(f,b),a=b=e;break}c[e>>2]=(0|c[f>>2])+b,c[e+4>>2]=d,a=b=e;break}}while(a=b=f,0);return 3&(a=0|c[(d=a+4|0)>>2])|0&&(16+g|0)>>>0<(h=-8&a)>>>0&&(i=h-g|0,f=b+g|0,c[d>>2]=g|1&a|2,c[f+4>>2]=3|i,c[(h=b+h+4|0)>>2]=1|c[h>>2],Gc(f,i)),b+8|0}(16<b>>>0?b:16,d))?48:(c[a>>2]=b,(a=0)|a)}function Jc(a){var b,d=0;return(a=(b=0|c[(d=4208)>>2])+(0|a)|0)>>>0>(0|H())>>>0&&0==(0|J(0|a))?(c[922]=48,-1):(c[d>>2]=a,0|b)}function Lc(a,b,c,d){b|=0,d|=0;var e,f;return c=0|function(a,b){var f,e,c,d;return a=((c=0|v(e=65535&(b|=0),f=65535&(a|=0)))>>>16)+(0|v(e,d=a>>>16))|0,b=0|v(e=b>>>16,f),0|(y((a>>>16)+(0|v(e,d))+(((65535&a)+b|0)>>>16)|0),a+b<<16|65535&c|0)}(e=a|=0,f=c|=0),a=0|z(),0|(y((0|v(b,f))+(0|v(d,e))+a|0&a|0),0|c)}function Mc(a,b,c,d){return 0|(y((b|=0)+(d|=0)+((c=(a|=0)+(0|c)>>>0)>>>0<a>>>0|0)>>>0|0),0|c)}function Nc(a,b,c,d){return 0|(y(0|(d=(b|=0)-(d|=0)-((a|=0)>>>0<(c|=0)>>>0|0)>>>0)),a-c>>>0|0)}function Oc(a){return 0|((a|=0)?31-(0|w(a^a-1))|0:32)}function Pc(a,b,d,e,f){f|=0;var g=0,h=0,i=0,j=0,k=0,l=0,m=0,n=0,o=0,p=0,l=a|=0,h=d|=0,i=n=e|=0;if(!(k=j=b|=0))return g=0!=(0|f),i?(g&&(c[f>>2]=0|a,c[f+4>>2]=0&b),(f=n=0)|(y(0|n),f)):(g&&(c[f>>2]=(l>>>0)%(h>>>0),c[f+4>>2]=0),f=(l>>>(n=0))/(h>>>0)>>>0,0|(y(0|n),f));g=0==(0|i);do{if(h){if(!g){if((g=(0|w(0|i))-(0|w(0|k))|0)>>>0<=31){a=l>>>((h=m=g+1|0)>>>0)&(b=g-31>>31)|k<<(i=31-g|0),b&=k>>>(m>>>0),g=0,i=l<<i;break}return f&&(c[f>>2]=0|a,c[f+4>>2]=j|0&b),(f=n=0)|(y(0|n),f)}if((g=h-1|0)&h|0){a=(m=32-(i=33+(0|w(0|h))-(0|w(0|k))|0)|0)-1>>31&k>>>((o=i-32|0)>>>0)|(k<<m|l>>>((h=i)>>>0))&(b=o>>31),b&=k>>>(i>>>0),g=l<<(p=64-i|0)&(j=m>>31),i=(k<<p|l>>>(o>>>0))&j|l<<m&i-33>>31;break}return 0|f&&(c[f>>2]=g&l,c[f+4>>2]=0),1==(0|h)?(p=0|a,0|(y(0|(o=j|0&b)),p)):(o=k>>>((p=0|Oc(0|h))>>>0)|0,p=k<<32-p|l>>>(p>>>0)|0,0|(y(0|o),p))}if(g)return 0|f&&(c[f>>2]=(k>>>0)%(h>>>0),c[f+4>>2]=0),p=(k>>>(o=0))/(h>>>0)>>>0,0|(y(0|o),p);if(!l)return 0|f&&(c[f>>2]=0,c[f+4>>2]=(k>>>0)%(i>>>0)),p=(k>>>(o=0))/(i>>>0)>>>0,0|(y(0|o),p);if(!((g=i-1|0)&i))return 0|f&&(c[f>>2]=0|a,c[f+4>>2]=g&k|0&b),p=k>>>(((o=0)|Oc(0|i))>>>0),0|(y(0|o),p);if((g=(0|w(0|i))-(0|w(0|k))|0)>>>0<=30){a=k<<(i=31-g|0)|l>>>((h=b=g+1|0)>>>0),b=k>>>(b>>>0),g=0,i=l<<i;break}return f&&(c[f>>2]=0|a,c[f+4>>2]=j|0&b),(p=o=0)|(y(0|o),p)}while(0);if(h){for(k=0|Mc(0|(m=0|d),0|(l=n|0&e),-1,-1),d=0|z(),j=i,i=0;j=g>>>31|(e=j)<<1,g=i|g<<1,Nc(0|k,0|d,0|(e=a<<1|e>>>31|0),0|(n=a>>>31|b<<1|0)),i=1&(o=(p=0|z())>>31|((0|p)<0?-1:0)<<1),a=0|Nc(0|e,0|n,o&m|0,(((0|p)<0?-1:0)>>31|((0|p)<0?-1:0)<<1)&l|0),b=0|z(),0!=(0|(h=h-1|0)););k=j,j=0}else k=i,i=j=0;return(h=0)|f&&(c[f>>2]=a,c[f+4>>2]=b),p=-2&(g<<1|0)|i,0|(y(0|(o=(0|g)>>>31|(k|h)<<1|0&(h<<1|g>>>31)|j)),p)}function Qc(a,b,c,d){return 0|Pc(a|=0,b|=0,c|=0,d|=0,0)}function Rc(a,b,c){return a|=0,b|=0,(0|(c|=0))<32?(y(b>>>c|0),a>>>c|(b&(1<<c)-1)<<32-c):(y(0),b>>>c-32|0)}function Sc(a,b,c){return a|=0,b|=0,(0|(c|=0))<32?(y(b<<c|(a&(1<<c)-1<<32-c)>>>32-c|0),a<<c):(y(a<<c-32|0),0)}function Uc(b,d,e){var f,g,h;if(b|=0,d|=0,8192<=(0|(e|=0)))return I(0|b,0|d,0|e),0|b;if(h=0|b,g=b+e|0,(3&b)==(3&d)){for(;3&b;){if(!e)return 0|h;a[b>>0]=0|a[d>>0],b=b+1|0,d=d+1|0,e=e-1|0}for(f=(e=-4&g|0)-64|0;(0|b)<=(0|f);)c[b>>2]=c[d>>2],c[b+4>>2]=c[d+4>>2],c[b+8>>2]=c[d+8>>2],c[b+12>>2]=c[d+12>>2],c[b+16>>2]=c[d+16>>2],c[b+20>>2]=c[d+20>>2],c[b+24>>2]=c[d+24>>2],c[b+28>>2]=c[d+28>>2],c[b+32>>2]=c[d+32>>2],c[b+36>>2]=c[d+36>>2],c[b+40>>2]=c[d+40>>2],c[b+44>>2]=c[d+44>>2],c[b+48>>2]=c[d+48>>2],c[b+52>>2]=c[d+52>>2],c[b+56>>2]=c[d+56>>2],c[b+60>>2]=c[d+60>>2],b=b+64|0,d=d+64|0;for(;(0|b)<(0|e);)c[b>>2]=c[d>>2],b=b+4|0,d=d+4|0}else for(e=g-4|0;(0|b)<(0|e);)a[b>>0]=0|a[d>>0],a[b+1>>0]=0|a[d+1>>0],a[b+2>>0]=0|a[d+2>>0],a[b+3>>0]=0|a[d+3>>0],b=b+4|0,d=d+4|0;for(;(0|b)<(0|g);)a[b>>0]=0|a[d>>0],b=b+1|0,d=d+1|0;return 0|h}function Vc(b,d,e){var f,g,i,h=(b|=0)+(e|=0)|0;if(d=255&(0|d),67<=(0|e)){for(;3&b;)a[b>>0]=d,b=b+1|0;for(i=d|d<<8|d<<16|d<<24,g=(f=-4&h|0)-64|0;(0|b)<=(0|g);)c[b>>2]=i,c[b+4>>2]=i,c[b+8>>2]=i,c[b+12>>2]=i,c[b+16>>2]=i,c[b+20>>2]=i,c[b+24>>2]=i,c[b+28>>2]=i,c[b+32>>2]=i,c[b+36>>2]=i,c[b+40>>2]=i,c[b+44>>2]=i,c[b+48>>2]=i,c[b+52>>2]=i,c[b+56>>2]=i,c[b+60>>2]=i,b=b+64|0;for(;(0|b)<(0|f);)c[b>>2]=i,b=b+4|0}for(;(0|b)<(0|h);)a[b>>0]=d,b=b+1|0;return h-e|0}function gd(a){return x(0),0}function id(a,b,c,d){return x(2),0}var W=[gd,function(a){return 0|A(0,0|(a|=0))},function(a){return 0},gd],X=[function(a,b,c){return x(1),0},function(a,b,c){return 0|B(0,0|(a|=0),0|(b|=0),0|(c|=0))},function(a,b,d){b|=0,d|=0;var e,i,j,k,m,n,o,f=0,g=0,h=0,p=0,l=S;for(S=S+32|0,i=(g=l)+16|0,f=0|c[(j=28+(a|=0)|0)>>2],c[g>>2]=f,f=(0|c[(k=a+20|0)>>2])-f|0,c[g+4>>2]=f,c[g+8>>2]=b,e=a+60|0,f=f+(c[g+12>>(h=2)]=d)|0;;){if((0|f)==(0|(b=0|function(a){return 0|((a|=0)<<16>>16?(c[922]=65535&a,-1):0)}(0|G(0|c[e>>2],0|g,0|h,0|i))?c[i>>2]=-1:0|c[i>>2]))){b=6;break}if((0|b)<0){b=8;break}p=0|c[g+4>>2],c[(n=(m=p>>>0<b>>>0)?g+8|0:g)>>2]=(0|c[n>>2])+(p=b-(m?p:0)|0),c[(o=n+4|0)>>2]=(0|c[o>>2])-p,g=n,h=h+(m<<31>>31)|0,f=f-b|0}return 6==(0|b)?(p=0|c[a+44>>2],c[a+16>>2]=p+(0|c[a+48>>2]),c[j>>2]=p,c[k>>2]=p):8==(0|b)&&(c[a+16>>2]=0,c[j>>2]=0,c[k>>2]=0,c[a>>2]=32|c[a>>2],d=2==(0|h)?0:d-(0|c[g+4>>2])|0),S=l,0|d},function(a,b,d){var e,f;return Uc(0|(f=0|c[(e=20+(a|=0)|0)>>2]),0|(b|=0),0|(a=(d|=0)>>>0<(a=(0|c[a+16>>2])-f|0)>>>0?d:a)),c[e>>2]=(0|c[e>>2])+a,0|d}],Y=[id,function(a,b,c,d){return 0|C(0,0|(a|=0),0|(b|=0),0|(c|=0),0|(d|=0))},function(a,b,c,d){return y(0),0},id],Z=[function(a){x(3)},function(a){D(0,0|(a|=0))}],_=[function(a,b){x(4)},function(a,b){E(0,0|(a|=0),0|(b|=0))},function(a,b){var j,e=0,g=0,h=0,i=0,k=0,l=0,m=0,n=0,e=0|c[(j=308+(a|=0)|0)>>2],g=0|c[a+316>>2],h=0|c[a+320>>2];-1==(0|(i=0|c[(k=e+((b|=0)<<5)+8|0)>>2]))?(c[g+(b<<2)>>2]=c[(0|c[a+148>>2])+(c[e+(b<<5)+16>>2]<<2)>>2],f[h+(b<<2)>>2]=1):(m=0|c[(l=e+(b<<5)+16|0)>>2],n=0|c[(0|c[a+152>>2])+(m<<2)>>2],$[3&c[e+(i<<5)+24>>2]](a,i,n,n,0|c[(0|c[a+60>>2])+(24*m|0)+16>>2]),k=0|c[k>>2],f[g+(b<<2)>>2]=+f[(0|c[a+148>>2])+(c[l>>2]<<2)>>2]*+f[g+(k<<2)>>2],c[h+(b<<2)>>2]=c[h+(k<<2)>>2]),(0|d[4+(0|c[a>>2])>>0])<4||(e=0|c[j>>2],g=0|c[a+324>>2],j=0|c[a+328>>2],h=b<<2,i=c[e+(b<<5)+16>>2]<<2,-1==(0|(e=0|c[e+(b<<5)+8>>2]))?(e=0|c[a+156>>2],c[g+(h<<2)>>2]=c[e+(i<<2)>>2],c[g+((b=1|h)<<2)>>2]=c[e+((k=1|i)<<2)>>2],c[g+((n=2|h)<<2)>>2]=c[e+((m=2|i)<<2)>>2],f[g+((e=3|h)<<2)>>2]=1,l=0|c[a+160>>2],c[j+(h<<2)>>2]=c[l+(i<<2)>>2],c[j+(b<<2)>>2]=c[l+(k<<2)>>2],c[j+(n<<2)>>2]=c[l+(m<<2)>>2]):(m=e<<2,l=(0|c[a+156>>2])+(i<<2)|0,f[(e=g+(h<<2)|0)>>2]=+f[l>>2]*+f[(n=g+(m<<2)|0)>>2],f[e+4>>2]=+f[l+4>>2]*+f[n+4>>2],f[e+8>>2]=+f[l+8>>2]*+f[n+8>>2],f[g+((e=3|h)<<2)>>2]=1,l=(0|c[a+160>>2])+(i<<2)|0,b=+f[l>>2],k=+f[(m=j+(m<<2)|0)>>2],f[(n=j+(h<<2)|0)>>2]=b+k-b*k,k=+f[l+4>>2],b=+f[m+4>>2],f[n+4>>2]=k+b-k*b,b=+f[l+8>>2],k=+f[m+8>>2],f[n+8>>2]=b+k-b*k),f[j+(e<<2)>>2]=1)},function(a,b){var n,p,q,r,s,t,u,v,w,x,y,z,A,B,C,e=0,g=0,h=0,i=0,j=0,k=0,l=0,m=0,o=0,D=0,E=0,F=0,G=0,H=S;if(S=S+48|0,u=H+8|0,s=H+40|0,r=H+32|0,q=(t=H)+24|0,F=H+16|0,e=0|c[(y=308+(a|=0)|0)>>2],w=0|c[a+316>>2],x=0|c[a+320>>2],-1==(0|(p=0|c[(B=e+((b|=0)<<5)+8|0)>>2])))G=0|c[e+(b<<5)+16>>2],c[w+(b<<2)>>2]=c[(0|c[a+268>>2])+(G<<2)>>2],c[x+(b<<2)>>2]=c[(0|c[a+272>>2])+(G<<2)>>2];else{for(v=0|c[(C=e+(b<<5)+16|0)>>2],j=0|c[(0|c[(z=a+276|0)>>2])+(v<<2)>>2],c[F>>2]=j,v=0|c[(0|c[(A=a+280|0)>>2])+(v<<2)>>2],c[(D=F+4|0)>>2]=v,E=1==(0|c[e+(p<<5)+12>>2])?-10:-.10000000149011612,c[s>>2]=j,c[(j=4+s|0)>>2]=v,$[3&c[(v=e+(p<<5)+24|0)>>2]](a,p,s,r,1),h=4+q|0,e=4+r|0,g=t+4|0,i=9,o=1;f[q>>2]=(m=0*o)+ +f[s>>2],f[h>>2]=(n=E*o)+ +f[j>>2],$[3&c[v>>2]](a,p,q,t,1),l=+f[t>>2]-+f[r>>2],f[t>>2]=l,k=+f[g>>2]-+f[e>>2],!(0!=l|0!=(f[g>>2]=k));){if(f[q>>2]=+f[s>>2]-m,f[h>>2]=+f[j>>2]-n,$[3&c[v>>2]](a,p,q,t,1),k=+f[t>>2]-+f[r>>2],f[t>>2]=k,m=+f[g>>2]-+f[e>>2],0!=k|0!=(f[g>>2]=m)){G=6;break}if(!i){G=8;break}i=i+-1|0,o*=.10000000149011612}6==(0|G)?(l=-k,k=-m):8==(0|G)&&(ia(0,2397,u),k=l=0),E=180*+ob(0,E,l,k)/3.1415927410125732,$[3&c[v>>2]](a,0|c[B>>2],F,F,1),G=0|c[C>>2],c[(0|c[z>>2])+(G<<2)>>2]=c[F>>2],c[(0|c[A>>2])+(G<<2)>>2]=c[D>>2],F=(0|c[a+284>>2])+(G<<2)|0,f[F>>2]=+f[F>>2]-E,F=0|c[B>>2],f[w+(b<<2)>>2]=+f[(0|c[a+268>>2])+(G<<2)>>2]*+f[w+(F<<2)>>2],G=(0|c[a+272>>2])+(G<<2)|0,E=+f[G>>2]*+f[x+(F<<2)>>2],f[x+(b<<2)>>2]=E,f[G>>2]=E}(0|d[4+(0|c[a>>2])>>0])<4||(e=0|c[y>>2],g=0|c[a+324>>2],j=0|c[a+328>>2],h=b<<2,i=c[e+(b<<5)+16>>2]<<2,-1==(0|(e=0|c[e+(b<<5)+8>>2]))?(e=0|c[a+296>>2],c[g+(h<<2)>>2]=c[e+(i<<2)>>2],c[g+((F=1|h)<<2)>>2]=c[e+((D=1|i)<<2)>>2],c[g+((b=2|h)<<2)>>2]=c[e+((G=2|i)<<2)>>2],f[g+((e=3|h)<<2)>>2]=1,a=0|c[a+300>>2],c[j+(h<<2)>>2]=c[a+(i<<2)>>2],c[j+(F<<2)>>2]=c[a+(D<<2)>>2],c[j+(b<<2)>>2]=c[a+(G<<2)>>2]):(F=e<<2,G=(0|c[a+296>>2])+(i<<2)|0,f[(e=g+(h<<2)|0)>>2]=+f[G>>2]*+f[(b=g+(F<<2)|0)>>2],f[e+4>>2]=+f[G+4>>2]*+f[b+4>>2],f[e+8>>2]=+f[G+8>>2]*+f[b+8>>2],f[g+((e=3|h)<<2)>>2]=1,G=(0|c[a+300>>2])+(i<<2)|0,o=+f[G>>2],E=+f[(a=j+(F<<2)|0)>>2],f[(b=j+(h<<2)|0)>>2]=o+E-o*E,E=+f[G+4>>2],o=+f[a+4>>2],f[b+4>>2]=E+o-E*o,o=+f[G+8>>2],E=+f[a+8>>2],f[b+8>>2]=o+E-o*E),f[j+(e<<2)>>2]=1),S=H}],$=[function(a,b,c,d,e){x(5)},function(a,b,c,d,e){F(0,0|(a|=0),0|(b|=0),0|(c|=0),0|(d|=0),0|(e|=0))},function(a,b,d,e,h){d|=0,e|=0;var B,F,G,H,I,J,K,L,N,O,P,Q,R,T,U,V,W,X,Y,ba,ca,da,ea,i=0,j=0,k=0,l=0,m=0,n=0,o=0,p=0,q=0,r=0,s=0,t=0,u=0,w=0,x=0,y=0,z=0,A=0,C=0,D=0,E=0,M=0,_=0,Z=S;if(S=S+32|0,Y=Z,b=0|c[(0|c[308+(a|=0)>>2])+((b|=0)<<5)+16>>2],i=0|c[a+60>>2],R=0|c[(0|c[a+152>>2])+(b<<2)>>2],T=0|c[i+(24*b|0)+8>>2],U=0|c[i+(24*b|0)+4>>2],V=1+T|0,(0|(h|=0))<=0)S=Z;else{W=0|T,X=0|U,Q=0==(0|c[i+(24*b|0)+12>>2]),F=R+(T<<3)|0,G=R+((N=0|v(U,V))<<3)|0,H=R+((L=N+T|0)<<3)|0,I=4+R|0,J=R+(T<<3)+4|0,K=R+(N<<3)+4|0,L=R+(L<<3)+4|0,P=T-1|0,O=U-1|0,t=u=w=x=j=k=s=r=q=p=E=D=o=n=m=l=M=A=0;do{y=(B=+f[d+(M<<3)>>2])*W,C=(z=+f[d+(M<<3)+4>>2])*X,a=!(1<=B),i=!(1<=z);do{if(i&a&!(B<0)&!(z<0)){if(a=~~y,b=(0|v(V,i=~~C))+a|0,k=y-(0|a),j=C-(0|i),!Q){f[e+(M<<3)>>2]=(y=1-j)*((z=1-k)*+f[R+(b<<3)>>2])+y*(k*+f[R+((_=b+1|0)<<3)>>2])+j*(z*+f[R+((a=b+V|0)<<3)>>2])+j*(k*+f[R+((i=a+1|0)<<3)>>2]),z=y*(z*+f[R+(b<<3)+4>>2])+y*(k*+f[R+(_<<3)+4>>2])+j*(z*+f[R+(a<<3)+4>>2]),y=j*(k*+f[R+(i<<3)+4>>2]);break}if(k+j<=1){f[e+(M<<3)>>2]=(z=1-k-j)*+f[R+(b<<3)>>2]+k*+f[R+((i=b+1|0)<<3)>>2]+j*+f[R+((_=b+V|0)<<3)>>2],z=z*+f[R+(b<<3)+4>>2]+k*+f[R+(i<<3)+4>>2],y=j*+f[R+(_<<3)+4>>2];break}f[e+(M<<3)>>2]=(C=k+-1+j)*+f[R+((a=1+(i=b+V|0)|0)<<3)>>2]+(z=1-k)*+f[R+(i<<3)>>2]+(y=1-j)*+f[R+((_=b+1|0)<<3)>>2],z=C*+f[R+(a<<3)+4>>2]+z*+f[R+(i<<3)+4>>2],y*=+f[R+(_<<3)+4>>2];break}if(A||(ea=+f[R>>2],da=+f[F>>2],ca=+f[G>>2],D=+f[H>>2],ba=+f[I>>2],t=(w=+f[J>>2])-(x=+f[K>>2]),A=1,D=.25*(ea+da+ca+D)-.5*(ea=D-ea),E=.25*(ba+w+x+(E=+f[L>>2]))-.5*(ba=E-ba),x=.5*((u=da-ca)+ea),w=.5*(t+ba),u=.5*(ea-u),t=.5*(ba-t)),!(z<3&-2<B&B<3&-2<z)){f[e+(M<<3)>>2]=z*u+(B*x+D),z*=t,y=B*w+E;break}do{if(B<=0){if(z<=0){l=D-(n=2*u),m=E-(o=2*t),n=(r=D-2*x)-n,o=(s=E-2*w)-o,p=+f[R>>2],q=+f[I>>2],k=.5*(2+B),j=.5*(z+2);break}if(i){o=(j=0|(i=(0|U)==(0|(i=~~C))?O:i))/X,k=(0|(_=i+1|0))/X,i=0|v(i,V),_=0|v(_,V),l=+f[R+(i<<3)>>2],m=+f[R+(i<<3)+4>>2],n=o*u+(r=D-2*x),o=o*t+(s=E-2*w),p=+f[R+(_<<3)>>2],q=+f[R+(_<<3)+4>>2],r=k*u+r,s=k*t+s,k=.5*(2+B),j=C-j;break}l=+f[G>>2],m=+f[K>>2],n=u+(r=D-2*x),o=t+(s=E-2*w),p=(j=3*u)+D,q=(k=3*t)+E,r=j+r,s=k+s,k=.5*(2+B),j=.5*(z+-1);break}if(b=z<=0,a){if(b){l=(m=(0|(i=(_=(0|T)==(0|(_=~~y))?P:_)+1|0))/W)*x+D-(n=2*u),m=m*w+E-(o=2*t),n=(p=(k=0|_)/W)*x+D-n,o=p*w+E-o,p=+f[R+(i<<3)>>2],q=+f[R+(i<<3)+4>>2],r=+f[R+(_<<3)>>2],s=+f[R+(_<<3)+4>>2],k=y-k,j=.5*(z+2);break}if(i){c[Y>>2]=M,g[Y+8>>3]=B,g[Y+16>>3]=z,ia(0,865,Y);break}k=0|(_=(0|T)==(0|(_=~~y))?P:_),q=(0|(i=_+1|0))/W,l=+f[R+((i=i+N|0)<<3)>>2],m=+f[R+(i<<3)+4>>2],n=+f[R+((_=_+N|0)<<3)>>2],o=+f[R+(_<<3)+4>>2],p=(r=3*u)+(q*x+D),q=(j=3*t)+(q*w+E),r+=(s=k/W)*x+D,s=j+(s*w+E),k=y-k,j=.5*(z+-1);break}if(b){l=(p=3*x+D)-(n=2*u),m=(q=3*w+E)-(o=2*t),n=x+D-n,o=w+E-o,r=+f[F>>2],s=+f[J>>2],k=.5*(B-1),j=.5*(z+2);break}if(i){m=(j=0|(i=(0|U)==(0|(i=~~C))?O:i))/X,r=(0|(_=i+1|0))/X,i=(0|v(i,V))+T|0,_=(0|v(_,V))+T|0,l=m*u+(p=3*x+D),m=m*t+(q=3*w+E),n=+f[R+(i<<3)>>2],o=+f[R+(i<<3)+4>>2],p=r*u+p,q=r*t+q,r=+f[R+(_<<3)>>2],s=+f[R+(_<<3)+4>>2],k=.5*(B-1),j=C-j;break}l=u+(p=3*x+D),m=t+(q=3*w+E),n=+f[H>>2],o=+f[L>>2],p=(r=3*u)+p,q=(s=3*t)+q,r+=x+D,s+=w+E,k=.5*(B-1),j=.5*(z+-1);break}while(0);if(k+j<=1){f[e+(M<<3)>>2]=n+(l-n)*k+(r-n)*j,z=o+(m-o)*k,y=(s-o)*j;break}f[e+(M<<3)>>2]=p+(r-p)*(z=1-k)+(l-p)*(y=1-j),z=q+(s-q)*z,y*=m-q;break}while(0)}while(f[e+(M<<3)+4>>2]=z+y,(0|(M=M+1|0))!=(0|h));S=Z}},function(a,b,d,e,g){d|=0,e|=0,g|=0;var i,k,n,o,h,j,l,m;if(b=0|c[(0|c[(a|=0)+308>>2])+((b|=0)<<5)+16>>2],j=3.1415927410125732*(+f[(0|c[a+168>>2])+(12*b|0)+4>>2]+ +f[(0|c[a+284>>2])+(b<<2)>>2])/180,h=+t(j),j=+s(j),k=(j*=i=+f[(0|c[a+272>>2])+(b<<2)>>2])*(l=0==(0|c[(0|c[a+288>>2])+(b<<2)>>2])?1:-1),i=(h*=i)*(m=0==(0|c[(0|c[a+292>>2])+(b<<2)>>2])?1:-1),l*=h,m*=j,j=+f[(0|c[a+276>>2])+(b<<2)>>2],h=+f[(0|c[a+280>>2])+(b<<2)>>2],!((0|g)<=0))for(b=0;o=+f[d+(b<<3)>>2],n=+f[d+(b<<3)+4>>2],f[e+(b<<3)>>2]=k*o-i*n+j,f[e+(b<<3)+4>>2]=l*o+m*n+h,(0|(b=b+1|0))!=(0|g););}];return{___errno_location:function(){return 3688},___muldi3:Lc,___udivdi3:Qc,_bitshift64Lshr:Rc,_bitshift64Shl:Sc,_csmFree:function(a){Fc(a|=0)},_csmGetDrawableConstantFlags:function(a){var b=0,d=S;return S=S+16|0,b=d,(a|=0)?(b=0|c[888+(0|c[a>>2])>>2],S=d,0|b):(c[b>>2]=1896,c[b+4>>2]=1411,ia(0,1269,b),S=d,(b=0)|b)},_csmGetDrawableCount:function(a){var b=0,d=S;return S=S+16|0,b=d,(a|=0)?(b=0|c[a+332>>2],S=d,0|b):(c[b>>2]=1858,c[b+4>>2]=1411,ia(0,1269,b),S=d,-1)},_csmGetDrawableDrawOrders:function(a){var b=0,d=S;return S=S+16|0,b=d,(a|=0)?(b=0|c[a+440>>2],S=d,0|b):(c[b>>2]=1980,c[b+4>>2]=1411,ia(0,1269,b),S=d,(b=0)|b)},_csmGetDrawableDynamicFlags:function(a){var b=0,d=S;return S=S+16|0,b=d,(a|=0)?(b=0|c[a+432>>2],S=d,0|b):(c[b>>2]=1924,c[b+4>>2]=1411,ia(0,1269,b),S=d,(b=0)|b)},_csmGetDrawableIds:function(a){var b=0,d=S;return S=S+16|0,b=d,(a|=0)?(b=0|c[832+(0|c[a>>2])>>2],S=d,0|b):(c[b>>2]=1878,c[b+4>>2]=1411,ia(0,1269,b),S=d,(b=0)|b)},_csmGetDrawableIndexCounts:function(a){var b=0,d=S;return S=S+16|0,b=d,(a|=0)?(b=0|c[904+(0|c[a>>2])>>2],S=d,0|b):(c[b>>2]=2182,c[b+4>>2]=1411,ia(0,1269,b),S=d,(b=0)|b)},_csmGetDrawableIndices:function(a){var b=0,d=S;return S=S+16|0,b=d,(a|=0)?(b=0|c[840+(0|c[a>>2])>>2],S=d,0|b):(c[b>>2]=2208,c[b+4>>2]=1411,ia(0,1269,b),S=d,(b=0)|b)},_csmGetDrawableMaskCounts:function(a){var b=0,d=S;return S=S+16|0,b=d,(a|=0)?(b=0|c[912+(0|c[a>>2])>>2],S=d,0|b):(c[b>>2]=2056,c[b+4>>2]=1411,ia(0,1269,b),S=d,(b=0)|b)},_csmGetDrawableMasks:function(a){var b=0,d=S;return S=S+16|0,b=d,(a|=0)?(b=0|c[844+(0|c[a>>2])>>2],S=d,0|b):(c[b>>2]=2081,c[b+4>>2]=1411,ia(0,1269,b),S=d,(b=0)|b)},_csmGetDrawableMultiplyColors:function(a){var b=0,d=S;return S=S+16|0,b=d,(a|=0)?(b=0|c[a+452>>2],S=d,0|b):(c[b>>2]=2230,c[b+4>>2]=1411,ia(0,1269,b),S=d,(b=0)|b)},_csmGetDrawableOpacities:function(a){var b=0,d=S;return S=S+16|0,b=d,(a|=0)?(b=0|c[a+448>>2],S=d,0|b):(c[b>>2]=2032,c[b+4>>2]=1411,ia(0,1269,b),S=d,(b=0)|b)},_csmGetDrawableParentPartIndices:function(a){var b=0,d=S;return S=S+16|0,b=d,(a|=0)?(b=0|c[876+(0|c[a>>2])>>2],S=d,0|b):(c[b>>2]=2286,c[b+4>>2]=1411,ia(0,1269,b),S=d,(b=0)|b)},_csmGetDrawableRenderOrders:function(a){var b=0,d=S;return S=S+16|0,b=d,(a|=0)?(b=0|c[a+436>>2],S=d,0|b):(c[b>>2]=2005,c[b+4>>2]=1411,ia(0,1269,b),S=d,(b=0)|b)},_csmGetDrawableScreenColors:function(a){var b=0,d=S;return S=S+16|0,b=d,(a|=0)?(b=0|c[a+456>>2],S=d,0|b):(c[b>>2]=2259,c[b+4>>2]=1411,ia(0,1269,b),S=d,(b=0)|b)},_csmGetDrawableTextureIndices:function(a){var b=0,d=S;return S=S+16|0,b=d,(a|=0)?(b=0|c[884+(0|c[a>>2])>>2],S=d,0|b):(c[b>>2]=1951,c[b+4>>2]=1411,ia(0,1269,b),S=d,(b=0)|b)},_csmGetDrawableVertexCounts:function(a){var b=0,d=S;return S=S+16|0,b=d,(a|=0)?(b=0|c[892+(0|c[a>>2])>>2],S=d,0|b):(c[b>>2]=2101,c[b+4>>2]=1411,ia(0,1269,b),S=d,(b=0)|b)},_csmGetDrawableVertexPositions:function(a){var b=0,d=S;return S=S+16|0,b=d,(a|=0)?(b=0|c[a+444>>2],S=d,0|b):(c[b>>2]=2128,c[b+4>>2]=1411,ia(0,1269,b),S=d,(b=0)|b)},_csmGetDrawableVertexUvs:function(a){var b=0,d=S;return S=S+16|0,b=d,(a|=0)?(b=0|c[836+(0|c[a>>2])>>2],S=d,0|b):(c[b>>2]=2158,c[b+4>>2]=1411,ia(0,1269,b),S=d,(b=0)|b)},_csmGetLatestMocVersion:function(){return 4},_csmGetMocVersion:function(a,b){b|=0;var d=S;return S=S+16|0,b=d,(a|=0)?(a=0|ra(a),S=d,0|a):(c[b>>2]=1286,c[b+4>>2]=1303,ia(0,1269,b),S=d,(a=0)|a)},_csmGetParameterCount:function(a){var b=0,d=S;return S=S+16|0,b=d,(a|=0)?(b=0|c[a+540>>2],S=d,0|b):(c[b>>2]=1610,c[b+4>>2]=1411,ia(0,1269,b),S=d,-1)},_csmGetParameterDefaultValues:function(a){var b=0,d=S;return S=S+16|0,b=d,(a|=0)?(b=0|c[932+(0|c[a>>2])>>2],S=d,0|b):(c[b>>2]=1729,c[b+4>>2]=1411,ia(0,1269,b),S=d,(b=0)|b)},_csmGetParameterIds:function(a){var b=0,d=S;return S=S+16|0,b=d,(a|=0)?(b=0|c[916+(0|c[a>>2])>>2],S=d,0|b):(c[b>>2]=1631,c[b+4>>2]=1411,ia(0,1269,b),S=d,(b=0)|b)},_csmGetParameterKeyCounts:function(a){var b=0,d=S;return S=S+16|0,b=d,(a|=0)?(b=0|c[a+616>>2],S=d,0|b):(c[b>>2]=2347,c[b+4>>2]=1411,ia(0,1269,b),S=d,(b=0)|b)},_csmGetParameterKeyValues:function(a){var b=0,d=S;return S=S+16|0,b=d,(a|=0)?(b=0|c[a+612>>2],S=d,0|b):(c[b>>2]=2372,c[b+4>>2]=1411,ia(0,1269,b),S=d,(b=0)|b)},_csmGetParameterMaximumValues:function(a){var b=0,d=S;return S=S+16|0,b=d,(a|=0)?(b=0|c[924+(0|c[a>>2])>>2],S=d,0|b):(c[b>>2]=1700,c[b+4>>2]=1411,ia(0,1269,b),S=d,(b=0)|b)},_csmGetParameterMinimumValues:function(a){var b=0,d=S;return S=S+16|0,b=d,(a|=0)?(b=0|c[928+(0|c[a>>2])>>2],S=d,0|b):(c[b>>2]=1671,c[b+4>>2]=1411,ia(0,1269,b),S=d,(b=0)|b)},_csmGetParameterTypes:function(a){var b=0,d=S;return S=S+16|0,b=d,(a|=0)?(b=0|c[a+548>>2],S=d,0|b):(c[b>>2]=1650,c[b+4>>2]=1411,ia(0,1269,b),S=d,(b=0)|b)},_csmGetParameterValues:function(a){var b=0,d=S;return S=S+16|0,b=d,(a|=0)?(b=0|c[a+552>>2],S=d,0|b):(c[b>>2]=1758,c[b+4>>2]=1411,ia(0,1269,b),S=d,(b=0)|b)},_csmGetPartCount:function(a){var b=0,d=S;return S=S+16|0,b=d,(a|=0)?(b=0|c[a+4>>2],S=d,0|b):(c[b>>2]=1780,c[b+4>>2]=1411,ia(0,1269,b),S=d,-1)},_csmGetPartIds:function(a){var b=0,d=S;return S=S+16|0,b=d,(a|=0)?(b=0|c[712+(0|c[a>>2])>>2],S=d,0|b):(c[b>>2]=1796,c[b+4>>2]=1411,ia(0,1269,b),S=d,(b=0)|b)},_csmGetPartOpacities:function(a){var b=0,d=S;return S=S+16|0,b=d,(a|=0)?(b=0|c[a+52>>2],S=d,0|b):(c[b>>2]=1810,c[b+4>>2]=1411,ia(0,1269,b),S=d,(b=0)|b)},_csmGetPartParentPartIndices:function(a){var b=0,d=S;return S=S+16|0,b=d,(a|=0)?(b=0|c[740+(0|c[a>>2])>>2],S=d,0|b):(c[b>>2]=1830,c[b+4>>2]=1411,ia(0,1269,b),S=d,(b=0)|b)},_csmGetSizeofModel:Ha,_csmGetVersion:function(){return 67239938},_csmInitializeModelInPlace:Ia,_csmMalloc:function(a){return 0|Ec(a|=0)},_csmMallocMoc:function(a){var b,d=S;return S=S+16|0,Ic(b=d,64,a|=0),S=d,0|c[b>>2]},_csmMallocModelAndInitialize:function(a){var b=0,e=0,f=S;return S=S+16|0,b=f,0!=(0|(a|=0))&&0==(0|Ic(b,16,e=0|Ha(a)))?(b=0|Ia(a,a=0|c[b>>2],e))||(Fc(a),b=0):b=0,S=f,0|b},_csmReadCanvasInfo:function(a,b,d,e){b|=0,d|=0,e|=0;var f,g,h,i=0,j=S;if(S=S+32|0,g=j+24|0,i=j+16|0,h=j+8|0,f=j,a|=0)return b?d?e?(i=0|c[708+(0|c[a>>2])>>2],c[b>>2]=c[i+12>>2],c[b+4>>2]=c[i+16>>2],c[d>>2]=c[i+4>>2],c[d+4>>2]=c[i+8>>2],c[e>>2]=c[i>>2]):(c[g>>2]=1393,c[4+g>>2]=1487,ia(0,1269,g)):(c[i>>2]=1393,c[i+4>>2]=1458,ia(0,1269,i)):(c[h>>2]=1393,c[4+h>>2]=1431,ia(0,1269,h)),void(S=j);c[f>>2]=1393,c[f+4>>2]=1411,ia(0,1269,f),S=j},_csmResetDrawableDynamicFlags:function(a){var b,d=S;S=S+16|0,b=d,(a|=0)?c[a+428>>2]=1:(c[b>>2]=2318,c[b+4>>2]=1411,ia(0,1269,b)),S=d},_csmReviveMocInPlace:function(a,b){b|=0;var e,d=0,f=0,g=S;return S=S+32|0,f=g+16|0,e=g+8|0,d=g,(a|=0)?((d=a)+63&-64|0)!=(0|d)?(c[e>>2]=1322,c[4+e>>2]=1342,ia(0,1269,e),S=g,(f=0)|f):0|b&&(b+63&-64|0)==(0|b)?(f=0|qa(a),S=g,0|f):(c[f>>2]=1322,c[f+4>>2]=1374,ia(0,1269,f),S=g,(f=0)|f):(c[d>>2]=1322,c[d+4>>2]=1303,ia(0,1269,d),S=g,(f=0)|f)},_csmSetLogFunction:function(a){c[904]=a|=0},_csmUpdateModel:function(a){var b,d=S;S=S+16|0,b=d,(a|=0)?Gb(a):(c[b>>2]=1595,c[b+4>>2]=1411,ia(0,1269,b)),S=d},_emscripten_get_sbrk_ptr:function(){return 4208},_emscripten_replace_memory:function(newBuffer){return a=new Int8Array(newBuffer),d=new Uint8Array(newBuffer),b=new Int16Array(newBuffer),e=new Uint16Array(newBuffer),c=new Int32Array(newBuffer),f=new Float32Array(newBuffer),g=new Float64Array(newBuffer),!0},_free:Fc,_i64Add:Mc,_i64Subtract:Nc,_malloc:Ec,_memcpy:Uc,_memset:Vc,dynCall_ii:function(a,b){return 0|W[3&(a|=0)](0|(b|=0))},dynCall_iiii:function(a,b,c,d){return 0|X[3&(a|=0)](0|(b|=0),0|(c|=0),0|(d|=0))},dynCall_iiiii:function(a,b,c,d,e){return 0|Y[3&(a|=0)](0|(b|=0),0|(c|=0),0|(d|=0),0|(e|=0))},dynCall_vi:function(a,b){Z[1&(a|=0)](0|(b|=0))},dynCall_vii:function(a,b,c){_[3&(a|=0)](0|(b|=0),0|(c|=0))},dynCall_viiiii:function(a,b,c,d,e,f){$[3&(a|=0)](0|(b|=0),0|(c|=0),0|(d|=0),0|(e|=0),0|(f|=0))},establishStackSpace:function(a,b){S=a|=0},stackAlloc:function(a){var b=S;return S=15+(S+(a|=0)|0)&-16,0|b},stackRestore:function(a){S=0|a},stackSave:function(){return 0|S}}}({Math:Math,Int8Array:Int8Array,Int16Array:Int16Array,Int32Array:Int32Array,Uint8Array:Uint8Array,Uint16Array:Uint16Array,Float32Array:Float32Array,Float64Array:Float64Array},{a:C,b:function(a){J=a},c:function(){return J},d:function(a,c){return I[a](c)},e:function(a,c,d,f){return I[a](c,d,f)},f:function(a,c,d,f,g){return I[a](c,d,f,g)},g:function(a,c){I[a](c)},h:function(a,c,d){I[a](c,d)},i:function(a,c,d,f,g,h){I[a](c,d,f,g,h)},j:function(){return pa.apply(null,arguments)},k:qa,l:function(a,c,d){M.set(M.subarray(c,c+d),a)},m:function(a){if(2130706432<a)return!1;for(var c=Math.max(qa(),16777216);c<a;)c=c<=536870912?ea(2*c):Math.min(ea((3*c+2147483648)/4),2130706432);return!!ra(c)},n:pa,o:function(){C("OOM")},p:function(a){return a},q:na,r:ra,s:function(){var a=b._fflush;a&&a(0),V[1].length&&W(1,10),V[2].length&&W(2,10)},t:oa,u:function(){var a=oa();return b.extraStackTrace&&(a+="\n"+b.extraStackTrace()),na(a)},v:4400},buffer),sa=(b.___errno_location=q.___errno_location,b.___muldi3=q.___muldi3,b.___udivdi3=q.___udivdi3,b._bitshift64Lshr=q._bitshift64Lshr,b._bitshift64Shl=q._bitshift64Shl,b._csmFree=q._csmFree,b._csmGetDrawableConstantFlags=q._csmGetDrawableConstantFlags,b._csmGetDrawableCount=q._csmGetDrawableCount,b._csmGetDrawableDrawOrders=q._csmGetDrawableDrawOrders,b._csmGetDrawableDynamicFlags=q._csmGetDrawableDynamicFlags,b._csmGetDrawableIds=q._csmGetDrawableIds,b._csmGetDrawableIndexCounts=q._csmGetDrawableIndexCounts,b._csmGetDrawableIndices=q._csmGetDrawableIndices,b._csmGetDrawableMaskCounts=q._csmGetDrawableMaskCounts,b._csmGetDrawableMasks=q._csmGetDrawableMasks,b._csmGetDrawableMultiplyColors=q._csmGetDrawableMultiplyColors,b._csmGetDrawableOpacities=q._csmGetDrawableOpacities,b._csmGetDrawableParentPartIndices=q._csmGetDrawableParentPartIndices,b._csmGetDrawableRenderOrders=q._csmGetDrawableRenderOrders,b._csmGetDrawableScreenColors=q._csmGetDrawableScreenColors,b._csmGetDrawableTextureIndices=q._csmGetDrawableTextureIndices,b._csmGetDrawableVertexCounts=q._csmGetDrawableVertexCounts,b._csmGetDrawableVertexPositions=q._csmGetDrawableVertexPositions,b._csmGetDrawableVertexUvs=q._csmGetDrawableVertexUvs,b._csmGetLatestMocVersion=q._csmGetLatestMocVersion,b._csmGetMocVersion=q._csmGetMocVersion,b._csmGetParameterCount=q._csmGetParameterCount,b._csmGetParameterDefaultValues=q._csmGetParameterDefaultValues,b._csmGetParameterIds=q._csmGetParameterIds,b._csmGetParameterKeyCounts=q._csmGetParameterKeyCounts,b._csmGetParameterKeyValues=q._csmGetParameterKeyValues,b._csmGetParameterMaximumValues=q._csmGetParameterMaximumValues,b._csmGetParameterMinimumValues=q._csmGetParameterMinimumValues,b._csmGetParameterTypes=q._csmGetParameterTypes,b._csmGetParameterValues=q._csmGetParameterValues,b._csmGetPartCount=q._csmGetPartCount,b._csmGetPartIds=q._csmGetPartIds,b._csmGetPartOpacities=q._csmGetPartOpacities,b._csmGetPartParentPartIndices=q._csmGetPartParentPartIndices,b._csmGetSizeofModel=q._csmGetSizeofModel,b._csmGetVersion=q._csmGetVersion,b._csmInitializeModelInPlace=q._csmInitializeModelInPlace,b._csmMalloc=q._csmMalloc,b._csmMallocMoc=q._csmMallocMoc,b._csmMallocModelAndInitialize=q._csmMallocModelAndInitialize,b._csmReadCanvasInfo=q._csmReadCanvasInfo,b._csmResetDrawableDynamicFlags=q._csmResetDrawableDynamicFlags,b._csmReviveMocInPlace=q._csmReviveMocInPlace,b._csmSetLogFunction=q._csmSetLogFunction,b._csmUpdateModel=q._csmUpdateModel,b._emscripten_get_sbrk_ptr=q._emscripten_get_sbrk_ptr,b._emscripten_replace_memory=q._emscripten_replace_memory),xa=(b._free=q._free,b._i64Add=q._i64Add,b._i64Subtract=q._i64Subtract,b._malloc=q._malloc,b._memcpy=q._memcpy,b._memset=q._memset,b.establishStackSpace=q.establishStackSpace,b.stackAlloc=q.stackAlloc),ya=b.stackRestore=q.stackRestore,za=b.stackSave=q.stackSave;function Z(){function a(){if(!Y&&(Y=!0,!K)){if(P(ja),P(ka),b.onRuntimeInitialized&&b.onRuntimeInitialized(),b.postRun)for("function"==typeof b.postRun&&(b.postRun=[b.postRun]);b.postRun.length;){var a=b.postRun.shift();la.unshift(a)}P(la)}}if(!(0<Q)){if(b.preRun)for("function"==typeof b.preRun&&(b.preRun=[b.preRun]);b.preRun.length;)!function(){var a=b.preRun.shift();ia.unshift(a)}();P(ia),0<Q||(b.setStatus?(b.setStatus("Running..."),setTimeout(function(){setTimeout(function(){b.setStatus("")},1),a()},1)):a())}}if(b.dynCall_ii=q.dynCall_ii,b.dynCall_iiii=q.dynCall_iiii,b.dynCall_iiiii=q.dynCall_iiiii,b.dynCall_vi=q.dynCall_vi,b.dynCall_vii=q.dynCall_vii,b.dynCall_viiiii=q.dynCall_viiiii,b.asm=q,b.ccall=function(a,c,d,f){var g={string:function(a){var c=0;if(null!=a&&0!==a){var d=1+(a.length<<2),f=c=xa(d),g=M;if(0<d){for(var d=f+d-1,h=0;h<a.length;++h){var l=a.charCodeAt(h);if((l=55296<=l&&l<=57343?65536+((1023&l)<<10)|1023&a.charCodeAt(++h):l)<=127){if(d<=f)break;g[f++]=l}else{if(l<=2047){if(d<=f+1)break;g[f++]=192|l>>6}else{if(l<=65535){if(d<=f+2)break;g[f++]=224|l>>12}else{if(d<=f+3)break;g[f++]=240|l>>18,g[f++]=128|l>>12&63}g[f++]=128|l>>6&63}g[f++]=128|63&l}}g[f]=0}}return c},array:function(a){var c=xa(a.length);return N.set(a,c),c}},h=function(a){var c=b["_"+a];return assert(c,"Cannot call unknown function "+a+", make sure it is exported"),c}(a),p=[];if(a=0,f)for(var k=0;k<f.length;k++){var y=g[d[k]];y?(0===a&&(a=za()),p[k]=y(f[k])):p[k]=f[k]}return d=function(a){return"string"===c?da(a):"boolean"===c?!!a:a}(d=h.apply(null,p)),0!==a&&ya(a),d},b.UTF8ToString=da,b.addFunction=function(a){for(var c=0;c<1;c++)if(!I[c])return I[c]=a,1+c;throw"Finished up all reserved function pointers. Use a higher value for RESERVED_FUNCTION_POINTERS."},E&&((String.prototype.startsWith?E.startsWith(U):0===E.indexOf(U))||(n=E,E=b.locateFile?b.locateFile(n,u):u+n),r||t?(q=x(E),M.set(q,8)):(Q++,b.monitorRunDependencies&&b.monitorRunDependencies(Q),F=function(a){a.byteLength&&(a=new Uint8Array(a)),M.set(a,8),b.memoryInitializerRequest&&delete b.memoryInitializerRequest.response,Q--,b.monitorRunDependencies&&b.monitorRunDependencies(Q),0==Q&&(null!==S&&(clearInterval(S),S=null),T&&(a=T,T=null,a()))},Ca=function(){w(function(){throw"could not load memory initializer "+E})},(u=B(E))?F(u.buffer):b.memoryInitializerRequest?(n=function(){var a=b.memoryInitializerRequest,c=a.response;if(200!==a.status&&0!==a.status){if(!(c=B(b.memoryInitializerRequestURL)))return console.warn("a problem seems to have happened with Module.memoryInitializerRequest, status: "+a.status+", retrying "+E),void Ca();c=c.buffer}F(c)},b.memoryInitializerRequest.response?setTimeout(n,0):b.memoryInitializerRequest.addEventListener("load",n)):Ca())),b.then=function(a){var c;return Y?a(b):(c=b.onRuntimeInitialized,b.onRuntimeInitialized=function(){c&&c(),a(b)}),b},T=function Fa(){Y||Z(),Y||(T=Fa)},b.run=Z,b.preInit)for("function"==typeof b.preInit&&(b.preInit=[b.preInit]);0<b.preInit.length;)b.preInit.pop()();return Z(),_em_module}),_em=("object"==typeof exports&&"object"==typeof module?module.exports=_em_module:"function"==typeof define&&define.amd?define([],function(){return _em_module}):"object"==typeof exports&&(exports._em_module=_em_module),_em_module())}(Live2DCubismCore=Live2DCubismCore||{});

"use strict";(()=>{var Ha=Object.defineProperty;var Ga=(r,e,t)=>e in r?Ha(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t;var K=(r,e,t)=>(Ga(r,typeof e!="symbol"?e+"":e,t),t);var Xe="live2d-companion",Jn=`${Xe}--mini`,qi=`${Xe}__dragging`,Qt=`${Xe}__content`,qs=`${Qt}__toggle-menu`,Hi=`${Qt}__words`,Zt=`${Hi}--visible`,ei=`${Qt}__menu`,Bt=`${ei}__hide`,Vt=`${ei}__switch`,ct=`${ei}__toggle-words`,At=`${ei}__about`,Je=`${ei}__language`,Nr=`${Je}__toast`,Hs=`${Nr}--visible`,Et=`${Xe}__reveal`,Qn="disabled",Gi="open",Ya="https://github.com/mo-san/live2d-companion",Ka="https://github.com/mo-san/live2d-companion/blob/main/LICENSE",Xa="https://www.live2d.com/eula/live2d-open-software-license-agreement_en.html",Ja="https://www.live2d.com/eula/live2d-proprietary-software-license-agreement_en.html",Zn=`<div class="${Xe}">
  <div class="${Qt}" style="display: none;">
    <canvas></canvas>
    <div class="${Hi}"></div>
    <button class="${qs}"><div></div></button>
    <div class="${ei}">
      <a class="${Bt}"><p></p></a>
      <a class="${Vt}"><p></p></a>
      <a class="${ct}"><p></p></a>
      <div class="${Je}">
        <p></p>
        <select></select>
        <div class="${Nr}">Saved!</div>
      </div>
      <div class="${At}"><p></p><ul>
        <li>Each Live2D model is copy&shy;righted by its respec&shy;tive author.</li>
        <li>This app (<b>Live2D Compa&shy;nion</b>) is under <a href="${Ka}">MIT Li&shy;cense</a>.<br>
            The source code is avail&shy;able on <a href="${Ya}">Github</a>.</li>
        <li><b>Cubism Web Frame&shy;work</b> is under <a href="${Xa}">Live2D Open Software Li&shy;cense Agree&shy;ment</a>.</li>
        <li><b>Live2D Cubism Core</b> is under <a href="${Ja}">Live2D Pro&shy;prietary Software Li&shy;cense Agree&shy;ment</a>.</li>
      </div>
    </div>
  </div>
  <a class="${Et}"><p></p></a>
</div>`,eo="[Live2D-Companion] This browser does not support APIs for the app to run. Please consider using another newer browser.",to="[Live2D-Companion] No models provided.",Fr="live2d-companion";var Qa=300,Za=300,Gs=250,kr="top",Yi="bottom",Or="left",Dr="right";var el="bottomright",tl={x:0,y:0},il="top";var io=10,ro=60,so=3,no=1,oo=2,Ys="unset",$r={Idle:"Idle",TapBody:"TapBody"},Ks={Head:"Head",Body:"Body"},Ki={None:0,Idle:1,Normal:2,Force:3},ao=2,lo="version",ti="general",ii="datetime",ri="touch",Ae="default",si=`${Xe}-language`,uo={version:"1",models:[],useCache:!0,modelVisible:!0,modelPosition:el,slideInFrom:Yi,modelDistance:tl,width:Qa,height:Za,draggable:!0,wordsVisible:!0,wordsPosition:il,words:[]};var F=class{constructor(){this._tr=new Float32Array(16),this.loadIdentity()}static multiply(e,t,i){let s=new Float32Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]),n=4;for(let o=0;o<n;++o)for(let a=0;a<n;++a)for(let l=0;l<n;++l)s[a+o*4]+=e[l+o*4]*t[a+l*4];for(let o=0;o<16;++o)i[o]=s[o]}loadIdentity(){let e=new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]);this.setMatrix(e)}setMatrix(e){for(let t=0;t<16;++t)this._tr[t]=e[t]}getArray(){return this._tr}getScaleX(){return this._tr[0]}getScaleY(){return this._tr[5]}getTranslateX(){return this._tr[12]}getTranslateY(){return this._tr[13]}transformX(e){return this._tr[0]*e+this._tr[12]}transformY(e){return this._tr[5]*e+this._tr[13]}invertTransformX(e){return(e-this._tr[12])/this._tr[0]}invertTransformY(e){return(e-this._tr[13])/this._tr[5]}translateRelative(e,t){let i=new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,e,t,0,1]);F.multiply(i,this._tr,this._tr)}translate(e,t){this._tr[12]=e,this._tr[13]=t}translateX(e){this._tr[12]=e}translateY(e){this._tr[13]=e}scaleRelative(e,t){let i=new Float32Array([e,0,0,0,0,t,0,0,0,0,1,0,0,0,0,1]);F.multiply(i,this._tr,this._tr)}scale(e,t){this._tr[0]=e,this._tr[5]=t}multiplyByMatrix(e){F.multiply(e.getArray(),this._tr,this._tr)}clone(){let e=new F;for(let t=0;t<this._tr.length;t++)e._tr[t]=this._tr[t];return e}_tr},rl;(e=>e.CubismMatrix44=F)(rl||={});var ni=class extends F{constructor(){super(),this._screenLeft=0,this._screenRight=0,this._screenTop=0,this._screenBottom=0,this._maxLeft=0,this._maxRight=0,this._maxTop=0,this._maxBottom=0,this._maxScale=0,this._minScale=0}adjustTranslate(e,t){this._tr[0]*this._maxLeft+(this._tr[12]+e)>this._screenLeft&&(e=this._screenLeft-this._tr[0]*this._maxLeft-this._tr[12]),this._tr[0]*this._maxRight+(this._tr[12]+e)<this._screenRight&&(e=this._screenRight-this._tr[0]*this._maxRight-this._tr[12]),this._tr[5]*this._maxTop+(this._tr[13]+t)<this._screenTop&&(t=this._screenTop-this._tr[5]*this._maxTop-this._tr[13]),this._tr[5]*this._maxBottom+(this._tr[13]+t)>this._screenBottom&&(t=this._screenBottom-this._tr[5]*this._maxBottom-this._tr[13]);let i=new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,e,t,0,1]);F.multiply(i,this._tr,this._tr)}adjustScale(e,t,i){let s=this.getMaxScale(),n=this.getMinScale(),o=i*this._tr[0];o<n?this._tr[0]>0&&(i=n/this._tr[0]):o>s&&this._tr[0]>0&&(i=s/this._tr[0]);let a=new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,e,t,0,1]),l=new Float32Array([i,0,0,0,0,i,0,0,0,0,1,0,0,0,0,1]),u=new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,-e,-t,0,1]);F.multiply(u,this._tr,this._tr),F.multiply(l,this._tr,this._tr),F.multiply(a,this._tr,this._tr)}setScreenRect(e,t,i,s){this._screenLeft=e,this._screenRight=t,this._screenBottom=i,this._screenTop=s}setMaxScreenRect(e,t,i,s){this._maxLeft=e,this._maxRight=t,this._maxTop=s,this._maxBottom=i}setMaxScale(e){this._maxScale=e}setMinScale(e){this._minScale=e}getMaxScale(){return this._maxScale}getMinScale(){return this._minScale}isMaxScale(){return this.getScaleX()>=this._maxScale}isMinScale(){return this.getScaleX()<=this._minScale}getScreenLeft(){return this._screenLeft}getScreenRight(){return this._screenRight}getScreenBottom(){return this._screenBottom}getScreenTop(){return this._screenTop}getMaxLeft(){return this._maxLeft}getMaxRight(){return this._maxRight}getMaxBottom(){return this._maxBottom}getMaxTop(){return this._maxTop}_screenLeft;_screenRight;_screenTop;_screenBottom;_maxLeft;_maxRight;_maxTop;_maxBottom;_maxScale;_minScale},nl;(e=>e.CubismViewMatrix=ni)(nl||={});function co(r){let e={[Vt]:"Switch Model",[Bt]:"Hide Widget",[ct]:{turnOff:"Hide Words",turnOn:"Show Words"},[Je]:"Select Language",[At]:"About",[Et]:"Show Widget"},t={[Vt]:"",[Bt]:"",[ct]:{turnOff:"",turnOn:""},[Je]:"",[At]:"",[Et]:""};switch(r.toLowerCase()){case"en":case"en-us":case"en_us":return e;case"ja":case"ja-jp":case"ja_jp":return t;default:return e}}var Ur=Symbol.for("yaml.alias"),zr=Symbol.for("yaml.document"),de=Symbol.for("yaml.map"),Xs=Symbol.for("yaml.pair"),ce=Symbol.for("yaml.scalar"),Qe=Symbol.for("yaml.seq"),te=Symbol.for("yaml.node.type"),fe=r=>!!r&&typeof r=="object"&&r[te]===Ur,Lt=r=>!!r&&typeof r=="object"&&r[te]===zr,oe=r=>!!r&&typeof r=="object"&&r[te]===de,E=r=>!!r&&typeof r=="object"&&r[te]===Xs,B=r=>!!r&&typeof r=="object"&&r[te]===ce,ge=r=>!!r&&typeof r=="object"&&r[te]===Qe;function R(r){if(r&&typeof r=="object")switch(r[te]){case de:case Qe:return!0}return!1}function L(r){if(r&&typeof r=="object")switch(r[te]){case Ur:case de:case ce:case Qe:return!0}return!1}var mo=r=>(B(r)||R(r))&&!!r.anchor,mt=class{constructor(e){Object.defineProperty(this,te,{value:e})}clone(){let e=Object.create(Object.getPrototypeOf(this),Object.getOwnPropertyDescriptors(this));return this.range&&(e.range=this.range.slice()),e}};var ie=Symbol("break visit"),ho=Symbol("skip children"),Ee=Symbol("remove node");function be(r,e){let t=po(e);Lt(r)?oi(null,r.contents,t,Object.freeze([r]))===Ee&&(r.contents=null):oi(null,r,t,Object.freeze([]))}be.BREAK=ie;be.SKIP=ho;be.REMOVE=Ee;function oi(r,e,t,i){let s=fo(r,e,t,i);if(L(s)||E(s))return go(r,i,s),oi(r,s,t,i);if(typeof s!="symbol"){if(R(e)){i=Object.freeze(i.concat(e));for(let n=0;n<e.items.length;++n){let o=oi(n,e.items[n],t,i);if(typeof o=="number")n=o-1;else{if(o===ie)return ie;o===Ee&&(e.items.splice(n,1),n-=1)}}}else if(E(e)){i=Object.freeze(i.concat(e));let n=oi("key",e.key,t,i);if(n===ie)return ie;n===Ee&&(e.key=null);let o=oi("value",e.value,t,i);if(o===ie)return ie;o===Ee&&(e.value=null)}}return s}async function jr(r,e){let t=po(e);Lt(r)?await ai(null,r.contents,t,Object.freeze([r]))===Ee&&(r.contents=null):await ai(null,r,t,Object.freeze([]))}jr.BREAK=ie;jr.SKIP=ho;jr.REMOVE=Ee;async function ai(r,e,t,i){let s=await fo(r,e,t,i);if(L(s)||E(s))return go(r,i,s),ai(r,s,t,i);if(typeof s!="symbol"){if(R(e)){i=Object.freeze(i.concat(e));for(let n=0;n<e.items.length;++n){let o=await ai(n,e.items[n],t,i);if(typeof o=="number")n=o-1;else{if(o===ie)return ie;o===Ee&&(e.items.splice(n,1),n-=1)}}}else if(E(e)){i=Object.freeze(i.concat(e));let n=await ai("key",e.key,t,i);if(n===ie)return ie;n===Ee&&(e.key=null);let o=await ai("value",e.value,t,i);if(o===ie)return ie;o===Ee&&(e.value=null)}}return s}function po(r){return typeof r=="object"&&(r.Collection||r.Node||r.Value)?Object.assign({Alias:r.Node,Map:r.Node,Scalar:r.Node,Seq:r.Node},r.Value&&{Map:r.Value,Scalar:r.Value,Seq:r.Value},r.Collection&&{Map:r.Collection,Seq:r.Collection},r):r}function fo(r,e,t,i){if(typeof t=="function")return t(r,e,i);if(oe(e))return t.Map?.(r,e,i);if(ge(e))return t.Seq?.(r,e,i);if(E(e))return t.Pair?.(r,e,i);if(B(e))return t.Scalar?.(r,e,i);if(fe(e))return t.Alias?.(r,e,i)}function go(r,e,t){let i=e[e.length-1];if(R(i))i.items[r]=t;else if(E(i))r==="key"?i.key=t:i.value=t;else if(Lt(i))i.contents=t;else{let s=fe(i)?"alias":"scalar";throw new Error(`Cannot replace node with ${s} parent`)}}var al={"!":"%21",",":"%2C","[":"%5B","]":"%5D","{":"%7B","}":"%7D"},ll=r=>r.replace(/[!,[\]{}]/g,e=>al[e]),W=class{constructor(e,t){this.docStart=null,this.docEnd=!1,this.yaml=Object.assign({},W.defaultYaml,e),this.tags=Object.assign({},W.defaultTags,t)}clone(){let e=new W(this.yaml,this.tags);return e.docStart=this.docStart,e}atDocument(){let e=new W(this.yaml,this.tags);switch(this.yaml.version){case"1.1":this.atNextDocument=!0;break;case"1.2":this.atNextDocument=!1,this.yaml={explicit:W.defaultYaml.explicit,version:"1.2"},this.tags=Object.assign({},W.defaultTags);break}return e}add(e,t){this.atNextDocument&&(this.yaml={explicit:W.defaultYaml.explicit,version:"1.1"},this.tags=Object.assign({},W.defaultTags),this.atNextDocument=!1);let i=e.trim().split(/[ \t]+/),s=i.shift();switch(s){case"%TAG":{if(i.length!==2&&(t(0,"%TAG directive should contain exactly two parts"),i.length<2))return!1;let[n,o]=i;return this.tags[n]=o,!0}case"%YAML":{if(this.yaml.explicit=!0,i.length!==1)return t(0,"%YAML directive should contain exactly one part"),!1;let[n]=i;if(n==="1.1"||n==="1.2")return this.yaml.version=n,!0;{let o=/^\d+\.\d+$/.test(n);return t(6,`Unsupported YAML version ${n}`,o),!1}}default:return t(0,`Unknown directive ${s}`,!0),!1}}tagName(e,t){if(e==="!")return"!";if(e[0]!=="!")return t(`Not a valid tag: ${e}`),null;if(e[1]==="<"){let o=e.slice(2,-1);return o==="!"||o==="!!"?(t(`Verbatim tags aren't resolved, so ${e} is invalid.`),null):(e[e.length-1]!==">"&&t("Verbatim tags must end with a >"),o)}let[,i,s]=e.match(/^(.*!)([^!]*)$/);s||t(`The ${e} tag has no suffix`);let n=this.tags[i];return n?n+decodeURIComponent(s):i==="!"?e:(t(`Could not resolve tag: ${e}`),null)}tagString(e){for(let[t,i]of Object.entries(this.tags))if(e.startsWith(i))return t+ll(e.substring(i.length));return e[0]==="!"?e:`!<${e}>`}toString(e){let t=this.yaml.explicit?[`%YAML ${this.yaml.version||"1.2"}`]:[],i=Object.entries(this.tags),s;if(e&&i.length>0&&L(e.contents)){let n={};be(e.contents,(o,a)=>{L(a)&&a.tag&&(n[a.tag]=!0)}),s=Object.keys(n)}else s=[];for(let[n,o]of i)n==="!!"&&o==="tag:yaml.org,2002:"||(!e||s.some(a=>a.startsWith(o)))&&t.push(`%TAG ${n} ${o}`);return t.join(`
`)}};W.defaultYaml={explicit:!1,version:"1.2"};W.defaultTags={"!!":"tag:yaml.org,2002:"};function Wr(r){if(/[\x00-\x19\s,[\]{}]/.test(r)){let t=`Anchor must not contain whitespace or control characters: ${JSON.stringify(r)}`;throw new Error(t)}return!0}function Js(r){let e=new Set;return be(r,{Value(t,i){i.anchor&&e.add(i.anchor)}}),e}function Qs(r,e){for(let t=1;;++t){let i=`${r}${t}`;if(!e.has(i))return i}}function bo(r,e){let t=[],i=new Map,s=null;return{onAnchor:n=>{t.push(n),s||(s=Js(r));let o=Qs(e,s);return s.add(o),o},setAnchors:()=>{for(let n of t){let o=i.get(n);if(typeof o=="object"&&o.anchor&&(B(o.node)||R(o.node)))o.node.anchor=o.anchor;else{let a=new Error("Failed to resolve repeated object (this should not happen)");throw a.source=n,a}}},sourceObjects:i}}var Ze=class extends mt{constructor(e){super(Ur),this.source=e,Object.defineProperty(this,"tag",{set(){throw new Error("Alias nodes cannot have tags")}})}resolve(e){let t;return be(e,{Node:(i,s)=>{if(s===this)return be.BREAK;s.anchor===this.source&&(t=s)}}),t}toJSON(e,t){if(!t)return{source:this.source};let{anchors:i,doc:s,maxAliasCount:n}=t,o=this.resolve(s);if(!o){let l=`Unresolved alias (the anchor must be set before the alias): ${this.source}`;throw new ReferenceError(l)}let a=i.get(o);if(!a||a.res===void 0){let l="This should not happen: Alias anchor was not resolved?";throw new ReferenceError(l)}if(n>=0&&(a.count+=1,a.aliasCount===0&&(a.aliasCount=qr(s,o,i)),a.count*a.aliasCount>n)){let l="Excessive alias count indicates a resource exhaustion attack";throw new ReferenceError(l)}return a.res}toString(e,t,i){let s=`*${this.source}`;if(e){if(Wr(this.source),e.options.verifyAliasOrder&&!e.anchors.has(this.source)){let n=`Unresolved alias (the anchor must be set before the alias): ${this.source}`;throw new Error(n)}if(e.implicitKey)return`${s} `}return s}};function qr(r,e,t){if(fe(e)){let i=e.resolve(r),s=t&&i&&t.get(i);return s?s.count*s.aliasCount:0}else if(R(e)){let i=0;for(let s of e.items){let n=qr(r,s,t);n>i&&(i=n)}return i}else if(E(e)){let i=qr(r,e.key,t),s=qr(r,e.value,t);return Math.max(i,s)}return 1}function J(r,e,t){if(Array.isArray(r))return r.map((i,s)=>J(i,String(s),t));if(r&&typeof r.toJSON=="function"){if(!t||!mo(r))return r.toJSON(e,t);let i={aliasCount:0,count:1,res:void 0};t.anchors.set(r,i),t.onCreate=n=>{i.res=n,delete t.onCreate};let s=r.toJSON(e,t);return t.onCreate&&t.onCreate(s),s}return typeof r=="bigint"&&!t?.keep?Number(r):r}var Hr=r=>!r||typeof r!="function"&&typeof r!="object",P=class extends mt{constructor(e){super(ce),this.value=e}toJSON(e,t){return t?.keep?this.value:J(this.value,e,t)}toString(){return String(this.value)}};P.BLOCK_FOLDED="BLOCK_FOLDED";P.BLOCK_LITERAL="BLOCK_LITERAL";P.PLAIN="PLAIN";P.QUOTE_DOUBLE="QUOTE_DOUBLE";P.QUOTE_SINGLE="QUOTE_SINGLE";var ul="tag:yaml.org,2002:";function cl(r,e,t){if(e){let i=t.filter(n=>n.tag===e),s=i.find(n=>!n.format)??i[0];if(!s)throw new Error(`Tag ${e} not found`);return s}return t.find(i=>i.identify?.(r)&&!i.format)}function et(r,e,t){if(Lt(r)&&(r=r.contents),L(r))return r;if(E(r)){let m=t.schema[de].createNode?.(t.schema,null,t);return m.items.push(r),m}(r instanceof String||r instanceof Number||r instanceof Boolean||typeof BigInt<"u"&&r instanceof BigInt)&&(r=r.valueOf());let{aliasDuplicateObjects:i,onAnchor:s,onTagObj:n,schema:o,sourceObjects:a}=t,l;if(i&&r&&typeof r=="object"){if(l=a.get(r),l)return l.anchor||(l.anchor=s(r)),new Ze(l.anchor);l={anchor:null,node:null},a.set(r,l)}e?.startsWith("!!")&&(e=ul+e.slice(2));let u=cl(r,e,o.tags);if(!u){if(r&&typeof r.toJSON=="function"&&(r=r.toJSON()),!r||typeof r!="object"){let m=new P(r);return l&&(l.node=m),m}u=r instanceof Map?o[de]:Symbol.iterator in Object(r)?o[Qe]:o[de]}n&&(n(u),delete t.onTagObj);let c=u?.createNode?u.createNode(t.schema,r,t):new P(r);return e&&(c.tag=e),l&&(l.node=c),c}function Xi(r,e,t){let i=t;for(let s=e.length-1;s>=0;--s){let n=e[s];if(typeof n=="number"&&Number.isInteger(n)&&n>=0){let o=[];o[n]=i,i=o}else i=new Map([[n,i]])}return et(i,void 0,{aliasDuplicateObjects:!1,keepUndefined:!1,onAnchor:()=>{throw new Error("This should not happen, please report a bug.")},schema:r,sourceObjects:new Map})}var li=r=>r==null||typeof r=="object"&&!!r[Symbol.iterator]().next().done,tt=class extends mt{constructor(e,t){super(e),Object.defineProperty(this,"schema",{value:t,configurable:!0,enumerable:!1,writable:!0})}clone(e){let t=Object.create(Object.getPrototypeOf(this),Object.getOwnPropertyDescriptors(this));return e&&(t.schema=e),t.items=t.items.map(i=>L(i)||E(i)?i.clone(e):i),this.range&&(t.range=this.range.slice()),t}addIn(e,t){if(li(e))this.add(t);else{let[i,...s]=e,n=this.get(i,!0);if(R(n))n.addIn(s,t);else if(n===void 0&&this.schema)this.set(i,Xi(this.schema,s,t));else throw new Error(`Expected YAML collection at ${i}. Remaining path: ${s}`)}}deleteIn(e){let[t,...i]=e;if(i.length===0)return this.delete(t);let s=this.get(t,!0);if(R(s))return s.deleteIn(i);throw new Error(`Expected YAML collection at ${t}. Remaining path: ${i}`)}getIn(e,t){let[i,...s]=e,n=this.get(i,!0);return s.length===0?!t&&B(n)?n.value:n:R(n)?n.getIn(s,t):void 0}hasAllNullValues(e){return this.items.every(t=>{if(!E(t))return!1;let i=t.value;return i==null||e&&B(i)&&i.value==null&&!i.commentBefore&&!i.comment&&!i.tag})}hasIn(e){let[t,...i]=e;if(i.length===0)return this.has(t);let s=this.get(t,!0);return R(s)?s.hasIn(i):!1}setIn(e,t){let[i,...s]=e;if(s.length===0)this.set(i,t);else{let n=this.get(i,!0);if(R(n))n.setIn(s,t);else if(n===void 0&&this.schema)this.set(i,Xi(this.schema,s,t));else throw new Error(`Expected YAML collection at ${i}. Remaining path: ${s}`)}}};tt.maxFlowStringSingleLineLength=60;var yo=r=>r.replace(/^(?!$)(?: $)?/gm,"#");function me(r,e){return/^\n+$/.test(r)?r.substring(1):e?r.replace(/^(?! *$)/gm,e):r}var ye=(r,e,t)=>r.endsWith(`
`)?me(t,e):t.includes(`
`)?`
`+me(t,e):(r.endsWith(" ")?"":" ")+t;var Zs="flow",Gr="block",Ji="quoted";function Qi(r,e,t="flow",{indentAtStart:i,lineWidth:s=80,minContentWidth:n=20,onFold:o,onOverflow:a}={}){if(!s||s<0)return r;let l=Math.max(1+n,1+s-e.length);if(r.length<=l)return r;let u=[],c={},m=s-e.length;typeof i=="number"&&(i>s-Math.max(2,n)?u.push(0):m=s-i);let h,d,f=!1,g=-1,p=-1,b=-1;t===Gr&&(g=_o(r,g),g!==-1&&(m=g+l));for(let _;_=r[g+=1];){if(t===Ji&&_==="\\"){switch(p=g,r[g+1]){case"x":g+=3;break;case"u":g+=5;break;case"U":g+=9;break;default:g+=1}b=g}if(_===`
`)t===Gr&&(g=_o(r,g)),m=g+l,h=void 0;else{if(_===" "&&d&&d!==" "&&d!==`
`&&d!=="	"){let y=r[g+1];y&&y!==" "&&y!==`
`&&y!=="	"&&(h=g)}if(g>=m)if(h)u.push(h),m=h+l,h=void 0;else if(t===Ji){for(;d===" "||d==="	";)d=_,_=r[g+=1],f=!0;let y=g>b+1?g-2:p-1;if(c[y])return r;u.push(y),c[y]=!0,m=y+l,h=void 0}else f=!0}d=_}if(f&&a&&a(),u.length===0)return r;o&&o();let x=r.slice(0,u[0]);for(let _=0;_<u.length;++_){let y=u[_],S=u[_+1]||r.length;y===0?x=`
${e}${r.slice(0,S)}`:(t===Ji&&c[y]&&(x+=`${r[y]}\\`),x+=`
${e}${r.slice(y+1,S)}`)}return x}function _o(r,e){let t=r[e+1];for(;t===" "||t==="	";){do t=r[e+=1];while(t&&t!==`
`);t=r[e+1]}return e}var Kr=r=>({indentAtStart:r.indentAtStart,lineWidth:r.options.lineWidth,minContentWidth:r.options.minContentWidth}),Xr=r=>/^(%|---|\.\.\.)/m.test(r);function ml(r,e,t){if(!e||e<0)return!1;let i=e-t,s=r.length;if(s<=i)return!1;for(let n=0,o=0;n<s;++n)if(r[n]===`
`){if(n-o>i)return!0;if(o=n+1,s-o<=i)return!1}return!0}function Zi(r,e){let t=JSON.stringify(r);if(e.options.doubleQuotedAsJSON)return t;let{implicitKey:i}=e,s=e.options.doubleQuotedMinMultiLineLength,n=e.indent||(Xr(r)?"  ":""),o="",a=0;for(let l=0,u=t[l];u;u=t[++l])if(u===" "&&t[l+1]==="\\"&&t[l+2]==="n"&&(o+=t.slice(a,l)+"\\ ",l+=1,a=l,u="\\"),u==="\\")switch(t[l+1]){case"u":{o+=t.slice(a,l);let c=t.substr(l+2,4);switch(c){case"0000":o+="\\0";break;case"0007":o+="\\a";break;case"000b":o+="\\v";break;case"001b":o+="\\e";break;case"0085":o+="\\N";break;case"00a0":o+="\\_";break;case"2028":o+="\\L";break;case"2029":o+="\\P";break;default:c.substr(0,2)==="00"?o+="\\x"+c.substr(2):o+=t.substr(l,6)}l+=5,a=l+1}break;case"n":if(i||t[l+2]==='"'||t.length<s)l+=1;else{for(o+=t.slice(a,l)+`

`;t[l+2]==="\\"&&t[l+3]==="n"&&t[l+4]!=='"';)o+=`
`,l+=2;o+=n,t[l+2]===" "&&(o+="\\"),l+=1,a=l+1}break;default:l+=1}return o=a?o+t.slice(a):t,i?o:Qi(o,n,Ji,Kr(e))}function en(r,e){if(e.options.singleQuote===!1||e.implicitKey&&r.includes(`
`)||/[ \t]\n|\n[ \t]/.test(r))return Zi(r,e);let t=e.indent||(Xr(r)?"  ":""),i="'"+r.replace(/'/g,"''").replace(/\n+/g,`$&
${t}`)+"'";return e.implicitKey?i:Qi(i,t,Zs,Kr(e))}function er(r,e){let{singleQuote:t}=e.options,i;if(t===!1)i=Zi;else{let s=r.includes('"'),n=r.includes("'");s&&!n?i=en:n&&!s?i=Zi:i=t?en:Zi}return i(r,e)}function Yr({comment:r,type:e,value:t},i,s,n){let{blockQuote:o,commentString:a,lineWidth:l}=i.options;if(!o||/\n[\t ]+$/.test(t)||/^\s*$/.test(t))return er(t,i);let u=i.indent||(i.forceBlockIndent||Xr(t)?"  ":""),c=o==="literal"?!0:o==="folded"||e===P.BLOCK_FOLDED?!1:e===P.BLOCK_LITERAL?!0:!ml(t,l,u.length);if(!t)return c?`|
`:`>
`;let m,h;for(h=t.length;h>0;--h){let C=t[h-1];if(C!==`
`&&C!=="	"&&C!==" ")break}let d=t.substring(h),f=d.indexOf(`
`);f===-1?m="-":t===d||f!==d.length-1?(m="+",n&&n()):m="",d&&(t=t.slice(0,-d.length),d[d.length-1]===`
`&&(d=d.slice(0,-1)),d=d.replace(/\n+(?!\n|$)/g,`$&${u}`));let g=!1,p,b=-1;for(p=0;p<t.length;++p){let C=t[p];if(C===" ")g=!0;else if(C===`
`)b=p;else break}let x=t.substring(0,b<p?b+1:p);x&&(t=t.substring(x.length),x=x.replace(/\n+/g,`$&${u}`));let y=(c?"|":">")+(g?u?"2":"1":"")+m;if(r&&(y+=" "+a(r.replace(/ ?[\r\n]+/g," ")),s&&s()),c)return t=t.replace(/\n+/g,`$&${u}`),`${y}
${u}${x}${t}${d}`;t=t.replace(/\n+/g,`
$&`).replace(/(?:^|\n)([\t ].*)(?:([\n\t ]*)\n(?![\n\t ]))?/g,"$1$2").replace(/\n+/g,`$&${u}`);let S=Qi(`${x}${t}${d}`,u,Gr,Kr(i));return`${y}
${u}${S}`}function hl(r,e,t,i){let{type:s,value:n}=r,{actualString:o,implicitKey:a,indent:l,inFlow:u}=e;if(a&&/[\n[\]{},]/.test(n)||u&&/[[\]{},]/.test(n))return er(n,e);if(!n||/^[\n\t ,[\]{}#&*!|>'"%@`]|^[?-]$|^[?-][ \t]|[\n:][ \t]|[ \t]\n|[\n\t ]#|[\n\t :]$/.test(n))return a||u||!n.includes(`
`)?er(n,e):Yr(r,e,t,i);if(!a&&!u&&s!==P.PLAIN&&n.includes(`
`))return Yr(r,e,t,i);if(l===""&&Xr(n))return e.forceBlockIndent=!0,Yr(r,e,t,i);let c=n.replace(/\n+/g,`$&
${l}`);if(o){let m=f=>f.default&&f.tag!=="tag:yaml.org,2002:str"&&f.test?.test(c),{compat:h,tags:d}=e.doc.schema;if(d.some(m)||h?.some(m))return er(n,e)}return a?c:Qi(c,l,Zs,Kr(e))}function Rt(r,e,t,i){let{implicitKey:s,inFlow:n}=e,o=typeof r.value=="string"?r:Object.assign({},r,{value:String(r.value)}),{type:a}=r;a!==P.QUOTE_DOUBLE&&/[\x00-\x08\x0b-\x1f\x7f-\x9f\u{D800}-\u{DFFF}]/u.test(o.value)&&(a=P.QUOTE_DOUBLE);let l=c=>{switch(c){case P.BLOCK_FOLDED:case P.BLOCK_LITERAL:return s||n?er(o.value,e):Yr(o,e,t,i);case P.QUOTE_DOUBLE:return Zi(o.value,e);case P.QUOTE_SINGLE:return en(o.value,e);case P.PLAIN:return hl(o,e,t,i);default:return null}},u=l(a);if(u===null){let{defaultKeyType:c,defaultStringType:m}=e.options,h=s&&c||m;if(u=l(h),u===null)throw new Error(`Unsupported default string type ${h}`)}return u}function Jr(r,e){let t=Object.assign({blockQuote:!0,commentString:yo,defaultKeyType:null,defaultStringType:"PLAIN",directives:null,doubleQuotedAsJSON:!1,doubleQuotedMinMultiLineLength:40,falseStr:"false",indentSeq:!0,lineWidth:80,minContentWidth:20,nullStr:"null",simpleKeys:!1,singleQuote:null,trueStr:"true",verifyAliasOrder:!0},r.schema.toStringOptions,e),i;switch(t.collectionStyle){case"block":i=!1;break;case"flow":i=!0;break;default:i=null}return{anchors:new Set,doc:r,indent:"",indentStep:typeof t.indent=="number"?" ".repeat(t.indent):"  ",inFlow:i,options:t}}function pl(r,e){if(e.tag){let s=r.filter(n=>n.tag===e.tag);if(s.length>0)return s.find(n=>n.format===e.format)??s[0]}let t,i;if(B(e)){i=e.value;let s=r.filter(n=>n.identify?.(i));t=s.find(n=>n.format===e.format)??s.find(n=>!n.format)}else i=e,t=r.find(s=>s.nodeClass&&i instanceof s.nodeClass);if(!t){let s=i?.constructor?.name??typeof i;throw new Error(`Tag not resolved for ${s} value`)}return t}function dl(r,e,{anchors:t,doc:i}){if(!i.directives)return"";let s=[],n=(B(r)||R(r))&&r.anchor;n&&Wr(n)&&(t.add(n),s.push(`&${n}`));let o=r.tag?r.tag:e.default?null:e.tag;return o&&s.push(i.directives.tagString(o)),s.join(" ")}function _e(r,e,t,i){if(E(r))return r.toString(e,t,i);if(fe(r)){if(e.doc.directives)return r.toString(e);if(e.resolvedAliases?.has(r))throw new TypeError("Cannot stringify circular structure without alias nodes");e.resolvedAliases?e.resolvedAliases.add(r):e.resolvedAliases=new Set([r]),r=r.resolve(e.doc)}let s,n=L(r)?r:e.doc.createNode(r,{onTagObj:l=>s=l});s||(s=pl(e.doc.schema.tags,n));let o=dl(n,s,e);o.length>0&&(e.indentAtStart=(e.indentAtStart??0)+o.length+1);let a=typeof s.stringify=="function"?s.stringify(n,e,t,i):B(n)?Rt(n,e,t,i):n.toString(e,t,i);return o?B(n)||a[0]==="{"||a[0]==="["?`${o} ${a}`:`${o}
${e.indent}${a}`:a}function Co({key:r,value:e},t,i,s){let{allNullValues:n,doc:o,indent:a,indentStep:l,options:{commentString:u,indentSeq:c,simpleKeys:m}}=t,h=L(r)&&r.comment||null;if(m){if(h)throw new Error("With simple keys, key nodes cannot have comments");if(R(r)){let C="With simple keys, collection cannot be used as a key value";throw new Error(C)}}let d=!m&&(!r||h&&e==null&&!t.inFlow||R(r)||(B(r)?r.type===P.BLOCK_FOLDED||r.type===P.BLOCK_LITERAL:typeof r=="object"));t=Object.assign({},t,{allNullValues:!1,implicitKey:!d&&(m||!n),indent:a+l});let f=!1,g=!1,p=_e(r,t,()=>f=!0,()=>g=!0);if(!d&&!t.inFlow&&p.length>1024){if(m)throw new Error("With simple keys, single line scalar must not span more than 1024 characters");d=!0}if(t.inFlow){if(n||e==null)return f&&i&&i(),p===""?"?":d?`? ${p}`:p}else if(n&&!m||e==null&&d)return p=`? ${p}`,h&&!f?p+=ye(p,t.indent,u(h)):g&&s&&s(),p;f&&(h=null),d?(h&&(p+=ye(p,t.indent,u(h))),p=`? ${p}
${a}:`):(p=`${p}:`,h&&(p+=ye(p,t.indent,u(h))));let b="",x=null;if(L(e)){if(e.spaceBefore&&(b=`
`),e.commentBefore){let C=u(e.commentBefore);b+=`
${me(C,t.indent)}`}x=e.comment}else e&&typeof e=="object"&&(e=o.createNode(e));t.implicitKey=!1,!d&&!h&&B(e)&&(t.indentAtStart=p.length+1),g=!1,!c&&l.length>=2&&!t.inFlow&&!d&&ge(e)&&!e.flow&&!e.tag&&!e.anchor&&(t.indent=t.indent.substr(2));let _=!1,y=_e(e,t,()=>_=!0,()=>g=!0),S=" ";return b||h?y===""&&!t.inFlow?S=b===`
`?`

`:b:S=`${b}
${t.indent}`:!d&&R(e)?(!(y[0]==="["||y[0]==="{")||y.includes(`
`))&&(S=`
${t.indent}`):(y===""||y[0]===`
`)&&(S=""),p+=S+y,t.inFlow?_&&i&&i():x&&!_?p+=ye(p,t.indent,u(x)):g&&s&&s(),p}function Qr(r,e){(r==="debug"||r==="warn")&&(typeof process<"u"&&process.emitWarning?process.emitWarning(e):console.warn(e))}var xo="<<";function Zr(r,e,{key:t,value:i}){if(r?.doc.schema.merge&&fl(t))if(i=fe(i)?i.resolve(r.doc):i,ge(i))for(let s of i.items)tn(r,e,s);else if(Array.isArray(i))for(let s of i)tn(r,e,s);else tn(r,e,i);else{let s=J(t,"",r);if(e instanceof Map)e.set(s,J(i,s,r));else if(e instanceof Set)e.add(s);else{let n=gl(t,s,r),o=J(i,n,r);n in e?Object.defineProperty(e,n,{value:o,writable:!0,enumerable:!0,configurable:!0}):e[n]=o}}return e}var fl=r=>r===xo||B(r)&&r.value===xo&&(!r.type||r.type===P.PLAIN);function tn(r,e,t){let i=r&&fe(t)?t.resolve(r.doc):t;if(!oe(i))throw new Error("Merge sources must be maps or map aliases");let s=i.toJSON(null,r,Map);for(let[n,o]of s)e instanceof Map?e.has(n)||e.set(n,o):e instanceof Set?e.add(n):Object.prototype.hasOwnProperty.call(e,n)||Object.defineProperty(e,n,{value:o,writable:!0,enumerable:!0,configurable:!0});return e}function gl(r,e,t){if(e===null)return"";if(typeof e!="object")return String(e);if(L(r)&&t&&t.doc){let i=Jr(t.doc,{});i.anchors=new Set;for(let n of t.anchors.keys())i.anchors.add(n.anchor);i.inFlow=!0,i.inStringifyKey=!0;let s=r.toString(i);if(!t.mapKeyWarned){let n=JSON.stringify(s);n.length>40&&(n=n.substring(0,36)+'..."'),Qr(t.doc.options.logLevel,`Keys with collection values will be stringified due to JS Object restrictions: ${n}. Set mapAsMap: true to use object keys.`),t.mapKeyWarned=!0}return s}return JSON.stringify(e)}function ui(r,e,t){let i=et(r,void 0,t),s=et(e,void 0,t);return new $(i,s)}var $=class{constructor(e,t=null){Object.defineProperty(this,te,{value:Xs}),this.key=e,this.value=t}clone(e){let{key:t,value:i}=this;return L(t)&&(t=t.clone(e)),L(i)&&(i=i.clone(e)),new $(t,i)}toJSON(e,t){let i=t?.mapAsMap?new Map:{};return Zr(t,i,this)}toString(e,t,i){return e?.doc?Co(this,e,t,i):JSON.stringify(this)}};function ts(r,e,t){return(e.inFlow??r.flow?yl:bl)(r,e,t)}function bl({comment:r,items:e},t,{blockItemPrefix:i,flowChars:s,itemIndent:n,onChompKeep:o,onComment:a}){let{indent:l,options:{commentString:u}}=t,c=Object.assign({},t,{indent:n,type:null}),m=!1,h=[];for(let f=0;f<e.length;++f){let g=e[f],p=null;if(L(g))!m&&g.spaceBefore&&h.push(""),es(t,h,g.commentBefore,m),g.comment&&(p=g.comment);else if(E(g)){let x=L(g.key)?g.key:null;x&&(!m&&x.spaceBefore&&h.push(""),es(t,h,x.commentBefore,m))}m=!1;let b=_e(g,c,()=>p=null,()=>m=!0);p&&(b+=ye(b,n,u(p))),m&&p&&(m=!1),h.push(i+b)}let d;if(h.length===0)d=s.start+s.end;else{d=h[0];for(let f=1;f<h.length;++f){let g=h[f];d+=g?`
${l}${g}`:`
`}}return r?(d+=`
`+me(u(r),l),a&&a()):m&&o&&o(),d}function yl({comment:r,items:e},t,{flowChars:i,itemIndent:s,onComment:n}){let{indent:o,indentStep:a,options:{commentString:l}}=t;s+=a;let u=Object.assign({},t,{indent:s,inFlow:!0,type:null}),c=!1,m=0,h=[];for(let p=0;p<e.length;++p){let b=e[p],x=null;if(L(b))b.spaceBefore&&h.push(""),es(t,h,b.commentBefore,!1),b.comment&&(x=b.comment);else if(E(b)){let y=L(b.key)?b.key:null;y&&(y.spaceBefore&&h.push(""),es(t,h,y.commentBefore,!1),y.comment&&(c=!0));let S=L(b.value)?b.value:null;S?(S.comment&&(x=S.comment),S.commentBefore&&(c=!0)):b.value==null&&y&&y.comment&&(x=y.comment)}x&&(c=!0);let _=_e(b,u,()=>x=null);p<e.length-1&&(_+=","),x&&(_+=ye(_,s,l(x))),!c&&(h.length>m||_.includes(`
`))&&(c=!0),h.push(_),m=h.length}let d,{start:f,end:g}=i;if(h.length===0)d=f+g;else if(c||(c=h.reduce((b,x)=>b+x.length+2,2)>tt.maxFlowStringSingleLineLength),c){d=f;for(let p of h)d+=p?`
${a}${o}${p}`:`
`;d+=`
${o}${g}`}else d=`${f} ${h.join(" ")} ${g}`;return r&&(d+=ye(d,l(r),o),n&&n()),d}function es({indent:r,options:{commentString:e}},t,i,s){if(i&&s&&(i=i.replace(/^\n+/,"")),i){let n=me(e(i),r);t.push(n.trimStart())}}function ht(r,e){let t=B(e)?e.value:e;for(let i of r)if(E(i)&&(i.key===e||i.key===t||B(i.key)&&i.key.value===t))return i}var q=class extends tt{constructor(e){super(de,e),this.items=[]}static get tagName(){return"tag:yaml.org,2002:map"}add(e,t){let i;E(e)?i=e:!e||typeof e!="object"||!("key"in e)?i=new $(e,e?.value):i=new $(e.key,e.value);let s=ht(this.items,i.key),n=this.schema?.sortMapEntries;if(s){if(!t)throw new Error(`Key ${i.key} already set`);B(s.value)&&Hr(i.value)?s.value.value=i.value:s.value=i.value}else if(n){let o=this.items.findIndex(a=>n(i,a)<0);o===-1?this.items.push(i):this.items.splice(o,0,i)}else this.items.push(i)}delete(e){let t=ht(this.items,e);return t?this.items.splice(this.items.indexOf(t),1).length>0:!1}get(e,t){let s=ht(this.items,e)?.value;return(!t&&B(s)?s.value:s)??void 0}has(e){return!!ht(this.items,e)}set(e,t){this.add(new $(e,t),!0)}toJSON(e,t,i){let s=i?new i:t?.mapAsMap?new Map:{};t?.onCreate&&t.onCreate(s);for(let n of this.items)Zr(t,s,n);return s}toString(e,t,i){if(!e)return JSON.stringify(this);for(let s of this.items)if(!E(s))throw new Error(`Map items must all be pairs; found ${JSON.stringify(s)} instead`);return!e.allNullValues&&this.hasAllNullValues(!1)&&(e=Object.assign({},e,{allNullValues:!0})),ts(this,e,{blockItemPrefix:"",flowChars:{start:"{",end:"}"},itemIndent:e.indent||"",onChompKeep:i,onComment:t})}};function _l(r,e,t){let{keepUndefined:i,replacer:s}=t,n=new q(r),o=(a,l)=>{if(typeof s=="function")l=s.call(e,a,l);else if(Array.isArray(s)&&!s.includes(a))return;(l!==void 0||i)&&n.items.push(ui(a,l,t))};if(e instanceof Map)for(let[a,l]of e)o(a,l);else if(e&&typeof e=="object")for(let a of Object.keys(e))o(a,e[a]);return typeof r.sortMapEntries=="function"&&n.items.sort(r.sortMapEntries),n}var Ce={collection:"map",createNode:_l,default:!0,nodeClass:q,tag:"tag:yaml.org,2002:map",resolve(r,e){return oe(r)||e("Expected a mapping for this tag"),r}};var re=class extends tt{constructor(e){super(Qe,e),this.items=[]}static get tagName(){return"tag:yaml.org,2002:seq"}add(e){this.items.push(e)}delete(e){let t=is(e);return typeof t!="number"?!1:this.items.splice(t,1).length>0}get(e,t){let i=is(e);if(typeof i!="number")return;let s=this.items[i];return!t&&B(s)?s.value:s}has(e){let t=is(e);return typeof t=="number"&&t<this.items.length}set(e,t){let i=is(e);if(typeof i!="number")throw new Error(`Expected a valid index, not ${e}.`);let s=this.items[i];B(s)&&Hr(t)?s.value=t:this.items[i]=t}toJSON(e,t){let i=[];t?.onCreate&&t.onCreate(i);let s=0;for(let n of this.items)i.push(J(n,String(s++),t));return i}toString(e,t,i){return e?ts(this,e,{blockItemPrefix:"- ",flowChars:{start:"[",end:"]"},itemIndent:(e.indent||"")+"  ",onChompKeep:i,onComment:t}):JSON.stringify(this)}};function is(r){let e=B(r)?r.value:r;return e&&typeof e=="string"&&(e=Number(e)),typeof e=="number"&&Number.isInteger(e)&&e>=0?e:null}function Cl(r,e,t){let{replacer:i}=t,s=new re(r);if(e&&Symbol.iterator in Object(e)){let n=0;for(let o of e){if(typeof i=="function"){let a=e instanceof Set?o:String(n++);o=i.call(e,a,o)}s.items.push(et(o,void 0,t))}}return s}var xe={collection:"seq",createNode:Cl,default:!0,nodeClass:re,tag:"tag:yaml.org,2002:seq",resolve(r,e){return ge(r)||e("Expected a sequence for this tag"),r}};var pt={identify:r=>typeof r=="string",default:!0,tag:"tag:yaml.org,2002:str",resolve:r=>r,stringify(r,e,t,i){return e=Object.assign({actualString:!0},e),Rt(r,e,t,i)}};var Nt={identify:r=>r==null,createNode:()=>new P(null),default:!0,tag:"tag:yaml.org,2002:null",test:/^(?:~|[Nn]ull|NULL)?$/,resolve:()=>new P(null),stringify:({source:r},e)=>typeof r=="string"&&Nt.test.test(r)?r:e.options.nullStr};var tr={identify:r=>typeof r=="boolean",default:!0,tag:"tag:yaml.org,2002:bool",test:/^(?:[Tt]rue|TRUE|[Ff]alse|FALSE)$/,resolve:r=>new P(r[0]==="t"||r[0]==="T"),stringify({source:r,value:e},t){if(r&&tr.test.test(r)){let i=r[0]==="t"||r[0]==="T";if(e===i)return r}return e?t.options.trueStr:t.options.falseStr}};function X({format:r,minFractionDigits:e,tag:t,value:i}){if(typeof i=="bigint")return String(i);let s=typeof i=="number"?i:Number(i);if(!isFinite(s))return isNaN(s)?".nan":s<0?"-.inf":".inf";let n=JSON.stringify(i);if(!r&&e&&(!t||t==="tag:yaml.org,2002:float")&&/^\d/.test(n)){let o=n.indexOf(".");o<0&&(o=n.length,n+=".");let a=e-(n.length-o-1);for(;a-- >0;)n+="0"}return n}var rs={identify:r=>typeof r=="number",default:!0,tag:"tag:yaml.org,2002:float",test:/^(?:[-+]?\.(?:inf|Inf|INF|nan|NaN|NAN))$/,resolve:r=>r.slice(-3).toLowerCase()==="nan"?NaN:r[0]==="-"?Number.NEGATIVE_INFINITY:Number.POSITIVE_INFINITY,stringify:X},ss={identify:r=>typeof r=="number",default:!0,tag:"tag:yaml.org,2002:float",format:"EXP",test:/^[-+]?(?:\.[0-9]+|[0-9]+(?:\.[0-9]*)?)[eE][-+]?[0-9]+$/,resolve:r=>parseFloat(r),stringify(r){let e=Number(r.value);return isFinite(e)?e.toExponential():X(r)}},ns={identify:r=>typeof r=="number",default:!0,tag:"tag:yaml.org,2002:float",test:/^[-+]?(?:\.[0-9]+|[0-9]+\.[0-9]*)$/,resolve(r){let e=new P(parseFloat(r)),t=r.indexOf(".");return t!==-1&&r[r.length-1]==="0"&&(e.minFractionDigits=r.length-t-1),e},stringify:X};var os=r=>typeof r=="bigint"||Number.isInteger(r),rn=(r,e,t,{intAsBigInt:i})=>i?BigInt(r):parseInt(r.substring(e),t);function So(r,e,t){let{value:i}=r;return os(i)&&i>=0?t+i.toString(e):X(r)}var as={identify:r=>os(r)&&r>=0,default:!0,tag:"tag:yaml.org,2002:int",format:"OCT",test:/^0o[0-7]+$/,resolve:(r,e,t)=>rn(r,2,8,t),stringify:r=>So(r,8,"0o")},ls={identify:os,default:!0,tag:"tag:yaml.org,2002:int",test:/^[-+]?[0-9]+$/,resolve:(r,e,t)=>rn(r,0,10,t),stringify:X},us={identify:r=>os(r)&&r>=0,default:!0,tag:"tag:yaml.org,2002:int",format:"HEX",test:/^0x[0-9a-fA-F]+$/,resolve:(r,e,t)=>rn(r,2,16,t),stringify:r=>So(r,16,"0x")};var vo=[Ce,xe,pt,Nt,tr,as,ls,us,rs,ss,ns];function Mo(r){return typeof r=="bigint"||Number.isInteger(r)}var cs=({value:r})=>JSON.stringify(r),xl=[{identify:r=>typeof r=="string",default:!0,tag:"tag:yaml.org,2002:str",resolve:r=>r,stringify:cs},{identify:r=>r==null,createNode:()=>new P(null),default:!0,tag:"tag:yaml.org,2002:null",test:/^null$/,resolve:()=>null,stringify:cs},{identify:r=>typeof r=="boolean",default:!0,tag:"tag:yaml.org,2002:bool",test:/^true|false$/,resolve:r=>r==="true",stringify:cs},{identify:Mo,default:!0,tag:"tag:yaml.org,2002:int",test:/^-?(?:0|[1-9][0-9]*)$/,resolve:(r,e,{intAsBigInt:t})=>t?BigInt(r):parseInt(r,10),stringify:({value:r})=>Mo(r)?r.toString():JSON.stringify(r)},{identify:r=>typeof r=="number",default:!0,tag:"tag:yaml.org,2002:float",test:/^-?(?:0|[1-9][0-9]*)(?:\.[0-9]*)?(?:[eE][-+]?[0-9]+)?$/,resolve:r=>parseFloat(r),stringify:cs}],Sl={default:!0,tag:"",test:/^/,resolve(r,e){return e(`Unresolved plain scalar ${JSON.stringify(r)}`),r}},wo=[Ce,xe].concat(xl,Sl);var ir={identify:r=>r instanceof Uint8Array,default:!1,tag:"tag:yaml.org,2002:binary",resolve(r,e){if(typeof Buffer=="function")return Buffer.from(r,"base64");if(typeof atob=="function"){let t=atob(r.replace(/[\n\r]/g,"")),i=new Uint8Array(t.length);for(let s=0;s<t.length;++s)i[s]=t.charCodeAt(s);return i}else return e("This environment does not support reading binary tags; either Buffer or atob is required"),r},stringify({comment:r,type:e,value:t},i,s,n){let o=t,a;if(typeof Buffer=="function")a=o instanceof Buffer?o.toString("base64"):Buffer.from(o.buffer).toString("base64");else if(typeof btoa=="function"){let l="";for(let u=0;u<o.length;++u)l+=String.fromCharCode(o[u]);a=btoa(l)}else throw new Error("This environment does not support writing binary tags; either Buffer or btoa is required");if(e||(e=P.BLOCK_LITERAL),e!==P.QUOTE_DOUBLE){let l=Math.max(i.options.lineWidth-i.indent.length,i.options.minContentWidth),u=Math.ceil(a.length/l),c=new Array(u);for(let m=0,h=0;m<u;++m,h+=l)c[m]=a.substr(h,l);a=c.join(e===P.BLOCK_LITERAL?`
`:" ")}return Rt({comment:r,type:e,value:a},i,s,n)}};function sn(r,e){if(ge(r))for(let t=0;t<r.items.length;++t){let i=r.items[t];if(!E(i)){if(oe(i)){i.items.length>1&&e("Each pair must have its own sequence indicator");let s=i.items[0]||new $(new P(null));if(i.commentBefore&&(s.key.commentBefore=s.key.commentBefore?`${i.commentBefore}
${s.key.commentBefore}`:i.commentBefore),i.comment){let n=s.value??s.key;n.comment=n.comment?`${i.comment}
${n.comment}`:i.comment}i=s}r.items[t]=E(i)?i:new $(i)}}else e("Expected a sequence for this tag");return r}function nn(r,e,t){let{replacer:i}=t,s=new re(r);s.tag="tag:yaml.org,2002:pairs";let n=0;if(e&&Symbol.iterator in Object(e))for(let o of e){typeof i=="function"&&(o=i.call(e,String(n++),o));let a,l;if(Array.isArray(o))if(o.length===2)a=o[0],l=o[1];else throw new TypeError(`Expected [key, value] tuple: ${o}`);else if(o&&o instanceof Object){let u=Object.keys(o);if(u.length===1)a=u[0],l=o[a];else throw new TypeError(`Expected { key: value } tuple: ${o}`)}else a=o;s.items.push(ui(a,l,t))}return s}var rr={collection:"seq",default:!1,tag:"tag:yaml.org,2002:pairs",resolve:sn,createNode:nn};var dt=class extends re{constructor(){super(),this.add=q.prototype.add.bind(this),this.delete=q.prototype.delete.bind(this),this.get=q.prototype.get.bind(this),this.has=q.prototype.has.bind(this),this.set=q.prototype.set.bind(this),this.tag=dt.tag}toJSON(e,t){if(!t)return super.toJSON(e);let i=new Map;t?.onCreate&&t.onCreate(i);for(let s of this.items){let n,o;if(E(s)?(n=J(s.key,"",t),o=J(s.value,n,t)):n=J(s,"",t),i.has(n))throw new Error("Ordered maps must not include duplicate keys");i.set(n,o)}return i}};dt.tag="tag:yaml.org,2002:omap";var sr={collection:"seq",identify:r=>r instanceof Map,nodeClass:dt,default:!1,tag:"tag:yaml.org,2002:omap",resolve(r,e){let t=sn(r,e),i=[];for(let{key:s}of t.items)B(s)&&(i.includes(s.value)?e(`Ordered maps must not include duplicate keys: ${s.value}`):i.push(s.value));return Object.assign(new dt,t)},createNode(r,e,t){let i=nn(r,e,t),s=new dt;return s.items=i.items,s}};function Po({value:r,source:e},t){return e&&(r?on:an).test.test(e)?e:r?t.options.trueStr:t.options.falseStr}var on={identify:r=>r===!0,default:!0,tag:"tag:yaml.org,2002:bool",test:/^(?:Y|y|[Yy]es|YES|[Tt]rue|TRUE|[Oo]n|ON)$/,resolve:()=>new P(!0),stringify:Po},an={identify:r=>r===!1,default:!0,tag:"tag:yaml.org,2002:bool",test:/^(?:N|n|[Nn]o|NO|[Ff]alse|FALSE|[Oo]ff|OFF)$/i,resolve:()=>new P(!1),stringify:Po};var Io={identify:r=>typeof r=="number",default:!0,tag:"tag:yaml.org,2002:float",test:/^[-+]?\.(?:inf|Inf|INF|nan|NaN|NAN)$/,resolve:r=>r.slice(-3).toLowerCase()==="nan"?NaN:r[0]==="-"?Number.NEGATIVE_INFINITY:Number.POSITIVE_INFINITY,stringify:X},To={identify:r=>typeof r=="number",default:!0,tag:"tag:yaml.org,2002:float",format:"EXP",test:/^[-+]?(?:[0-9][0-9_]*)?(?:\.[0-9_]*)?[eE][-+]?[0-9]+$/,resolve:r=>parseFloat(r.replace(/_/g,"")),stringify(r){let e=Number(r.value);return isFinite(e)?e.toExponential():X(r)}},Bo={identify:r=>typeof r=="number",default:!0,tag:"tag:yaml.org,2002:float",test:/^[-+]?(?:[0-9][0-9_]*)?\.[0-9_]*$/,resolve(r){let e=new P(parseFloat(r.replace(/_/g,""))),t=r.indexOf(".");if(t!==-1){let i=r.substring(t+1).replace(/_/g,"");i[i.length-1]==="0"&&(e.minFractionDigits=i.length)}return e},stringify:X};var nr=r=>typeof r=="bigint"||Number.isInteger(r);function ms(r,e,t,{intAsBigInt:i}){let s=r[0];if((s==="-"||s==="+")&&(e+=1),r=r.substring(e).replace(/_/g,""),i){switch(t){case 2:r=`0b${r}`;break;case 8:r=`0o${r}`;break;case 16:r=`0x${r}`;break}let o=BigInt(r);return s==="-"?BigInt(-1)*o:o}let n=parseInt(r,t);return s==="-"?-1*n:n}function ln(r,e,t){let{value:i}=r;if(nr(i)){let s=i.toString(e);return i<0?"-"+t+s.substr(1):t+s}return X(r)}var Vo={identify:nr,default:!0,tag:"tag:yaml.org,2002:int",format:"BIN",test:/^[-+]?0b[0-1_]+$/,resolve:(r,e,t)=>ms(r,2,2,t),stringify:r=>ln(r,2,"0b")},Ao={identify:nr,default:!0,tag:"tag:yaml.org,2002:int",format:"OCT",test:/^[-+]?0[0-7_]+$/,resolve:(r,e,t)=>ms(r,1,8,t),stringify:r=>ln(r,8,"0")},Eo={identify:nr,default:!0,tag:"tag:yaml.org,2002:int",test:/^[-+]?[0-9][0-9_]*$/,resolve:(r,e,t)=>ms(r,0,10,t),stringify:X},Lo={identify:nr,default:!0,tag:"tag:yaml.org,2002:int",format:"HEX",test:/^[-+]?0x[0-9a-fA-F_]+$/,resolve:(r,e,t)=>ms(r,2,16,t),stringify:r=>ln(r,16,"0x")};var ft=class extends q{constructor(e){super(e),this.tag=ft.tag}add(e){let t;E(e)?t=e:e&&typeof e=="object"&&"key"in e&&"value"in e&&e.value===null?t=new $(e.key,null):t=new $(e,null),ht(this.items,t.key)||this.items.push(t)}get(e,t){let i=ht(this.items,e);return!t&&E(i)?B(i.key)?i.key.value:i.key:i}set(e,t){if(typeof t!="boolean")throw new Error(`Expected boolean value for set(key, value) in a YAML set, not ${typeof t}`);let i=ht(this.items,e);i&&!t?this.items.splice(this.items.indexOf(i),1):!i&&t&&this.items.push(new $(e))}toJSON(e,t){return super.toJSON(e,t,Set)}toString(e,t,i){if(!e)return JSON.stringify(this);if(this.hasAllNullValues(!0))return super.toString(Object.assign({},e,{allNullValues:!0}),t,i);throw new Error("Set items must all have null values")}};ft.tag="tag:yaml.org,2002:set";var or={collection:"map",identify:r=>r instanceof Set,nodeClass:ft,default:!1,tag:"tag:yaml.org,2002:set",resolve(r,e){if(oe(r)){if(r.hasAllNullValues(!0))return Object.assign(new ft,r);e("Set items must all have null values")}else e("Expected a mapping for this tag");return r},createNode(r,e,t){let{replacer:i}=t,s=new ft(r);if(e&&Symbol.iterator in Object(e))for(let n of e)typeof i=="function"&&(n=i.call(e,n,n)),s.items.push(ui(n,null,t));return s}};function un(r,e){let t=r[0],i=t==="-"||t==="+"?r.substring(1):r,s=o=>e?BigInt(o):Number(o),n=i.replace(/_/g,"").split(":").reduce((o,a)=>o*s(60)+s(a),s(0));return t==="-"?s(-1)*n:n}function Ro(r){let{value:e}=r,t=o=>o;if(typeof e=="bigint")t=o=>BigInt(o);else if(isNaN(e)||!isFinite(e))return X(r);let i="";e<0&&(i="-",e*=t(-1));let s=t(60),n=[e%s];return e<60?n.unshift(0):(e=(e-n[0])/s,n.unshift(e%s),e>=60&&(e=(e-n[0])/s,n.unshift(e))),i+n.map(o=>o<10?"0"+String(o):String(o)).join(":").replace(/000000\d*$/,"")}var hs={identify:r=>typeof r=="bigint"||Number.isInteger(r),default:!0,tag:"tag:yaml.org,2002:int",format:"TIME",test:/^[-+]?[0-9][0-9_]*(?::[0-5]?[0-9])+$/,resolve:(r,e,{intAsBigInt:t})=>un(r,t),stringify:Ro},ps={identify:r=>typeof r=="number",default:!0,tag:"tag:yaml.org,2002:float",format:"TIME",test:/^[-+]?[0-9][0-9_]*(?::[0-5]?[0-9])+\.[0-9_]*$/,resolve:r=>un(r,!1),stringify:Ro},ci={identify:r=>r instanceof Date,default:!0,tag:"tag:yaml.org,2002:timestamp",test:RegExp("^([0-9]{4})-([0-9]{1,2})-([0-9]{1,2})(?:(?:t|T|[ \\t]+)([0-9]{1,2}):([0-9]{1,2}):([0-9]{1,2}(\\.[0-9]+)?)(?:[ \\t]*(Z|[-+][012]?[0-9](?::[0-9]{2})?))?)?$"),resolve(r){let e=r.match(ci.test);if(!e)throw new Error("!!timestamp expects a date, starting with yyyy-mm-dd");let[,t,i,s,n,o,a]=e.map(Number),l=e[7]?Number((e[7]+"00").substr(1,3)):0,u=Date.UTC(t,i-1,s,n||0,o||0,a||0,l),c=e[8];if(c&&c!=="Z"){let m=un(c,!1);Math.abs(m)<30&&(m*=60),u-=6e4*m}return new Date(u)},stringify:({value:r})=>r.toISOString().replace(/((T00:00)?:00)?\.000Z$/,"")};var cn=[Ce,xe,pt,Nt,on,an,Vo,Ao,Eo,Lo,Io,To,Bo,ir,sr,rr,or,hs,ps,ci];var No=new Map([["core",vo],["failsafe",[Ce,xe,pt]],["json",wo],["yaml11",cn],["yaml-1.1",cn]]),Fo={binary:ir,bool:tr,float:ns,floatExp:ss,floatNaN:rs,floatTime:ps,int:ls,intHex:us,intOct:as,intTime:hs,map:Ce,null:Nt,omap:sr,pairs:rr,seq:xe,set:or,timestamp:ci},ko={"tag:yaml.org,2002:binary":ir,"tag:yaml.org,2002:omap":sr,"tag:yaml.org,2002:pairs":rr,"tag:yaml.org,2002:set":or,"tag:yaml.org,2002:timestamp":ci};function ds(r,e){let t=No.get(e);if(!t)if(Array.isArray(r))t=[];else{let i=Array.from(No.keys()).filter(s=>s!=="yaml11").map(s=>JSON.stringify(s)).join(", ");throw new Error(`Unknown schema "${e}"; use one of ${i} or define customTags array`)}if(Array.isArray(r))for(let i of r)t=t.concat(i);else typeof r=="function"&&(t=r(t.slice()));return t.map(i=>{if(typeof i!="string")return i;let s=Fo[i];if(s)return s;let n=Object.keys(Fo).map(o=>JSON.stringify(o)).join(", ");throw new Error(`Unknown custom tag "${i}"; use one of ${n}`)})}var vl=(r,e)=>r.key<e.key?-1:r.key>e.key?1:0,Ft=class{constructor({compat:e,customTags:t,merge:i,resolveKnownTags:s,schema:n,sortMapEntries:o,toStringDefaults:a}){this.compat=Array.isArray(e)?ds(e,"compat"):e?ds(null,e):null,this.merge=!!i,this.name=typeof n=="string"&&n||"core",this.knownTags=s?ko:{},this.tags=ds(t,this.name),this.toStringOptions=a??null,Object.defineProperty(this,de,{value:Ce}),Object.defineProperty(this,ce,{value:pt}),Object.defineProperty(this,Qe,{value:xe}),this.sortMapEntries=typeof o=="function"?o:o===!0?vl:null}clone(){let e=Object.create(Ft.prototype,Object.getOwnPropertyDescriptors(this));return e.tags=this.tags.slice(),e}};function Oo(r,e){let t=[],i=e.directives===!0;if(e.directives!==!1&&r.directives){let l=r.directives.toString(r);l?(t.push(l),i=!0):r.directives.docStart&&(i=!0)}i&&t.push("---");let s=Jr(r,e),{commentString:n}=s.options;if(r.commentBefore){t.length!==1&&t.unshift("");let l=n(r.commentBefore);t.unshift(me(l,""))}let o=!1,a=null;if(r.contents){if(L(r.contents)){if(r.contents.spaceBefore&&i&&t.push(""),r.contents.commentBefore){let c=n(r.contents.commentBefore);t.push(me(c,""))}s.forceBlockIndent=!!r.comment,a=r.contents.comment}let l=a?void 0:()=>o=!0,u=_e(r.contents,s,()=>a=null,l);a&&(u+=ye(u,"",n(a))),(u[0]==="|"||u[0]===">")&&t[t.length-1]==="---"?t[t.length-1]=`--- ${u}`:t.push(u)}else t.push(_e(r.contents,s));if(r.directives?.docEnd)if(r.comment){let l=n(r.comment);l.includes(`
`)?(t.push("..."),t.push(me(l,""))):t.push(`... ${l}`)}else t.push("...");else{let l=r.comment;l&&o&&(l=l.replace(/^\n+/,"")),l&&((!o||a)&&t[t.length-1]!==""&&t.push(""),t.push(me(n(l),"")))}return t.join(`
`)+`
`}function mi(r,e,t,i){if(i&&typeof i=="object")if(Array.isArray(i))for(let s=0,n=i.length;s<n;++s){let o=i[s],a=mi(r,i,String(s),o);a===void 0?delete i[s]:a!==o&&(i[s]=a)}else if(i instanceof Map)for(let s of Array.from(i.keys())){let n=i.get(s),o=mi(r,i,s,n);o===void 0?i.delete(s):o!==n&&i.set(s,o)}else if(i instanceof Set)for(let s of Array.from(i)){let n=mi(r,i,s,s);n===void 0?i.delete(s):n!==s&&(i.delete(s),i.add(n))}else for(let[s,n]of Object.entries(i)){let o=mi(r,i,s,n);o===void 0?delete i[s]:o!==n&&(i[s]=o)}return r.call(e,t,i)}var Le=class{constructor(e,t,i){this.commentBefore=null,this.comment=null,this.errors=[],this.warnings=[],Object.defineProperty(this,te,{value:zr});let s=null;typeof t=="function"||Array.isArray(t)?s=t:i===void 0&&t&&(i=t,t=void 0);let n=Object.assign({intAsBigInt:!1,keepSourceTokens:!1,logLevel:"warn",prettyErrors:!0,strict:!0,uniqueKeys:!0,version:"1.2"},i);this.options=n;let{version:o}=n;i?._directives?(this.directives=i._directives.atDocument(),this.directives.yaml.explicit&&(o=this.directives.yaml.version)):this.directives=new W({version:o}),this.setSchema(o,i),e===void 0?this.contents=null:this.contents=this.createNode(e,s,i)}clone(){let e=Object.create(Le.prototype,{[te]:{value:zr}});return e.commentBefore=this.commentBefore,e.comment=this.comment,e.errors=this.errors.slice(),e.warnings=this.warnings.slice(),e.options=Object.assign({},this.options),this.directives&&(e.directives=this.directives.clone()),e.schema=this.schema.clone(),e.contents=L(this.contents)?this.contents.clone(e.schema):this.contents,this.range&&(e.range=this.range.slice()),e}add(e){hi(this.contents)&&this.contents.add(e)}addIn(e,t){hi(this.contents)&&this.contents.addIn(e,t)}createAlias(e,t){if(!e.anchor){let i=Js(this);e.anchor=!t||i.has(t)?Qs(t||"a",i):t}return new Ze(e.anchor)}createNode(e,t,i){let s;if(typeof t=="function")e=t.call({"":e},"",e),s=t;else if(Array.isArray(t)){let p=x=>typeof x=="number"||x instanceof String||x instanceof Number,b=t.filter(p).map(String);b.length>0&&(t=t.concat(b)),s=t}else i===void 0&&t&&(i=t,t=void 0);let{aliasDuplicateObjects:n,anchorPrefix:o,flow:a,keepUndefined:l,onTagObj:u,tag:c}=i??{},{onAnchor:m,setAnchors:h,sourceObjects:d}=bo(this,o||"a"),f={aliasDuplicateObjects:n??!0,keepUndefined:l??!1,onAnchor:m,onTagObj:u,replacer:s,schema:this.schema,sourceObjects:d},g=et(e,c,f);return a&&R(g)&&(g.flow=!0),h(),g}createPair(e,t,i={}){let s=this.createNode(e,null,i),n=this.createNode(t,null,i);return new $(s,n)}delete(e){return hi(this.contents)?this.contents.delete(e):!1}deleteIn(e){return li(e)?this.contents==null?!1:(this.contents=null,!0):hi(this.contents)?this.contents.deleteIn(e):!1}get(e,t){return R(this.contents)?this.contents.get(e,t):void 0}getIn(e,t){return li(e)?!t&&B(this.contents)?this.contents.value:this.contents:R(this.contents)?this.contents.getIn(e,t):void 0}has(e){return R(this.contents)?this.contents.has(e):!1}hasIn(e){return li(e)?this.contents!==void 0:R(this.contents)?this.contents.hasIn(e):!1}set(e,t){this.contents==null?this.contents=Xi(this.schema,[e],t):hi(this.contents)&&this.contents.set(e,t)}setIn(e,t){li(e)?this.contents=t:this.contents==null?this.contents=Xi(this.schema,Array.from(e),t):hi(this.contents)&&this.contents.setIn(e,t)}setSchema(e,t={}){typeof e=="number"&&(e=String(e));let i;switch(e){case"1.1":this.directives?this.directives.yaml.version="1.1":this.directives=new W({version:"1.1"}),i={merge:!0,resolveKnownTags:!1,schema:"yaml-1.1"};break;case"1.2":case"next":this.directives?this.directives.yaml.version=e:this.directives=new W({version:e}),i={merge:!1,resolveKnownTags:!0,schema:"core"};break;case null:this.directives&&delete this.directives,i=null;break;default:{let s=JSON.stringify(e);throw new Error(`Expected '1.1', '1.2' or null as first argument, but found: ${s}`)}}if(t.schema instanceof Object)this.schema=t.schema;else if(i)this.schema=new Ft(Object.assign(i,t));else throw new Error("With a null YAML version, the { schema: Schema } option is required")}toJS({json:e,jsonArg:t,mapAsMap:i,maxAliasCount:s,onAnchor:n,reviver:o}={}){let a={anchors:new Map,doc:this,keep:!e,mapAsMap:i===!0,mapKeyWarned:!1,maxAliasCount:typeof s=="number"?s:100,stringify:_e},l=J(this.contents,t??"",a);if(typeof n=="function")for(let{count:u,res:c}of a.anchors.values())n(c,u);return typeof o=="function"?mi(o,{"":l},"",l):l}toJSON(e,t){return this.toJS({json:!0,jsonArg:e,mapAsMap:!1,onAnchor:t})}toString(e={}){if(this.errors.length>0)throw new Error("Document with errors cannot be stringified");if("indent"in e&&(!Number.isInteger(e.indent)||Number(e.indent)<=0)){let t=JSON.stringify(e.indent);throw new Error(`"indent" option must be a positive integer, not ${t}`)}return Oo(this,e)}};function hi(r){if(R(r))return!0;throw new Error("Expected a YAML collection as document contents")}var ar=class extends Error{constructor(e,t,i,s){super(),this.name=e,this.code=i,this.message=s,this.pos=t}},Se=class extends ar{constructor(e,t,i){super("YAMLParseError",e,t,i)}},lr=class extends ar{constructor(e,t,i){super("YAMLWarning",e,t,i)}},mn=(r,e)=>t=>{if(t.pos[0]===-1)return;t.linePos=t.pos.map(a=>e.linePos(a));let{line:i,col:s}=t.linePos[0];t.message+=` at line ${i}, column ${s}`;let n=s-1,o=r.substring(e.lineStarts[i-1],e.lineStarts[i]).replace(/[\n\r]+$/,"");if(n>=60&&o.length>80){let a=Math.min(n-39,o.length-79);o=""+o.substring(a),n-=a-1}if(o.length>80&&(o=o.substring(0,79)+""),i>1&&/^ *$/.test(o.substring(0,n))){let a=r.substring(e.lineStarts[i-2],e.lineStarts[i-1]);a.length>80&&(a=a.substring(0,79)+`
`),o=a+o}if(/[^ ]/.test(o)){let a=1,l=t.linePos[1];l&&l.line===i&&l.col>s&&(a=Math.min(l.col-s,80-n));let u=" ".repeat(n)+"^".repeat(a);t.message+=`:

${o}
${u}
`}};function Re(r,{flow:e,indicator:t,next:i,offset:s,onError:n,startOnNewline:o}){let a=!1,l=o,u=o,c="",m="",h=!1,d=!1,f=!1,g=null,p=null,b=null,x=null,_=null;for(let C of r)switch(f&&(C.type!=="space"&&C.type!=="newline"&&C.type!=="comma"&&n(C.offset,"MISSING_CHAR","Tags and anchors must be separated from the next token by white space"),f=!1),C.type){case"space":!e&&l&&t!=="doc-start"&&C.source[0]==="	"&&n(C,"TAB_AS_INDENT","Tabs are not allowed as indentation"),u=!0;break;case"comment":{u||n(C,"MISSING_CHAR","Comments must be separated from other tokens by white space characters");let A=C.source.substring(1)||" ";c?c+=m+A:c=A,m="",l=!1;break}case"newline":l?c?c+=C.source:a=!0:m+=C.source,l=!0,h=!0,(g||p)&&(d=!0),u=!0;break;case"anchor":g&&n(C,"MULTIPLE_ANCHORS","A node can have at most one anchor"),C.source.endsWith(":")&&n(C.offset+C.source.length-1,"BAD_ALIAS","Anchor ending in : is ambiguous",!0),g=C,_===null&&(_=C.offset),l=!1,u=!1,f=!0;break;case"tag":{p&&n(C,"MULTIPLE_TAGS","A node can have at most one tag"),p=C,_===null&&(_=C.offset),l=!1,u=!1,f=!0;break}case t:(g||p)&&n(C,"BAD_PROP_ORDER",`Anchors and tags must be after the ${C.source} indicator`),x&&n(C,"UNEXPECTED_TOKEN",`Unexpected ${C.source} in ${e??"collection"}`),x=C,l=!1,u=!1;break;case"comma":if(e){b&&n(C,"UNEXPECTED_TOKEN",`Unexpected , in ${e}`),b=C,l=!1,u=!1;break}default:n(C,"UNEXPECTED_TOKEN",`Unexpected ${C.type} token`),l=!1,u=!1}let y=r[r.length-1],S=y?y.offset+y.source.length:s;return f&&i&&i.type!=="space"&&i.type!=="newline"&&i.type!=="comma"&&(i.type!=="scalar"||i.source!=="")&&n(i.offset,"MISSING_CHAR","Tags and anchors must be separated from the next token by white space"),{comma:b,found:x,spaceBefore:a,comment:c,hasNewline:h,hasNewlineAfterProp:d,anchor:g,tag:p,end:S,start:_??S}}function gt(r){if(!r)return null;switch(r.type){case"alias":case"scalar":case"double-quoted-scalar":case"single-quoted-scalar":if(r.source.includes(`
`))return!0;if(r.end){for(let e of r.end)if(e.type==="newline")return!0}return!1;case"flow-collection":for(let e of r.items){for(let t of e.start)if(t.type==="newline")return!0;if(e.sep){for(let t of e.sep)if(t.type==="newline")return!0}if(gt(e.key)||gt(e.value))return!0}return!1;default:return!0}}function ur(r,e,t){if(e?.type==="flow-collection"){let i=e.end[0];i.indent===r&&(i.source==="]"||i.source==="}")&&gt(e)&&t(i,"BAD_INDENT","Flow end indicator should be more indented than parent",!0)}}function fs(r,e,t){let{uniqueKeys:i}=r.options;if(i===!1)return!1;let s=typeof i=="function"?i:(n,o)=>n===o||B(n)&&B(o)&&n.value===o.value&&!(n.value==="<<"&&r.schema.merge);return e.some(n=>s(n.key,t))}var Do="All mapping items must start at the same column";function $o({composeNode:r,composeEmptyNode:e},t,i,s){let n=new q(t.schema);t.atRoot&&(t.atRoot=!1);let o=i.offset,a=null;for(let l of i.items){let{start:u,key:c,sep:m,value:h}=l,d=Re(u,{indicator:"explicit-key-ind",next:c??m?.[0],offset:o,onError:s,startOnNewline:!0}),f=!d.found;if(f){if(c&&(c.type==="block-seq"?s(o,"BLOCK_AS_IMPLICIT_KEY","A block sequence may not be used as an implicit map key"):"indent"in c&&c.indent!==i.indent&&s(o,"BAD_INDENT",Do)),!d.anchor&&!d.tag&&!m){a=d.end,d.comment&&(n.comment?n.comment+=`
`+d.comment:n.comment=d.comment);continue}(d.hasNewlineAfterProp||gt(c))&&s(c??u[u.length-1],"MULTILINE_IMPLICIT_KEY","Implicit keys need to be on a single line")}else d.found?.indent!==i.indent&&s(o,"BAD_INDENT",Do);let g=d.end,p=c?r(t,c,d,s):e(t,g,u,null,d,s);t.schema.compat&&ur(i.indent,c,s),fs(t,n.items,p)&&s(g,"DUPLICATE_KEY","Map keys must be unique");let b=Re(m??[],{indicator:"map-value-ind",next:h,offset:p.range[2],onError:s,startOnNewline:!c||c.type==="block-scalar"});if(o=b.end,b.found){f&&(h?.type==="block-map"&&!b.hasNewline&&s(o,"BLOCK_AS_IMPLICIT_KEY","Nested mappings are not allowed in compact mappings"),t.options.strict&&d.start<b.found.offset-1024&&s(p.range,"KEY_OVER_1024_CHARS","The : indicator must be at most 1024 chars after the start of an implicit block mapping key"));let x=h?r(t,h,b,s):e(t,o,m,null,b,s);t.schema.compat&&ur(i.indent,h,s),o=x.range[2];let _=new $(p,x);t.options.keepSourceTokens&&(_.srcToken=l),n.items.push(_)}else{f&&s(p.range,"MISSING_CHAR","Implicit map keys need to be followed by map values"),b.comment&&(p.comment?p.comment+=`
`+b.comment:p.comment=b.comment);let x=new $(p);t.options.keepSourceTokens&&(x.srcToken=l),n.items.push(x)}}return a&&a<o&&s(a,"IMPOSSIBLE","Map comment with trailing content"),n.range=[i.offset,o,a??o],n}function Uo({composeNode:r,composeEmptyNode:e},t,i,s){let n=new re(t.schema);t.atRoot&&(t.atRoot=!1);let o=i.offset,a=null;for(let{start:l,value:u}of i.items){let c=Re(l,{indicator:"seq-item-ind",next:u,offset:o,onError:s,startOnNewline:!0});if(!c.found)if(c.anchor||c.tag||u)u&&u.type==="block-seq"?s(c.end,"BAD_INDENT","All sequence items must start at the same column"):s(o,"MISSING_CHAR","Sequence item without - indicator");else{a=c.end,c.comment&&(n.comment=c.comment);continue}let m=u?r(t,u,c,s):e(t,c.end,l,null,c,s);t.schema.compat&&ur(i.indent,u,s),o=m.range[2],n.items.push(m)}return n.range=[i.offset,o,a??o],n}function Ne(r,e,t,i){let s="";if(r){let n=!1,o="";for(let a of r){let{source:l,type:u}=a;switch(u){case"space":n=!0;break;case"comment":{t&&!n&&i(a,"MISSING_CHAR","Comments must be separated from other tokens by white space characters");let c=l.substring(1)||" ";s?s+=o+c:s=c,o="";break}case"newline":s&&(o+=l),n=!0;break;default:i(a,"UNEXPECTED_TOKEN",`Unexpected ${u} at node end`)}e+=l.length}}return{comment:s,offset:e}}var hn="Block collections are not allowed within flow collections",pn=r=>r&&(r.type==="block-map"||r.type==="block-seq");function zo({composeNode:r,composeEmptyNode:e},t,i,s){let n=i.start.source==="{",o=n?"flow map":"flow sequence",a=n?new q(t.schema):new re(t.schema);a.flow=!0;let l=t.atRoot;l&&(t.atRoot=!1);let u=i.offset+i.start.source.length;for(let f=0;f<i.items.length;++f){let g=i.items[f],{start:p,key:b,sep:x,value:_}=g,y=Re(p,{flow:o,indicator:"explicit-key-ind",next:b??x?.[0],offset:u,onError:s,startOnNewline:!1});if(!y.found){if(!y.anchor&&!y.tag&&!x&&!_){f===0&&y.comma?s(y.comma,"UNEXPECTED_TOKEN",`Unexpected , in ${o}`):f<i.items.length-1&&s(y.start,"UNEXPECTED_TOKEN",`Unexpected empty item in ${o}`),y.comment&&(a.comment?a.comment+=`
`+y.comment:a.comment=y.comment),u=y.end;continue}!n&&t.options.strict&&gt(b)&&s(b,"MULTILINE_IMPLICIT_KEY","Implicit keys of flow sequence pairs need to be on a single line")}if(f===0)y.comma&&s(y.comma,"UNEXPECTED_TOKEN",`Unexpected , in ${o}`);else if(y.comma||s(y.start,"MISSING_CHAR",`Missing , between ${o} items`),y.comment){let S="";e:for(let C of p)switch(C.type){case"comma":case"space":break;case"comment":S=C.source.substring(1);break e;default:break e}if(S){let C=a.items[a.items.length-1];E(C)&&(C=C.value??C.key),C.comment?C.comment+=`
`+S:C.comment=S,y.comment=y.comment.substring(S.length+1)}}if(!n&&!x&&!y.found){let S=_?r(t,_,y,s):e(t,y.end,x,null,y,s);a.items.push(S),u=S.range[2],pn(_)&&s(S.range,"BLOCK_IN_FLOW",hn)}else{let S=y.end,C=b?r(t,b,y,s):e(t,S,p,null,y,s);pn(b)&&s(C.range,"BLOCK_IN_FLOW",hn);let A=Re(x??[],{flow:o,indicator:"map-value-ind",next:_,offset:C.range[2],onError:s,startOnNewline:!1});if(A.found){if(!n&&!y.found&&t.options.strict){if(x)for(let z of x){if(z===A.found)break;if(z.type==="newline"){s(z,"MULTILINE_IMPLICIT_KEY","Implicit keys of flow sequence pairs need to be on a single line");break}}y.start<A.found.offset-1024&&s(A.found,"KEY_OVER_1024_CHARS","The : indicator must be at most 1024 chars after the start of an implicit flow sequence key")}}else _&&("source"in _&&_.source&&_.source[0]===":"?s(_,"MISSING_CHAR",`Missing space after : in ${o}`):s(A.start,"MISSING_CHAR",`Missing , or : between ${o} items`));let k=_?r(t,_,A,s):A.found?e(t,A.end,x,null,A,s):null;k?pn(_)&&s(k.range,"BLOCK_IN_FLOW",hn):A.comment&&(C.comment?C.comment+=`
`+A.comment:C.comment=A.comment);let G=new $(C,k);if(t.options.keepSourceTokens&&(G.srcToken=g),n){let z=a;fs(t,z.items,C)&&s(S,"DUPLICATE_KEY","Map keys must be unique"),z.items.push(G)}else{let z=new q(t.schema);z.flow=!0,z.items.push(G),a.items.push(z)}u=k?k.range[2]:A.end}}let c=n?"}":"]",[m,...h]=i.end,d=u;if(m&&m.source===c)d=m.offset+m.source.length;else{let f=o[0].toUpperCase()+o.substring(1),g=l?`${f} must end with a ${c}`:`${f} in block collection must be sufficiently indented and end with a ${c}`;s(u,l?"MISSING_CHAR":"BAD_INDENT",g),m&&m.source.length!==1&&h.unshift(m)}if(h.length>0){let f=Ne(h,d,t.options.strict,s);f.comment&&(a.comment?a.comment+=`
`+f.comment:a.comment=f.comment),a.range=[i.offset,d,f.offset]}else a.range=[i.offset,d,d];return a}function jo(r,e,t,i,s){let n;switch(t.type){case"block-map":{n=$o(r,e,t,s);break}case"block-seq":{n=Uo(r,e,t,s);break}case"flow-collection":{n=zo(r,e,t,s);break}}if(!i)return n;let o=e.directives.tagName(i.source,h=>s(i,"TAG_RESOLVE_FAILED",h));if(!o)return n;let a=n.constructor;if(o==="!"||o===a.tagName)return n.tag=a.tagName,n;let l=oe(n)?"map":"seq",u=e.schema.tags.find(h=>h.collection===l&&h.tag===o);if(!u){let h=e.schema.knownTags[o];if(h&&h.collection===l)e.schema.tags.push(Object.assign({},h,{default:!1})),u=h;else return s(i,"TAG_RESOLVE_FAILED",`Unresolved tag: ${o}`,!0),n.tag=o,n}let c=u.resolve(n,h=>s(i,"TAG_RESOLVE_FAILED",h),e.options),m=L(c)?c:new P(c);return m.range=n.range,m.tag=o,u?.format&&(m.format=u.format),m}function dn(r,e,t){let i=r.offset,s=Ml(r,e,t);if(!s)return{value:"",type:null,comment:"",range:[i,i,i]};let n=s.mode===">"?P.BLOCK_FOLDED:P.BLOCK_LITERAL,o=r.source?wl(r.source):[],a=o.length;for(let g=o.length-1;g>=0;--g){let p=o[g][1];if(p===""||p==="\r")a=g;else break}if(a===0){let g=s.chomp==="+"&&o.length>0?`
`.repeat(Math.max(1,o.length-1)):"",p=i+s.length;return r.source&&(p+=r.source.length),{value:g,type:n,comment:s.comment,range:[i,p,p]}}let l=r.indent+s.indent,u=r.offset+s.length,c=0;for(let g=0;g<a;++g){let[p,b]=o[g];if(b===""||b==="\r")s.indent===0&&p.length>l&&(l=p.length);else{if(p.length<l){let x="Block scalars with more-indented leading empty lines must use an explicit indentation indicator";t(u+p.length,"MISSING_CHAR",x)}s.indent===0&&(l=p.length),c=g;break}u+=p.length+b.length+1}for(let g=o.length-1;g>=a;--g)o[g][0].length>l&&(a=g+1);let m="",h="",d=!1;for(let g=0;g<c;++g)m+=o[g][0].slice(l)+`
`;for(let g=c;g<a;++g){let[p,b]=o[g];u+=p.length+b.length+1;let x=b[b.length-1]==="\r";if(x&&(b=b.slice(0,-1)),b&&p.length<l){let y=`Block scalar lines must not be less indented than their ${s.indent?"explicit indentation indicator":"first line"}`;t(u-b.length-(x?2:1),"BAD_INDENT",y),p=""}n===P.BLOCK_LITERAL?(m+=h+p.slice(l)+b,h=`
`):p.length>l||b[0]==="	"?(h===" "?h=`
`:!d&&h===`
`&&(h=`

`),m+=h+p.slice(l)+b,h=`
`,d=!0):b===""?h===`
`?m+=`
`:h=`
`:(m+=h+b,h=" ",d=!1)}switch(s.chomp){case"-":break;case"+":for(let g=a;g<o.length;++g)m+=`
`+o[g][0].slice(l);m[m.length-1]!==`
`&&(m+=`
`);break;default:m+=`
`}let f=i+s.length+r.source.length;return{value:m,type:n,comment:s.comment,range:[i,f,f]}}function Ml({offset:r,props:e},t,i){if(e[0].type!=="block-scalar-header")return i(e[0],"IMPOSSIBLE","Block scalar header not found"),null;let{source:s}=e[0],n=s[0],o=0,a="",l=-1;for(let h=1;h<s.length;++h){let d=s[h];if(!a&&(d==="-"||d==="+"))a=d;else{let f=Number(d);!o&&f?o=f:l===-1&&(l=r+h)}}l!==-1&&i(l,"UNEXPECTED_TOKEN",`Block scalar header includes extra characters: ${s}`);let u=!1,c="",m=s.length;for(let h=1;h<e.length;++h){let d=e[h];switch(d.type){case"space":u=!0;case"newline":m+=d.source.length;break;case"comment":t&&!u&&i(d,"MISSING_CHAR","Comments must be separated from other tokens by white space characters"),m+=d.source.length,c=d.source.substring(1);break;case"error":i(d,"UNEXPECTED_TOKEN",d.message),m+=d.source.length;break;default:{let f=`Unexpected token in block scalar header: ${d.type}`;i(d,"UNEXPECTED_TOKEN",f);let g=d.source;g&&typeof g=="string"&&(m+=g.length)}}}return{mode:n,indent:o,chomp:a,comment:c,length:m}}function wl(r){let e=r.split(/\n( *)/),t=e[0],i=t.match(/^( *)/),n=[i?.[1]?[i[1],t.slice(i[1].length)]:["",t]];for(let o=1;o<e.length;o+=2)n.push([e[o],e[o+1]]);return n}function fn(r,e,t){let{offset:i,type:s,source:n,end:o}=r,a,l,u=(h,d,f)=>t(i+h,d,f);switch(s){case"scalar":a=P.PLAIN,l=Pl(n,u);break;case"single-quoted-scalar":a=P.QUOTE_SINGLE,l=Il(n,u);break;case"double-quoted-scalar":a=P.QUOTE_DOUBLE,l=Tl(n,u);break;default:return t(r,"UNEXPECTED_TOKEN",`Expected a flow scalar value, but found: ${s}`),{value:"",type:null,comment:"",range:[i,i+n.length,i+n.length]}}let c=i+n.length,m=Ne(o,c,e,t);return{value:l,type:a,comment:m.comment,range:[i,c,m.offset]}}function Pl(r,e){let t="";switch(r[0]){case"	":t="a tab character";break;case",":t="flow indicator character ,";break;case"%":t="directive indicator character %";break;case"|":case">":{t=`block scalar indicator ${r[0]}`;break}case"@":case"`":{t=`reserved character ${r[0]}`;break}}return t&&e(0,"BAD_SCALAR_START",`Plain value cannot start with ${t}`),Wo(r)}function Il(r,e){return(r[r.length-1]!=="'"||r.length===1)&&e(r.length,"MISSING_CHAR","Missing closing 'quote"),Wo(r.slice(1,-1)).replace(/''/g,"'")}function Wo(r){let e,t;try{e=new RegExp(`(.*?)(?<![ 	])[ 	]*\r?
`,"sy"),t=new RegExp(`[ 	]*(.*?)(?:(?<![ 	])[ 	]*)?\r?
`,"sy")}catch{e=/(.*?)[ \t]*\r?\n/sy,t=/[ \t]*(.*?)[ \t]*\r?\n/sy}let i=e.exec(r);if(!i)return r;let s=i[1],n=" ",o=e.lastIndex;for(t.lastIndex=o;i=t.exec(r);)i[1]===""?n===`
`?s+=n:n=`
`:(s+=n+i[1],n=" "),o=t.lastIndex;let a=/[ \t]*(.*)/sy;return a.lastIndex=o,i=a.exec(r),s+n+(i?.[1]??"")}function Tl(r,e){let t="";for(let i=1;i<r.length-1;++i){let s=r[i];if(!(s==="\r"&&r[i+1]===`
`))if(s===`
`){let{fold:n,offset:o}=Bl(r,i);t+=n,i=o}else if(s==="\\"){let n=r[++i],o=Vl[n];if(o)t+=o;else if(n===`
`)for(n=r[i+1];n===" "||n==="	";)n=r[++i+1];else if(n==="\r"&&r[i+1]===`
`)for(n=r[++i+1];n===" "||n==="	";)n=r[++i+1];else if(n==="x"||n==="u"||n==="U"){let a={x:2,u:4,U:8}[n];t+=Al(r,i+1,a,e),i+=a}else{let a=r.substr(i-1,2);e(i-1,"BAD_DQ_ESCAPE",`Invalid escape sequence ${a}`),t+=a}}else if(s===" "||s==="	"){let n=i,o=r[i+1];for(;o===" "||o==="	";)o=r[++i+1];o!==`
`&&!(o==="\r"&&r[i+2]===`
`)&&(t+=i>n?r.slice(n,i+1):s)}else t+=s}return(r[r.length-1]!=='"'||r.length===1)&&e(r.length,"MISSING_CHAR",'Missing closing "quote'),t}function Bl(r,e){let t="",i=r[e+1];for(;(i===" "||i==="	"||i===`
`||i==="\r")&&!(i==="\r"&&r[e+2]!==`
`);)i===`
`&&(t+=`
`),e+=1,i=r[e+1];return t||(t=" "),{fold:t,offset:e}}var Vl={0:"\0",a:"\x07",b:"\b",e:"\x1B",f:"\f",n:`
`,r:"\r",t:"	",v:"\v",N:"",_:"",L:"\u2028",P:"\u2029"," ":" ",'"':'"',"/":"/","\\":"\\","	":"	"};function Al(r,e,t,i){let s=r.substr(e,t),o=s.length===t&&/^[0-9a-fA-F]+$/.test(s)?parseInt(s,16):NaN;if(isNaN(o)){let a=r.substr(e-2,t+2);return i(e-2,"BAD_DQ_ESCAPE",`Invalid escape sequence ${a}`),a}return String.fromCodePoint(o)}function gn(r,e,t,i){let{value:s,type:n,comment:o,range:a}=e.type==="block-scalar"?dn(e,r.options.strict,i):fn(e,r.options.strict,i),l=t?r.directives.tagName(t.source,m=>i(t,"TAG_RESOLVE_FAILED",m)):null,u=t&&l?El(r.schema,s,l,t,i):e.type==="scalar"?Ll(r,s,e,i):r.schema[ce],c;try{let m=u.resolve(s,h=>i(t??e,"TAG_RESOLVE_FAILED",h),r.options);c=B(m)?m:new P(m)}catch(m){let h=m instanceof Error?m.message:String(m);i(t??e,"TAG_RESOLVE_FAILED",h),c=new P(s)}return c.range=a,c.source=s,n&&(c.type=n),l&&(c.tag=l),u.format&&(c.format=u.format),o&&(c.comment=o),c}function El(r,e,t,i,s){if(t==="!")return r[ce];let n=[];for(let a of r.tags)if(!a.collection&&a.tag===t)if(a.default&&a.test)n.push(a);else return a;for(let a of n)if(a.test?.test(e))return a;let o=r.knownTags[t];return o&&!o.collection?(r.tags.push(Object.assign({},o,{default:!1,test:void 0})),o):(s(i,"TAG_RESOLVE_FAILED",`Unresolved tag: ${t}`,t!=="tag:yaml.org,2002:str"),r[ce])}function Ll({directives:r,schema:e},t,i,s){let n=e.tags.find(o=>o.default&&o.test?.test(t))||e[ce];if(e.compat){let o=e.compat.find(a=>a.default&&a.test?.test(t))??e[ce];if(n.tag!==o.tag){let a=r.tagString(n.tag),l=r.tagString(o.tag),u=`Value may be parsed as either ${a} or ${l}`;s(i,"TAG_RESOLVE_FAILED",u,!0)}}return n}function qo(r,e,t){if(e){t===null&&(t=e.length);for(let i=t-1;i>=0;--i){let s=e[i];switch(s.type){case"space":case"comment":case"newline":r-=s.source.length;continue}for(s=e[++i];s?.type==="space";)r+=s.source.length,s=e[++i];break}}return r}var Rl={composeNode:bn,composeEmptyNode:gs};function bn(r,e,t,i){let{spaceBefore:s,comment:n,anchor:o,tag:a}=t,l,u=!0;switch(e.type){case"alias":l=Nl(r,e,i),(o||a)&&i(e,"ALIAS_PROPS","An alias node must not specify any properties");break;case"scalar":case"single-quoted-scalar":case"double-quoted-scalar":case"block-scalar":l=gn(r,e,a,i),o&&(l.anchor=o.source.substring(1));break;case"block-map":case"block-seq":case"flow-collection":l=jo(Rl,r,e,a,i),o&&(l.anchor=o.source.substring(1));break;default:{let c=e.type==="error"?e.message:`Unsupported token (type: ${e.type})`;i(e,"UNEXPECTED_TOKEN",c),l=gs(r,e.offset,void 0,null,t,i),u=!1}}return o&&l.anchor===""&&i(o,"BAD_ALIAS","Anchor cannot be an empty string"),s&&(l.spaceBefore=!0),n&&(e.type==="scalar"&&e.source===""?l.comment=n:l.commentBefore=n),r.options.keepSourceTokens&&u&&(l.srcToken=e),l}function gs(r,e,t,i,{spaceBefore:s,comment:n,anchor:o,tag:a,end:l},u){let c={type:"scalar",offset:qo(e,t,i),indent:-1,source:""},m=gn(r,c,a,u);return o&&(m.anchor=o.source.substring(1),m.anchor===""&&u(o,"BAD_ALIAS","Anchor cannot be an empty string")),s&&(m.spaceBefore=!0),n&&(m.comment=n,m.range[2]=l),m}function Nl({options:r},{offset:e,source:t,end:i},s){let n=new Ze(t.substring(1));n.source===""&&s(e,"BAD_ALIAS","Alias cannot be an empty string"),n.source.endsWith(":")&&s(e+t.length-1,"BAD_ALIAS","Alias ending in : is ambiguous",!0);let o=e+t.length,a=Ne(i,o,r.strict,s);return n.range=[e,o,a.offset],a.comment&&(n.comment=a.comment),n}function Ho(r,e,{offset:t,start:i,value:s,end:n},o){let a=Object.assign({_directives:e},r),l=new Le(void 0,a),u={atRoot:!0,directives:l.directives,options:l.options,schema:l.schema},c=Re(i,{indicator:"doc-start",next:s??n?.[0],offset:t,onError:o,startOnNewline:!0});c.found&&(l.directives.docStart=!0,s&&(s.type==="block-map"||s.type==="block-seq")&&!c.hasNewline&&o(c.end,"MISSING_CHAR","Block collection cannot start on same line with directives-end marker")),l.contents=s?bn(u,s,c,o):gs(u,c.end,i,null,c,o);let m=l.contents.range[2],h=Ne(n,m,!1,o);return h.comment&&(l.comment=h.comment),l.range=[t,m,h.offset],l}function cr(r){if(typeof r=="number")return[r,r+1];if(Array.isArray(r))return r.length===2?r:[r[0],r[1]];let{offset:e,source:t}=r;return[e,e+(typeof t=="string"?t.length:1)]}function Go(r){let e="",t=!1,i=!1;for(let s=0;s<r.length;++s){let n=r[s];switch(n[0]){case"#":e+=(e===""?"":i?`

`:`
`)+(n.substring(1)||" "),t=!0,i=!1;break;case"%":r[s+1]?.[0]!=="#"&&(s+=1),t=!1;break;default:t||(i=!0),t=!1}}return{comment:e,afterEmptyLine:i}}var mr=class{constructor(e={}){this.doc=null,this.atDirectives=!1,this.prelude=[],this.errors=[],this.warnings=[],this.onError=(t,i,s,n)=>{let o=cr(t);n?this.warnings.push(new lr(o,i,s)):this.errors.push(new Se(o,i,s))},this.directives=new W({version:e.version||"1.2"}),this.options=e}decorate(e,t){let{comment:i,afterEmptyLine:s}=Go(this.prelude);if(i){let n=e.contents;if(t)e.comment=e.comment?`${e.comment}
${i}`:i;else if(s||e.directives.docStart||!n)e.commentBefore=i;else if(R(n)&&!n.flow&&n.items.length>0){let o=n.items[0];E(o)&&(o=o.key);let a=o.commentBefore;o.commentBefore=a?`${i}
${a}`:i}else{let o=n.commentBefore;n.commentBefore=o?`${i}
${o}`:i}}t?(Array.prototype.push.apply(e.errors,this.errors),Array.prototype.push.apply(e.warnings,this.warnings)):(e.errors=this.errors,e.warnings=this.warnings),this.prelude=[],this.errors=[],this.warnings=[]}streamInfo(){return{comment:Go(this.prelude).comment,directives:this.directives,errors:this.errors,warnings:this.warnings}}*compose(e,t=!1,i=-1){for(let s of e)yield*this.next(s);yield*this.end(t,i)}*next(e){switch(e.type){case"directive":this.directives.add(e.source,(t,i,s)=>{let n=cr(e);n[0]+=t,this.onError(n,"BAD_DIRECTIVE",i,s)}),this.prelude.push(e.source),this.atDirectives=!0;break;case"document":{let t=Ho(this.options,this.directives,e,this.onError);this.atDirectives&&!t.directives.docStart&&this.onError(e,"MISSING_CHAR","Missing directives-end/doc-start indicator line"),this.decorate(t,!1),this.doc&&(yield this.doc),this.doc=t,this.atDirectives=!1;break}case"byte-order-mark":case"space":break;case"comment":case"newline":this.prelude.push(e.source);break;case"error":{let t=e.source?`${e.message}: ${JSON.stringify(e.source)}`:e.message,i=new Se(cr(e),"UNEXPECTED_TOKEN",t);this.atDirectives||!this.doc?this.errors.push(i):this.doc.errors.push(i);break}case"doc-end":{if(!this.doc){let i="Unexpected doc-end without preceding document";this.errors.push(new Se(cr(e),"UNEXPECTED_TOKEN",i));break}this.doc.directives.docEnd=!0;let t=Ne(e.end,e.offset+e.source.length,this.doc.options.strict,this.onError);if(this.decorate(this.doc,!0),t.comment){let i=this.doc.comment;this.doc.comment=i?`${i}
${t.comment}`:t.comment}this.doc.range[2]=t.offset;break}default:this.errors.push(new Se(cr(e),"UNEXPECTED_TOKEN",`Unsupported token ${e.type}`))}}*end(e=!1,t=-1){if(this.doc)this.decorate(this.doc,!0),yield this.doc,this.doc=null;else if(e){let i=Object.assign({_directives:this.directives},this.options),s=new Le(void 0,i);this.atDirectives&&this.onError(t,"MISSING_CHAR","Missing directives-end indicator line"),s.range=[0,t,t],this.decorate(s,!1),yield s}}};var yn=Symbol("break visit"),Fl=Symbol("skip children"),Yo=Symbol("remove item");function kt(r,e){"type"in r&&r.type==="document"&&(r={start:r.start,value:r.value}),Ko(Object.freeze([]),r,e)}kt.BREAK=yn;kt.SKIP=Fl;kt.REMOVE=Yo;kt.itemAtPath=(r,e)=>{let t=r;for(let[i,s]of e){let n=t?.[i];if(n&&"items"in n)t=n.items[s];else return}return t};kt.parentCollection=(r,e)=>{let t=kt.itemAtPath(r,e.slice(0,-1)),i=e[e.length-1][0],s=t?.[i];if(s&&"items"in s)return s;throw new Error("Parent collection not found")};function Ko(r,e,t){let i=t(e,r);if(typeof i=="symbol")return i;for(let s of["key","value"]){let n=e[s];if(n&&"items"in n){for(let o=0;o<n.items.length;++o){let a=Ko(Object.freeze(r.concat([[s,o]])),n.items[o],t);if(typeof a=="number")o=a-1;else{if(a===yn)return yn;a===Yo&&(n.items.splice(o,1),o-=1)}}typeof i=="function"&&s==="key"&&(i=i(e,r))}}return typeof i=="function"?i(e,r):i}var _n="\uFEFF",Cn="",xn="",bs="";function Xo(r){switch(r){case _n:return"byte-order-mark";case Cn:return"doc-mode";case xn:return"flow-error-end";case bs:return"scalar";case"---":return"doc-start";case"...":return"doc-end";case"":case`
`:case`\r
`:return"newline";case"-":return"seq-item-ind";case"?":return"explicit-key-ind";case":":return"map-value-ind";case"{":return"flow-map-start";case"}":return"flow-map-end";case"[":return"flow-seq-start";case"]":return"flow-seq-end";case",":return"comma"}switch(r[0]){case" ":case"	":return"space";case"#":return"comment";case"%":return"directive-line";case"*":return"alias";case"&":return"anchor";case"!":return"tag";case"'":return"single-quoted-scalar";case'"':return"double-quoted-scalar";case"|":case">":return"block-scalar-header"}return null}function he(r){switch(r){case void 0:case" ":case`
`:case"\r":case"	":return!0;default:return!1}}var Jo="0123456789ABCDEFabcdef".split(""),Ol="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz-#;/?:@&=+$_.!~*'()".split(""),Sn=",[]{}".split(""),Dl=` ,[]{}
\r	`.split(""),vn=r=>!r||Dl.includes(r),hr=class{constructor(){this.atEnd=!1,this.blockScalarIndent=-1,this.blockScalarKeep=!1,this.buffer="",this.flowKey=!1,this.flowLevel=0,this.indentNext=0,this.indentValue=0,this.lineEndPos=null,this.next=null,this.pos=0}*lex(e,t=!1){e&&(this.buffer=this.buffer?this.buffer+e:e,this.lineEndPos=null),this.atEnd=!t;let i=this.next??"stream";for(;i&&(t||this.hasChars(1));)i=yield*this.parseNext(i)}atLineEnd(){let e=this.pos,t=this.buffer[e];for(;t===" "||t==="	";)t=this.buffer[++e];return!t||t==="#"||t===`
`?!0:t==="\r"?this.buffer[e+1]===`
`:!1}charAt(e){return this.buffer[this.pos+e]}continueScalar(e){let t=this.buffer[e];if(this.indentNext>0){let i=0;for(;t===" ";)t=this.buffer[++i+e];if(t==="\r"){let s=this.buffer[i+e+1];if(s===`
`||!s&&!this.atEnd)return e+i+1}return t===`
`||i>=this.indentNext||!t&&!this.atEnd?e+i:-1}if(t==="-"||t==="."){let i=this.buffer.substr(e,3);if((i==="---"||i==="...")&&he(this.buffer[e+3]))return-1}return e}getLine(){let e=this.lineEndPos;return(typeof e!="number"||e!==-1&&e<this.pos)&&(e=this.buffer.indexOf(`
`,this.pos),this.lineEndPos=e),e===-1?this.atEnd?this.buffer.substring(this.pos):null:(this.buffer[e-1]==="\r"&&(e-=1),this.buffer.substring(this.pos,e))}hasChars(e){return this.pos+e<=this.buffer.length}setNext(e){return this.buffer=this.buffer.substring(this.pos),this.pos=0,this.lineEndPos=null,this.next=e,null}peek(e){return this.buffer.substr(this.pos,e)}*parseNext(e){switch(e){case"stream":return yield*this.parseStream();case"line-start":return yield*this.parseLineStart();case"block-start":return yield*this.parseBlockStart();case"doc":return yield*this.parseDocument();case"flow":return yield*this.parseFlowCollection();case"quoted-scalar":return yield*this.parseQuotedScalar();case"block-scalar":return yield*this.parseBlockScalar();case"plain-scalar":return yield*this.parsePlainScalar()}}*parseStream(){let e=this.getLine();if(e===null)return this.setNext("stream");if(e[0]===_n&&(yield*this.pushCount(1),e=e.substring(1)),e[0]==="%"){let t=e.length,i=e.indexOf("#");if(i!==-1){let n=e[i-1];(n===" "||n==="	")&&(t=i-1)}for(;;){let n=e[t-1];if(n===" "||n==="	")t-=1;else break}let s=(yield*this.pushCount(t))+(yield*this.pushSpaces(!0));return yield*this.pushCount(e.length-s),this.pushNewline(),"stream"}if(this.atLineEnd()){let t=yield*this.pushSpaces(!0);return yield*this.pushCount(e.length-t),yield*this.pushNewline(),"stream"}return yield Cn,yield*this.parseLineStart()}*parseLineStart(){let e=this.charAt(0);if(!e&&!this.atEnd)return this.setNext("line-start");if(e==="-"||e==="."){if(!this.atEnd&&!this.hasChars(4))return this.setNext("line-start");let t=this.peek(3);if(t==="---"&&he(this.charAt(3)))return yield*this.pushCount(3),this.indentValue=0,this.indentNext=0,"doc";if(t==="..."&&he(this.charAt(3)))return yield*this.pushCount(3),"stream"}return this.indentValue=yield*this.pushSpaces(!1),this.indentNext>this.indentValue&&!he(this.charAt(1))&&(this.indentNext=this.indentValue),yield*this.parseBlockStart()}*parseBlockStart(){let[e,t]=this.peek(2);if(!t&&!this.atEnd)return this.setNext("block-start");if((e==="-"||e==="?"||e===":")&&he(t)){let i=(yield*this.pushCount(1))+(yield*this.pushSpaces(!0));return this.indentNext=this.indentValue+1,this.indentValue+=i,yield*this.parseBlockStart()}return"doc"}*parseDocument(){yield*this.pushSpaces(!0);let e=this.getLine();if(e===null)return this.setNext("doc");let t=yield*this.pushIndicators();switch(e[t]){case"#":yield*this.pushCount(e.length-t);case void 0:return yield*this.pushNewline(),yield*this.parseLineStart();case"{":case"[":return yield*this.pushCount(1),this.flowKey=!1,this.flowLevel=1,"flow";case"}":case"]":return yield*this.pushCount(1),"doc";case"*":return yield*this.pushUntil(vn),"doc";case'"':case"'":return yield*this.parseQuotedScalar();case"|":case">":return t+=yield*this.parseBlockScalarHeader(),t+=yield*this.pushSpaces(!0),yield*this.pushCount(e.length-t),yield*this.pushNewline(),yield*this.parseBlockScalar();default:return yield*this.parsePlainScalar()}}*parseFlowCollection(){let e,t,i=-1;do e=yield*this.pushNewline(),e>0?(t=yield*this.pushSpaces(!1),this.indentValue=i=t):t=0,t+=yield*this.pushSpaces(!0);while(e+t>0);let s=this.getLine();if(s===null)return this.setNext("flow");if((i!==-1&&i<this.indentNext&&s[0]!=="#"||i===0&&(s.startsWith("---")||s.startsWith("..."))&&he(s[3]))&&!(i===this.indentNext-1&&this.flowLevel===1&&(s[0]==="]"||s[0]==="}")))return this.flowLevel=0,yield xn,yield*this.parseLineStart();let n=0;for(;s[n]===",";)n+=yield*this.pushCount(1),n+=yield*this.pushSpaces(!0),this.flowKey=!1;switch(n+=yield*this.pushIndicators(),s[n]){case void 0:return"flow";case"#":return yield*this.pushCount(s.length-n),"flow";case"{":case"[":return yield*this.pushCount(1),this.flowKey=!1,this.flowLevel+=1,"flow";case"}":case"]":return yield*this.pushCount(1),this.flowKey=!0,this.flowLevel-=1,this.flowLevel?"flow":"doc";case"*":return yield*this.pushUntil(vn),"flow";case'"':case"'":return this.flowKey=!0,yield*this.parseQuotedScalar();case":":{let o=this.charAt(1);if(this.flowKey||he(o)||o===",")return this.flowKey=!1,yield*this.pushCount(1),yield*this.pushSpaces(!0),"flow"}default:return this.flowKey=!1,yield*this.parsePlainScalar()}}*parseQuotedScalar(){let e=this.charAt(0),t=this.buffer.indexOf(e,this.pos+1);if(e==="'")for(;t!==-1&&this.buffer[t+1]==="'";)t=this.buffer.indexOf("'",t+2);else for(;t!==-1;){let n=0;for(;this.buffer[t-1-n]==="\\";)n+=1;if(n%2===0)break;t=this.buffer.indexOf('"',t+1)}let i=this.buffer.substring(0,t),s=i.indexOf(`
`,this.pos);if(s!==-1){for(;s!==-1;){let n=this.continueScalar(s+1);if(n===-1)break;s=i.indexOf(`
`,n)}s!==-1&&(t=s-(i[s-1]==="\r"?2:1))}if(t===-1){if(!this.atEnd)return this.setNext("quoted-scalar");t=this.buffer.length}return yield*this.pushToIndex(t+1,!1),this.flowLevel?"flow":"doc"}*parseBlockScalarHeader(){this.blockScalarIndent=-1,this.blockScalarKeep=!1;let e=this.pos;for(;;){let t=this.buffer[++e];if(t==="+")this.blockScalarKeep=!0;else if(t>"0"&&t<="9")this.blockScalarIndent=Number(t)-1;else if(t!=="-")break}return yield*this.pushUntil(t=>he(t)||t==="#")}*parseBlockScalar(){let e=this.pos-1,t=0,i;e:for(let s=this.pos;i=this.buffer[s];++s)switch(i){case" ":t+=1;break;case`
`:e=s,t=0;break;case"\r":{let n=this.buffer[s+1];if(!n&&!this.atEnd)return this.setNext("block-scalar");if(n===`
`)break}default:break e}if(!i&&!this.atEnd)return this.setNext("block-scalar");if(t>=this.indentNext){this.blockScalarIndent===-1?this.indentNext=t:this.indentNext+=this.blockScalarIndent;do{let s=this.continueScalar(e+1);if(s===-1)break;e=this.buffer.indexOf(`
`,s)}while(e!==-1);if(e===-1){if(!this.atEnd)return this.setNext("block-scalar");e=this.buffer.length}}if(!this.blockScalarKeep)do{let s=e-1,n=this.buffer[s];n==="\r"&&(n=this.buffer[--s]);let o=s;for(;n===" "||n==="	";)n=this.buffer[--s];if(n===`
`&&s>=this.pos&&s+1+t>o)e=s;else break}while(!0);return yield bs,yield*this.pushToIndex(e+1,!0),yield*this.parseLineStart()}*parsePlainScalar(){let e=this.flowLevel>0,t=this.pos-1,i=this.pos-1,s;for(;s=this.buffer[++i];)if(s===":"){let n=this.buffer[i+1];if(he(n)||e&&n===",")break;t=i}else if(he(s)){let n=this.buffer[i+1];if(s==="\r"&&(n===`
`?(i+=1,s=`
`,n=this.buffer[i+1]):t=i),n==="#"||e&&Sn.includes(n))break;if(s===`
`){let o=this.continueScalar(i+1);if(o===-1)break;i=Math.max(i,o-2)}}else{if(e&&Sn.includes(s))break;t=i}return!s&&!this.atEnd?this.setNext("plain-scalar"):(yield bs,yield*this.pushToIndex(t+1,!0),e?"flow":"doc")}*pushCount(e){return e>0?(yield this.buffer.substr(this.pos,e),this.pos+=e,e):0}*pushToIndex(e,t){let i=this.buffer.slice(this.pos,e);return i?(yield i,this.pos+=i.length,i.length):(t&&(yield""),0)}*pushIndicators(){switch(this.charAt(0)){case"!":return(yield*this.pushTag())+(yield*this.pushSpaces(!0))+(yield*this.pushIndicators());case"&":return(yield*this.pushUntil(vn))+(yield*this.pushSpaces(!0))+(yield*this.pushIndicators());case"-":case"?":case":":{let e=this.flowLevel>0,t=this.charAt(1);if(he(t)||e&&Sn.includes(t))return e?this.flowKey&&(this.flowKey=!1):this.indentNext=this.indentValue+1,(yield*this.pushCount(1))+(yield*this.pushSpaces(!0))+(yield*this.pushIndicators())}}return 0}*pushTag(){if(this.charAt(1)==="<"){let e=this.pos+2,t=this.buffer[e];for(;!he(t)&&t!==">";)t=this.buffer[++e];return yield*this.pushToIndex(t===">"?e+1:e,!1)}else{let e=this.pos+1,t=this.buffer[e];for(;t;)if(Ol.includes(t))t=this.buffer[++e];else if(t==="%"&&Jo.includes(this.buffer[e+1])&&Jo.includes(this.buffer[e+2]))t=this.buffer[e+=3];else break;return yield*this.pushToIndex(e,!1)}}*pushNewline(){let e=this.buffer[this.pos];return e===`
`?yield*this.pushCount(1):e==="\r"&&this.charAt(1)===`
`?yield*this.pushCount(2):0}*pushSpaces(e){let t=this.pos-1,i;do i=this.buffer[++t];while(i===" "||e&&i==="	");let s=t-this.pos;return s>0&&(yield this.buffer.substr(this.pos,s),this.pos=t),s}*pushUntil(e){let t=this.pos,i=this.buffer[t];for(;!e(i);)i=this.buffer[++t];return yield*this.pushToIndex(t,!1)}};var pr=class{constructor(){this.lineStarts=[],this.addNewLine=e=>this.lineStarts.push(e),this.linePos=e=>{let t=0,i=this.lineStarts.length;for(;t<i;){let n=t+i>>1;this.lineStarts[n]<e?t=n+1:i=n}if(this.lineStarts[t]===e)return{line:t+1,col:1};if(t===0)return{line:0,col:e};let s=this.lineStarts[t-1];return{line:t,col:e-s+1}}}};function ve(r,e){for(let t=0;t<r.length;++t)if(r[t].type===e)return!0;return!1}function Qo(r){for(let e=0;e<r.length;++e)switch(r[e].type){case"space":case"comment":case"newline":break;default:return e}return-1}function ea(r){switch(r?.type){case"alias":case"scalar":case"single-quoted-scalar":case"double-quoted-scalar":case"flow-collection":return!0;default:return!1}}function ys(r){switch(r.type){case"document":return r.start;case"block-map":{let e=r.items[r.items.length-1];return e.sep??e.start}case"block-seq":return r.items[r.items.length-1].start;default:return[]}}function pi(r){if(r.length===0)return[];let e=r.length;e:for(;--e>=0;)switch(r[e].type){case"doc-start":case"explicit-key-ind":case"map-value-ind":case"seq-item-ind":case"newline":break e}for(;r[++e]?.type==="space";);return r.splice(e,r.length)}function Zo(r){if(r.start.type==="flow-seq-start")for(let e of r.items)e.sep&&!e.value&&!ve(e.start,"explicit-key-ind")&&!ve(e.sep,"map-value-ind")&&(e.key&&(e.value=e.key),delete e.key,ea(e.value)?e.value.end?Array.prototype.push.apply(e.value.end,e.sep):e.value.end=e.sep:Array.prototype.push.apply(e.start,e.sep),delete e.sep)}var dr=class{constructor(e){this.atNewLine=!0,this.atScalar=!1,this.indent=0,this.offset=0,this.onKeyLine=!1,this.stack=[],this.source="",this.type="",this.lexer=new hr,this.onNewLine=e}*parse(e,t=!1){this.onNewLine&&this.offset===0&&this.onNewLine(0);for(let i of this.lexer.lex(e,t))yield*this.next(i);t||(yield*this.end())}*next(e){if(this.source=e,this.atScalar){this.atScalar=!1,yield*this.step(),this.offset+=e.length;return}let t=Xo(e);if(t)if(t==="scalar")this.atNewLine=!1,this.atScalar=!0,this.type="scalar";else{switch(this.type=t,yield*this.step(),t){case"newline":this.atNewLine=!0,this.indent=0,this.onNewLine&&this.onNewLine(this.offset+e.length);break;case"space":this.atNewLine&&e[0]===" "&&(this.indent+=e.length);break;case"explicit-key-ind":case"map-value-ind":case"seq-item-ind":this.atNewLine&&(this.indent+=e.length);break;case"doc-mode":case"flow-error-end":return;default:this.atNewLine=!1}this.offset+=e.length}else{let i=`Not a YAML token: ${e}`;yield*this.pop({type:"error",offset:this.offset,message:i,source:e}),this.offset+=e.length}}*end(){for(;this.stack.length>0;)yield*this.pop()}get sourceToken(){return{type:this.type,offset:this.offset,indent:this.indent,source:this.source}}*step(){let e=this.peek(1);if(this.type==="doc-end"&&(!e||e.type!=="doc-end")){for(;this.stack.length>0;)yield*this.pop();this.stack.push({type:"doc-end",offset:this.offset,source:this.source});return}if(!e)return yield*this.stream();switch(e.type){case"document":return yield*this.document(e);case"alias":case"scalar":case"single-quoted-scalar":case"double-quoted-scalar":return yield*this.scalar(e);case"block-scalar":return yield*this.blockScalar(e);case"block-map":return yield*this.blockMap(e);case"block-seq":return yield*this.blockSequence(e);case"flow-collection":return yield*this.flowCollection(e);case"doc-end":return yield*this.documentEnd(e)}yield*this.pop()}peek(e){return this.stack[this.stack.length-e]}*pop(e){let t=e??this.stack.pop();if(t)if(this.stack.length===0)yield t;else{let i=this.peek(1);switch(t.type==="block-scalar"?t.indent="indent"in i?i.indent:0:t.type==="flow-collection"&&i.type==="document"&&(t.indent=0),t.type==="flow-collection"&&Zo(t),i.type){case"document":i.value=t;break;case"block-scalar":i.props.push(t);break;case"block-map":{let s=i.items[i.items.length-1];if(s.value){i.items.push({start:[],key:t,sep:[]}),this.onKeyLine=!0;return}else if(s.sep)s.value=t;else{Object.assign(s,{key:t,sep:[]}),this.onKeyLine=!ve(s.start,"explicit-key-ind");return}break}case"block-seq":{let s=i.items[i.items.length-1];s.value?i.items.push({start:[],value:t}):s.value=t;break}case"flow-collection":{let s=i.items[i.items.length-1];!s||s.value?i.items.push({start:[],key:t,sep:[]}):s.sep?s.value=t:Object.assign(s,{key:t,sep:[]});return}default:yield*this.pop(),yield*this.pop(t)}if((i.type==="document"||i.type==="block-map"||i.type==="block-seq")&&(t.type==="block-map"||t.type==="block-seq")){let s=t.items[t.items.length-1];s&&!s.sep&&!s.value&&s.start.length>0&&Qo(s.start)===-1&&(t.indent===0||s.start.every(n=>n.type!=="comment"||n.indent<t.indent))&&(i.type==="document"?i.end=s.start:i.items.push({start:s.start}),t.items.splice(-1,1))}}else{let i="Tried to pop an empty stack";yield{type:"error",offset:this.offset,source:"",message:i}}}*stream(){switch(this.type){case"directive-line":yield{type:"directive",offset:this.offset,source:this.source};return;case"byte-order-mark":case"space":case"comment":case"newline":yield this.sourceToken;return;case"doc-mode":case"doc-start":{let e={type:"document",offset:this.offset,start:[]};this.type==="doc-start"&&e.start.push(this.sourceToken),this.stack.push(e);return}}yield{type:"error",offset:this.offset,message:`Unexpected ${this.type} token in YAML stream`,source:this.source}}*document(e){if(e.value)return yield*this.lineEnd(e);switch(this.type){case"doc-start":{Qo(e.start)!==-1?(yield*this.pop(),yield*this.step()):e.start.push(this.sourceToken);return}case"anchor":case"tag":case"space":case"comment":case"newline":e.start.push(this.sourceToken);return}let t=this.startBlockValue(e);t?this.stack.push(t):yield{type:"error",offset:this.offset,message:`Unexpected ${this.type} token in YAML document`,source:this.source}}*scalar(e){if(this.type==="map-value-ind"){let t=ys(this.peek(2)),i=pi(t),s;e.end?(s=e.end,s.push(this.sourceToken),delete e.end):s=[this.sourceToken];let n={type:"block-map",offset:e.offset,indent:e.indent,items:[{start:i,key:e,sep:s}]};this.onKeyLine=!0,this.stack[this.stack.length-1]=n}else yield*this.lineEnd(e)}*blockScalar(e){switch(this.type){case"space":case"comment":case"newline":e.props.push(this.sourceToken);return;case"scalar":if(e.source=this.source,this.atNewLine=!0,this.indent=0,this.onNewLine){let t=this.source.indexOf(`
`)+1;for(;t!==0;)this.onNewLine(this.offset+t),t=this.source.indexOf(`
`,t)+1}yield*this.pop();break;default:yield*this.pop(),yield*this.step()}}*blockMap(e){let t=e.items[e.items.length-1];switch(this.type){case"newline":if(this.onKeyLine=!1,t.value){let i="end"in t.value?t.value.end:void 0;(Array.isArray(i)?i[i.length-1]:void 0)?.type==="comment"?i?.push(this.sourceToken):e.items.push({start:[this.sourceToken]})}else t.sep?t.sep.push(this.sourceToken):t.start.push(this.sourceToken);return;case"space":case"comment":if(t.value)e.items.push({start:[this.sourceToken]});else if(t.sep)t.sep.push(this.sourceToken);else{if(this.atIndentedComment(t.start,e.indent)){let s=e.items[e.items.length-2]?.value?.end;if(Array.isArray(s)){Array.prototype.push.apply(s,t.start),s.push(this.sourceToken),e.items.pop();return}}t.start.push(this.sourceToken)}return}if(this.indent>=e.indent){let i=!this.onKeyLine&&this.indent===e.indent&&t.sep,s=[];if(i&&t.sep&&!t.value){let n=[];for(let o=0;o<t.sep.length;++o){let a=t.sep[o];switch(a.type){case"newline":n.push(o);break;case"space":break;case"comment":a.indent>e.indent&&(n.length=0);break;default:n.length=0}}n.length>=2&&(s=t.sep.splice(n[1]))}switch(this.type){case"anchor":case"tag":i||t.value?(s.push(this.sourceToken),e.items.push({start:s}),this.onKeyLine=!0):t.sep?t.sep.push(this.sourceToken):t.start.push(this.sourceToken);return;case"explicit-key-ind":!t.sep&&!ve(t.start,"explicit-key-ind")?t.start.push(this.sourceToken):i||t.value?(s.push(this.sourceToken),e.items.push({start:s})):this.stack.push({type:"block-map",offset:this.offset,indent:this.indent,items:[{start:[this.sourceToken]}]}),this.onKeyLine=!0;return;case"map-value-ind":if(ve(t.start,"explicit-key-ind"))if(t.sep)if(t.value)e.items.push({start:[],key:null,sep:[this.sourceToken]});else if(ve(t.sep,"map-value-ind"))this.stack.push({type:"block-map",offset:this.offset,indent:this.indent,items:[{start:s,key:null,sep:[this.sourceToken]}]});else if(ea(t.key)&&!ve(t.sep,"newline")){let n=pi(t.start),o=t.key,a=t.sep;a.push(this.sourceToken),delete t.key,delete t.sep,this.stack.push({type:"block-map",offset:this.offset,indent:this.indent,items:[{start:n,key:o,sep:a}]})}else s.length>0?t.sep=t.sep.concat(s,this.sourceToken):t.sep.push(this.sourceToken);else if(ve(t.start,"newline"))Object.assign(t,{key:null,sep:[this.sourceToken]});else{let n=pi(t.start);this.stack.push({type:"block-map",offset:this.offset,indent:this.indent,items:[{start:n,key:null,sep:[this.sourceToken]}]})}else t.sep?t.value||i?e.items.push({start:s,key:null,sep:[this.sourceToken]}):ve(t.sep,"map-value-ind")?this.stack.push({type:"block-map",offset:this.offset,indent:this.indent,items:[{start:[],key:null,sep:[this.sourceToken]}]}):t.sep.push(this.sourceToken):Object.assign(t,{key:null,sep:[this.sourceToken]});this.onKeyLine=!0;return;case"alias":case"scalar":case"single-quoted-scalar":case"double-quoted-scalar":{let n=this.flowScalar(this.type);i||t.value?(e.items.push({start:s,key:n,sep:[]}),this.onKeyLine=!0):t.sep?this.stack.push(n):(Object.assign(t,{key:n,sep:[]}),this.onKeyLine=!0);return}default:{let n=this.startBlockValue(e);if(n){i&&n.type!=="block-seq"&&ve(t.start,"explicit-key-ind")&&e.items.push({start:s}),this.stack.push(n);return}}}}yield*this.pop(),yield*this.step()}*blockSequence(e){let t=e.items[e.items.length-1];switch(this.type){case"newline":if(t.value){let i="end"in t.value?t.value.end:void 0;(Array.isArray(i)?i[i.length-1]:void 0)?.type==="comment"?i?.push(this.sourceToken):e.items.push({start:[this.sourceToken]})}else t.start.push(this.sourceToken);return;case"space":case"comment":if(t.value)e.items.push({start:[this.sourceToken]});else{if(this.atIndentedComment(t.start,e.indent)){let s=e.items[e.items.length-2]?.value?.end;if(Array.isArray(s)){Array.prototype.push.apply(s,t.start),s.push(this.sourceToken),e.items.pop();return}}t.start.push(this.sourceToken)}return;case"anchor":case"tag":if(t.value||this.indent<=e.indent)break;t.start.push(this.sourceToken);return;case"seq-item-ind":if(this.indent!==e.indent)break;t.value||ve(t.start,"seq-item-ind")?e.items.push({start:[this.sourceToken]}):t.start.push(this.sourceToken);return}if(this.indent>e.indent){let i=this.startBlockValue(e);if(i){this.stack.push(i);return}}yield*this.pop(),yield*this.step()}*flowCollection(e){let t=e.items[e.items.length-1];if(this.type==="flow-error-end"){let i;do yield*this.pop(),i=this.peek(1);while(i&&i.type==="flow-collection")}else if(e.end.length===0){switch(this.type){case"comma":case"explicit-key-ind":!t||t.sep?e.items.push({start:[this.sourceToken]}):t.start.push(this.sourceToken);return;case"map-value-ind":!t||t.value?e.items.push({start:[],key:null,sep:[this.sourceToken]}):t.sep?t.sep.push(this.sourceToken):Object.assign(t,{key:null,sep:[this.sourceToken]});return;case"space":case"comment":case"newline":case"anchor":case"tag":!t||t.value?e.items.push({start:[this.sourceToken]}):t.sep?t.sep.push(this.sourceToken):t.start.push(this.sourceToken);return;case"alias":case"scalar":case"single-quoted-scalar":case"double-quoted-scalar":{let s=this.flowScalar(this.type);!t||t.value?e.items.push({start:[],key:s,sep:[]}):t.sep?this.stack.push(s):Object.assign(t,{key:s,sep:[]});return}case"flow-map-end":case"flow-seq-end":e.end.push(this.sourceToken);return}let i=this.startBlockValue(e);i?this.stack.push(i):(yield*this.pop(),yield*this.step())}else{let i=this.peek(2);if(i.type==="block-map"&&(this.type==="map-value-ind"&&i.indent===e.indent||this.type==="newline"&&!i.items[i.items.length-1].sep))yield*this.pop(),yield*this.step();else if(this.type==="map-value-ind"&&i.type!=="flow-collection"){let s=ys(i),n=pi(s);Zo(e);let o=e.end.splice(1,e.end.length);o.push(this.sourceToken);let a={type:"block-map",offset:e.offset,indent:e.indent,items:[{start:n,key:e,sep:o}]};this.onKeyLine=!0,this.stack[this.stack.length-1]=a}else yield*this.lineEnd(e)}}flowScalar(e){if(this.onNewLine){let t=this.source.indexOf(`
`)+1;for(;t!==0;)this.onNewLine(this.offset+t),t=this.source.indexOf(`
`,t)+1}return{type:e,offset:this.offset,indent:this.indent,source:this.source}}startBlockValue(e){switch(this.type){case"alias":case"scalar":case"single-quoted-scalar":case"double-quoted-scalar":return this.flowScalar(this.type);case"block-scalar-header":return{type:"block-scalar",offset:this.offset,indent:this.indent,props:[this.sourceToken],source:""};case"flow-map-start":case"flow-seq-start":return{type:"flow-collection",offset:this.offset,indent:this.indent,start:this.sourceToken,items:[],end:[]};case"seq-item-ind":return{type:"block-seq",offset:this.offset,indent:this.indent,items:[{start:[this.sourceToken]}]};case"explicit-key-ind":{this.onKeyLine=!0;let t=ys(e),i=pi(t);return i.push(this.sourceToken),{type:"block-map",offset:this.offset,indent:this.indent,items:[{start:i}]}}case"map-value-ind":{this.onKeyLine=!0;let t=ys(e),i=pi(t);return{type:"block-map",offset:this.offset,indent:this.indent,items:[{start:i,key:null,sep:[this.sourceToken]}]}}}return null}atIndentedComment(e,t){return this.type!=="comment"||this.indent<=t?!1:e.every(i=>i.type==="newline"||i.type==="space")}*documentEnd(e){this.type!=="doc-mode"&&(e.end?e.end.push(this.sourceToken):e.end=[this.sourceToken],this.type==="newline"&&(yield*this.pop()))}*lineEnd(e){switch(this.type){case"comma":case"doc-start":case"doc-end":case"flow-seq-end":case"flow-map-end":case"map-value-ind":yield*this.pop(),yield*this.step();break;case"newline":this.onKeyLine=!1;case"space":case"comment":default:e.end?e.end.push(this.sourceToken):e.end=[this.sourceToken],this.type==="newline"&&(yield*this.pop())}}};function $l(r){let e=r.prettyErrors!==!1;return{lineCounter:r.lineCounter||e&&new pr||null,prettyErrors:e}}function ta(r,e={}){let{lineCounter:t,prettyErrors:i}=$l(e),s=new dr(t?.addNewLine),n=new mr(e),o=null;for(let a of n.compose(s.parse(r),!0,r.length))if(!o)o=a;else if(o.options.logLevel!=="silent"){o.errors.push(new Se(a.range.slice(0,2),"MULTIPLE_DOCS","Source contains multiple documents; please use YAML.parseAllDocuments()"));break}return i&&t&&(o.errors.forEach(mn(r,t)),o.warnings.forEach(mn(r,t))),o}function Mn(r,e,t){let i;typeof e=="function"?i=e:t===void 0&&e&&typeof e=="object"&&(t=e);let s=ta(r,t);if(!s)return null;if(s.warnings.forEach(n=>Qr(s.options.logLevel,n)),s.errors.length>0){if(s.options.logLevel!=="silent")throw s.errors[0];s.errors=[]}return s.toJS(Object.assign({reviver:i},t))}var Fe={month:"m",day:"d",hour:"h",minute:"n",dayWeek:"w"};function ia(r=new Date){let e=r.getMonth()+1,t=r.getDate(),i=r.getHours(),s=r.getMinutes(),n=r.getDay();return`${Fe.month}=${e} ${Fe.day}=${t} ${Fe.hour}=${i} ${Fe.minute}=${s} ${Fe.dayWeek}=${n}`}function zl(r){let e=r.match(/(?<start>\d+)-(?<end>\d+)(?:\/(?<step>\d+))?/);if(e==null)return r;let t=[],i=e.groups,s=parseInt(i.start),n=parseInt(i.end),o=parseInt(i.step??1);for(let a=s;a<=n;a+=o)t.push(a);return t.join("|")}function fr(r,e){let t={month:"1-12",day:"1-31",hour:"0-23",minute:"0-59",dayWeek:"0-6"};return`(?:${r.replace("*",t[e]).split(",").map(zl).join("|")})`}function jl(r){let e=new Map([["sunday","0"],["monday","1"],["tuesday","2"],["wednesday","3"],["thursday","4"],["friday","5"],["saturday","6"],["sun","0"],["mon","1"],["tue","2"],["wed","3"],["thu","4"],["fri","5"],["sat","6"]]),t=[];for(let[i,s]of r.entries()){if(typeof s=="string"&&(s=[s]),i.match(/ /g)?.length!==4)throw new Error(`Invalid datetime field format: ${i}`);let[n,o,a,l,u]=i.split(" ");if(n=fr(n,"minute"),o=fr(o,"hour"),a=fr(a,"day"),l=fr(l,"month"),/[a-zA-Z]/.test(u)){let m=e.get(u.toLowerCase());if(m==null)throw new Error(`Invalid Day of Week format: ${u}`);u=m}u=u.replace("7","0"),u=fr(u,"dayWeek");let c=`${Fe.month}=${l} ${Fe.day}=${a} ${Fe.hour}=${o} ${Fe.minute}=${n} ${Fe.dayWeek}=${u}`;t.push({words:s.map(m=>m.trim()),pattern:new RegExp(c)})}return t}function Pn(){if(!Object.prototype.hasOwnProperty.call(window,"localStorage"))return!1;let r=window.localStorage;try{let e="__storage_test__";return r.setItem(e,e),r.removeItem(e),!0}catch(e){return e instanceof DOMException&&(e.name==="QuotaExceededError"||e.name==="NS_ERROR_DOM_QUOTA_REACHED")&&r!=null&&r.length!==0}}function In(){let r=navigator.languages??[navigator.language];if(!Pn())return[...r];let e=localStorage.getItem(si);return e!=null?[e]:[...r]}function Wl(r){let e=Array.from(r.keys());for(let t of In()){if(e.includes(t))return t;let i=t.match(/(?<lang>[a-zA-Z]+)[-_]\w+/);if(i==null){let s=e.find(n=>new RegExp(`^${t}[-_].+`).test(n));if(s!=null)return s}else{let s=i.groups.lang;if(e.includes(s))return s}}return e.includes(Ae)?Ae:""}function wn(r,e,t){t=t??new Map;let i=[ti,ii,ri],s=e===""?r:r.get(e)??new Map,n=Array.from(s.keys()).filter(a=>!t.has(a)),o=i.filter(a=>n.includes(a));for(let a of o)t.set(a,s.get(a));return e===""?t:e===Ae?wn(r,"",t):wn(r,Ae,t)}async function ra(r){let e={general:[],datetime:[],touch:new Map};if(r==="")return{keys:[],words:e};let t=await(await fetch(r)).text(),i=Mn(t,{mapAsMap:!0,merge:!0}),s=Wl(i),n=wn(i,s),o=n.get(ti)??[],a=typeof o=="string"?[o.trim()]:o.map(d=>d.trim()),l=n.get(ri)??new Map,u=Array.from(l.entries()).reduce((d,[f,g])=>(typeof g=="string"&&(g=[g]),d.set(f,g.map(p=>p.trim()))),new Map),c=n.get(ii)??new Map,m=jl(c),h={general:a,datetime:m,touch:u};return{keys:Array.from(i.keys()),words:Object.assign(e,h)}}function na(){document.querySelector(`.${Xe}`)==null&&document.body.insertAdjacentHTML("beforeend",Zn)}function sa(r){if(r==null||r.length===0)return"";let e=document.querySelector("base")?.href??window.location.href.replace(/[^/]*$/,"");return new URL(r,e).href}function ql(r){let e={head:{name:Ks.Head},body:{name:Ks.Body,group:$r.TapBody}},t={path:"",words:[],hitTest:e};return typeof r=="string"?Object.assign(t,{path:sa(r)}):Object.assign(t,{...r,path:sa(r.path),hitTest:Object.assign(e,r.hitTest)})}function _s(r,e,t){return Math.min(Math.max(e,r),t)}var Cs=class{currentModelIndex;models;modelVisible;modelPosition;modelCoordInitial;slideInFrom;modelDistance;wordsCommon;words;_wordsOrUrl;wordsVisible;useCache;draggable;version;pointerCoord={x:0,y:0};baseWeightArray=[];deviceToScreenMatrix=new F;viewMatrix=new ni;wordsTimer=0;elemAppRoot=document.querySelector(`.${Xe}`);elemContent=this.elemAppRoot.querySelector(`.${Qt}`);elemWords=this.elemAppRoot.querySelector(`.${Hi}`);elemMenuToggle=this.elemAppRoot.querySelector(`.${qs}`);elemSwitcher=this.elemAppRoot.querySelector(`.${Vt}`);elemHider=this.elemAppRoot.querySelector(`.${Bt}`);elemWordsToggle=this.elemAppRoot.querySelector(`.${ct}`);elemAbout=this.elemAppRoot.querySelector(`.${At}`);elemLanguage=this.elemAppRoot.querySelector(`.${Je}`);elemLanguageOptions=this.elemAppRoot.querySelector(`.${Je} select`);elemToast=this.elemAppRoot.querySelector(`.${Nr}`);elemRevealer=this.elemAppRoot.querySelector(`.${Et}`);CANVAS=this.elemAppRoot.querySelector("canvas");wordsAnimation;eventRegistered=!1;constructor(e){let t=Object.assign(uo,e);this.resizeApp(t),t.models.length===0&&console.error(to),this.models=t.models.map(ql),this.models.length<=1&&this.elemSwitcher.classList.add(Qn),this.currentModelIndex=0,this.modelPosition=t.modelPosition,this.version=String(t.version),this.modelVisible=t.modelVisible,this.modelVisible?Object.assign(this.elemContent.style,{display:null}):(this.elemRevealer.classList.add(this.modelPosition),this.elemRevealer.style.display="grid"),this._wordsOrUrl=t.words,this.elemWords.classList.add(`${Hi}--${t.wordsPosition.toLowerCase()}`),this.wordsVisible=t.wordsVisible,this.useCache=t.useCache,this.draggable=t.draggable,this.fillUiWithUserLanguage(),this.slideInFrom=t.slideInFrom,this.modelDistance={x:Math.max(0,t.modelDistance.x),y:Math.max(0,t.modelDistance.y)},this.modelCoordInitial=this.calcInitialAppCoord(),Object.assign(this.elemAppRoot.style,this.calcInitialPosition())}init(){}async main(){this.wordsCommon=await this.loadMesseges(this._wordsOrUrl),this.words=await this.updateWordsList(),this.baseWeightArray=Array(this.words.general.length).fill(1),this.modelVisible&&(this.wordsVisible&&this._wordsOrUrl.length>0&&setTimeout(()=>this.startSpeaking(),so*1e3),this.appear()),this.registerEvents()}registerEvents(){this.eventRegistered||(window.addEventListener("resize",e=>this.onWindowResize()),document.addEventListener("pointerleave",()=>this.onPointerLeave()),document.addEventListener("pointerup",e=>this.onPointerUp(e)),document.addEventListener("pointercancel",e=>this.onPointerUp(e)),this.elemAppRoot.addEventListener("pointerup",e=>this.onPointerUp(e)),this.elemMenuToggle.addEventListener("pointerup",e=>this.toggleMenu(e)),this.elemHider.addEventListener("pointerup",e=>this.disappear(e)),this.elemRevealer.addEventListener("pointerup",e=>this.appear(e)),this.elemWordsToggle.addEventListener("pointerup",e=>this.toggleWords(e)),this.models.length>=2&&this.elemSwitcher.addEventListener("pointerup",e=>this.switchModel(e)),this.draggable!==!1&&this.elemAppRoot.addEventListener("pointerdown",e=>this.onPointerDown(e)),this.eventRegistered=!0)}resizeApp({width:e,height:t}){(e<Gs||t<Gs)&&this.elemAppRoot.classList.add(Jn),e=_s(e,0,window.innerWidth),t=_s(t,0,window.innerHeight),this.elemAppRoot.style.width=`${e}px`,this.elemAppRoot.style.height=`${t}px`}async switchModel(e){e.button===0&&(this.models.length<=1||(this.closeMenu(),this.currentModelIndex=(this.currentModelIndex+1)%this.models.length,this.words=await this.updateWordsList()))}appear(e){if(e!=null&&e.button!==0)return;Object.assign(this.elemContent.style,{display:null}),Object.assign(this.elemRevealer.style,{display:null});let t=this.calcAppearingKeyframes(),i={duration:oo*1e3,easing:"cubic-bezier(.13,1.22,.87,-0.56)"},s=this.elemAppRoot.animate(t,i),[n,o]=Object.entries(t)[0];s.addEventListener("finish",()=>{Object.assign(this.elemAppRoot.style,{[n]:o[o.length-1]}),this.elemMenuToggle.style.display="grid"})}disappear(e){if(e.button!==0)return;this.toggleMenu(e),this.stopSpeaking();let t=this.calcDisappearingKeyframes(),i={...t,opacity:["1","0"],transform:["scale(1)","scale(0.2)"]},s={duration:no*1e3,easing:"ease-out"},n=this.elemAppRoot.animate(i,s),o=Object.entries(t).reduce((a,[l,[u,c]])=>Object.assign(a,{[l]:c}),Object.create(null));n.addEventListener("finish",()=>{Object.assign(this.elemAppRoot.style,o),this.elemContent.style.display="none",this.elemRevealer.classList.add(this.modelPosition),this.elemRevealer.style.display="grid"})}onWindowResize(){this.refreshViewpointMatrix(this.elemAppRoot.getBoundingClientRect()),this.bringBackAppIntoWindow()}bringBackAppIntoWindow(){let{top:e,left:t,width:i,height:s}=this.elemAppRoot.getBoundingClientRect(),{innerWidth:n,innerHeight:o}=window;(e<0||t<0||o<e+s||n<t+i)&&(e<0&&(this.elemAppRoot.style.top="0"),t<0&&(this.elemAppRoot.style.left="0"),o<e+s&&(this.elemAppRoot.style.top=`${o-s}px`),n<t+i&&(this.elemAppRoot.style.left=`${n-i}px`))}onPointerDown(e){if(e.button!=0)return;e.target.tagName==="CANVAS"&&this.elemAppRoot.classList.add(`${qi}`);let{top:t,left:i}=this.elemAppRoot.getBoundingClientRect();this.pointerCoord.x=e.clientX-i,this.pointerCoord.y=e.clientY-t,this.elemAppRoot.style.top=`${t}px`,this.elemAppRoot.style.left=`${i}px`}onPointerMove(e){!this.elemAppRoot.classList.contains(qi)||(e.preventDefault(),this.draggable==="x"?this.elemAppRoot.style.left=`${e.clientX-this.pointerCoord.x}px`:this.draggable==="y"?this.elemAppRoot.style.top=`${e.clientY-this.pointerCoord.y}px`:this.draggable&&(this.elemAppRoot.style.left=`${e.clientX-this.pointerCoord.x}px`,this.elemAppRoot.style.top=`${e.clientY-this.pointerCoord.y}px`),this.bringBackAppIntoWindow())}onPointerLeave(){}onPointerUp(e){this.elemAppRoot.classList.contains(qi)&&(this.elemAppRoot.classList.remove(qi),this.refreshViewpointMatrix(this.elemAppRoot.getBoundingClientRect()))}transformViewX(e){let t=this.deviceToScreenMatrix.transformX(e);return this.viewMatrix.invertTransformX(t)}transformViewY(e){let t=this.deviceToScreenMatrix.transformY(e);return this.viewMatrix.invertTransformY(t)}refreshViewpointMatrix({x:e,y:t}){let{width:i,height:s}=this.elemAppRoot.getBoundingClientRect(),n=new F;n.scale(2/i,-2/s),n.translateRelative(-i/2,-s/2),n.translateRelative(-e,-t),this.deviceToScreenMatrix=n}async loadMesseges(e){if(e==null)return{general:[],datetime:[],touch:new Map};if(e instanceof Array)return{general:e.map(s=>s.trim()),datetime:[],touch:new Map};let{keys:t,words:i}=await ra(e);return this.insertLanguageOptions(t),this.addEventListenerToLanguageOptions(),i}async updateWordsList(){let e=await this.loadMesseges(this.models[this.currentModelIndex].words);return{general:[...this.wordsCommon?.general??[],...e?.general??[]],datetime:[...this.wordsCommon?.datetime??[],...e.datetime??[]],touch:new Map([...this.wordsCommon?.touch??[],...e.touch??[]])}}startSpeaking(){this.wordsAnimation==null?this.wordsAnimation=this.swingWordsWindow():this.wordsAnimation.playState!=="running"&&this.wordsAnimation.play(),this.sayRandomWord(),this.wordsTimer=setInterval(()=>this.sayRandomWord(),io*1e3)}stopSpeaking(){this.elemWords.innerText="",this.elemWords.classList.remove(`${Zt}`),this.wordsAnimation?.cancel(),clearInterval(this.wordsTimer)}toggleWords(e){e.button===0&&(this.wordsVisible=!this.wordsVisible,this.fillUiWithUserLanguage(),this.wordsVisible?this.startSpeaking():this.stopSpeaking())}sayWhenTouched(e){if(this.words==null||!this.wordsVisible)return;let t=this.words.touch.get(e)??[],i=Math.floor(Math.random()*t.length);t[i]!=null&&(this.elemWords.innerText=t[i],this.elemWords.classList.add(Zt))}sayRandomWord(){if(this.words==null)return;if(this.elemWords.classList.contains(Zt)){this.elemWords.classList.remove(Zt);return}let e=this.words.datetime.filter(o=>o.pattern.test(ia())).map(o=>o.words).flat(),t=this.words.general.concat(e),i=this.baseWeightArray.concat(Array(e.length).fill(ao)),s=i.reduce((o,a)=>o+a,0),n=this.searchWeightedList(i)(Math.random()*s);t[n]!=null&&(this.elemWords.innerText=t[n],this.elemWords.classList.add(Zt))}searchWeightedList(e){let t=e.reduce((i,s)=>[...i,s+i[i.length-1]],[0]);return i=>{let s=0,n=t.length,o=Math.round((s+n)/2);for(;n!==o&&s!==n;)t[o]<i?s=o:n=o,o=Math.round((s+n)/2);return o-1}}isMenuOpen(){return this.elemMenuToggle.classList.contains(Gi)}closeMenu(){this.elemMenuToggle.classList.remove(Gi)}toggleMenu(e){e.button===0&&(this.isMenuOpen()?this.elemMenuToggle.classList.remove(Gi):this.elemMenuToggle.classList.add(Gi))}calcInitialAppCoord(){let{width:e,height:t}=this.elemAppRoot.getBoundingClientRect(),{innerWidth:i,innerHeight:s}=window,{x:n,y:o}=this.modelDistance;n=n>1?n:n*i,o=o>1?o:o*s;let a=this.modelPosition.includes("left")?n:i-e-n,l=this.modelPosition.includes("top")?o:s-t-o;return{x:_s(a,0,window.innerWidth),y:_s(l,0,window.innerHeight)}}calcInitialPosition(){let{width:e,height:t}=this.elemAppRoot.getBoundingClientRect(),{innerWidth:i,innerHeight:s}=window,{x:n,y:o}=this.calcInitialAppCoord();switch(this.slideInFrom){case kr:return{top:`${-t}px`,left:`${n}px`};case Yi:return{top:`${s}px`,left:`${n}px`};case Or:return{top:`${o}px`,left:`${-e}px`};case Dr:return{top:`${o}px`,left:`${i}px`}}}calcAppearingKeyframes(){let{width:e,height:t}=this.elemAppRoot.getBoundingClientRect(),{innerWidth:i,innerHeight:s}=window,{x:n,y:o}=this.calcInitialAppCoord();switch(this.slideInFrom){case kr:return{top:[`${-t}px`,`${t*.3}px`,`${o}px`]};case Yi:return{top:[`${s}px`,`${s-t*.3}px`,`${o}px`]};case Or:return{left:[`${-e}px`,`${e*.3}px`,`${n}px`]};case Dr:return{left:[`${i}px`,`${i-e*.3}px`,`${n}px`]}}}calcDisappearingKeyframes(){let{top:e,left:t,width:i,height:s}=this.elemAppRoot.getBoundingClientRect(),{innerWidth:n,innerHeight:o}=window,{x:a,y:l}=this.calcInitialAppCoord();switch(this.slideInFrom){case kr:return{top:[`${e}px`,`${-s}px`],left:[`${t}px`,`${a}px`]};case Yi:return{top:[`${e}px`,`${o}px`],left:[`${t}px`,`${a}px`]};case Or:return{top:[`${e}px`,`${l}px`],left:[`${t}px`,`${-i}px`]};case Dr:return{top:[`${e}px`,`${l}px`],left:[`${t}px`,`${n}px`]}}}swingWordsWindow(){let e={transform:[[0,0,0],[1,-3,-1],[1,3,3],[3,3,3],[4,3,1],[1,4,1],[3,3,1],[1,1,1],[-3,-1,3],[1,1,3],[4,4,3],[1,-3,3],[-3,3,-1],[3,1,3],[-1,-1,-1],[3,-1,-1],[4,-3,3],[4,4,-1],[1,-3,1],[4,-1,-1],[-1,4,1],[-3,4,1],[-3,3,1],[3,-1,-1],[4,-1,1],[-3,3,1],[-1,3,1],[-3,3,1],[1,4,3],[4,4,1],[4,-3,3],[-3,1,3],[-3,3,3],[1,4,3],[4,-3,3],[4,4,1],[-1,-3,3],[-3,4,3],[-3,4,3],[-3,4,1],[-3,1,-1],[-3,1,-1],[-1,1,3],[4,3,1],[-3,1,3],[-3,-1,-1],[-3,-3,3],[1,1,-1],[4,-1,-1],[-3,-3,-1]].map(([i,s,n])=>`translate(${i}px, ${s}px) rotate(${n}deg)`)},t={duration:ro*1e3,easing:"ease-in-out",iterations:1/0};return this.elemWords.animate(e,t)}fillUiWithUserLanguage(){let e=co(In()[0]);this.elemSwitcher.querySelector("p").innerText=e[Vt],this.elemHider.querySelector("p").innerText=e[Bt],this.wordsVisible?this.elemWordsToggle.querySelector("p").innerText=e[ct].turnOff:this.elemWordsToggle.querySelector("p").innerText=e[ct].turnOn,this.elemLanguage.querySelector("p").innerText=e[Je],this.elemAbout.querySelector("p").innerText=e[At],this.elemRevealer.querySelector("p").innerText=e[Et]}addEventListenerToLanguageOptions(){this.elemToast.addEventListener("animationend",()=>this.elemToast.classList.remove(Hs)),this.elemLanguageOptions.addEventListener("change",e=>{let t=e.target.value;Pn()&&(t===Ys?localStorage.removeItem(si):localStorage.setItem(si,t),this.elemToast.classList.add(Hs)),this.fillUiWithUserLanguage()})}insertLanguageOptions(e){let t=[],i=[ti,ii,ri];e=e.filter(n=>n!==lo).sort(),e.includes(Ae)?(t.push(Ae),t.push(...e.filter(n=>n!==Ae&&!i.includes(n)))):(e.includes(ti)||e.includes(ii)||e.includes(ri))&&(t.push(Ae),t.push(...e.filter(n=>!i.includes(n))));for(let n=0;n<t.length;n++)t[n].includes("-")&&t[n].toLowerCase().replace("-","_")===t[n+1].toLowerCase()&&t.splice(n+1,1);let s=localStorage.getItem(si)??"";this.elemLanguageOptions.insertAdjacentHTML("beforeend",`<option value="${Ys}" ${t.includes(s)?"selected":""}>(Unset)</option>`);for(let n of t){let o=n===s?"selected":"";this.elemLanguageOptions.insertAdjacentHTML("beforeend",`<option value="${n}" ${o}>${n}</option>`)}}};var M=Object.freeze({HitAreaPrefix:"HitArea",HitAreaHead:"Head",HitAreaBody:"Body",PartsIdCore:"Parts01Core",PartsArmPrefix:"Parts01Arm_",PartsArmLPrefix:"Parts01ArmL_",PartsArmRPrefix:"Parts01ArmR_",ParamAngleX:"ParamAngleX",ParamAngleY:"ParamAngleY",ParamAngleZ:"ParamAngleZ",ParamEyeLOpen:"ParamEyeLOpen",ParamEyeLSmile:"ParamEyeLSmile",ParamEyeROpen:"ParamEyeROpen",ParamEyeRSmile:"ParamEyeRSmile",ParamEyeBallX:"ParamEyeBallX",ParamEyeBallY:"ParamEyeBallY",ParamEyeBallForm:"ParamEyeBallForm",ParamBrowLY:"ParamBrowLY",ParamBrowRY:"ParamBrowRY",ParamBrowLX:"ParamBrowLX",ParamBrowRX:"ParamBrowRX",ParamBrowLAngle:"ParamBrowLAngle",ParamBrowRAngle:"ParamBrowRAngle",ParamBrowLForm:"ParamBrowLForm",ParamBrowRForm:"ParamBrowRForm",ParamMouthForm:"ParamMouthForm",ParamMouthOpenY:"ParamMouthOpenY",ParamCheek:"ParamCheek",ParamBodyAngleX:"ParamBodyAngleX",ParamBodyAngleY:"ParamBodyAngleY",ParamBodyAngleZ:"ParamBodyAngleZ",ParamBreath:"ParamBreath",ParamArmLA:"ParamArmLA",ParamArmRA:"ParamArmRA",ParamArmLB:"ParamArmLB",ParamArmRB:"ParamArmRB",ParamHandL:"ParamHandL",ParamHandR:"ParamHandR",ParamHairFront:"ParamHairFront",ParamHairSide:"ParamHairSide",ParamHairBack:"ParamHairBack",ParamHairFluffy:"ParamHairFluffy",ParamShoulderY:"ParamShoulderY",ParamBustX:"ParamBustX",ParamBustY:"ParamBustY",ParamBaseX:"ParamBaseX",ParamBaseY:"ParamBaseY",ParamNONE:"NONE:"}),Hl;(T=>(T.HitAreaBody=M.HitAreaBody,T.HitAreaHead=M.HitAreaHead,T.HitAreaPrefix=M.HitAreaPrefix,T.ParamAngleX=M.ParamAngleX,T.ParamAngleY=M.ParamAngleY,T.ParamAngleZ=M.ParamAngleZ,T.ParamArmLA=M.ParamArmLA,T.ParamArmLB=M.ParamArmLB,T.ParamArmRA=M.ParamArmRA,T.ParamArmRB=M.ParamArmRB,T.ParamBaseX=M.ParamBaseX,T.ParamBaseY=M.ParamBaseY,T.ParamBodyAngleX=M.ParamBodyAngleX,T.ParamBodyAngleY=M.ParamBodyAngleY,T.ParamBodyAngleZ=M.ParamBodyAngleZ,T.ParamBreath=M.ParamBreath,T.ParamBrowLAngle=M.ParamBrowLAngle,T.ParamBrowLForm=M.ParamBrowLForm,T.ParamBrowLX=M.ParamBrowLX,T.ParamBrowLY=M.ParamBrowLY,T.ParamBrowRAngle=M.ParamBrowRAngle,T.ParamBrowRForm=M.ParamBrowRForm,T.ParamBrowRX=M.ParamBrowRX,T.ParamBrowRY=M.ParamBrowRY,T.ParamBustX=M.ParamBustX,T.ParamBustY=M.ParamBustY,T.ParamCheek=M.ParamCheek,T.ParamEyeBallForm=M.ParamEyeBallForm,T.ParamEyeBallX=M.ParamEyeBallX,T.ParamEyeBallY=M.ParamEyeBallY,T.ParamEyeLOpen=M.ParamEyeLOpen,T.ParamEyeLSmile=M.ParamEyeLSmile,T.ParamEyeROpen=M.ParamEyeROpen,T.ParamEyeRSmile=M.ParamEyeRSmile,T.ParamHairBack=M.ParamHairBack,T.ParamHairFluffy=M.ParamHairFluffy,T.ParamHairFront=M.ParamHairFront,T.ParamHairSide=M.ParamHairSide,T.ParamHandL=M.ParamHandL,T.ParamHandR=M.ParamHandR,T.ParamMouthForm=M.ParamMouthForm,T.ParamMouthOpenY=M.ParamMouthOpenY,T.ParamNONE=M.ParamNONE,T.ParamShoulderY=M.ParamShoulderY,T.PartsArmLPrefix=M.PartsArmLPrefix,T.PartsArmPrefix=M.PartsArmPrefix,T.PartsArmRPrefix=M.PartsArmRPrefix,T.PartsIdCore=M.PartsIdCore))(Hl||={});var di=class{},Yl;(e=>e.ICubismModelSetting=di)(Yl||={});var xs=class{constructor(e=0){e<1?(this._ptr=[],this._capacity=0,this._size=0):(this._ptr=new Array(e),this._capacity=e,this._size=0)}at(e){return this._ptr[e]}set(e,t){this._ptr[e]=t}get(e=0){let t=new Array;for(let i=e;i<this._size;i++)t.push(this._ptr[i]);return t}pushBack(e){this._size>=this._capacity&&this.prepareCapacity(this._capacity==0?xs.s_defaultSize:this._capacity*2),this._ptr[this._size++]=e}clear(){this._ptr.length=0,this._size=0}getSize(){return this._size}assign(e,t){this._size<e&&this.prepareCapacity(e);for(let s=0;s<e;s++)this._ptr[s]=t;this._size=e}resize(e,t=null){this.updateSize(e,t,!0)}updateSize(e,t=null,i=!0){if(this._size<e)if(this.prepareCapacity(e),i)for(let n=this._size;n<e;n++)typeof t=="function"?this._ptr[n]=JSON.parse(JSON.stringify(new t)):this._ptr[n]=t;else for(let n=this._size;n<e;n++)this._ptr[n]=t;else{let n=this._size-e;this._ptr.splice(this._size-n,n)}this._size=e}insert(e,t,i){let s=e._index,n=t._index,o=i._index,a=o-n;this.prepareCapacity(this._size+a);let l=this._size-s;if(l>0)for(let u=0;u<l;u++)this._ptr.splice(s+u,0,null);for(let u=n;u<o;u++,s++)this._ptr[s]=t._vector._ptr[u];this._size=this._size+a}remove(e){return e<0||this._size<=e?!1:(this._ptr.splice(e,1),--this._size,!0)}erase(e){let t=e._index;return t<0||this._size<=t?e:(this._ptr.splice(t,1),--this._size,new ke(this,t))}prepareCapacity(e){e>this._capacity&&(this._capacity==0?(this._ptr=new Array(e),this._capacity=e):(this._ptr.length=e,this._capacity=e))}begin(){return this._size==0?this.end():new ke(this,0)}end(){return new ke(this,this._size)}getOffset(e){let t=new xs;return t._ptr=this.get(e),t._size=this.get(e).length,t._capacity=this.get(e).length,t}_ptr;_size;_capacity},w=xs;K(w,"s_defaultSize",10);var ke=class{constructor(e,t){this._vector=e??null,this._index=t??0}set(e){return this._index=e._index,this._vector=e._vector,this}preIncrement(){return++this._index,this}preDecrement(){return--this._index,this}increment(){return new ke(this._vector,this._index++)}decrement(){return new ke(this._vector,this._index--)}ptr(){return this._vector._ptr[this._index]}substitution(e){return this._index=e._index,this._vector=e._vector,this}notEqual(e){return this._index!=e._index||this._vector!=e._vector}_index;_vector},Xl;(t=>(t.csmVector=w,t.iterator=ke))(Xl||={});var j=class{append(e,t){return this.s+=t!==void 0?e.substr(0,t):e,this}expansion(e,t){for(let i=0;i<e;i++)this.append(t);return this}getBytes(){return encodeURIComponent(this.s).replace(/%../g,"x").length}getLength(){return this.s.length}isLess(e){return this.s<e.s}isGreat(e){return this.s>e.s}isEqual(e){return this.s==e}isEmpty(){return this.s.length==0}constructor(e){this.s=e}s},Ql;(e=>e.csmString=j)(Ql||={});var it=class{getString(){return this._id}constructor(e){if(typeof e=="string"){this._id=new j(e);return}this._id=e}isEqual(e){return typeof e=="string"?this._id.isEqual(e):e instanceof j?this._id.isEqual(e.s):e instanceof it?this._id.isEqual(e._id.s):!1}isNotEqual(e){return typeof e=="string"?!this._id.isEqual(e):e instanceof j?!this._id.isEqual(e.s):e instanceof it?!this._id.isEqual(e._id.s):!1}_id},eu;(e=>e.CubismId=it)(eu||={});var fi=class{constructor(){this._ids=new w}release(){for(let e=0;e<this._ids.getSize();++e)this._ids.set(e,void 0);this._ids=null}registerIds(e){for(let t=0;t<e.length;t++)this.registerId(e[t])}registerId(e){let t=null;if(typeof e=="string"){if((t=this.findId(e))!=null)return t;t=new it(e),this._ids.pushBack(t)}else return this.registerId(e.s);return t}getId(e){return this.registerId(e)}isExist(e){return typeof e=="string"?this.findId(e)!=null:this.isExist(e.s)}findId(e){for(let t=0;t<this._ids.getSize();++t)if(this._ids.at(t).getString().isEqual(e))return this._ids.at(t);return null}_ids},iu;(e=>e.CubismIdManager=fi)(iu||={});var Oe=class{static create(){return null}static delete(e){e=null}initialize(e){this._model=e}drawModel(){this.getModel()!=null&&this.doDrawModel()}setMvpMatrix(e){this._mvpMatrix4x4.setMatrix(e.getArray())}getMvpMatrix(){return this._mvpMatrix4x4}setModelColor(e,t,i,s){e<0?e=0:e>1&&(e=1),t<0?t=0:t>1&&(t=1),i<0?i=0:i>1&&(i=1),s<0?s=0:s>1&&(s=1),this._modelColor.R=e,this._modelColor.G=t,this._modelColor.B=i,this._modelColor.A=s}getModelColor(){return JSON.parse(JSON.stringify(this._modelColor))}setIsPremultipliedAlpha(e){this._isPremultipliedAlpha=e}isPremultipliedAlpha(){return this._isPremultipliedAlpha}setIsCulling(e){this._isCulling=e}isCulling(){return this._isCulling}setAnisotropy(e){this._anisotropy=e}getAnisotropy(){return this._anisotropy}getModel(){return this._model}constructor(){this._isCulling=!1,this._isPremultipliedAlpha=!1,this._anisotropy=0,this._model=null,this._modelColor=new se,this._mvpMatrix4x4=new F,this._mvpMatrix4x4.loadIdentity()}_mvpMatrix4x4;_modelColor;_isCulling;_isPremultipliedAlpha;_anisotropy;_model};K(Oe,"staticRelease");var gr=(i=>(i[i.CubismBlendMode_Normal=0]="CubismBlendMode_Normal",i[i.CubismBlendMode_Additive=1]="CubismBlendMode_Additive",i[i.CubismBlendMode_Multiplicative=2]="CubismBlendMode_Multiplicative",i))(gr||{}),se=class{constructor(){this.R=1,this.G=1,this.B=1,this.A=1}R;G;B;A},su;(i=>(i.CubismBlendMode=gr,i.CubismRenderer=Oe,i.CubismTextureColor=se))(su||={});var mu=(r,e,t)=>{yr.print(r,"[CSM]"+e,t)},Q=(r,e,t)=>{mu(r,e+`
`,t)},ee=r=>{console.assert(r)},hu,bt,ae,Me,Z;0<=0?(hu=(r,...e)=>{Q(0,"[V]"+r,e)},bt=(r,...e)=>{Q(1,"[D]"+r,e)},ae=(r,...e)=>{Q(2,"[I]"+r,e)},Me=(r,...e)=>{Q(3,"[W]"+r,e)},Z=(r,...e)=>{Q(4,"[E]"+r,e)}):0==1?(bt=(r,...e)=>{Q(1,"[D]"+r,e)},ae=(r,...e)=>{Q(2,"[I]"+r,e)},Me=(r,...e)=>{Q(3,"[W]"+r,e)},Z=(r,...e)=>{Q(4,"[E]"+r,e)}):0==2?(ae=(r,...e)=>{Q(2,"[I]"+r,e)},Me=(r,...e)=>{Q(3,"[W]"+r,e)},Z=(r,...e)=>{Q(4,"[E]"+r,e)}):0==3?(Me=(r,...e)=>{Q(3,"[W]"+r,e)},Z=(r,...e)=>{Q(4,"[E]"+r,e)}):0==4&&(Z=(r,...e)=>{Q(4,"[E]"+r,e)});var yr=class{static print(e,t,i){if(e<V.getLoggingLevel())return;let s=V.coreLogFunction;if(!s)return;let n=t.replace(/\{(\d+)\}/g,(o,a)=>i[a]);s(n)}static dumpBytes(e,t,i){for(let s=0;s<i;s++)s%16==0&&s>0?this.print(e,`
`):s%8==0&&s>0&&this.print(e,"  "),this.print(e,"{0} ",[t[s]&255]);this.print(e,`
`)}constructor(){}},pu;(e=>e.CubismDebug=yr)(pu||={});var _r=class{constructor(e,t){this.first=e??null,this.second=t??null}first;second},vs=class{constructor(e){e!=null?e<1?(this._keyValues=[],this._dummyValue=null,this._size=0):(this._keyValues=new Array(e),this._size=e):(this._keyValues=[],this._dummyValue=null,this._size=0)}release(){this.clear()}appendKey(e){this.prepareCapacity(this._size+1,!1),this._keyValues[this._size]=new _r(e),this._size+=1}getValue(e){let t=-1;for(let i=0;i<this._size;i++)if(this._keyValues[i].first==e){t=i;break}return t>=0?this._keyValues[t].second:(this.appendKey(e),this._keyValues[this._size-1].second)}setValue(e,t){let i=-1;for(let s=0;s<this._size;s++)if(this._keyValues[s].first==e){i=s;break}i>=0?this._keyValues[i].second=t:(this.appendKey(e),this._keyValues[this._size-1].second=t)}isExist(e){for(let t=0;t<this._size;t++)if(this._keyValues[t].first==e)return!0;return!1}clear(){this._keyValues=void 0,this._keyValues=null,this._keyValues=[],this._size=0}getSize(){return this._size}prepareCapacity(e,t){e>this._keyValues.length&&(this._keyValues.length==0?(!t&&e<vs.DefaultSize&&(e=vs.DefaultSize),this._keyValues.length=e):(!t&&e<this._keyValues.length*2&&(e=this._keyValues.length*2),this._keyValues.length=e))}begin(){return new De(this,0)}end(){return new De(this,this._size)}erase(e){let t=e._index;return t<0||this._size<=t?e:(this._keyValues.splice(t,1),--this._size,new De(this,t))}dumpAsInt(){for(let e=0;e<this._size;e++)bt("{0} ,",this._keyValues[e]),bt(`
`)}_keyValues;_dummyValue;_size},H=vs;K(H,"DefaultSize",10);var De=class{constructor(e,t){this._map=e??new H,this._index=t??0}set(e){return this._index=e._index,this._map=e._map,this}preIncrement(){return++this._index,this}preDecrement(){return--this._index,this}increment(){return new De(this._map,this._index++)}decrement(){let e=new De(this._map,this._index);return this._map=e._map,this._index=e._index,this}ptr(){return this._map._keyValues[this._index]}notEqual(e){return this._index!=e._index||this._map!=e._map}_index;_map},fu;(i=>(i.csmMap=H,i.csmPair=_r,i.iterator=De))(fu||={});var Ot=class{static parseJsonObject(e,t){return Object.keys(e).forEach(i=>{typeof e[i]=="boolean"?t.put(i,new Y(e[i])):typeof e[i]=="string"?t.put(i,new ze(e[i])):typeof e[i]=="number"?t.put(i,new yt(e[i])):e[i]instanceof Array?t.put(i,Ot.parseJsonArray(e[i])):e[i]instanceof Object?t.put(i,Ot.parseJsonObject(e[i],new Ue)):e[i]==null?t.put(i,new $e):t.put(i,e[i])}),t}static parseJsonArray(e){let t=new Dt;return Object.keys(e).forEach(i=>{let s=Number(i);if(typeof s=="number")typeof e[s]=="boolean"?t.add(new Y(e[s])):typeof e[s]=="string"?t.add(new ze(e[s])):typeof e[s]=="number"?t.add(new yt(e[s])):e[i]instanceof Array?t.add(this.parseJsonArray(e[i])):e[i]instanceof Object?t.add(this.parseJsonObject(e[i],new Ue)):e[i]==null?t.add(new $e):t.add(e[i]);else if(e[i]instanceof Array)t.add(this.parseJsonArray(e[i]));else if(e[i]instanceof Object)t.add(this.parseJsonObject(e[i],new Ue));else if(e[i]==null)t.add(new $e);else for(let n=0;n<e[i].length;n++)t.add(e[i][n])}),t}};var Ms="Error: type mismatch",bu="Error: index out of bounds",we=class{constructor(){}getRawString(e,t){return this.getString(e,t)}toInt(e=0){return e}toFloat(e=0){return e}toBoolean(e=!1){return e}getSize(){return 0}getArray(e=null){return e}getVector(e=new w){return e}getMap(e){return e}getValueByIndex(e){return we.errorValue.setErrorNotForClientCall(Ms)}getValueByString(e){return we.nullValue.setErrorNotForClientCall(Ms)}getKeys(){return we.s_dummyKeys}isError(){return!1}isNull(){return!1}isBool(){return!1}isFloat(){return!1}isString(){return!1}isArray(){return!1}isMap(){return!1}equals(e){return!1}isStatic(){return!1}setErrorNotForClientCall(e){return _t.errorValue}static staticInitializeNotForClientCall(){Y.trueValue=new Y(!0),Y.falseValue=new Y(!1),we.errorValue=new _t("ERROR",!0),we.nullValue=new $e,we.s_dummyKeys=new w}static staticReleaseNotForClientCall(){Y.trueValue=null,Y.falseValue=null,we.errorValue=null,we.nullValue=null,we.s_dummyKeys=null}_stringBuffer},U=we;K(U,"s_dummyKeys"),K(U,"errorValue"),K(U,"nullValue");var O=class{constructor(e,t){this._error=null,this._lineCount=0,this._root=null,e!=null&&this.parseBytes(e,t,this._parseCallback)}static create(e,t){let i=new O;return i.parseBytes(e,t,i._parseCallback)?i:(O.delete(i),null)}static delete(e){e=null}getRoot(){return this._root}static arrayBufferToString(e){let t=new Uint8Array(e),i="";for(let s=0,n=t.length;s<n;++s)i+="%"+this.pad(t[s].toString(16));return i=decodeURIComponent(i),i}static pad(e){return e.length<2?"0"+e:e}parseBytes(e,t,i){let s=new Array(1),n=O.arrayBufferToString(e);if(i==null?this._root=this.parseValue(n,t,0,s):this._root=i(JSON.parse(n),new Ue),this._error){let o="\0";return o="Json parse error : @line "+(this._lineCount+1)+`
`,this._root=new ze(o),ae("{0}",this._root.getRawString()),!1}else if(this._root==null)return this._root=new _t(new j(this._error),!1),!1;return!0}getParseError(){return this._error}checkEndOfFile(){return this._root.getArray()[1].equals("EOF")}parseValue(e,t,i,s){if(this._error)return null;let n=null,o=i,a;for(;o<t;o++)switch(e[o]){case"-":case".":case"0":case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":{let u=new Array(1);return a=oa(e.slice(o),u),s[0]=e.indexOf(u[0]),new yt(a)}case'"':return new ze(this.parseString(e,t,o+1,s));case"[":return n=this.parseArray(e,t,o+1,s),n;case"{":return n=this.parseObject(e,t,o+1,s),n;case"n":return o+3<t?(n=new $e,s[0]=o+4):this._error="parse null",n;case"t":return o+3<t?(n=Y.trueValue,s[0]=o+4):this._error="parse true",n;case"f":return o+4<t?(n=Y.falseValue,s[0]=o+5):this._error="illegal ',' position",n;case",":return this._error="illegal ',' position",null;case"]":return s[0]=o,null;case`
`:this._lineCount++;case" ":case"	":case"\r":default:break}return this._error="illegal end of value",null}parseString(e,t,i,s){if(this._error)return null;let n=i,o,a,l=new j(""),u=i;for(;n<t;n++)switch(o=e[n],o){case'"':return s[0]=n+1,l.append(e.slice(u),n-u),l.s;case"//":if(n++,n-1>u&&l.append(e.slice(u),n-u),u=n+1,n<t)switch(a=e[n],a){case"\\":l.expansion(1,"\\");break;case'"':l.expansion(1,'"');break;case"/":l.expansion(1,"/");break;case"b":l.expansion(1,"\b");break;case"f":l.expansion(1,"\f");break;case"n":l.expansion(1,`
`);break;case"r":l.expansion(1,"\r");break;case"t":l.expansion(1,"	");break;case"u":this._error="parse string/unicord escape not supported";break;default:break}else this._error="parse string/escape error";default:break}return this._error="parse string/illegal end",null}parseObject(e,t,i,s){if(this._error)return null;let n=new Ue,o="",a=i,l="",u=Array(1),c=!1;for(;a<t;a++){e:for(;a<t;a++)switch(l=e[a],l){case'"':if(o=this.parseString(e,t,a+1,u),this._error)return null;a=u[0],c=!0;break e;case"}":return s[0]=a+1,n;case":":this._error="illegal ':' position";break;case`
`:this._lineCount++;default:break}if(!c)return this._error="key not found",null;c=!1;e:for(;a<t;a++)switch(l=e[a],l){case":":c=!0,a++;break e;case"}":this._error="illegal '}' position";break;case`
`:this._lineCount++;default:break}if(!c)return this._error="':' not found",null;let m=this.parseValue(e,t,a,u);if(this._error)return null;a=u[0],n.put(o,m);e:for(;a<t;a++)switch(l=e[a],l){case",":break e;case"}":return s[0]=a+1,n;case`
`:this._lineCount++;default:break}}return this._error="illegal end of perseObject",null}parseArray(e,t,i,s){if(this._error)return null;let n=new Dt,o=i,a,l=new Array(1);for(;o<t;o++){let u=this.parseValue(e,t,o,l);if(this._error)return null;o=l[0],u&&n.add(u);e:for(;o<t;o++)switch(a=e[o],a){case",":break e;case"]":return s[0]=o+1,n;case`
`:++this._lineCount;default:break}}return n=void 0,this._error="illegal end of parseObject",null}_parseCallback=Ot.parseJsonObject;_error;_lineCount;_root},yt=class extends U{constructor(e){super(),this._value=e}isFloat(){return!0}getString(e,t){let i="\0";return this._value=parseFloat(i),this._stringBuffer=i,this._stringBuffer}toInt(e=0){return parseInt(this._value.toString())}toFloat(e=0){return this._value}equals(e){return typeof e=="number"?Math.round(e)?!1:e==this._value:!1}_value},Y=class extends U{isBool(){return!0}toBoolean(e=!1){return this._boolValue}getString(e,t){return this._stringBuffer=this._boolValue?"true":"false",this._stringBuffer}equals(e){return typeof e=="boolean"?e==this._boolValue:!1}isStatic(){return!0}constructor(e){super(),this._boolValue=e}_boolValue};K(Y,"trueValue"),K(Y,"falseValue");var ze=class extends U{constructor(e){super(),typeof e=="string"&&(this._stringBuffer=e),e instanceof j&&(this._stringBuffer=e.s)}isString(){return!0}getString(e,t){return this._stringBuffer}equals(e){return typeof e=="string"?this._stringBuffer==e:e instanceof j?this._stringBuffer==e.s:!1}},_t=class extends ze{isStatic(){return this._isStatic}setErrorNotForClientCall(e){return this._stringBuffer=e,this}constructor(e,t){typeof e=="string"?super(e):super(e),this._isStatic=t}isError(){return!0}_isStatic},$e=class extends U{isNull(){return!0}getString(e,t){return this._stringBuffer}isStatic(){return!0}setErrorNotForClientCall(e){return this._stringBuffer=e,_t.nullValue}constructor(){super(),this._stringBuffer="NullValue"}},Dt=class extends U{constructor(){super(),this._array=new w}release(){for(let e=this._array.begin();e.notEqual(this._array.end());e.preIncrement()){let t=e.ptr();t&&!t.isStatic()&&(t=void 0,t=null)}}isArray(){return!0}getValueByIndex(e){if(e<0||this._array.getSize()<=e)return U.errorValue.setErrorNotForClientCall(bu);let t=this._array.at(e);return t??U.nullValue}getValueByString(e){return U.errorValue.setErrorNotForClientCall(Ms)}getString(e,t){let i=t+`[
`;for(let s=this._array.begin();s.notEqual(this._array.end());s.increment()){let n=s.ptr();this._stringBuffer+=t+""+n.getString(t+" ")+`
`}return this._stringBuffer=i+t+`]
`,this._stringBuffer}add(e){this._array.pushBack(e)}getVector(e=null){return this._array}getSize(){return this._array.getSize()}_array},Ue=class extends U{constructor(){super(),this._map=new H}release(){let e=this._map.begin();for(;e.notEqual(this._map.end());){let t=e.ptr().second;t&&!t.isStatic()&&(t=void 0,t=null),e.preIncrement()}}isMap(){return!0}getValueByString(e){if(e instanceof j){let t=this._map.getValue(e.s);return t??U.nullValue}for(let t=this._map.begin();t.notEqual(this._map.end());t.preIncrement())if(t.ptr().first==e)return t.ptr().second==null?U.nullValue:t.ptr().second;return U.nullValue}getValueByIndex(e){return U.errorValue.setErrorNotForClientCall(Ms)}getString(e,t){this._stringBuffer=t+`{
`;let i=this._map.begin();for(;i.notEqual(this._map.end());){let s=i.ptr().first,n=i.ptr().second;this._stringBuffer+=t+" "+s+" : "+n.getString(t+"   ")+` 
`,i.preIncrement()}return this._stringBuffer+=t+`}
`,this._stringBuffer}getMap(e){return this._map}put(e,t){this._map.setValue(e,t)}getKeys(){if(!this._keys){this._keys=new w;let e=this._map.begin();for(;e.notEqual(this._map.end());){let t=e.ptr().first;this._keys.pushBack(t),e.preIncrement()}}return this._keys}getSize(){return this._keys.getSize()}_map;_keys},yu;(u=>(u.CubismJson=O,u.JsonArray=Dt,u.JsonBoolean=Y,u.JsonError=_t,u.JsonFloat=yt,u.JsonMap=Ue,u.JsonNullvalue=$e,u.JsonString=ze,u.Value=U))(yu||={});function oa(r,e){let t=0;for(let s=1;;s++){let n=r.slice(s-1,s);if(n=="e"||n=="-"||n=="E")continue;let o=r.substring(0,s),a=Number(o);if(isNaN(a))break;t=s}let i=parseFloat(r);return isNaN(i)&&(i=NaN),e[0]=r.slice(t),i}var Pe=!1,gi=!1,bi=null,Cr=null,Ie=Object.freeze({vertexOffset:0,vertexStep:2});function aa(r){!r||(r=void 0)}var V=class{static startUp(e=null){if(Pe)return ae("CubismFramework.startUp() is already done."),Pe;if(bi=e,bi!=null&&Live2DCubismCore.Logging.csmSetLogFunction(bi.logFunction),Pe=!0,Pe){let t=Live2DCubismCore.Version.csmGetVersion(),i=(t&4278190080)>>24,s=(t&16711680)>>16,n=t&65535,o=t;ae("Live2D Cubism Core version: {0}.{1}.{2} ({3})",("00"+i).slice(-2),("00"+s).slice(-2),("0000"+n).slice(-4),o)}return ae("CubismFramework.startUp() is complete."),Pe}static cleanUp(){Pe=!1,gi=!1,bi=null,Cr=null}static initialize(){if(ee(Pe),!Pe){Me("CubismFramework is not started.");return}if(gi){Me("CubismFramework.initialize() skipped, already initialized.");return}U.staticInitializeNotForClientCall(),Cr=new fi,gi=!0,ae("CubismFramework.initialize() is complete.")}static dispose(){if(ee(Pe),!Pe){Me("CubismFramework is not started.");return}if(!gi){Me("CubismFramework.dispose() skipped, not initialized.");return}U.staticReleaseNotForClientCall(),Cr.release(),Cr=null,Oe.staticRelease(),gi=!1,ae("CubismFramework.dispose() is complete.")}static isStarted(){return Pe}static isInitialized(){return gi}static coreLogFunction(e){!Live2DCubismCore.Logging.csmGetLogFunction()||Live2DCubismCore.Logging.csmGetLogFunction()(e)}static getLoggingLevel(){return bi!=null?bi.loggingLevel:Ss.LogLevel_Off}static getIdManager(){return Cr}constructor(){}};var Ss=(o=>(o[o.LogLevel_Verbose=0]="LogLevel_Verbose",o[o.LogLevel_Debug=1]="LogLevel_Debug",o[o.LogLevel_Info=2]="LogLevel_Info",o[o.LogLevel_Warning=3]="LogLevel_Warning",o[o.LogLevel_Error=4]="LogLevel_Error",o[o.LogLevel_Off=5]="LogLevel_Off",o))(Ss||{}),Cu;(i=>(i.Constant=Ie,i.csmDelete=aa,i.CubismFramework=V))(Cu||={});var Ct="FileReferences",Su="Groups",vu="Layout",Mu="HitAreas",wu="Moc",Pu="Textures",Iu="Physics",Tu="Pose",Bu="Expressions",Vu="Motions",la="UserData",xt="Name",ua="File",Au="Id",ws="Ids";var ca="Sound",ma="FadeInTime",ha="FadeOutTime";var Tn="LipSync",Bn="EyeBlink";var yi=class extends di{constructor(e,t){super(),this._json=O.create(e,t),this._json&&(this._jsonValue=new w,this._jsonValue.pushBack(this._json.getRoot().getValueByString(Su)),this._jsonValue.pushBack(this._json.getRoot().getValueByString(Ct).getValueByString(wu)),this._jsonValue.pushBack(this._json.getRoot().getValueByString(Ct).getValueByString(Vu)),this._jsonValue.pushBack(this._json.getRoot().getValueByString(Ct).getValueByString(Bu)),this._jsonValue.pushBack(this._json.getRoot().getValueByString(Ct).getValueByString(Pu)),this._jsonValue.pushBack(this._json.getRoot().getValueByString(Ct).getValueByString(Iu)),this._jsonValue.pushBack(this._json.getRoot().getValueByString(Ct).getValueByString(Tu)),this._jsonValue.pushBack(this._json.getRoot().getValueByString(Mu)))}release(){O.delete(this._json),this._jsonValue=null}GetJson(){return this._json}getModelFileName(){return this.isExistModelFile()?this._jsonValue.at(1).getRawString():""}getTextureCount(){return this.isExistTextureFiles()?this._jsonValue.at(4).getSize():0}getTextureDirectory(){let t=this._jsonValue.at(4).getValueByIndex(0).getRawString().split("/"),i=t.length-1,s="";for(let n=0;n<i;n++)s+=t[n],n<i-1&&(s+="/");return s}getTextureFileName(e){return this._jsonValue.at(4).getValueByIndex(e).getRawString()}getHitAreasCount(){return this.isExistHitAreas()?this._jsonValue.at(7).getSize():0}getHitAreaId(e){return V.getIdManager().getId(this._jsonValue.at(7).getValueByIndex(e).getValueByString(Au).getRawString())}getHitAreaName(e){return this._jsonValue.at(7).getValueByIndex(e).getValueByString(xt).getRawString()}getPhysicsFileName(){return this.isExistPhysicsFile()?this._jsonValue.at(5).getRawString():""}getPoseFileName(){return this.isExistPoseFile()?this._jsonValue.at(6).getRawString():""}getExpressionCount(){return this.isExistExpressionFile()?this._jsonValue.at(3).getSize():0}getExpressionName(e){return this._jsonValue.at(3).getValueByIndex(e).getValueByString(xt).getRawString()}getExpressionFileName(e){return this._jsonValue.at(3).getValueByIndex(e).getValueByString(ua).getRawString()}getMotionGroupCount(){return this.isExistMotionGroups()?this._jsonValue.at(2).getKeys().getSize():0}getMotionGroupName(e){return this.isExistMotionGroups()?this._jsonValue.at(2).getKeys().at(e):null}getMotionCount(e){return this.isExistMotionGroupName(e)?this._jsonValue.at(2).getValueByString(e).getSize():0}getMotionFileName(e,t){return this.isExistMotionGroupName(e)?this._jsonValue.at(2).getValueByString(e).getValueByIndex(t).getValueByString(ua).getRawString():""}getMotionSoundFileName(e,t){return this.isExistMotionSoundFile(e,t)?this._jsonValue.at(2).getValueByString(e).getValueByIndex(t).getValueByString(ca).getRawString():""}getMotionFadeInTimeValue(e,t){return this.isExistMotionFadeIn(e,t)?this._jsonValue.at(2).getValueByString(e).getValueByIndex(t).getValueByString(ma).toFloat():-1}getMotionFadeOutTimeValue(e,t){return this.isExistMotionFadeOut(e,t)?this._jsonValue.at(2).getValueByString(e).getValueByIndex(t).getValueByString(ha).toFloat():-1}getUserDataFile(){return this.isExistUserDataFile()?this._json.getRoot().getValueByString(Ct).getValueByString(la).getRawString():""}getLayoutMap(e){let t=this._json.getRoot().getValueByString(vu).getMap();if(t==null)return!1;let i=!1;for(let s=t.begin();s.notEqual(t.end());s.preIncrement())e.setValue(s.ptr().first,s.ptr().second.toFloat()),i=!0;return i}getEyeBlinkParameterCount(){if(!this.isExistEyeBlinkParameters())return 0;let e=0;for(let t=0;t<this._jsonValue.at(0).getSize();t++){let i=this._jsonValue.at(0).getValueByIndex(t);if(!(i.isNull()||i.isError())&&i.getValueByString(xt).getRawString()==Bn){e=i.getValueByString(ws).getVector().getSize();break}}return e}getEyeBlinkParameterId(e){if(!this.isExistEyeBlinkParameters())return null;for(let t=0;t<this._jsonValue.at(0).getSize();t++){let i=this._jsonValue.at(0).getValueByIndex(t);if(!(i.isNull()||i.isError())&&i.getValueByString(xt).getRawString()==Bn)return V.getIdManager().getId(i.getValueByString(ws).getValueByIndex(e).getRawString())}return null}getLipSyncParameterCount(){if(!this.isExistLipSyncParameters())return 0;let e=0;for(let t=0;t<this._jsonValue.at(0).getSize();t++){let i=this._jsonValue.at(0).getValueByIndex(t);if(!(i.isNull()||i.isError())&&i.getValueByString(xt).getRawString()==Tn){e=i.getValueByString(ws).getVector().getSize();break}}return e}getLipSyncParameterId(e){if(!this.isExistLipSyncParameters())return null;for(let t=0;t<this._jsonValue.at(0).getSize();t++){let i=this._jsonValue.at(0).getValueByIndex(t);if(!(i.isNull()||i.isError())&&i.getValueByString(xt).getRawString()==Tn)return V.getIdManager().getId(i.getValueByString(ws).getValueByIndex(e).getRawString())}return null}isExistModelFile(){let e=this._jsonValue.at(1);return!e.isNull()&&!e.isError()}isExistTextureFiles(){let e=this._jsonValue.at(4);return!e.isNull()&&!e.isError()}isExistHitAreas(){let e=this._jsonValue.at(7);return!e.isNull()&&!e.isError()}isExistPhysicsFile(){let e=this._jsonValue.at(5);return!e.isNull()&&!e.isError()}isExistPoseFile(){let e=this._jsonValue.at(6);return!e.isNull()&&!e.isError()}isExistExpressionFile(){let e=this._jsonValue.at(3);return!e.isNull()&&!e.isError()}isExistMotionGroups(){let e=this._jsonValue.at(2);return!e.isNull()&&!e.isError()}isExistMotionGroupName(e){let t=this._jsonValue.at(2).getValueByString(e);return!t.isNull()&&!t.isError()}isExistMotionSoundFile(e,t){let i=this._jsonValue.at(2).getValueByString(e).getValueByIndex(t).getValueByString(ca);return!i.isNull()&&!i.isError()}isExistMotionFadeIn(e,t){let i=this._jsonValue.at(2).getValueByString(e).getValueByIndex(t).getValueByString(ma);return!i.isNull()&&!i.isError()}isExistMotionFadeOut(e,t){let i=this._jsonValue.at(2).getValueByString(e).getValueByIndex(t).getValueByString(ha);return!i.isNull()&&!i.isError()}isExistUserDataFile(){let e=this._json.getRoot().getValueByString(Ct).getValueByString(la);return!e.isNull()&&!e.isError()}isExistEyeBlinkParameters(){if(this._jsonValue.at(0).isNull()||this._jsonValue.at(0).isError())return!1;for(let e=0;e<this._jsonValue.at(0).getSize();++e)if(this._jsonValue.at(0).getValueByIndex(e).getValueByString(xt).getRawString()==Bn)return!0;return!1}isExistLipSyncParameters(){if(this._jsonValue.at(0).isNull()||this._jsonValue.at(0).isError())return!1;for(let e=0;e<this._jsonValue.at(0).getSize();++e)if(this._jsonValue.at(0).getValueByIndex(e).getValueByString(xt).getRawString()==Tn)return!0;return!1}_json;_jsonValue},Eu;(e=>e.CubismModelSettingJson=yi)(Eu||={});var je=class{static create(){return new je}static delete(e){e!=null&&(e=null)}setParameters(e){this._breathParameters=e}getParameters(){return this._breathParameters}updateParameters(e,t){this._currentTime+=t;let i=this._currentTime*2*3.14159;for(let s=0;s<this._breathParameters.getSize();++s){let n=this._breathParameters.at(s);e.addParameterValueById(n.parameterId,n.offset+n.peak*Math.sin(i/n.cycle),n.weight)}}constructor(){this._currentTime=0}_breathParameters;_currentTime},_i=class{constructor(e,t,i,s,n){this.parameterId=e??null,this.offset=t??0,this.peak=i??0,this.cycle=s??0,this.weight=n??0}parameterId;offset;peak;cycle;weight},Ru;(t=>(t.BreathParameterData=_i,t.CubismBreath=je))(Ru||={});var Ps=class{static create(e=null){return new Ps(e)}static delete(e){e!=null&&(e=null)}setBlinkingInterval(e){this._blinkingIntervalSeconds=e}setBlinkingSetting(e,t,i){this._closingSeconds=e,this._closedSeconds=t,this._openingSeconds=i}setParameterIds(e){this._parameterIds=e}getParameterIds(){return this._parameterIds}updateParameters(e,t){this._userTimeSeconds+=t;let i,s=0;switch(this._blinkingState){case ne.EyeState_Closing:s=(this._userTimeSeconds-this._stateStartTimeSeconds)/this._closingSeconds,s>=1&&(s=1,this._blinkingState=ne.EyeState_Closed,this._stateStartTimeSeconds=this._userTimeSeconds),i=1-s;break;case ne.EyeState_Closed:s=(this._userTimeSeconds-this._stateStartTimeSeconds)/this._closedSeconds,s>=1&&(this._blinkingState=ne.EyeState_Opening,this._stateStartTimeSeconds=this._userTimeSeconds),i=0;break;case ne.EyeState_Opening:s=(this._userTimeSeconds-this._stateStartTimeSeconds)/this._openingSeconds,s>=1&&(s=1,this._blinkingState=ne.EyeState_Interval,this._nextBlinkingTime=this.determinNextBlinkingTiming()),i=s;break;case ne.EyeState_Interval:this._nextBlinkingTime<this._userTimeSeconds&&(this._blinkingState=ne.EyeState_Closing,this._stateStartTimeSeconds=this._userTimeSeconds),i=1;break;case ne.EyeState_First:default:this._blinkingState=ne.EyeState_Interval,this._nextBlinkingTime=this.determinNextBlinkingTiming(),i=1;break}Ps.CloseIfZero||(i=-i);for(let n=0;n<this._parameterIds.getSize();++n)e.setParameterValueById(this._parameterIds.at(n),i)}constructor(e){if(this._blinkingState=ne.EyeState_First,this._nextBlinkingTime=0,this._stateStartTimeSeconds=0,this._blinkingIntervalSeconds=4,this._closingSeconds=.1,this._closedSeconds=.05,this._openingSeconds=.15,this._userTimeSeconds=0,this._parameterIds=new w,e!=null)for(let t=0;t<e.getEyeBlinkParameterCount();++t)this._parameterIds.pushBack(e.getEyeBlinkParameterId(t))}determinNextBlinkingTiming(){let e=Math.random();return this._userTimeSeconds+e*(2*this._blinkingIntervalSeconds-1)}_blinkingState;_parameterIds;_nextBlinkingTime;_stateStartTimeSeconds;_blinkingIntervalSeconds;_closingSeconds;_closedSeconds;_openingSeconds;_userTimeSeconds},rt=Ps;K(rt,"CloseIfZero",!0);var ne=(n=>(n[n.EyeState_First=0]="EyeState_First",n[n.EyeState_Interval=1]="EyeState_Interval",n[n.EyeState_Closing=2]="EyeState_Closing",n[n.EyeState_Closed=3]="EyeState_Closed",n[n.EyeState_Opening=4]="EyeState_Opening",n))(ne||{}),Fu;(t=>(t.CubismEyeBlink=rt,t.EyeState=ne))(Fu||={});var Ou=.001,Vn=.5,pa="FadeInTime",da="Link",Du="Groups",$u="Id",st=class{static create(e,t){let i=new st,s=O.create(e,t),n=s.getRoot();n.getValueByString(pa).isNull()||(i._fadeTimeSeconds=n.getValueByString(pa).toFloat(Vn),i._fadeTimeSeconds<=0&&(i._fadeTimeSeconds=Vn));let o=n.getValueByString(Du),a=o.getSize();for(let l=0;l<a;++l){let u=o.getValueByIndex(l),c=u.getSize(),m=0;for(let h=0;h<c;++h){let d=u.getValueByIndex(h),f=new St,g=V.getIdManager().getId(d.getValueByString($u).getRawString());if(f.partId=g,!d.getValueByString(da).isNull()){let p=d.getValueByString(da),b=p.getSize();for(let x=0;x<b;++x){let _=new St,y=V.getIdManager().getId(p.getValueByIndex(x).getString());_.partId=y,f.link.pushBack(_)}}i._partGroups.pushBack(f.clone()),++m}i._partGroupCounts.pushBack(m)}return O.delete(s),i}static delete(e){e!=null&&(e=null)}updateParameters(e,t){e!=this._lastModel&&this.reset(e),this._lastModel=e,t<0&&(t=0);let i=0;for(let s=0;s<this._partGroupCounts.getSize();s++){let n=this._partGroupCounts.at(s);this.doFade(e,t,i,n),i+=n}this.copyPartOpacities(e)}reset(e){let t=0;for(let i=0;i<this._partGroupCounts.getSize();++i){let s=this._partGroupCounts.at(i);for(let n=t;n<t+s;++n){this._partGroups.at(n).initialize(e);let o=this._partGroups.at(n).partIndex,a=this._partGroups.at(n).parameterIndex;if(!(o<0)){e.setPartOpacityByIndex(o,n==t?1:0),e.setParameterValueByIndex(a,n==t?1:0);for(let l=0;l<this._partGroups.at(n).link.getSize();++l)this._partGroups.at(n).link.at(l).initialize(e)}}t+=s}}copyPartOpacities(e){for(let t=0;t<this._partGroups.getSize();++t){let i=this._partGroups.at(t);if(i.link.getSize()==0)continue;let s=this._partGroups.at(t).partIndex,n=e.getPartOpacityByIndex(s);for(let o=0;o<i.link.getSize();++o){let l=i.link.at(o).partIndex;l<0||e.setPartOpacityByIndex(l,n)}}}doFade(e,t,i,s){let n=-1,o=1,a=.5,l=.15;for(let u=i;u<i+s;++u){let c=this._partGroups.at(u).partIndex,m=this._partGroups.at(u).parameterIndex;if(e.getParameterValueByIndex(m)>Ou){if(n>=0)break;n=u,o=e.getPartOpacityByIndex(c),o+=t/this._fadeTimeSeconds,o>1&&(o=1)}}n<0&&(n=0,o=1);for(let u=i;u<i+s;++u){let c=this._partGroups.at(u).partIndex;if(n==u)e.setPartOpacityByIndex(c,o);else{let m=e.getPartOpacityByIndex(c),h;o<a?h=o*(a-1)/a+1:h=(1-o)*a/(1-a),(1-h)*(1-o)>l&&(h=1-l/(1-o)),m>h&&(m=h),e.setPartOpacityByIndex(c,m)}}}constructor(){this._fadeTimeSeconds=Vn,this._lastModel=null,this._partGroups=new w,this._partGroupCounts=new w}_partGroups;_partGroupCounts;_fadeTimeSeconds;_lastModel},St=class{constructor(e){if(this.parameterIndex=0,this.partIndex=0,this.link=new w,e!=null){this.partId=e.partId;for(let t=e.link.begin();t.notEqual(e.link.end());t.preIncrement())this.link.pushBack(t.ptr().clone())}}assignment(e){this.partId=e.partId;for(let t=e.link.begin();t.notEqual(e.link.end());t.preIncrement())this.link.pushBack(t.ptr().clone());return this}initialize(e){this.parameterIndex=e.getParameterIndex(this.partId),this.partIndex=e.getPartIndex(this.partId),e.setParameterValueByIndex(this.parameterIndex,1)}clone(){let e=new St;e.partId=this.partId,e.parameterIndex=this.parameterIndex,e.partIndex=this.partIndex,e.link=new w;for(let t=this.link.begin();t.notEqual(this.link.end());t.increment())e.link.pushBack(t.ptr().clone());return e}partId;parameterIndex;partIndex;link},Uu;(t=>(t.CubismPose=st,t.PartData=St))(Uu||={});var Ci=class extends F{constructor(e,t){super(),this._width=e!==void 0?e:0,this._height=t!==void 0?t:0,this.setHeight(2)}setWidth(e){let t=e/this._width,i=t;this.scale(t,i)}setHeight(e){let t=e/this._height,i=t;this.scale(t,i)}setPosition(e,t){this.translate(e,t)}setCenterPosition(e,t){this.centerX(e),this.centerY(t)}top(e){this.setY(e)}bottom(e){let t=this._height*this.getScaleY();this.translateY(e-t)}left(e){this.setX(e)}right(e){let t=this._width*this.getScaleX();this.translateX(e-t)}centerX(e){let t=this._width*this.getScaleX();this.translateX(e-t/2)}setX(e){this.translateX(e)}centerY(e){let t=this._height*this.getScaleY();this.translateY(e-t/2)}setY(e){this.translateY(e)}setupFromLayout(e){let t="width",i="height",s="x",n="y",o="center_x",a="center_y",l="top",u="bottom",c="left",m="right";for(let h=e.begin();h.notEqual(e.end());h.preIncrement()){let d=h.ptr().first,f=h.ptr().second;d==t?this.setWidth(f):d==i&&this.setHeight(f)}for(let h=e.begin();h.notEqual(e.end());h.preIncrement()){let d=h.ptr().first,f=h.ptr().second;d==s?this.setX(f):d==n?this.setY(f):d==o?this.centerX(f):d==a?this.centerY(f):d==l?this.top(f):d==u?this.bottom(f):d==c?this.left(f):d==m&&this.right(f)}}_width;_height},ju;(e=>e.CubismModelMatrix=Ci)(ju||={});var v=class{constructor(e,t){this.x=e;this.y=t;this.x=e??0,this.y=t??0}add(e){let t=new v(0,0);return t.x=this.x+e.x,t.y=this.y+e.y,t}substract(e){let t=new v(0,0);return t.x=this.x-e.x,t.y=this.y-e.y,t}multiply(e){let t=new v(0,0);return t.x=this.x*e.x,t.y=this.y*e.y,t}multiplyByScaler(e){return this.multiply(new v(e,e))}division(e){let t=new v(0,0);return t.x=this.x/e.x,t.y=this.y/e.y,t}divisionByScalar(e){return this.division(new v(e,e))}getLength(){return Math.sqrt(this.x*this.x+this.y*this.y)}getDistanceWith(e){return Math.sqrt((this.x-e.x)*(this.x-e.x)+(this.y-e.y)*(this.y-e.y))}dot(e){return this.x*e.x+this.y*e.y}normalize(){let e=Math.pow(this.x*this.x+this.y*this.y,.5);this.x=this.x/e,this.y=this.y/e}isEqual(e){return this.x==e.x&&this.y==e.y}isNotEqual(e){return!this.isEqual(e)}},qu;(e=>e.CubismVector2=v)(qu||={});var xr=class{static range(e,t,i){return e<t?e=t:e>i&&(e=i),e}static sin(e){return Math.sin(e)}static cos(e){return Math.cos(e)}static abs(e){return Math.abs(e)}static sqrt(e){return Math.sqrt(e)}static cbrt(e){if(e===0)return e;let t=e,i=t<0;i&&(t=-t);let s;return t===1/0?s=1/0:(s=Math.exp(Math.log(t)/3),s=(t/(s*s)+2*s)/3),i?-s:s}static getEasingSine(e){return e<0?0:e>1?1:.5-.5*this.cos(e*Math.PI)}static max(e,t){return e>t?e:t}static min(e,t){return e>t?t:e}static degreesToRadian(e){return e/180*Math.PI}static radianToDegrees(e){return e*180/Math.PI}static directionToRadian(e,t){let i=Math.atan2(t.y,t.x),s=Math.atan2(e.y,e.x),n=i-s;for(;n<-Math.PI;)n+=Math.PI*2;for(;n>Math.PI;)n-=Math.PI*2;return n}static directionToDegrees(e,t){let i=this.directionToRadian(e,t),s=this.radianToDegrees(i);return t.x-e.x>0&&(s=-s),s}static radianToDirection(e){let t=new v;return t.x=this.sin(e),t.y=this.cos(e),t}static quadraticEquation(e,t,i){return this.abs(e)<xr.Epsilon?this.abs(t)<xr.Epsilon?-i:-i/t:-(t+this.sqrt(t*t-4*e*i))/(2*e)}static cardanoAlgorithmForBezier(e,t,i,s){if(this.sqrt(e)<xr.Epsilon)return this.range(this.quadraticEquation(t,i,s),0,1);let n=t/e,o=i/e,a=s/e,l=(3*o-n*n)/3,u=l/3,c=(2*n*n*n-9*n*o+27*a)/27,m=c/2,h=m*m+u*u*u,d=.5,f=d+.01;if(h<0){let _=-l/3,y=_*_*_,S=this.sqrt(y),C=-c/(2*S),A=this.range(C,-1,1),k=Math.acos(A),z=2*this.cbrt(S),ji=z*this.cos(k/3)-n/3;if(this.abs(ji-d)<f)return this.range(ji,0,1);let Xt=z*this.cos((k+2*Math.PI)/3)-n/3;if(this.abs(Xt-d)<f)return this.range(Xt,0,1);let Ye=z*this.cos((k+4*Math.PI)/3)-n/3;return this.range(Ye,0,1)}if(h==0){let _;m<0?_=this.cbrt(-m):_=-this.cbrt(m);let y=2*_-n/3;if(this.abs(y-d)<f)return this.range(y,0,1);let S=-_-n/3;return this.range(S,0,1)}let g=this.sqrt(h),p=this.cbrt(g-m),b=this.cbrt(g+m),x=p-b-n/3;return this.range(x,0,1)}constructor(){}},I=xr;K(I,"Epsilon",1e-5);var Gu;(e=>e.CubismMath=I)(Gu||={});var An=30,fa=.01,xi=class{constructor(){this._faceTargetX=0,this._faceTargetY=0,this._faceX=0,this._faceY=0,this._faceVX=0,this._faceVY=0,this._lastTimeSeconds=0,this._userTimeSeconds=0}update(e){this._userTimeSeconds+=e;let i=40/10*1/An;if(this._lastTimeSeconds==0){this._lastTimeSeconds=this._userTimeSeconds;return}let s=(this._userTimeSeconds-this._lastTimeSeconds)*An;this._lastTimeSeconds=this._userTimeSeconds;let o=.15*An,a=s*i/o,l=this._faceTargetX-this._faceX,u=this._faceTargetY-this._faceY;if(I.abs(l)<=fa&&I.abs(u)<=fa)return;let c=I.sqrt(l*l+u*u),m=i*l/c,h=i*u/c,d=m-this._faceVX,f=h-this._faceVY,g=I.sqrt(d*d+f*f);(g<-a||g>a)&&(d*=a/g,f*=a/g),this._faceVX+=d,this._faceVY+=f;{let p=.5*(I.sqrt(a*a+16*a*c-8*a*c)-a),b=I.sqrt(this._faceVX*this._faceVX+this._faceVY*this._faceVY);b>p&&(this._faceVX*=p/b,this._faceVY*=p/b)}this._faceX+=this._faceVX,this._faceY+=this._faceVY}getX(){return this._faceX}getY(){return this._faceY}set(e,t){this._faceTargetX=e,this._faceTargetY=t}_faceTargetX;_faceTargetY;_faceX;_faceY;_faceVX;_faceVY;_lastTimeSeconds;_userTimeSeconds},Ku;(e=>e.CubismTargetPoint=xi)(Ku||={});var We=class{static delete(e){e.release(),e=null}constructor(){this._fadeInSeconds=-1,this._fadeOutSeconds=-1,this._weight=1,this._offsetSeconds=0,this._firedEventValues=new w}release(){this._weight=0}updateParameters(e,t,i){if(!t.isAvailable()||t.isFinished())return;if(!t.isStarted()){t.setIsStarted(!0),t.setStartTime(i-this._offsetSeconds),t.setFadeInStartTime(i);let a=this.getDuration();t.getEndTime()<0&&t.setEndTime(a<=0?-1:t.getStartTime()+a)}let s=this._weight,n=this._fadeInSeconds==0?1:I.getEasingSine((i-t.getFadeInStartTime())/this._fadeInSeconds),o=this._fadeOutSeconds==0||t.getEndTime()<0?1:I.getEasingSine((t.getEndTime()-i)/this._fadeOutSeconds);s=s*n*o,t.setState(i,s),ee(0<=s&&s<=1),this.doUpdateParameters(e,i,s,t),t.getEndTime()>0&&t.getEndTime()<i&&t.setIsFinished(!0)}setFadeInTime(e){this._fadeInSeconds=e}setFadeOutTime(e){this._fadeOutSeconds=e}getFadeOutTime(){return this._fadeOutSeconds}getFadeInTime(){return this._fadeInSeconds}setWeight(e){this._weight=e}getWeight(){return this._weight}getDuration(){return-1}getLoopDuration(){return-1}setOffsetTime(e){this._offsetSeconds=e}getFiredEvent(e,t){return this._firedEventValues}setFinishedMotionHandler=e=>this._onFinishedMotion=e;getFinishedMotionHandler=()=>this._onFinishedMotion;_fadeInSeconds;_fadeOutSeconds;_weight;_offsetSeconds;_firedEventValues;_onFinishedMotion},Ju;(e=>e.ACubismMotion=We)(Ju||={});var Zu="FadeInTime",ec="FadeOutTime",ga="Parameters",tc="Id",ic="Value",Is="Blend",rc="Add",sc="Multiply",nc="Overwrite",ba=1,vt=class extends We{static create(e,t){let i=new vt,s=O.create(e,t),n=s.getRoot();i.setFadeInTime(n.getValueByString(Zu).toFloat(ba)),i.setFadeOutTime(n.getValueByString(ec).toFloat(ba));let o=n.getValueByString(ga).getSize();i._parameters.prepareCapacity(o);for(let a=0;a<o;++a){let l=n.getValueByString(ga).getValueByIndex(a),u=V.getIdManager().getId(l.getValueByString(tc).getRawString()),c=l.getValueByString(ic).toFloat(),m;l.getValueByString(Is).isNull()||l.getValueByString(Is).getString()==rc?m=qe.ExpressionBlendType_Add:l.getValueByString(Is).getString()==sc?m=qe.ExpressionBlendType_Multiply:l.getValueByString(Is).getString()==nc?m=qe.ExpressionBlendType_Overwrite:m=qe.ExpressionBlendType_Add;let h=new Sr;h.parameterId=u,h.blendType=m,h.value=c,i._parameters.pushBack(h)}return O.delete(s),i}doUpdateParameters(e,t,i,s){for(let n=0;n<this._parameters.getSize();++n){let o=this._parameters.at(n);switch(o.blendType){case qe.ExpressionBlendType_Add:{e.addParameterValueById(o.parameterId,o.value,i);break}case qe.ExpressionBlendType_Multiply:{e.multiplyParameterValueById(o.parameterId,o.value,i);break}case qe.ExpressionBlendType_Overwrite:{e.setParameterValueById(o.parameterId,o.value,i);break}default:break}}}constructor(){super(),this._parameters=new w}_parameters},qe=(i=>(i[i.ExpressionBlendType_Add=0]="ExpressionBlendType_Add",i[i.ExpressionBlendType_Multiply=1]="ExpressionBlendType_Multiply",i[i.ExpressionBlendType_Overwrite=2]="ExpressionBlendType_Overwrite",i))(qe||{}),Sr=class{parameterId;blendType;value},oc;(i=>(i.CubismExpressionMotion=vt,i.ExpressionBlendType=qe,i.ExpressionParameter=Sr))(oc||={});var Ts=(i=>(i[i.CubismMotionCurveTarget_Model=0]="CubismMotionCurveTarget_Model",i[i.CubismMotionCurveTarget_Parameter=1]="CubismMotionCurveTarget_Parameter",i[i.CubismMotionCurveTarget_PartOpacity=2]="CubismMotionCurveTarget_PartOpacity",i))(Ts||{}),Bs=(s=>(s[s.CubismMotionSegmentType_Linear=0]="CubismMotionSegmentType_Linear",s[s.CubismMotionSegmentType_Bezier=1]="CubismMotionSegmentType_Bezier",s[s.CubismMotionSegmentType_Stepped=2]="CubismMotionSegmentType_Stepped",s[s.CubismMotionSegmentType_InverseStepped=3]="CubismMotionSegmentType_InverseStepped",s))(Bs||{}),$t=class{time=0;value=0},Si=class{constructor(){this.evaluate=null,this.basePointIndex=0,this.segmentType=0}evaluate;basePointIndex;segmentType},vi=class{constructor(){this.type=0,this.segmentCount=0,this.baseSegmentIndex=0,this.fadeInTime=0,this.fadeOutTime=0}type;id;segmentCount;baseSegmentIndex;fadeInTime;fadeOutTime},Mi=class{fireTime=0;value},wi=class{constructor(){this.duration=0,this.loop=!1,this.curveCount=0,this.eventCount=0,this.fps=0,this.curves=new w,this.segments=new w,this.points=new w,this.events=new w}duration;loop;curveCount;eventCount;fps;curves;segments;points;events},lc;(a=>(a.CubismMotionCurve=vi,a.CubismMotionCurveTarget=Ts,a.CubismMotionData=wi,a.CubismMotionEvent=Mi,a.CubismMotionPoint=$t,a.CubismMotionSegment=Si,a.CubismMotionSegmentType=Bs))(lc||={});var le="Meta",cc="Duration",mc="Loop",hc="AreBeziersRestricted",pc="CurveCount",dc="Fps",fc="TotalSegmentCount",gc="TotalPointCount",Mt="Curves",bc="Target",yc="Id",Vs="FadeInTime",As="FadeOutTime",ya="Segments",_a="UserData",_c="UserDataCount",Cc="TotalUserDataSize",xc="Time",Sc="Value",Pi=class{constructor(e,t){this._json=O.create(e,t)}release(){O.delete(this._json)}getMotionDuration(){return this._json.getRoot().getValueByString(le).getValueByString(cc).toFloat()}isMotionLoop(){return this._json.getRoot().getValueByString(le).getValueByString(mc).toBoolean()}getEvaluationOptionFlag(e){return En.EvaluationOptionFlag_AreBeziersRistricted==e?this._json.getRoot().getValueByString(le).getValueByString(hc).toBoolean():!1}getMotionCurveCount(){return this._json.getRoot().getValueByString(le).getValueByString(pc).toInt()}getMotionFps(){return this._json.getRoot().getValueByString(le).getValueByString(dc).toFloat()}getMotionTotalSegmentCount(){return this._json.getRoot().getValueByString(le).getValueByString(fc).toInt()}getMotionTotalPointCount(){return this._json.getRoot().getValueByString(le).getValueByString(gc).toInt()}isExistMotionFadeInTime(){return!this._json.getRoot().getValueByString(le).getValueByString(Vs).isNull()}isExistMotionFadeOutTime(){return!this._json.getRoot().getValueByString(le).getValueByString(As).isNull()}getMotionFadeInTime(){return this._json.getRoot().getValueByString(le).getValueByString(Vs).toFloat()}getMotionFadeOutTime(){return this._json.getRoot().getValueByString(le).getValueByString(As).toFloat()}getMotionCurveTarget(e){return this._json.getRoot().getValueByString(Mt).getValueByIndex(e).getValueByString(bc).getRawString()}getMotionCurveId(e){return V.getIdManager().getId(this._json.getRoot().getValueByString(Mt).getValueByIndex(e).getValueByString(yc).getRawString())}isExistMotionCurveFadeInTime(e){return!this._json.getRoot().getValueByString(Mt).getValueByIndex(e).getValueByString(Vs).isNull()}isExistMotionCurveFadeOutTime(e){return!this._json.getRoot().getValueByString(Mt).getValueByIndex(e).getValueByString(As).isNull()}getMotionCurveFadeInTime(e){return this._json.getRoot().getValueByString(Mt).getValueByIndex(e).getValueByString(Vs).toFloat()}getMotionCurveFadeOutTime(e){return this._json.getRoot().getValueByString(Mt).getValueByIndex(e).getValueByString(As).toFloat()}getMotionCurveSegmentCount(e){return this._json.getRoot().getValueByString(Mt).getValueByIndex(e).getValueByString(ya).getVector().getSize()}getMotionCurveSegment(e,t){return this._json.getRoot().getValueByString(Mt).getValueByIndex(e).getValueByString(ya).getValueByIndex(t).toFloat()}getEventCount(){return this._json.getRoot().getValueByString(le).getValueByString(_c).toInt()}getTotalEventValueSize(){return this._json.getRoot().getValueByString(le).getValueByString(Cc).toInt()}getEventTime(e){return this._json.getRoot().getValueByString(_a).getValueByIndex(e).getValueByString(xc).toFloat()}getEventValue(e){return new j(this._json.getRoot().getValueByString(_a).getValueByIndex(e).getValueByString(Sc).getRawString())}_json},En=(e=>(e[e.EvaluationOptionFlag_AreBeziersRistricted=0]="EvaluationOptionFlag_AreBeziersRistricted",e))(En||{}),vc;(e=>e.CubismMotionJson=Pi)(vc||={});var wc="EyeBlink",Pc="LipSync",Ic="Model",Tc="Parameter",Bc="PartOpacity",Vc=!1;function pe(r,e,t){let i=new $t;return i.time=r.time+(e.time-r.time)*t,i.value=r.value+(e.value-r.value)*t,i}function Ac(r,e){let t=(e-r[0].time)/(r[1].time-r[0].time);return t<0&&(t=0),r[0].value+(r[1].value-r[0].value)*t}function Ec(r,e){let t=(e-r[0].time)/(r[3].time-r[0].time);t<0&&(t=0);let i=pe(r[0],r[1],t),s=pe(r[1],r[2],t),n=pe(r[2],r[3],t),o=pe(i,s,t),a=pe(s,n,t);return pe(o,a,t).value}function Lc(r,e){let t=e,i=r[0].time,s=r[3].time,n=r[1].time,o=r[2].time,a=s-3*o+3*n-i,l=3*o-6*n+3*i,u=3*n-3*i,c=i-t,m=I.cardanoAlgorithmForBezier(a,l,u,c),h=pe(r[0],r[1],m),d=pe(r[1],r[2],m),f=pe(r[2],r[3],m),g=pe(h,d,m),p=pe(d,f,m);return pe(g,p,m).value}function Rc(r,e){return r[0].value}function Nc(r,e){return r[1].value}function Ln(r,e,t){let i=r.curves.at(e),s=-1,n=i.baseSegmentIndex+i.segmentCount,o=0;for(let l=i.baseSegmentIndex;l<n;++l)if(o=r.segments.at(l).basePointIndex+(r.segments.at(l).segmentType==1?3:1),r.points.at(o).time>t){s=l;break}if(s==-1)return r.points.at(o).value;let a=r.segments.at(s);return a.evaluate(r.points.get(a.basePointIndex),t)}var He=class extends We{static create(e,t,i){let s=new He;return s.parse(e,t),s._sourceFrameRate=s._motionData.fps,s._loopDurationSeconds=s._motionData.duration,s._onFinishedMotion=i,s}doUpdateParameters(e,t,i,s){this._modelCurveIdEyeBlink==null&&(this._modelCurveIdEyeBlink=V.getIdManager().getId(wc)),this._modelCurveIdLipSync==null&&(this._modelCurveIdLipSync=V.getIdManager().getId(Pc));let n=t-s.getStartTime();n<0&&(n=0);let o=Number.MAX_VALUE,a=Number.MAX_VALUE,l=64,u=0,c=0;this._eyeBlinkParameterIds.getSize()>l&&bt("too many eye blink targets : {0}",this._eyeBlinkParameterIds.getSize()),this._lipSyncParameterIds.getSize()>l&&bt("too many lip sync targets : {0}",this._lipSyncParameterIds.getSize());let m=this._fadeInSeconds<=0?1:I.getEasingSine((t-s.getFadeInStartTime())/this._fadeInSeconds),h=this._fadeOutSeconds<=0||s.getEndTime()<0?1:I.getEasingSine((s.getEndTime()-t)/this._fadeOutSeconds),d,f,g,p=n;if(this._isLoop)for(;p>this._motionData.duration;)p-=this._motionData.duration;let b=this._motionData.curves;for(f=0;f<this._motionData.curveCount&&b.at(f).type==0;++f)d=Ln(this._motionData,f,p),b.at(f).id==this._modelCurveIdEyeBlink?a=d:b.at(f).id==this._modelCurveIdLipSync&&(o=d);let x=0;for(;f<this._motionData.curveCount&&b.at(f).type==1;++f){if(x++,g=e.getParameterIndex(b.at(f).id),g==-1)continue;let _=e.getParameterValueByIndex(g);if(d=Ln(this._motionData,f,p),a!=Number.MAX_VALUE){for(let S=0;S<this._eyeBlinkParameterIds.getSize()&&S<l;++S)if(this._eyeBlinkParameterIds.at(S)==b.at(f).id){d*=a,c|=1<<S;break}}if(o!=Number.MAX_VALUE){for(let S=0;S<this._lipSyncParameterIds.getSize()&&S<l;++S)if(this._lipSyncParameterIds.at(S)==b.at(f).id){d+=o,u|=1<<S;break}}let y;if(b.at(f).fadeInTime<0&&b.at(f).fadeOutTime<0)y=_+(d-_)*i;else{let S,C;b.at(f).fadeInTime<0?S=m:S=b.at(f).fadeInTime==0?1:I.getEasingSine((t-s.getFadeInStartTime())/b.at(f).fadeInTime),b.at(f).fadeOutTime<0?C=h:C=b.at(f).fadeOutTime==0||s.getEndTime()<0?1:I.getEasingSine((s.getEndTime()-t)/b.at(f).fadeOutTime);let A=this._weight*S*C;y=_+(d-_)*A}e.setParameterValueByIndex(g,y,1)}{if(a!=Number.MAX_VALUE)for(let _=0;_<this._eyeBlinkParameterIds.getSize()&&_<l;++_){let y=e.getParameterValueById(this._eyeBlinkParameterIds.at(_));if(c>>_&1)continue;let S=y+(a-y)*i;e.setParameterValueById(this._eyeBlinkParameterIds.at(_),S)}if(o!=Number.MAX_VALUE)for(let _=0;_<this._lipSyncParameterIds.getSize()&&_<l;++_){let y=e.getParameterValueById(this._lipSyncParameterIds.at(_));if(u>>_&1)continue;let S=y+(o-y)*i;e.setParameterValueById(this._lipSyncParameterIds.at(_),S)}}for(;f<this._motionData.curveCount&&b.at(f).type==2;++f)g=e.getParameterIndex(b.at(f).id),g!=-1&&(d=Ln(this._motionData,f,p),e.setParameterValueByIndex(g,d));n>=this._motionData.duration&&(this._isLoop?(s.setStartTime(t),this._isLoopFadeIn&&s.setFadeInStartTime(t)):(this._onFinishedMotion&&this._onFinishedMotion(this),s.setIsFinished(!0))),this._lastWeight=i}setIsLoop(e){this._isLoop=e}isLoop(){return this._isLoop}setIsLoopFadeIn(e){this._isLoopFadeIn=e}isLoopFadeIn(){return this._isLoopFadeIn}getDuration(){return this._isLoop?-1:this._loopDurationSeconds}getLoopDuration(){return this._loopDurationSeconds}setParameterFadeInTime(e,t){let i=this._motionData.curves;for(let s=0;s<this._motionData.curveCount;++s)if(e==i.at(s).id){i.at(s).fadeInTime=t;return}}setParameterFadeOutTime(e,t){let i=this._motionData.curves;for(let s=0;s<this._motionData.curveCount;++s)if(e==i.at(s).id){i.at(s).fadeOutTime=t;return}}getParameterFadeInTime(e){let t=this._motionData.curves;for(let i=0;i<this._motionData.curveCount;++i)if(e==t.at(i).id)return t.at(i).fadeInTime;return-1}getParameterFadeOutTime(e){let t=this._motionData.curves;for(let i=0;i<this._motionData.curveCount;++i)if(e==t.at(i).id)return t.at(i).fadeOutTime;return-1}setEffectIds(e,t){this._eyeBlinkParameterIds=e,this._lipSyncParameterIds=t}constructor(){super(),this._sourceFrameRate=30,this._loopDurationSeconds=-1,this._isLoop=!1,this._isLoopFadeIn=!0,this._lastWeight=0,this._motionData=null,this._modelCurveIdEyeBlink=null,this._modelCurveIdLipSync=null,this._eyeBlinkParameterIds=null,this._lipSyncParameterIds=null}release(){this._motionData=void 0,this._motionData=null}parse(e,t){this._motionData=new wi;let i=new Pi(e,t);this._motionData.duration=i.getMotionDuration(),this._motionData.loop=i.isMotionLoop(),this._motionData.curveCount=i.getMotionCurveCount(),this._motionData.fps=i.getMotionFps(),this._motionData.eventCount=i.getEventCount();let s=i.getEvaluationOptionFlag(0);i.isExistMotionFadeInTime()?this._fadeInSeconds=i.getMotionFadeInTime()<0?1:i.getMotionFadeInTime():this._fadeInSeconds=1,i.isExistMotionFadeOutTime()?this._fadeOutSeconds=i.getMotionFadeOutTime()<0?1:i.getMotionFadeOutTime():this._fadeOutSeconds=1,this._motionData.curves.updateSize(this._motionData.curveCount,vi,!0),this._motionData.segments.updateSize(i.getMotionTotalSegmentCount(),Si,!0),this._motionData.points.updateSize(i.getMotionTotalPointCount(),$t,!0),this._motionData.events.updateSize(this._motionData.eventCount,Mi,!0);let n=0,o=0;for(let a=0;a<this._motionData.curveCount;++a){i.getMotionCurveTarget(a)==Ic?this._motionData.curves.at(a).type=0:i.getMotionCurveTarget(a)==Tc?this._motionData.curves.at(a).type=1:i.getMotionCurveTarget(a)==Bc?this._motionData.curves.at(a).type=2:Me('Warning : Unable to get segment type from Curve! The number of "CurveCount" may be incorrect!'),this._motionData.curves.at(a).id=i.getMotionCurveId(a),this._motionData.curves.at(a).baseSegmentIndex=o,this._motionData.curves.at(a).fadeInTime=i.isExistMotionCurveFadeInTime(a)?i.getMotionCurveFadeInTime(a):-1,this._motionData.curves.at(a).fadeOutTime=i.isExistMotionCurveFadeOutTime(a)?i.getMotionCurveFadeOutTime(a):-1;for(let l=0;l<i.getMotionCurveSegmentCount(a);){switch(l==0?(this._motionData.segments.at(o).basePointIndex=n,this._motionData.points.at(n).time=i.getMotionCurveSegment(a,l),this._motionData.points.at(n).value=i.getMotionCurveSegment(a,l+1),n+=1,l+=2):this._motionData.segments.at(o).basePointIndex=n-1,i.getMotionCurveSegment(a,l)){case 0:{this._motionData.segments.at(o).segmentType=0,this._motionData.segments.at(o).evaluate=Ac,this._motionData.points.at(n).time=i.getMotionCurveSegment(a,l+1),this._motionData.points.at(n).value=i.getMotionCurveSegment(a,l+2),n+=1,l+=3;break}case 1:{this._motionData.segments.at(o).segmentType=1,s||Vc?this._motionData.segments.at(o).evaluate=Ec:this._motionData.segments.at(o).evaluate=Lc,this._motionData.points.at(n).time=i.getMotionCurveSegment(a,l+1),this._motionData.points.at(n).value=i.getMotionCurveSegment(a,l+2),this._motionData.points.at(n+1).time=i.getMotionCurveSegment(a,l+3),this._motionData.points.at(n+1).value=i.getMotionCurveSegment(a,l+4),this._motionData.points.at(n+2).time=i.getMotionCurveSegment(a,l+5),this._motionData.points.at(n+2).value=i.getMotionCurveSegment(a,l+6),n+=3,l+=7;break}case 2:{this._motionData.segments.at(o).segmentType=2,this._motionData.segments.at(o).evaluate=Rc,this._motionData.points.at(n).time=i.getMotionCurveSegment(a,l+1),this._motionData.points.at(n).value=i.getMotionCurveSegment(a,l+2),n+=1,l+=3;break}case 3:{this._motionData.segments.at(o).segmentType=3,this._motionData.segments.at(o).evaluate=Nc,this._motionData.points.at(n).time=i.getMotionCurveSegment(a,l+1),this._motionData.points.at(n).value=i.getMotionCurveSegment(a,l+2),n+=1,l+=3;break}default:{ee(0);break}}++this._motionData.curves.at(a).segmentCount,++o}}for(let a=0;a<i.getEventCount();++a)this._motionData.events.at(a).fireTime=i.getEventTime(a),this._motionData.events.at(a).value=i.getEventValue(a);i.release(),i=void 0,i=null}getFiredEvent(e,t){this._firedEventValues.updateSize(0);for(let i=0;i<this._motionData.eventCount;++i)this._motionData.events.at(i).fireTime>e&&this._motionData.events.at(i).fireTime<=t&&this._firedEventValues.pushBack(new j(this._motionData.events.at(i).value.s));return this._firedEventValues}_sourceFrameRate;_loopDurationSeconds;_isLoop;_isLoopFadeIn;_lastWeight;_motionData;_eyeBlinkParameterIds;_lipSyncParameterIds;_modelCurveIdEyeBlink;_modelCurveIdLipSync},Fc;(e=>e.CubismMotion=He)(Fc||={});var Ii=class{constructor(){this._autoDelete=!1,this._motion=null,this._available=!0,this._finished=!1,this._started=!1,this._startTimeSeconds=-1,this._fadeInStartTimeSeconds=0,this._endTimeSeconds=-1,this._stateTimeSeconds=0,this._stateWeight=0,this._lastEventCheckSeconds=0,this._motionQueueEntryHandle=this,this._fadeOutSeconds=0,this._isTriggeredFadeOut=!1}release(){this._autoDelete&&this._motion&&We.delete(this._motion)}setFadeOut(e){this._fadeOutSeconds=e,this._isTriggeredFadeOut=!0}startFadeOut(e,t){let i=t+e;this._isTriggeredFadeOut=!0,(this._endTimeSeconds<0||i<this._endTimeSeconds)&&(this._endTimeSeconds=i)}isFinished(){return this._finished}isStarted(){return this._started}getStartTime(){return this._startTimeSeconds}getFadeInStartTime(){return this._fadeInStartTimeSeconds}getEndTime(){return this._endTimeSeconds}setStartTime(e){this._startTimeSeconds=e}setFadeInStartTime(e){this._fadeInStartTimeSeconds=e}setEndTime(e){this._endTimeSeconds=e}setIsFinished(e){this._finished=e}setIsStarted(e){this._started=e}isAvailable(){return this._available}setIsAvailable(e){this._available=e}setState(e,t){this._stateTimeSeconds=e,this._stateWeight=t}getStateTime(){return this._stateTimeSeconds}getStateWeight(){return this._stateWeight}getLastCheckEventSeconds(){return this._lastEventCheckSeconds}setLastCheckEventSeconds(e){this._lastEventCheckSeconds=e}isTriggeredFadeOut(){return this._isTriggeredFadeOut}getFadeOutSeconds(){return this._fadeOutSeconds}_autoDelete;_motion;_available;_finished;_started;_startTimeSeconds;_fadeInStartTimeSeconds;_endTimeSeconds;_stateTimeSeconds;_stateWeight;_lastEventCheckSeconds;_fadeOutSeconds;_isTriggeredFadeOut;_motionQueueEntryHandle},Oc;(e=>e.CubismMotionQueueEntry=Ii)(Oc||={});var Ti=class{constructor(){this._userTimeSeconds=0,this._eventCallBack=null,this._eventCustomData=null,this._motions=new w}release(){for(let e=0;e<this._motions.getSize();++e)this._motions.at(e)&&(this._motions.at(e).release(),this._motions.set(e,null));this._motions=null}startMotion(e,t,i){if(e==null)return Bi;let s=null;for(let n=0;n<this._motions.getSize();++n)s=this._motions.at(n),s?.setFadeOut(s._motion.getFadeOutTime());return s=new Ii,s._autoDelete=t,s._motion=e,this._motions.pushBack(s),s._motionQueueEntryHandle}isFinished(){for(let e=this._motions.begin();e.notEqual(this._motions.end());){let t=e.ptr();if(t==null){e=this._motions.erase(e);continue}if(t._motion==null){t.release(),t=null,e=this._motions.erase(e);continue}if(t.isFinished())e.preIncrement();else return!1}return!0}isFinishedByHandle(e){for(let t=this._motions.begin();t.notEqual(this._motions.end());t.increment()){let i=t.ptr();if(i!=null&&i._motionQueueEntryHandle==e&&!i.isFinished())return!1}return!0}stopAllMotions(){for(let e=this._motions.begin();e.notEqual(this._motions.end());){let t=e.ptr();if(t==null){e=this._motions.erase(e);continue}t.release(),t=null,e=this._motions.erase(e)}}getCubismMotionQueueEntry(e){for(let t=this._motions.begin();t.notEqual(this._motions.end());t.preIncrement()){let i=t.ptr();if(i!=null&&i._motionQueueEntryHandle==e)return i}return null}setEventCallback(e,t=null){this._eventCallBack=e,this._eventCustomData=t}doUpdateMotion(e,t){let i=!1;for(let s=this._motions.begin();s.notEqual(this._motions.end());){let n=s.ptr();if(n==null){s=this._motions.erase(s);continue}let o=n._motion;if(o==null){n.release(),n=null,s=this._motions.erase(s);continue}o.updateParameters(e,n,t),i=!0;let a=o.getFiredEvent(n.getLastCheckEventSeconds()-n.getStartTime(),t-n.getStartTime());for(let l=0;l<a.getSize();++l)this._eventCallBack(this,a.at(l),this._eventCustomData);n.setLastCheckEventSeconds(t),n.isFinished()?(n.release(),n=null,s=this._motions.erase(s)):(n.isTriggeredFadeOut()&&n.startFadeOut(n.getFadeOutSeconds(),t),s.preIncrement())}return i}_userTimeSeconds;_motions;_eventCallBack;_eventCustomData},Bi=-1,$c;(t=>(t.CubismMotionQueueManager=Ti,t.InvalidMotionQueueEntryHandleValue=Bi))($c||={});var Ut=class extends Ti{constructor(){super(),this._currentPriority=0,this._reservePriority=0}getCurrentPriority(){return this._currentPriority}getReservePriority(){return this._reservePriority}setReservePriority(e){this._reservePriority=e}startMotionPriority(e,t,i){return i==this._reservePriority&&(this._reservePriority=0),this._currentPriority=i,super.startMotion(e,t,this._userTimeSeconds)}updateMotion(e,t){this._userTimeSeconds+=t;let i=super.doUpdateMotion(e,this._userTimeSeconds);return this.isFinished()&&(this._currentPriority=0),i}reserveMotion(e){return e<=this._reservePriority||e<=this._currentPriority?!1:(this._reservePriority=e,!0)}_currentPriority;_reservePriority},zc;(e=>e.CubismMotionManager=Ut)(zc||={});var Ls=(e=>(e[e.CubismPhysicsTargetType_Parameter=0]="CubismPhysicsTargetType_Parameter",e))(Ls||{}),Rs=(i=>(i[i.CubismPhysicsSource_X=0]="CubismPhysicsSource_X",i[i.CubismPhysicsSource_Y=1]="CubismPhysicsSource_Y",i[i.CubismPhysicsSource_Angle=2]="CubismPhysicsSource_Angle",i))(Rs||{}),Es=class{constructor(){this.gravity=new v(0,0),this.wind=new v(0,0)}gravity;wind},Vi=class{id;targetType},Ai=class{minimum;maximum;defalut},Ei=class{constructor(){this.initialPosition=new v(0,0),this.position=new v(0,0),this.lastPosition=new v(0,0),this.lastGravity=new v(0,0),this.force=new v(0,0),this.velocity=new v(0,0)}initialPosition;mobility;delay;acceleration;radius;position;lastPosition;lastGravity;force;velocity},Li=class{constructor(){this.normalizationPosition=new Ai,this.normalizationAngle=new Ai}inputCount;outputCount;particleCount;baseInputIndex;baseOutputIndex;baseParticleIndex;normalizationPosition;normalizationAngle},Ri=class{constructor(){this.source=new Vi}source;sourceParameterIndex;weight;type;reflect;getNormalizedParameterValue},Ni=class{constructor(){this.destination=new Vi,this.translationScale=new v(0,0)}destination;destinationParameterIndex;vertexIndex;translationScale;angleScale;weight;type;reflect;valueBelowMinimum;valueExceededMaximum;getValue;getScale},Fi=class{constructor(){this.settings=new w,this.inputs=new w,this.outputs=new w,this.particles=new w,this.gravity=new v(0,0),this.wind=new v(0,0),this.fps=0}subRigCount;settings;inputs;outputs;particles;gravity;wind;fps},Wc;(c=>(c.CubismPhysicsInput=Ri,c.CubismPhysicsNormalization=Ai,c.CubismPhysicsOutput=Ni,c.CubismPhysicsParameter=Vi,c.CubismPhysicsParticle=Ei,c.CubismPhysicsRig=Fi,c.CubismPhysicsSource=Rs,c.CubismPhysicsSubRig=Li,c.CubismPhysicsTargetType=Ls,c.PhysicsJsonEffectiveForces=Es))(Wc||={});var vr="Position",Rn="X",Nn="Y",Fn="Angle",Ca="Type",xa="Id",nt="Meta",Ns="EffectiveForces",Hc="TotalInputCount",Gc="TotalOutputCount",Yc="PhysicsSettingCount",Sa="Gravity",va="Wind",Kc="VertexCount",Xc="Fps",D="PhysicsSettings",ki="Normalization",Ma="Minimum",wa="Maximum",Pa="Default",Ia="Reflect",Ta="Weight",Mr="Input",Jc="Source",zt="Output",Qc="Scale",Zc="VertexIndex",em="Destination",jt="Vertices",tm="Mobility",im="Delay",rm="Radius",sm="Acceleration",Oi=class{constructor(e,t){this._json=O.create(e,t)}release(){O.delete(this._json)}getGravity(){let e=new v(0,0);return e.x=this._json.getRoot().getValueByString(nt).getValueByString(Ns).getValueByString(Sa).getValueByString(Rn).toFloat(),e.y=this._json.getRoot().getValueByString(nt).getValueByString(Ns).getValueByString(Sa).getValueByString(Nn).toFloat(),e}getWind(){let e=new v(0,0);return e.x=this._json.getRoot().getValueByString(nt).getValueByString(Ns).getValueByString(va).getValueByString(Rn).toFloat(),e.y=this._json.getRoot().getValueByString(nt).getValueByString(Ns).getValueByString(va).getValueByString(Nn).toFloat(),e}getFps(){return this._json.getRoot().getValueByString(nt).getValueByString(Xc).toFloat(0)}getSubRigCount(){return this._json.getRoot().getValueByString(nt).getValueByString(Yc).toInt()}getTotalInputCount(){return this._json.getRoot().getValueByString(nt).getValueByString(Hc).toInt()}getTotalOutputCount(){return this._json.getRoot().getValueByString(nt).getValueByString(Gc).toInt()}getVertexCount(){return this._json.getRoot().getValueByString(nt).getValueByString(Kc).toInt()}getNormalizationPositionMinimumValue(e){return this._json.getRoot().getValueByString(D).getValueByIndex(e).getValueByString(ki).getValueByString(vr).getValueByString(Ma).toFloat()}getNormalizationPositionMaximumValue(e){return this._json.getRoot().getValueByString(D).getValueByIndex(e).getValueByString(ki).getValueByString(vr).getValueByString(wa).toFloat()}getNormalizationPositionDefaultValue(e){return this._json.getRoot().getValueByString(D).getValueByIndex(e).getValueByString(ki).getValueByString(vr).getValueByString(Pa).toFloat()}getNormalizationAngleMinimumValue(e){return this._json.getRoot().getValueByString(D).getValueByIndex(e).getValueByString(ki).getValueByString(Fn).getValueByString(Ma).toFloat()}getNormalizationAngleMaximumValue(e){return this._json.getRoot().getValueByString(D).getValueByIndex(e).getValueByString(ki).getValueByString(Fn).getValueByString(wa).toFloat()}getNormalizationAngleDefaultValue(e){return this._json.getRoot().getValueByString(D).getValueByIndex(e).getValueByString(ki).getValueByString(Fn).getValueByString(Pa).toFloat()}getInputCount(e){return this._json.getRoot().getValueByString(D).getValueByIndex(e).getValueByString(Mr).getVector().getSize()}getInputWeight(e,t){return this._json.getRoot().getValueByString(D).getValueByIndex(e).getValueByString(Mr).getValueByIndex(t).getValueByString(Ta).toFloat()}getInputReflect(e,t){return this._json.getRoot().getValueByString(D).getValueByIndex(e).getValueByString(Mr).getValueByIndex(t).getValueByString(Ia).toBoolean()}getInputType(e,t){return this._json.getRoot().getValueByString(D).getValueByIndex(e).getValueByString(Mr).getValueByIndex(t).getValueByString(Ca).getRawString()}getInputSourceId(e,t){return V.getIdManager().getId(this._json.getRoot().getValueByString(D).getValueByIndex(e).getValueByString(Mr).getValueByIndex(t).getValueByString(Jc).getValueByString(xa).getRawString())}getOutputCount(e){return this._json.getRoot().getValueByString(D).getValueByIndex(e).getValueByString(zt).getVector().getSize()}getOutputVertexIndex(e,t){return this._json.getRoot().getValueByString(D).getValueByIndex(e).getValueByString(zt).getValueByIndex(t).getValueByString(Zc).toInt()}getOutputAngleScale(e,t){return this._json.getRoot().getValueByString(D).getValueByIndex(e).getValueByString(zt).getValueByIndex(t).getValueByString(Qc).toFloat()}getOutputWeight(e,t){return this._json.getRoot().getValueByString(D).getValueByIndex(e).getValueByString(zt).getValueByIndex(t).getValueByString(Ta).toFloat()}getOutputDestinationId(e,t){return V.getIdManager().getId(this._json.getRoot().getValueByString(D).getValueByIndex(e).getValueByString(zt).getValueByIndex(t).getValueByString(em).getValueByString(xa).getRawString())}getOutputType(e,t){return this._json.getRoot().getValueByString(D).getValueByIndex(e).getValueByString(zt).getValueByIndex(t).getValueByString(Ca).getRawString()}getOutputReflect(e,t){return this._json.getRoot().getValueByString(D).getValueByIndex(e).getValueByString(zt).getValueByIndex(t).getValueByString(Ia).toBoolean()}getParticleCount(e){return this._json.getRoot().getValueByString(D).getValueByIndex(e).getValueByString(jt).getVector().getSize()}getParticleMobility(e,t){return this._json.getRoot().getValueByString(D).getValueByIndex(e).getValueByString(jt).getValueByIndex(t).getValueByString(tm).toFloat()}getParticleDelay(e,t){return this._json.getRoot().getValueByString(D).getValueByIndex(e).getValueByString(jt).getValueByIndex(t).getValueByString(im).toFloat()}getParticleAcceleration(e,t){return this._json.getRoot().getValueByString(D).getValueByIndex(e).getValueByString(jt).getValueByIndex(t).getValueByString(sm).toFloat()}getParticleRadius(e,t){return this._json.getRoot().getValueByString(D).getValueByIndex(e).getValueByString(jt).getValueByIndex(t).getValueByString(rm).toFloat()}getParticlePosition(e,t){let i=new v(0,0);return i.x=this._json.getRoot().getValueByString(D).getValueByIndex(e).getValueByString(jt).getValueByIndex(t).getValueByString(vr).getValueByString(Rn).toFloat(),i.y=this._json.getRoot().getValueByString(D).getValueByIndex(e).getValueByString(jt).getValueByIndex(t).getValueByString(vr).getValueByString(Nn).toFloat(),i}_json},nm;(e=>e.CubismPhysicsJson=Oi)(nm||={});var Ba="X",Va="Y",Aa="Angle",am=5,On=100,Ea=.001,lm=5,ot=class{static create(e,t){let i=new ot;return i.parse(e,t),i._physicsRig.gravity.y=0,i}static delete(e){e!=null&&(e.release(),e=null)}parse(e,t){this._physicsRig=new Fi;let i=new Oi(e,t);this._physicsRig.gravity=i.getGravity(),this._physicsRig.wind=i.getWind(),this._physicsRig.subRigCount=i.getSubRigCount(),this._physicsRig.fps=i.getFps(),this._physicsRig.settings.updateSize(this._physicsRig.subRigCount,Li,!0),this._physicsRig.inputs.updateSize(i.getTotalInputCount(),Ri,!0),this._physicsRig.outputs.updateSize(i.getTotalOutputCount(),Ni,!0),this._physicsRig.particles.updateSize(i.getVertexCount(),Ei,!0),this._currentRigOutputs.clear(),this._previousRigOutputs.clear();let s=0,n=0,o=0;for(let a=0;a<this._physicsRig.settings.getSize();++a){this._physicsRig.settings.at(a).normalizationPosition.minimum=i.getNormalizationPositionMinimumValue(a),this._physicsRig.settings.at(a).normalizationPosition.maximum=i.getNormalizationPositionMaximumValue(a),this._physicsRig.settings.at(a).normalizationPosition.defalut=i.getNormalizationPositionDefaultValue(a),this._physicsRig.settings.at(a).normalizationAngle.minimum=i.getNormalizationAngleMinimumValue(a),this._physicsRig.settings.at(a).normalizationAngle.maximum=i.getNormalizationAngleMaximumValue(a),this._physicsRig.settings.at(a).normalizationAngle.defalut=i.getNormalizationAngleDefaultValue(a),this._physicsRig.settings.at(a).inputCount=i.getInputCount(a),this._physicsRig.settings.at(a).baseInputIndex=s;for(let c=0;c<this._physicsRig.settings.at(a).inputCount;++c)this._physicsRig.inputs.at(s+c).sourceParameterIndex=-1,this._physicsRig.inputs.at(s+c).weight=i.getInputWeight(a,c),this._physicsRig.inputs.at(s+c).reflect=i.getInputReflect(a,c),i.getInputType(a,c)==Ba?(this._physicsRig.inputs.at(s+c).type=0,this._physicsRig.inputs.at(s+c).getNormalizedParameterValue=cm):i.getInputType(a,c)==Va?(this._physicsRig.inputs.at(s+c).type=1,this._physicsRig.inputs.at(s+c).getNormalizedParameterValue=mm):i.getInputType(a,c)==Aa&&(this._physicsRig.inputs.at(s+c).type=2,this._physicsRig.inputs.at(s+c).getNormalizedParameterValue=hm),this._physicsRig.inputs.at(s+c).source.targetType=0,this._physicsRig.inputs.at(s+c).source.id=i.getInputSourceId(a,c);s+=this._physicsRig.settings.at(a).inputCount,this._physicsRig.settings.at(a).outputCount=i.getOutputCount(a),this._physicsRig.settings.at(a).baseOutputIndex=n;let l=new Fs;l.outputs.resize(this._physicsRig.settings.at(a).outputCount);let u=new Fs;u.outputs.resize(this._physicsRig.settings.at(a).outputCount);for(let c=0;c<this._physicsRig.settings.at(a).outputCount;++c)l.outputs[c]=0,u.outputs[c]=0,this._physicsRig.outputs.at(n+c).destinationParameterIndex=-1,this._physicsRig.outputs.at(n+c).vertexIndex=i.getOutputVertexIndex(a,c),this._physicsRig.outputs.at(n+c).angleScale=i.getOutputAngleScale(a,c),this._physicsRig.outputs.at(n+c).weight=i.getOutputWeight(a,c),this._physicsRig.outputs.at(n+c).destination.targetType=0,this._physicsRig.outputs.at(n+c).destination.id=i.getOutputDestinationId(a,c),i.getOutputType(a,c)==Ba?(this._physicsRig.outputs.at(n+c).type=0,this._physicsRig.outputs.at(n+c).getValue=pm,this._physicsRig.outputs.at(n+c).getScale=ym):i.getOutputType(a,c)==Va?(this._physicsRig.outputs.at(n+c).type=1,this._physicsRig.outputs.at(n+c).getValue=dm,this._physicsRig.outputs.at(n+c).getScale=_m):i.getOutputType(a,c)==Aa&&(this._physicsRig.outputs.at(n+c).type=2,this._physicsRig.outputs.at(n+c).getValue=fm,this._physicsRig.outputs.at(n+c).getScale=Cm),this._physicsRig.outputs.at(n+c).reflect=i.getOutputReflect(a,c);this._currentRigOutputs.pushBack(l),this._previousRigOutputs.pushBack(u),n+=this._physicsRig.settings.at(a).outputCount,this._physicsRig.settings.at(a).particleCount=i.getParticleCount(a),this._physicsRig.settings.at(a).baseParticleIndex=o;for(let c=0;c<this._physicsRig.settings.at(a).particleCount;++c)this._physicsRig.particles.at(o+c).mobility=i.getParticleMobility(a,c),this._physicsRig.particles.at(o+c).delay=i.getParticleDelay(a,c),this._physicsRig.particles.at(o+c).acceleration=i.getParticleAcceleration(a,c),this._physicsRig.particles.at(o+c).radius=i.getParticleRadius(a,c),this._physicsRig.particles.at(o+c).position=i.getParticlePosition(a,c);o+=this._physicsRig.settings.at(a).particleCount}this.initialize(),i.release(),i=void 0,i=null}stabilization(e){let t,i,s,n,o=new v,a,l,u,c,m,h,d,f;m=e.getModel().parameters.values,h=e.getModel().parameters.maximumValues,d=e.getModel().parameters.minimumValues,f=e.getModel().parameters.defaultValues,(this._parameterCaches?.length??0)<e.getParameterCount()&&(this._parameterCaches=new Float32Array(e.getParameterCount())),(this._parameterInputCaches?.length??0)<e.getParameterCount()&&(this._parameterInputCaches=new Float32Array(e.getParameterCount()));for(let g=0;g<e.getParameterCount();++g)this._parameterCaches[g]=m[g],this._parameterInputCaches[g]=m[g];for(let g=0;g<this._physicsRig.subRigCount;++g){t={angle:0},o.x=0,o.y=0,a=this._physicsRig.settings.at(g),l=this._physicsRig.inputs.get(a.baseInputIndex),u=this._physicsRig.outputs.get(a.baseOutputIndex),c=this._physicsRig.particles.get(a.baseParticleIndex);for(let p=0;p<a.inputCount;++p)i=l[p].weight/On,l[p].sourceParameterIndex==-1&&(l[p].sourceParameterIndex=e.getParameterIndex(l[p].source.id)),l[p].getNormalizedParameterValue(o,t,m[l[p].sourceParameterIndex],d[l[p].sourceParameterIndex],h[l[p].sourceParameterIndex],f[l[p].sourceParameterIndex],a.normalizationPosition,a.normalizationAngle,l[p].reflect,i),this._parameterCaches[l[p].sourceParameterIndex]=m[l[p].sourceParameterIndex];s=I.degreesToRadian(-t.angle),o.x=o.x*I.cos(s)-o.y*I.sin(s),o.y=o.x*I.sin(s)+o.y*I.cos(s),Sm(c,a.particleCount,o,t.angle,this._options.wind,Ea*a.normalizationPosition.maximum);for(let p=0;p<a.outputCount;++p){let b=u[p].vertexIndex;if(u[p].destinationParameterIndex==-1&&(u[p].destinationParameterIndex=e.getParameterIndex(u[p].destination.id)),b<1||b>=a.particleCount)continue;let x=new v;x=c[b].position.substract(c[b-1].position),n=u[p].getValue(x,c,b,u[p].reflect,this._options.gravity),this._currentRigOutputs.at(g).outputs[p]=n,this._previousRigOutputs.at(g).outputs[p]=n;let _=u[p].destinationParameterIndex,y=!Float32Array.prototype.slice&&"subarray"in Float32Array.prototype?JSON.parse(JSON.stringify(m.subarray(_))):m.slice(_);kn(y,d[_],h[_],n,u[p]);for(let S=_,C=0;S<this._parameterCaches.length;S++,C++)m[S]=this._parameterCaches[S]=y[C]}}}evaluate(e,t){let i,s,n,o,a=new v,l,u,c,m;if(0>=t)return;let h,d,f,g,p;if(this._currentRemainTime+=t,this._currentRemainTime>lm&&(this._currentRemainTime=0),h=e.getModel().parameters.values,d=e.getModel().parameters.maximumValues,f=e.getModel().parameters.minimumValues,g=e.getModel().parameters.defaultValues,(this._parameterCaches?.length??0)<e.getParameterCount()&&(this._parameterCaches=new Float32Array(e.getParameterCount())),(this._parameterInputCaches?.length??0)<e.getParameterCount()){this._parameterInputCaches=new Float32Array(e.getParameterCount());for(let x=0;x<e.getParameterCount();++x)this._parameterInputCaches[x]=h[x]}for(this._physicsRig.fps>0?p=1/this._physicsRig.fps:p=t;this._currentRemainTime>=p;){for(let _=0;_<this._physicsRig.subRigCount;++_){l=this._physicsRig.settings.at(_),c=this._physicsRig.outputs.get(l.baseOutputIndex);for(let y=0;y<l.outputCount;++y)this._previousRigOutputs.at(_).outputs[y]=this._currentRigOutputs.at(_).outputs[y]}let x=p/this._currentRemainTime;for(let _=0;_<e.getParameterCount();++_)this._parameterCaches[_]=this._parameterInputCaches[_]*(1-x)+h[_]*x,this._parameterInputCaches[_]=this._parameterCaches[_];for(let _=0;_<this._physicsRig.subRigCount;++_){i={angle:0},a.x=0,a.y=0,l=this._physicsRig.settings.at(_),u=this._physicsRig.inputs.get(l.baseInputIndex),c=this._physicsRig.outputs.get(l.baseOutputIndex),m=this._physicsRig.particles.get(l.baseParticleIndex);for(let y=0;y<l.inputCount;++y)s=u[y].weight/On,u[y].sourceParameterIndex==-1&&(u[y].sourceParameterIndex=e.getParameterIndex(u[y].source.id)),u[y].getNormalizedParameterValue(a,i,this._parameterCaches[u[y].sourceParameterIndex],f[u[y].sourceParameterIndex],d[u[y].sourceParameterIndex],g[u[y].sourceParameterIndex],l.normalizationPosition,l.normalizationAngle,u[y].reflect,s);n=I.degreesToRadian(-i.angle),a.x=a.x*I.cos(n)-a.y*I.sin(n),a.y=a.x*I.sin(n)+a.y*I.cos(n),xm(m,l.particleCount,a,i.angle,this._options.wind,Ea*l.normalizationPosition.maximum,p,am);for(let y=0;y<l.outputCount;++y){let S=c[y].vertexIndex;if(c[y].destinationParameterIndex==-1&&(c[y].destinationParameterIndex=e.getParameterIndex(c[y].destination.id)),S<1||S>=l.particleCount)continue;let C=new v;C.x=m[S].position.x-m[S-1].position.x,C.y=m[S].position.y-m[S-1].position.y,o=c[y].getValue(C,m,S,c[y].reflect,this._options.gravity),this._currentRigOutputs.at(_).outputs[y]=o;let A=c[y].destinationParameterIndex,k=!Float32Array.prototype.slice&&"subarray"in Float32Array.prototype?JSON.parse(JSON.stringify(this._parameterCaches.subarray(A))):this._parameterCaches.slice(A);kn(k,f[A],d[A],o,c[y]);for(let G=A,z=0;G<this._parameterCaches.length;G++,z++)this._parameterCaches[G]=k[z]}}this._currentRemainTime-=p}let b=this._currentRemainTime/p;this.interpolate(e,b)}interpolate(e,t){let i,s,n,o,a;n=e.getModel().parameters.values,o=e.getModel().parameters.maximumValues,a=e.getModel().parameters.minimumValues;for(let l=0;l<this._physicsRig.subRigCount;++l){s=this._physicsRig.settings.at(l),i=this._physicsRig.outputs.get(s.baseOutputIndex);for(let u=0;u<s.outputCount;++u){if(i[u].destinationParameterIndex==-1)continue;let c=i[u].destinationParameterIndex,m=!Float32Array.prototype.slice&&"subarray"in Float32Array.prototype?JSON.parse(JSON.stringify(n.subarray(c))):n.slice(c);kn(m,a[c],o[c],this._previousRigOutputs.at(l).outputs[u]*(1-t)+this._currentRigOutputs.at(l).outputs[u]*t,i[u]);for(let h=c,d=0;h<n.length;h++,d++)n[h]=m[d]}}}setOptions(e){this._options=e}getOption(){return this._options}constructor(){this._physicsRig=null,this._options=new wr,this._options.gravity.y=-1,this._options.gravity.x=0,this._options.wind.x=0,this._options.wind.y=0,this._currentRigOutputs=new w,this._previousRigOutputs=new w,this._currentRemainTime=0,this._parameterCaches=null,this._parameterInputCaches=null}release(){this._physicsRig=void 0,this._physicsRig=null}initialize(){let e,t,i;for(let s=0;s<this._physicsRig.subRigCount;++s){t=this._physicsRig.settings.at(s),e=this._physicsRig.particles.get(t.baseParticleIndex),e[0].initialPosition=new v(0,0),e[0].lastPosition=new v(e[0].initialPosition.x,e[0].initialPosition.y),e[0].lastGravity=new v(0,-1),e[0].lastGravity.y*=-1,e[0].velocity=new v(0,0),e[0].force=new v(0,0);for(let n=1;n<t.particleCount;++n)i=new v(0,0),i.y=e[n].radius,e[n].initialPosition=new v(e[n-1].initialPosition.x+i.x,e[n-1].initialPosition.y+i.y),e[n].position=new v(e[n].initialPosition.x,e[n].initialPosition.y),e[n].lastPosition=new v(e[n].initialPosition.x,e[n].initialPosition.y),e[n].lastGravity=new v(0,-1),e[n].lastGravity.y*=-1,e[n].velocity=new v(0,0),e[n].force=new v(0,0)}}_physicsRig;_options;_currentRigOutputs;_previousRigOutputs;_currentRemainTime;_parameterCaches;_parameterInputCaches},wr=class{constructor(){this.gravity=new v(0,0),this.wind=new v(0,0)}gravity;wind},Fs=class{constructor(){this.outputs=new w(0)}outputs};function um(r){let e=0;return r>0?e=1:r<0&&(e=-1),e}function cm(r,e,t,i,s,n,o,a,l,u){r.x+=Dn(t,i,s,n,o.minimum,o.maximum,o.defalut,l)*u}function mm(r,e,t,i,s,n,o,a,l,u){r.y+=Dn(t,i,s,n,o.minimum,o.maximum,o.defalut,l)*u}function hm(r,e,t,i,s,n,o,a,l,u){e.angle+=Dn(t,i,s,n,a.minimum,a.maximum,a.defalut,l)*u}function pm(r,e,t,i,s){let n=r.x;return i&&(n*=-1),n}function dm(r,e,t,i,s){let n=r.y;return i&&(n*=-1),n}function fm(r,e,t,i,s){let n;return t>=2?s=e[t-1].position.substract(e[t-2].position):s=s.multiplyByScaler(-1),n=I.directionToRadian(s,r),i&&(n*=-1),n}function gm(r,e){let t=I.max(r,e),i=I.min(r,e);return I.abs(t-i)}function bm(r,e){return I.min(r,e)+gm(r,e)/2}function ym(r,e){return JSON.parse(JSON.stringify(r.x))}function _m(r,e){return JSON.parse(JSON.stringify(r.y))}function Cm(r,e){return JSON.parse(JSON.stringify(e))}function xm(r,e,t,i,s,n,o,a){let l,u,c,m,h=new v(0,0),d=new v(0,0),f=new v(0,0),g=new v(0,0);r[0].position=new v(t.x,t.y),l=I.degreesToRadian(i),m=I.radianToDirection(l),m.normalize();for(let p=1;p<e;++p)r[p].force=m.multiplyByScaler(r[p].acceleration).add(s),r[p].lastPosition=new v(r[p].position.x,r[p].position.y),u=r[p].delay*o*30,h=r[p].position.substract(r[p-1].position),c=I.directionToRadian(r[p].lastGravity,m)/a,h.x=I.cos(c)*h.x-h.y*I.sin(c),h.y=I.sin(c)*h.x+h.y*I.cos(c),r[p].position=r[p-1].position.add(h),d=r[p].velocity.multiplyByScaler(u),f=r[p].force.multiplyByScaler(u).multiplyByScaler(u),r[p].position=r[p].position.add(d).add(f),g=r[p].position.substract(r[p-1].position),g.normalize(),r[p].position=r[p-1].position.add(g.multiplyByScaler(r[p].radius)),I.abs(r[p].position.x)<n&&(r[p].position.x=0),u!=0&&(r[p].velocity=r[p].position.substract(r[p].lastPosition),r[p].velocity=r[p].velocity.divisionByScalar(u),r[p].velocity=r[p].velocity.multiplyByScaler(r[p].mobility)),r[p].force=new v(0,0),r[p].lastGravity=new v(m.x,m.y)}function Sm(r,e,t,i,s,n){let o,a,l=new v(0,0);r[0].position=new v(t.x,t.y),o=I.degreesToRadian(i),a=I.radianToDirection(o),a.normalize();for(let u=1;u<e;++u)r[u].force=a.multiplyByScaler(r[u].acceleration).add(s),r[u].lastPosition=new v(r[u].position.x,r[u].position.y),r[u].velocity=new v(0,0),l=r[u].force,l.normalize(),l=l.multiplyByScaler(r[u].radius),r[u].position=r[u-1].position.add(l),I.abs(r[u].position.x)<n&&(r[u].position.x=0),r[u].force=new v(0,0),r[u].lastGravity=new v(a.x,a.y)}function kn(r,e,t,i,s){let n,o,a;n=s.getScale(s.translationScale,s.angleScale),o=i*n,o<e?(o<s.valueBelowMinimum&&(s.valueBelowMinimum=o),o=e):o>t&&(o>s.valueExceededMaximum&&(s.valueExceededMaximum=o),o=t),a=s.weight/On,a>=1||(o=r[0]*(1-a)+o*a),r[0]=o}function Dn(r,e,t,i,s,n,o,a){let l=0,u=I.max(t,e);u<r&&(r=u);let c=I.min(t,e);c>r&&(r=c);let m=I.min(s,n),h=I.max(s,n),d=o,f=bm(c,u),g=r-f;switch(um(g)){case 1:{let p=h-d,b=u-f;b!=0&&(l=g*(p/b),l+=d);break}case-1:{let p=m-d,b=c-f;b!=0&&(l=g*(p/b),l+=d);break}case 0:{l=d;break}default:break}return a?l:l*-1}var vm;(t=>(t.CubismPhysics=ot,t.Options=wr))(vm||={});var wt=class{constructor(e,t,i,s){this.x=e,this.y=t,this.width=i,this.height=s}getCenterX(){return this.x+.5*this.width}getCenterY(){return this.y+.5*this.height}getRight(){return this.x+this.width}getBottom(){return this.y+this.height}setRect(e){this.x=e.x,this.y=e.y,this.width=e.width,this.height=e.height}expand(e,t){this.x-=e,this.y-=t,this.width+=e*2,this.height+=t*2}x;y;width;height},wm;(e=>e.csmRect=wt)(wm||={});var $n=4,Im=10,Wt,Pr,Un,Ht=class{getChannelFlagAsColor(e){return this._channelColors.at(e)}getMaskRenderTexture(){let e=0;if(this._maskTexture&&this._maskTexture.texture!=0&&(this._maskTexture.frameNo=this._currentFrameNo,e=this._maskTexture.texture),e==0){let t=this._clippingMaskBufferSize;this._colorBuffer=this.gl.createTexture(),this.gl.bindTexture(this.gl.TEXTURE_2D,this._colorBuffer),this.gl.texImage2D(this.gl.TEXTURE_2D,0,this.gl.RGBA,t,t,0,this.gl.RGBA,this.gl.UNSIGNED_BYTE,null),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_WRAP_S,this.gl.CLAMP_TO_EDGE),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_WRAP_T,this.gl.CLAMP_TO_EDGE),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_MIN_FILTER,this.gl.LINEAR),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_MAG_FILTER,this.gl.LINEAR),this.gl.bindTexture(this.gl.TEXTURE_2D,null),e=this.gl.createFramebuffer(),this.gl.bindFramebuffer(this.gl.FRAMEBUFFER,e),this.gl.framebufferTexture2D(this.gl.FRAMEBUFFER,this.gl.COLOR_ATTACHMENT0,this.gl.TEXTURE_2D,this._colorBuffer,0),this.gl.bindFramebuffer(this.gl.FRAMEBUFFER,Un),this._maskTexture=new Ir(this._currentFrameNo,e)}return e}setGL(e){this.gl=e}calcClippedDrawTotalBounds(e,t){let i=Number.MAX_VALUE,s=Number.MAX_VALUE,n=Number.MIN_VALUE,o=Number.MIN_VALUE,a=t._clippedDrawableIndexList.length;for(let l=0;l<a;l++){let u=t._clippedDrawableIndexList[l],c=e.getDrawableVertexCount(u),m=e.getDrawableVertices(u),h=Number.MAX_VALUE,d=Number.MAX_VALUE,f=Number.MIN_VALUE,g=Number.MIN_VALUE,p=c*Ie.vertexStep;for(let b=Ie.vertexOffset;b<p;b+=Ie.vertexStep){let x=m[b],_=m[b+1];x<h&&(h=x),x>f&&(f=x),_<d&&(d=_),_>g&&(g=_)}if(h!=Number.MAX_VALUE)if(h<i&&(i=h),d<s&&(s=d),f>n&&(n=f),g>o&&(o=g),i==Number.MAX_VALUE)t._allClippedDrawRect.x=0,t._allClippedDrawRect.y=0,t._allClippedDrawRect.width=0,t._allClippedDrawRect.height=0,t._isUsing=!1;else{t._isUsing=!0;let b=n-i,x=o-s;t._allClippedDrawRect.x=i,t._allClippedDrawRect.y=s,t._allClippedDrawRect.width=b,t._allClippedDrawRect.height=x}}}constructor(){this._maskRenderTexture=null,this._colorBuffer=null,this._currentFrameNo=0,this._clippingMaskBufferSize=256,this._clippingContextListForMask=new w,this._clippingContextListForDraw=new w,this._channelColors=new w,this._tmpBoundsOnModel=new wt,this._tmpMatrix=new F,this._tmpMatrixForMask=new F,this._tmpMatrixForDraw=new F,this._maskTexture=null;let e=new se;e.R=1,e.G=0,e.B=0,e.A=0,this._channelColors.pushBack(e),e=new se,e.R=0,e.G=1,e.B=0,e.A=0,this._channelColors.pushBack(e),e=new se,e.R=0,e.G=0,e.B=1,e.A=0,this._channelColors.pushBack(e),e=new se,e.R=0,e.G=0,e.B=0,e.A=1,this._channelColors.pushBack(e)}release(){for(let e=0;e<this._clippingContextListForMask.getSize();e++)this._clippingContextListForMask.at(e)&&(this._clippingContextListForMask.at(e).release(),this._clippingContextListForMask.set(e,void 0)),this._clippingContextListForMask.set(e,null);this._clippingContextListForMask=null;for(let e=0;e<this._clippingContextListForDraw.getSize();e++)this._clippingContextListForDraw.set(e,null);this._clippingContextListForDraw=null,this._maskTexture&&(this.gl.deleteFramebuffer(this._maskTexture.texture),this._maskTexture=null);for(let e=0;e<this._channelColors.getSize();e++)this._channelColors.set(e,null);this._channelColors=null,this.gl.deleteTexture(this._colorBuffer),this._colorBuffer=null}initialize(e,t,i,s){for(let n=0;n<t;n++){if(s[n]<=0){this._clippingContextListForDraw.pushBack(null);continue}let o=this.findSameClip(i[n],s[n]);o==null&&(o=new Tr(this,i[n],s[n]),this._clippingContextListForMask.pushBack(o)),o.addClippedDrawable(n),this._clippingContextListForDraw.pushBack(o)}}setupClippingContext(e,t){this._currentFrameNo++;let i=0;for(let s=0;s<this._clippingContextListForMask.getSize();s++){let n=this._clippingContextListForMask.at(s);this.calcClippedDrawTotalBounds(e,n),n._isUsing&&i++}if(i>0){this.gl.viewport(0,0,this._clippingMaskBufferSize,this._clippingMaskBufferSize),this._maskRenderTexture=this.getMaskRenderTexture();let s=t.getMvpMatrix();t.preDraw(),this.setupLayoutBounds(i),this.gl.bindFramebuffer(this.gl.FRAMEBUFFER,this._maskRenderTexture),this.gl.clearColor(1,1,1,1),this.gl.clear(this.gl.COLOR_BUFFER_BIT);for(let n=0;n<this._clippingContextListForMask.getSize();n++){let o=this._clippingContextListForMask.at(n),a=o._allClippedDrawRect,l=o._layoutBounds,u=.05;this._tmpBoundsOnModel.setRect(a),this._tmpBoundsOnModel.expand(a.width*u,a.height*u);let c=l.width/this._tmpBoundsOnModel.width,m=l.height/this._tmpBoundsOnModel.height;this._tmpMatrix.loadIdentity(),this._tmpMatrix.translateRelative(-1,-1),this._tmpMatrix.scaleRelative(2,2),this._tmpMatrix.translateRelative(l.x,l.y),this._tmpMatrix.scaleRelative(c,m),this._tmpMatrix.translateRelative(-this._tmpBoundsOnModel.x,-this._tmpBoundsOnModel.y),this._tmpMatrixForMask.setMatrix(this._tmpMatrix.getArray()),this._tmpMatrix.loadIdentity(),this._tmpMatrix.translateRelative(l.x,l.y),this._tmpMatrix.scaleRelative(c,m),this._tmpMatrix.translateRelative(-this._tmpBoundsOnModel.x,-this._tmpBoundsOnModel.y),this._tmpMatrixForDraw.setMatrix(this._tmpMatrix.getArray()),o._matrixForMask.setMatrix(this._tmpMatrixForMask.getArray()),o._matrixForDraw.setMatrix(this._tmpMatrixForDraw.getArray());let h=o._clippingIdCount;for(let d=0;d<h;d++){let f=o._clippingIdList[d];!e.getDrawableDynamicFlagVertexPositionsDidChange(f)||(t.setIsCulling(e.getDrawableCulling(f)!=!1),t.setClippingContextBufferForMask(o),t.drawMesh(e.getDrawableTextureIndex(f),e.getDrawableVertexIndexCount(f),e.getDrawableVertexCount(f),e.getDrawableVertexIndices(f),e.getDrawableVertices(f),e.getDrawableVertexUvs(f),e.getMultiplyColor(f),e.getScreenColor(f),e.getDrawableOpacity(f),0,!1))}}this.gl.bindFramebuffer(this.gl.FRAMEBUFFER,Un),t.setClippingContextBufferForMask(null),this.gl.viewport(Pr[0],Pr[1],Pr[2],Pr[3])}}findSameClip(e,t){for(let i=0;i<this._clippingContextListForMask.getSize();i++){let s=this._clippingContextListForMask.at(i),n=s._clippingIdCount;if(n!=t)continue;let o=0;for(let a=0;a<n;a++){let l=s._clippingIdList[a];for(let u=0;u<n;u++)if(e[u]==l){o++;break}}if(o==n)return s}return null}setupLayoutBounds(e){let t=e/$n,i=e%$n;t=~~t,i=~~i;let s=0;for(let n=0;n<$n;n++){let o=t+(n<i?1:0);if(o!=0)if(o==1){let a=this._clippingContextListForMask.at(s++);a._layoutChannelNo=n,a._layoutBounds.x=0,a._layoutBounds.y=0,a._layoutBounds.width=1,a._layoutBounds.height=1}else if(o==2)for(let a=0;a<o;a++){let l=a%2;l=~~l;let u=this._clippingContextListForMask.at(s++);u._layoutChannelNo=n,u._layoutBounds.x=l*.5,u._layoutBounds.y=0,u._layoutBounds.width=.5,u._layoutBounds.height=1}else if(o<=4)for(let a=0;a<o;a++){let l=a%2,u=a/2;l=~~l,u=~~u;let c=this._clippingContextListForMask.at(s++);c._layoutChannelNo=n,c._layoutBounds.x=l*.5,c._layoutBounds.y=u*.5,c._layoutBounds.width=.5,c._layoutBounds.height=.5}else if(o<=9)for(let a=0;a<o;a++){let l=a%3,u=a/3;l=~~l,u=~~u;let c=this._clippingContextListForMask.at(s++);c._layoutChannelNo=n,c._layoutBounds.x=l/3,c._layoutBounds.y=u/3,c._layoutBounds.width=1/3,c._layoutBounds.height=1/3}else{Z("not supported mask count : {0}",o);for(let a=0;a<o;a++){let l=this._clippingContextListForMask.at(s++);l._layoutChannelNo=0,l._layoutBounds.x=0,l._layoutBounds.y=0,l._layoutBounds.width=1,l._layoutBounds.height=1}}}}getColorBuffer(){return this._colorBuffer}getClippingContextListForDraw(){return this._clippingContextListForDraw}setClippingMaskBufferSize(e){this._clippingMaskBufferSize=e}getClippingMaskBufferSize(){return this._clippingMaskBufferSize}_maskRenderTexture;_colorBuffer;_currentFrameNo;_channelColors;_maskTexture;_clippingContextListForMask;_clippingContextListForDraw;_clippingMaskBufferSize;_tmpMatrix;_tmpMatrixForMask;_tmpMatrixForDraw;_tmpBoundsOnModel;gl},Ir=class{constructor(e,t){this.frameNo=e,this.texture=t}frameNo;texture},Tr=class{constructor(e,t,i){this._owner=e,this._clippingIdList=t,this._clippingIdCount=i,this._allClippedDrawRect=new wt,this._layoutBounds=new wt,this._clippedDrawableIndexList=[],this._matrixForMask=new F,this._matrixForDraw=new F}release(){this._layoutBounds!=null&&(this._layoutBounds=null),this._allClippedDrawRect!=null&&(this._allClippedDrawRect=null),this._clippedDrawableIndexList!=null&&(this._clippedDrawableIndexList=null)}addClippedDrawable(e){this._clippedDrawableIndexList.push(e)}getClippingManager(){return this._owner}setGl(e){this._owner.setGL(e)}_isUsing;_clippingIdList;_clippingIdCount;_layoutChannelNo;_layoutBounds;_allClippedDrawRect;_matrixForMask;_matrixForDraw;_clippedDrawableIndexList;_owner},at=class{static getInstance(){return Wt==null&&(Wt=new at),Wt}static deleteInstance(){Wt&&(Wt.release(),Wt=null)}constructor(){this._shaderSets=new w}release(){this.releaseShaderProgram()}setupShaderProgram(e,t,i,s,n,o,a,l,u,c,m,h,d,f,g){d||Z("NoPremultipliedAlpha is not allowed"),this._shaderSets.getSize()==0&&this.generateShaders();let p,b,x,_;if(e.getClippingContextBufferForMask()!=null){let y=this._shaderSets.at(qt.ShaderNames_SetupMask);this.gl.useProgram(y.shaderProgram),this.gl.activeTexture(this.gl.TEXTURE0),this.gl.bindTexture(this.gl.TEXTURE_2D,t),this.gl.uniform1i(y.samplerTexture0Location,0),a.vertex==null&&(a.vertex=this.gl.createBuffer()),this.gl.bindBuffer(this.gl.ARRAY_BUFFER,a.vertex),this.gl.bufferData(this.gl.ARRAY_BUFFER,s,this.gl.DYNAMIC_DRAW),this.gl.enableVertexAttribArray(y.attributePositionLocation),this.gl.vertexAttribPointer(y.attributePositionLocation,2,this.gl.FLOAT,!1,0,0),a.uv==null&&(a.uv=this.gl.createBuffer()),this.gl.bindBuffer(this.gl.ARRAY_BUFFER,a.uv),this.gl.bufferData(this.gl.ARRAY_BUFFER,o,this.gl.DYNAMIC_DRAW),this.gl.enableVertexAttribArray(y.attributeTexCoordLocation),this.gl.vertexAttribPointer(y.attributeTexCoordLocation,2,this.gl.FLOAT,!1,0,0);let S=e.getClippingContextBufferForMask()._layoutChannelNo,C=e.getClippingContextBufferForMask().getClippingManager().getChannelFlagAsColor(S);this.gl.uniform4f(y.uniformChannelFlagLocation,C.R,C.G,C.B,C.A),this.gl.uniformMatrix4fv(y.uniformClipMatrixLocation,!1,e.getClippingContextBufferForMask()._matrixForMask.getArray());let A=e.getClippingContextBufferForMask()._layoutBounds;this.gl.uniform4f(y.uniformBaseColorLocation,A.x*2-1,A.y*2-1,A.getRight()*2-1,A.getBottom()*2-1),this.gl.uniform4f(y.uniformMultiplyColorLocation,m.R,m.G,m.B,m.A),this.gl.uniform4f(y.uniformScreenColorLocation,h.R,h.G,h.B,h.A),p=this.gl.ZERO,b=this.gl.ONE_MINUS_SRC_COLOR,x=this.gl.ZERO,_=this.gl.ONE_MINUS_SRC_ALPHA}else{let y=e.getClippingContextBufferForDraw()!=null,S=y?g?2:1:0,C=new Di;switch(u){case 0:default:C=this._shaderSets.at(qt.ShaderNames_NormalPremultipliedAlpha+S),p=this.gl.ONE,b=this.gl.ONE_MINUS_SRC_ALPHA,x=this.gl.ONE,_=this.gl.ONE_MINUS_SRC_ALPHA;break;case 1:C=this._shaderSets.at(qt.ShaderNames_AddPremultipliedAlpha+S),p=this.gl.ONE,b=this.gl.ONE,x=this.gl.ZERO,_=this.gl.ONE;break;case 2:C=this._shaderSets.at(qt.ShaderNames_MultPremultipliedAlpha+S),p=this.gl.DST_COLOR,b=this.gl.ONE_MINUS_SRC_ALPHA,x=this.gl.ZERO,_=this.gl.ONE;break}if(this.gl.useProgram(C.shaderProgram),a.vertex==null&&(a.vertex=this.gl.createBuffer()),this.gl.bindBuffer(this.gl.ARRAY_BUFFER,a.vertex),this.gl.bufferData(this.gl.ARRAY_BUFFER,s,this.gl.DYNAMIC_DRAW),this.gl.enableVertexAttribArray(C.attributePositionLocation),this.gl.vertexAttribPointer(C.attributePositionLocation,2,this.gl.FLOAT,!1,0,0),a.uv==null&&(a.uv=this.gl.createBuffer()),this.gl.bindBuffer(this.gl.ARRAY_BUFFER,a.uv),this.gl.bufferData(this.gl.ARRAY_BUFFER,o,this.gl.DYNAMIC_DRAW),this.gl.enableVertexAttribArray(C.attributeTexCoordLocation),this.gl.vertexAttribPointer(C.attributeTexCoordLocation,2,this.gl.FLOAT,!1,0,0),y){this.gl.activeTexture(this.gl.TEXTURE1);let A=e.getClippingContextBufferForDraw().getClippingManager().getColorBuffer();this.gl.bindTexture(this.gl.TEXTURE_2D,A),this.gl.uniform1i(C.samplerTexture1Location,1),this.gl.uniformMatrix4fv(C.uniformClipMatrixLocation,!1,e.getClippingContextBufferForDraw()._matrixForDraw.getArray());let k=e.getClippingContextBufferForDraw()._layoutChannelNo,G=e.getClippingContextBufferForDraw().getClippingManager().getChannelFlagAsColor(k);this.gl.uniform4f(C.uniformChannelFlagLocation,G.R,G.G,G.B,G.A)}this.gl.activeTexture(this.gl.TEXTURE0),this.gl.bindTexture(this.gl.TEXTURE_2D,t),this.gl.uniform1i(C.samplerTexture0Location,0),this.gl.uniformMatrix4fv(C.uniformMatrixLocation,!1,f.getArray()),this.gl.uniform4f(C.uniformBaseColorLocation,c.R,c.G,c.B,c.A),this.gl.uniform4f(C.uniformMultiplyColorLocation,m.R,m.G,m.B,m.A),this.gl.uniform4f(C.uniformScreenColorLocation,h.R,h.G,h.B,h.A)}a.index==null&&(a.index=this.gl.createBuffer()),this.gl.bindBuffer(this.gl.ELEMENT_ARRAY_BUFFER,a.index),this.gl.bufferData(this.gl.ELEMENT_ARRAY_BUFFER,n,this.gl.DYNAMIC_DRAW),this.gl.blendFuncSeparate(p,b,x,_)}releaseShaderProgram(){for(let e=0;e<this._shaderSets.getSize();e++)this.gl.deleteProgram(this._shaderSets.at(e).shaderProgram),this._shaderSets.at(e).shaderProgram=0,this._shaderSets.set(e,void 0),this._shaderSets.set(e,null)}generateShaders(){for(let e=0;e<Im;e++)this._shaderSets.pushBack(new Di);this._shaderSets.at(0).shaderProgram=this.loadShaderProgram(Tm,Bm),this._shaderSets.at(1).shaderProgram=this.loadShaderProgram(Vm,Am),this._shaderSets.at(2).shaderProgram=this.loadShaderProgram(La,Em),this._shaderSets.at(3).shaderProgram=this.loadShaderProgram(La,Lm),this._shaderSets.at(4).shaderProgram=this._shaderSets.at(1).shaderProgram,this._shaderSets.at(5).shaderProgram=this._shaderSets.at(2).shaderProgram,this._shaderSets.at(6).shaderProgram=this._shaderSets.at(3).shaderProgram,this._shaderSets.at(7).shaderProgram=this._shaderSets.at(1).shaderProgram,this._shaderSets.at(8).shaderProgram=this._shaderSets.at(2).shaderProgram,this._shaderSets.at(9).shaderProgram=this._shaderSets.at(3).shaderProgram,this._shaderSets.at(0).attributePositionLocation=this.gl.getAttribLocation(this._shaderSets.at(0).shaderProgram,"a_position"),this._shaderSets.at(0).attributeTexCoordLocation=this.gl.getAttribLocation(this._shaderSets.at(0).shaderProgram,"a_texCoord"),this._shaderSets.at(0).samplerTexture0Location=this.gl.getUniformLocation(this._shaderSets.at(0).shaderProgram,"s_texture0"),this._shaderSets.at(0).uniformClipMatrixLocation=this.gl.getUniformLocation(this._shaderSets.at(0).shaderProgram,"u_clipMatrix"),this._shaderSets.at(0).uniformChannelFlagLocation=this.gl.getUniformLocation(this._shaderSets.at(0).shaderProgram,"u_channelFlag"),this._shaderSets.at(0).uniformBaseColorLocation=this.gl.getUniformLocation(this._shaderSets.at(0).shaderProgram,"u_baseColor"),this._shaderSets.at(0).uniformMultiplyColorLocation=this.gl.getUniformLocation(this._shaderSets.at(0).shaderProgram,"u_multiplyColor"),this._shaderSets.at(0).uniformScreenColorLocation=this.gl.getUniformLocation(this._shaderSets.at(0).shaderProgram,"u_screenColor"),this._shaderSets.at(1).attributePositionLocation=this.gl.getAttribLocation(this._shaderSets.at(1).shaderProgram,"a_position"),this._shaderSets.at(1).attributeTexCoordLocation=this.gl.getAttribLocation(this._shaderSets.at(1).shaderProgram,"a_texCoord"),this._shaderSets.at(1).samplerTexture0Location=this.gl.getUniformLocation(this._shaderSets.at(1).shaderProgram,"s_texture0"),this._shaderSets.at(1).uniformMatrixLocation=this.gl.getUniformLocation(this._shaderSets.at(1).shaderProgram,"u_matrix"),this._shaderSets.at(1).uniformBaseColorLocation=this.gl.getUniformLocation(this._shaderSets.at(1).shaderProgram,"u_baseColor"),this._shaderSets.at(1).uniformMultiplyColorLocation=this.gl.getUniformLocation(this._shaderSets.at(1).shaderProgram,"u_multiplyColor"),this._shaderSets.at(1).uniformScreenColorLocation=this.gl.getUniformLocation(this._shaderSets.at(1).shaderProgram,"u_screenColor"),this._shaderSets.at(2).attributePositionLocation=this.gl.getAttribLocation(this._shaderSets.at(2).shaderProgram,"a_position"),this._shaderSets.at(2).attributeTexCoordLocation=this.gl.getAttribLocation(this._shaderSets.at(2).shaderProgram,"a_texCoord"),this._shaderSets.at(2).samplerTexture0Location=this.gl.getUniformLocation(this._shaderSets.at(2).shaderProgram,"s_texture0"),this._shaderSets.at(2).samplerTexture1Location=this.gl.getUniformLocation(this._shaderSets.at(2).shaderProgram,"s_texture1"),this._shaderSets.at(2).uniformMatrixLocation=this.gl.getUniformLocation(this._shaderSets.at(2).shaderProgram,"u_matrix"),this._shaderSets.at(2).uniformClipMatrixLocation=this.gl.getUniformLocation(this._shaderSets.at(2).shaderProgram,"u_clipMatrix"),this._shaderSets.at(2).uniformChannelFlagLocation=this.gl.getUniformLocation(this._shaderSets.at(2).shaderProgram,"u_channelFlag"),this._shaderSets.at(2).uniformBaseColorLocation=this.gl.getUniformLocation(this._shaderSets.at(2).shaderProgram,"u_baseColor"),this._shaderSets.at(2).uniformMultiplyColorLocation=this.gl.getUniformLocation(this._shaderSets.at(2).shaderProgram,"u_multiplyColor"),this._shaderSets.at(2).uniformScreenColorLocation=this.gl.getUniformLocation(this._shaderSets.at(2).shaderProgram,"u_screenColor"),this._shaderSets.at(3).attributePositionLocation=this.gl.getAttribLocation(this._shaderSets.at(3).shaderProgram,"a_position"),this._shaderSets.at(3).attributeTexCoordLocation=this.gl.getAttribLocation(this._shaderSets.at(3).shaderProgram,"a_texCoord"),this._shaderSets.at(3).samplerTexture0Location=this.gl.getUniformLocation(this._shaderSets.at(3).shaderProgram,"s_texture0"),this._shaderSets.at(3).samplerTexture1Location=this.gl.getUniformLocation(this._shaderSets.at(3).shaderProgram,"s_texture1"),this._shaderSets.at(3).uniformMatrixLocation=this.gl.getUniformLocation(this._shaderSets.at(3).shaderProgram,"u_matrix"),this._shaderSets.at(3).uniformClipMatrixLocation=this.gl.getUniformLocation(this._shaderSets.at(3).shaderProgram,"u_clipMatrix"),this._shaderSets.at(3).uniformChannelFlagLocation=this.gl.getUniformLocation(this._shaderSets.at(3).shaderProgram,"u_channelFlag"),this._shaderSets.at(3).uniformBaseColorLocation=this.gl.getUniformLocation(this._shaderSets.at(3).shaderProgram,"u_baseColor"),this._shaderSets.at(3).uniformMultiplyColorLocation=this.gl.getUniformLocation(this._shaderSets.at(3).shaderProgram,"u_multiplyColor"),this._shaderSets.at(3).uniformScreenColorLocation=this.gl.getUniformLocation(this._shaderSets.at(3).shaderProgram,"u_screenColor"),this._shaderSets.at(4).attributePositionLocation=this.gl.getAttribLocation(this._shaderSets.at(4).shaderProgram,"a_position"),this._shaderSets.at(4).attributeTexCoordLocation=this.gl.getAttribLocation(this._shaderSets.at(4).shaderProgram,"a_texCoord"),this._shaderSets.at(4).samplerTexture0Location=this.gl.getUniformLocation(this._shaderSets.at(4).shaderProgram,"s_texture0"),this._shaderSets.at(4).uniformMatrixLocation=this.gl.getUniformLocation(this._shaderSets.at(4).shaderProgram,"u_matrix"),this._shaderSets.at(4).uniformBaseColorLocation=this.gl.getUniformLocation(this._shaderSets.at(4).shaderProgram,"u_baseColor"),this._shaderSets.at(4).uniformMultiplyColorLocation=this.gl.getUniformLocation(this._shaderSets.at(4).shaderProgram,"u_multiplyColor"),this._shaderSets.at(4).uniformScreenColorLocation=this.gl.getUniformLocation(this._shaderSets.at(4).shaderProgram,"u_screenColor"),this._shaderSets.at(5).attributePositionLocation=this.gl.getAttribLocation(this._shaderSets.at(5).shaderProgram,"a_position"),this._shaderSets.at(5).attributeTexCoordLocation=this.gl.getAttribLocation(this._shaderSets.at(5).shaderProgram,"a_texCoord"),this._shaderSets.at(5).samplerTexture0Location=this.gl.getUniformLocation(this._shaderSets.at(5).shaderProgram,"s_texture0"),this._shaderSets.at(5).samplerTexture1Location=this.gl.getUniformLocation(this._shaderSets.at(5).shaderProgram,"s_texture1"),this._shaderSets.at(5).uniformMatrixLocation=this.gl.getUniformLocation(this._shaderSets.at(5).shaderProgram,"u_matrix"),this._shaderSets.at(5).uniformClipMatrixLocation=this.gl.getUniformLocation(this._shaderSets.at(5).shaderProgram,"u_clipMatrix"),this._shaderSets.at(5).uniformChannelFlagLocation=this.gl.getUniformLocation(this._shaderSets.at(5).shaderProgram,"u_channelFlag"),this._shaderSets.at(5).uniformBaseColorLocation=this.gl.getUniformLocation(this._shaderSets.at(5).shaderProgram,"u_baseColor"),this._shaderSets.at(5).uniformMultiplyColorLocation=this.gl.getUniformLocation(this._shaderSets.at(5).shaderProgram,"u_multiplyColor"),this._shaderSets.at(5).uniformScreenColorLocation=this.gl.getUniformLocation(this._shaderSets.at(5).shaderProgram,"u_screenColor"),this._shaderSets.at(6).attributePositionLocation=this.gl.getAttribLocation(this._shaderSets.at(6).shaderProgram,"a_position"),this._shaderSets.at(6).attributeTexCoordLocation=this.gl.getAttribLocation(this._shaderSets.at(6).shaderProgram,"a_texCoord"),this._shaderSets.at(6).samplerTexture0Location=this.gl.getUniformLocation(this._shaderSets.at(6).shaderProgram,"s_texture0"),this._shaderSets.at(6).samplerTexture1Location=this.gl.getUniformLocation(this._shaderSets.at(6).shaderProgram,"s_texture1"),this._shaderSets.at(6).uniformMatrixLocation=this.gl.getUniformLocation(this._shaderSets.at(6).shaderProgram,"u_matrix"),this._shaderSets.at(6).uniformClipMatrixLocation=this.gl.getUniformLocation(this._shaderSets.at(6).shaderProgram,"u_clipMatrix"),this._shaderSets.at(6).uniformChannelFlagLocation=this.gl.getUniformLocation(this._shaderSets.at(6).shaderProgram,"u_channelFlag"),this._shaderSets.at(6).uniformBaseColorLocation=this.gl.getUniformLocation(this._shaderSets.at(6).shaderProgram,"u_baseColor"),this._shaderSets.at(6).uniformMultiplyColorLocation=this.gl.getUniformLocation(this._shaderSets.at(6).shaderProgram,"u_multiplyColor"),this._shaderSets.at(6).uniformScreenColorLocation=this.gl.getUniformLocation(this._shaderSets.at(6).shaderProgram,"u_screenColor"),this._shaderSets.at(7).attributePositionLocation=this.gl.getAttribLocation(this._shaderSets.at(7).shaderProgram,"a_position"),this._shaderSets.at(7).attributeTexCoordLocation=this.gl.getAttribLocation(this._shaderSets.at(7).shaderProgram,"a_texCoord"),this._shaderSets.at(7).samplerTexture0Location=this.gl.getUniformLocation(this._shaderSets.at(7).shaderProgram,"s_texture0"),this._shaderSets.at(7).uniformMatrixLocation=this.gl.getUniformLocation(this._shaderSets.at(7).shaderProgram,"u_matrix"),this._shaderSets.at(7).uniformBaseColorLocation=this.gl.getUniformLocation(this._shaderSets.at(7).shaderProgram,"u_baseColor"),this._shaderSets.at(7).uniformMultiplyColorLocation=this.gl.getUniformLocation(this._shaderSets.at(7).shaderProgram,"u_multiplyColor"),this._shaderSets.at(7).uniformScreenColorLocation=this.gl.getUniformLocation(this._shaderSets.at(7).shaderProgram,"u_screenColor"),this._shaderSets.at(8).attributePositionLocation=this.gl.getAttribLocation(this._shaderSets.at(8).shaderProgram,"a_position"),this._shaderSets.at(8).attributeTexCoordLocation=this.gl.getAttribLocation(this._shaderSets.at(8).shaderProgram,"a_texCoord"),this._shaderSets.at(8).samplerTexture0Location=this.gl.getUniformLocation(this._shaderSets.at(8).shaderProgram,"s_texture0"),this._shaderSets.at(8).samplerTexture1Location=this.gl.getUniformLocation(this._shaderSets.at(8).shaderProgram,"s_texture1"),this._shaderSets.at(8).uniformMatrixLocation=this.gl.getUniformLocation(this._shaderSets.at(8).shaderProgram,"u_matrix"),this._shaderSets.at(8).uniformClipMatrixLocation=this.gl.getUniformLocation(this._shaderSets.at(8).shaderProgram,"u_clipMatrix"),this._shaderSets.at(8).uniformChannelFlagLocation=this.gl.getUniformLocation(this._shaderSets.at(8).shaderProgram,"u_channelFlag"),this._shaderSets.at(8).uniformBaseColorLocation=this.gl.getUniformLocation(this._shaderSets.at(8).shaderProgram,"u_baseColor"),this._shaderSets.at(8).uniformMultiplyColorLocation=this.gl.getUniformLocation(this._shaderSets.at(8).shaderProgram,"u_multiplyColor"),this._shaderSets.at(8).uniformScreenColorLocation=this.gl.getUniformLocation(this._shaderSets.at(8).shaderProgram,"u_screenColor"),this._shaderSets.at(9).attributePositionLocation=this.gl.getAttribLocation(this._shaderSets.at(9).shaderProgram,"a_position"),this._shaderSets.at(9).attributeTexCoordLocation=this.gl.getAttribLocation(this._shaderSets.at(9).shaderProgram,"a_texCoord"),this._shaderSets.at(9).samplerTexture0Location=this.gl.getUniformLocation(this._shaderSets.at(9).shaderProgram,"s_texture0"),this._shaderSets.at(9).samplerTexture1Location=this.gl.getUniformLocation(this._shaderSets.at(9).shaderProgram,"s_texture1"),this._shaderSets.at(9).uniformMatrixLocation=this.gl.getUniformLocation(this._shaderSets.at(9).shaderProgram,"u_matrix"),this._shaderSets.at(9).uniformClipMatrixLocation=this.gl.getUniformLocation(this._shaderSets.at(9).shaderProgram,"u_clipMatrix"),this._shaderSets.at(9).uniformChannelFlagLocation=this.gl.getUniformLocation(this._shaderSets.at(9).shaderProgram,"u_channelFlag"),this._shaderSets.at(9).uniformBaseColorLocation=this.gl.getUniformLocation(this._shaderSets.at(9).shaderProgram,"u_baseColor"),this._shaderSets.at(9).uniformMultiplyColorLocation=this.gl.getUniformLocation(this._shaderSets.at(9).shaderProgram,"u_multiplyColor"),this._shaderSets.at(9).uniformScreenColorLocation=this.gl.getUniformLocation(this._shaderSets.at(9).shaderProgram,"u_screenColor")}loadShaderProgram(e,t){let i=this.gl.createProgram(),s=this.compileShaderSource(this.gl.VERTEX_SHADER,e);if(!s)return Z("Vertex shader compile error!"),0;let n=this.compileShaderSource(this.gl.FRAGMENT_SHADER,t);return n?(this.gl.attachShader(i,s),this.gl.attachShader(i,n),this.gl.linkProgram(i),this.gl.getProgramParameter(i,this.gl.LINK_STATUS)?(this.gl.deleteShader(s),this.gl.deleteShader(n),i):(Z("Failed to link program: {0}",i),this.gl.deleteShader(s),s=0,this.gl.deleteShader(n),n=0,i&&(this.gl.deleteProgram(i),i=0),0)):(Z("Vertex shader compile error!"),0)}compileShaderSource(e,t){let i=t,s=this.gl.createShader(e);if(this.gl.shaderSource(s,i),this.gl.compileShader(s),!s){let o=this.gl.getShaderInfoLog(s);Z("Shader compile log: {0} ",o)}return this.gl.getShaderParameter(s,this.gl.COMPILE_STATUS)?s:(this.gl.deleteShader(s),null)}setGl(e){this.gl=e}_shaderSets;gl},Di=class{shaderProgram;attributePositionLocation;attributeTexCoordLocation;uniformMatrixLocation;uniformClipMatrixLocation;samplerTexture0Location;samplerTexture1Location;uniformBaseColorLocation;uniformChannelFlagLocation;uniformMultiplyColorLocation;uniformScreenColorLocation},qt=(c=>(c[c.ShaderNames_SetupMask=0]="ShaderNames_SetupMask",c[c.ShaderNames_NormalPremultipliedAlpha=1]="ShaderNames_NormalPremultipliedAlpha",c[c.ShaderNames_NormalMaskedPremultipliedAlpha=2]="ShaderNames_NormalMaskedPremultipliedAlpha",c[c.ShaderNames_NomralMaskedInvertedPremultipliedAlpha=3]="ShaderNames_NomralMaskedInvertedPremultipliedAlpha",c[c.ShaderNames_AddPremultipliedAlpha=4]="ShaderNames_AddPremultipliedAlpha",c[c.ShaderNames_AddMaskedPremultipliedAlpha=5]="ShaderNames_AddMaskedPremultipliedAlpha",c[c.ShaderNames_AddMaskedPremultipliedAlphaInverted=6]="ShaderNames_AddMaskedPremultipliedAlphaInverted",c[c.ShaderNames_MultPremultipliedAlpha=7]="ShaderNames_MultPremultipliedAlpha",c[c.ShaderNames_MultMaskedPremultipliedAlpha=8]="ShaderNames_MultMaskedPremultipliedAlpha",c[c.ShaderNames_MultMaskedPremultipliedAlphaInverted=9]="ShaderNames_MultMaskedPremultipliedAlphaInverted",c))(qt||{}),Tm="attribute vec4     a_position;attribute vec2     a_texCoord;varying vec2       v_texCoord;varying vec4       v_myPos;uniform mat4       u_clipMatrix;void main(){   gl_Position = u_clipMatrix * a_position;   v_myPos = u_clipMatrix * a_position;   v_texCoord = a_texCoord;   v_texCoord.y = 1.0 - v_texCoord.y;}",Bm="precision mediump float;varying vec2       v_texCoord;varying vec4       v_myPos;uniform vec4       u_baseColor;uniform vec4       u_channelFlag;uniform sampler2D  s_texture0;void main(){   float isInside =        step(u_baseColor.x, v_myPos.x/v_myPos.w)       * step(u_baseColor.y, v_myPos.y/v_myPos.w)       * step(v_myPos.x/v_myPos.w, u_baseColor.z)       * step(v_myPos.y/v_myPos.w, u_baseColor.w);   gl_FragColor = u_channelFlag * texture2D(s_texture0, v_texCoord).a * isInside;}",Vm="attribute vec4     a_position;attribute vec2     a_texCoord;varying vec2       v_texCoord;uniform mat4       u_matrix;void main(){   gl_Position = u_matrix * a_position;   v_texCoord = a_texCoord;   v_texCoord.y = 1.0 - v_texCoord.y;}",La="attribute vec4     a_position;attribute vec2     a_texCoord;varying vec2       v_texCoord;varying vec4       v_clipPos;uniform mat4       u_matrix;uniform mat4       u_clipMatrix;void main(){   gl_Position = u_matrix * a_position;   v_clipPos = u_clipMatrix * a_position;   v_texCoord = a_texCoord;   v_texCoord.y = 1.0 - v_texCoord.y;}",Am="precision mediump float;varying vec2       v_texCoord;uniform vec4       u_baseColor;uniform sampler2D  s_texture0;uniform vec4       u_multiplyColor;uniform vec4       u_screenColor;void main(){   vec4 texColor = texture2D(s_texture0, v_texCoord);   texColor.rgb = texColor.rgb * u_multiplyColor.rgb;   texColor.rgb = (texColor.rgb + u_screenColor.rgb * texColor.a) - (texColor.rgb * u_screenColor.rgb);   vec4 color = texColor * u_baseColor;   gl_FragColor = vec4(color.rgb, color.a);}",Em="precision mediump float;varying vec2       v_texCoord;varying vec4       v_clipPos;uniform vec4       u_baseColor;uniform vec4       u_channelFlag;uniform sampler2D  s_texture0;uniform sampler2D  s_texture1;uniform vec4       u_multiplyColor;uniform vec4       u_screenColor;void main(){   vec4 texColor = texture2D(s_texture0, v_texCoord);   texColor.rgb = texColor.rgb * u_multiplyColor.rgb;   texColor.rgb = (texColor.rgb + u_screenColor.rgb * texColor.a) - (texColor.rgb * u_screenColor.rgb);   vec4 col_formask = texColor * u_baseColor;   vec4 clipMask = (1.0 - texture2D(s_texture1, v_clipPos.xy / v_clipPos.w)) * u_channelFlag;   float maskVal = clipMask.r + clipMask.g + clipMask.b + clipMask.a;   col_formask = col_formask * maskVal;   gl_FragColor = col_formask;}",Lm="precision mediump float;varying vec2      v_texCoord;varying vec4      v_clipPos;uniform sampler2D s_texture0;uniform sampler2D s_texture1;uniform vec4      u_channelFlag;uniform vec4      u_baseColor;uniform vec4      u_multiplyColor;uniform vec4      u_screenColor;void main(){   vec4 texColor = texture2D(s_texture0, v_texCoord);   texColor.rgb = texColor.rgb * u_multiplyColor.rgb;   texColor.rgb = (texColor.rgb + u_screenColor.rgb * texColor.a) - (texColor.rgb * u_screenColor.rgb);   vec4 col_formask = texColor * u_baseColor;   vec4 clipMask = (1.0 - texture2D(s_texture1, v_clipPos.xy / v_clipPos.w)) * u_channelFlag;   float maskVal = clipMask.r + clipMask.g + clipMask.b + clipMask.a;   col_formask = col_formask * (1.0 - maskVal);   gl_FragColor = col_formask;}",Gt=class extends Oe{initialize(e){e.isUsingMasking()&&(this._clippingManager=new Ht,this._clippingManager.initialize(e,e.getDrawableCount(),e.getDrawableMasks(),e.getDrawableMaskCounts())),this._sortedDrawableIndexList.resize(e.getDrawableCount(),0),super.initialize(e)}bindTexture(e,t){this._textures.setValue(e,t)}getBindedTextures(){return this._textures}setClippingMaskBufferSize(e){this._clippingManager.release(),this._clippingManager=void 0,this._clippingManager=null,this._clippingManager=new Ht,this._clippingManager.setClippingMaskBufferSize(e),this._clippingManager.initialize(this.getModel(),this.getModel().getDrawableCount(),this.getModel().getDrawableMasks(),this.getModel().getDrawableMaskCounts())}getClippingMaskBufferSize(){return this._clippingManager.getClippingMaskBufferSize()}constructor(){super(),this._clippingContextBufferForMask=null,this._clippingContextBufferForDraw=null,this._clippingManager=new Ht,this.firstDraw=!0,this._textures=new H,this._sortedDrawableIndexList=new w,this._bufferData={vertex:WebGLBuffer=null,uv:WebGLBuffer=null,index:WebGLBuffer=null},this._textures.prepareCapacity(32,!0)}release(){this._clippingManager.release(),this._clippingManager=void 0,this._clippingManager=null,this.gl.deleteBuffer(this._bufferData.vertex),this._bufferData.vertex=null,this.gl.deleteBuffer(this._bufferData.uv),this._bufferData.uv=null,this.gl.deleteBuffer(this._bufferData.index),this._bufferData.index=null,this._bufferData=null,this._textures=null}doDrawModel(){this._clippingManager!=null&&(this.preDraw(),this._clippingManager.setupClippingContext(this.getModel(),this)),this.preDraw();let e=this.getModel().getDrawableCount(),t=this.getModel().getDrawableRenderOrders();for(let i=0;i<e;++i){let s=t[i];this._sortedDrawableIndexList.set(s,i)}for(let i=0;i<e;++i){let s=this._sortedDrawableIndexList.at(i);!this.getModel().getDrawableDynamicFlagIsVisible(s)||(this.setClippingContextBufferForDraw(this._clippingManager!=null?this._clippingManager.getClippingContextListForDraw().at(s):null),this.setIsCulling(this.getModel().getDrawableCulling(s)),this.drawMesh(this.getModel().getDrawableTextureIndex(s),this.getModel().getDrawableVertexIndexCount(s),this.getModel().getDrawableVertexCount(s),this.getModel().getDrawableVertexIndices(s),this.getModel().getDrawableVertices(s),this.getModel().getDrawableVertexUvs(s),this.getModel().getMultiplyColor(s),this.getModel().getScreenColor(s),this.getModel().getDrawableOpacity(s),this.getModel().getDrawableBlendMode(s),this.getModel().getDrawableInvertedMaskBit(s)))}}drawMesh(e,t,i,s,n,o,a,l,u,c,m){this.isCulling()?this.gl.enable(this.gl.CULL_FACE):this.gl.disable(this.gl.CULL_FACE),this.gl.frontFace(this.gl.CCW);let h=this.getModelColor();this.getClippingContextBufferForMask()==null&&(h.A*=u,this.isPremultipliedAlpha()&&(h.R*=h.A,h.G*=h.A,h.B*=h.A));let d;this._textures.getValue(e)!=null?d=this._textures.getValue(e):d=null,at.getInstance().setupShaderProgram(this,d,i,n,s,o,this._bufferData,u,c,h,a,l,this.isPremultipliedAlpha(),this.getMvpMatrix(),m),this.gl.drawElements(this.gl.TRIANGLES,t,this.gl.UNSIGNED_SHORT,0),this.gl.useProgram(null),this.setClippingContextBufferForDraw(null),this.setClippingContextBufferForMask(null)}static doStaticRelease(){at.deleteInstance()}setRenderState(e,t){Un=e,Pr=t}preDraw(){if(this.firstDraw&&(this.firstDraw=!1),this.gl.disable(this.gl.SCISSOR_TEST),this.gl.disable(this.gl.STENCIL_TEST),this.gl.disable(this.gl.DEPTH_TEST),this.gl.frontFace(this.gl.CW),this.gl.enable(this.gl.BLEND),this.gl.colorMask(!0,!0,!0,!0),this.gl.bindBuffer(this.gl.ARRAY_BUFFER,null),this.gl.bindBuffer(this.gl.ELEMENT_ARRAY_BUFFER,null),this.getAnisotropy()>0&&this._extension)for(let e=0;e<this._textures.getSize();++e)this.gl.bindTexture(this.gl.TEXTURE_2D,this._textures.getValue(e)),this.gl.texParameterf(this.gl.TEXTURE_2D,this._extension.TEXTURE_MAX_ANISOTROPY_EXT,this.getAnisotropy())}setClippingContextBufferForMask(e){this._clippingContextBufferForMask=e}getClippingContextBufferForMask(){return this._clippingContextBufferForMask}setClippingContextBufferForDraw(e){this._clippingContextBufferForDraw=e}getClippingContextBufferForDraw(){return this._clippingContextBufferForDraw}startUp(e){this.gl=e,this._clippingManager.setGL(e),at.getInstance().setGl(e),this._extension=this.gl.getExtension("EXT_texture_filter_anisotropic")||this.gl.getExtension("WEBKIT_EXT_texture_filter_anisotropic")||this.gl.getExtension("MOZ_EXT_texture_filter_anisotropic")}_textures;_sortedDrawableIndexList;_clippingManager;_clippingContextBufferForMask;_clippingContextBufferForDraw;firstDraw;_bufferData;_extension;gl};Oe.staticRelease=()=>{Gt.doStaticRelease()};var Rm;(a=>(a.CubismClippingContext=Tr,a.CubismClippingManager_WebGL=Ht,a.CubismRenderTextureResource=Ir,a.CubismRenderer_WebGL=Gt,a.CubismShaderSet=Di,a.CubismShader_WebGL=at,a.ShaderNames=qt))(Rm||={});var ks=class{isOverwritten=!1;Color=new se},$i=class{update(){this._model.update(),this._model.drawables.resetDynamicFlags()}getCanvasWidth(){return this._model==null?0:this._model.canvasinfo.CanvasWidth/this._model.canvasinfo.PixelsPerUnit}getCanvasHeight(){return this._model==null?0:this._model.canvasinfo.CanvasHeight/this._model.canvasinfo.PixelsPerUnit}saveParameters(){let e=this._model.parameters.count,t=this._savedParameters.getSize();for(let i=0;i<e;++i)i<t?this._savedParameters.set(i,this._parameterValues[i]):this._savedParameters.pushBack(this._parameterValues[i])}getMultiplyColor(e){return this.getOverwriteFlagForModelMultiplyColors()||this.getOverwriteFlagForDrawableMultiplyColors(e)?this._userMultiplyColors.at(e).Color:this.getDrawableMultiplyColor(e)}getScreenColor(e){return this.getOverwriteFlagForModelScreenColors()||this.getOverwriteFlagForDrawableScreenColors(e)?this._userScreenColors.at(e).Color:this.getDrawableScreenColor(e)}setMultiplyColorByTextureColor(e,t){this.setMultiplyColorByRGBA(e,t.R,t.G,t.B,t.A)}setMultiplyColorByRGBA(e,t,i,s,n=1){this._userMultiplyColors.at(e).Color.R=t,this._userMultiplyColors.at(e).Color.G=i,this._userMultiplyColors.at(e).Color.B=s,this._userMultiplyColors.at(e).Color.A=n}setScreenColorByTextureColor(e,t){this.setScreenColorByRGBA(e,t.R,t.G,t.B,t.A)}setScreenColorByRGBA(e,t,i,s,n=1){this._userScreenColors.at(e).Color.R=t,this._userScreenColors.at(e).Color.G=i,this._userScreenColors.at(e).Color.B=s,this._userScreenColors.at(e).Color.A=n}getOverwriteFlagForModelMultiplyColors(){return this._isOverwrittenModelMultiplyColors}getOverwriteFlagForModelScreenColors(){return this._isOverwrittenModelScreenColors}setOverwriteFlagForModelMultiplyColors(e){this._isOverwrittenModelMultiplyColors=e}setOverwriteFlagForModelScreenColors(e){this._isOverwrittenModelScreenColors=e}getOverwriteFlagForDrawableMultiplyColors(e){return this._userMultiplyColors.at(e).isOverwritten}getOverwriteFlagForDrawableScreenColors(e){return this._userMultiplyColors.at(e).isOverwritten}setOverwriteFlagForDrawableMultiplyColors(e,t){this._userMultiplyColors.at(e).isOverwritten=t}setOverwriteFlagForDrawableScreenColors(e,t){this._userScreenColors.at(e).isOverwritten=t}getModel(){return this._model}getPartIndex(e){let t,i=this._model.parts.count;for(t=0;t<i;++t)if(e==this._partIds.at(t))return t;return this._notExistPartId.isExist(e)?this._notExistPartId.getValue(e):(t=i+this._notExistPartId.getSize(),this._notExistPartId.setValue(e,t),this._notExistPartOpacities.appendKey(t),t)}getPartCount(){return this._model.parts.count}setPartOpacityByIndex(e,t){if(this._notExistPartOpacities.isExist(e)){this._notExistPartOpacities.setValue(e,t);return}ee(0<=e&&e<this.getPartCount()),this._partOpacities[e]=t}setPartOpacityById(e,t){let i=this.getPartIndex(e);i<0||this.setPartOpacityByIndex(i,t)}getPartOpacityByIndex(e){return this._notExistPartOpacities.isExist(e)?this._notExistPartOpacities.getValue(e):(ee(0<=e&&e<this.getPartCount()),this._partOpacities[e])}getPartOpacityById(e){let t=this.getPartIndex(e);return t<0?0:this.getPartOpacityByIndex(t)}getParameterIndex(e){let t,i=this._model.parameters.count;for(t=0;t<i;++t)if(e==this._parameterIds.at(t))return t;return this._notExistParameterId.isExist(e)?this._notExistParameterId.getValue(e):(t=this._model.parameters.count+this._notExistParameterId.getSize(),this._notExistParameterId.setValue(e,t),this._notExistParameterValues.appendKey(t),t)}getParameterCount(){return this._model.parameters.count}getParameterType(e){return this._model.parameters.types[e]}getParameterMaximumValue(e){return this._model.parameters.maximumValues[e]}getParameterMinimumValue(e){return this._model.parameters.minimumValues[e]}getParameterDefaultValue(e){return this._model.parameters.defaultValues[e]}getParameterValueByIndex(e){return this._notExistParameterValues.isExist(e)?this._notExistParameterValues.getValue(e):(ee(0<=e&&e<this.getParameterCount()),this._parameterValues[e])}getParameterValueById(e){let t=this.getParameterIndex(e);return this.getParameterValueByIndex(t)}setParameterValueByIndex(e,t,i=1){if(this._notExistParameterValues.isExist(e)){this._notExistParameterValues.setValue(e,i==1?t:this._notExistParameterValues.getValue(e)*(1-i)+t*i);return}ee(0<=e&&e<this.getParameterCount()),this._model.parameters.maximumValues[e]<t&&(t=this._model.parameters.maximumValues[e]),this._model.parameters.minimumValues[e]>t&&(t=this._model.parameters.minimumValues[e]),this._parameterValues[e]=i==1?t:this._parameterValues[e]=this._parameterValues[e]*(1-i)+t*i}setParameterValueById(e,t,i=1){let s=this.getParameterIndex(e);this.setParameterValueByIndex(s,t,i)}addParameterValueByIndex(e,t,i=1){this.setParameterValueByIndex(e,this.getParameterValueByIndex(e)+t*i)}addParameterValueById(e,t,i=1){let s=this.getParameterIndex(e);this.addParameterValueByIndex(s,t,i)}multiplyParameterValueById(e,t,i=1){let s=this.getParameterIndex(e);this.multiplyParameterValueByIndex(s,t,i)}multiplyParameterValueByIndex(e,t,i=1){this.setParameterValueByIndex(e,this.getParameterValueByIndex(e)*(1+(t-1)*i))}getDrawableIndex(e){let t=this._model.drawables.count;for(let i=0;i<t;++i)if(this._drawableIds.at(i)==e)return i;return-1}getDrawableCount(){return this._model.drawables.count}getDrawableId(e){let t=this._model.drawables.ids;return V.getIdManager().getId(t[e])}getDrawableRenderOrders(){return this._model.drawables.renderOrders}getDrawableTextureIndices(e){return this.getDrawableTextureIndex(e)}getDrawableTextureIndex(e){return this._model.drawables.textureIndices[e]}getDrawableDynamicFlagVertexPositionsDidChange(e){let t=this._model.drawables.dynamicFlags;return Live2DCubismCore.Utils.hasVertexPositionsDidChangeBit(t[e])}getDrawableVertexIndexCount(e){return this._model.drawables.indexCounts[e]}getDrawableVertexCount(e){return this._model.drawables.vertexCounts[e]}getDrawableVertices(e){return this.getDrawableVertexPositions(e)}getDrawableVertexIndices(e){return this._model.drawables.indices[e]}getDrawableVertexPositions(e){return this._model.drawables.vertexPositions[e]}getDrawableVertexUvs(e){return this._model.drawables.vertexUvs[e]}getDrawableOpacity(e){return this._model.drawables.opacities[e]}getDrawableMultiplyColor(e){let t=this._model.drawables.multiplyColors,i=e*4,s=new se;return s.R=t[i],s.G=t[i+1],s.B=t[i+2],s.A=t[i+3],s}getDrawableScreenColor(e){let t=this._model.drawables.screenColors,i=e*4,s=new se;return s.R=t[i],s.G=t[i+1],s.B=t[i+2],s.A=t[i+3],s}getDrawableParentPartIndex(e){return this._model.drawables.parentPartIndices[e]}getDrawableCulling(e){let t=this._model.drawables.constantFlags;return!Live2DCubismCore.Utils.hasIsDoubleSidedBit(t[e])}getDrawableBlendMode(e){let t=this._model.drawables.constantFlags;return Live2DCubismCore.Utils.hasBlendAdditiveBit(t[e])?1:Live2DCubismCore.Utils.hasBlendMultiplicativeBit(t[e])?2:0}getDrawableInvertedMaskBit(e){let t=this._model.drawables.constantFlags;return Live2DCubismCore.Utils.hasIsInvertedMaskBit(t[e])}getDrawableMasks(){return this._model.drawables.masks}getDrawableMaskCounts(){return this._model.drawables.maskCounts}isUsingMasking(){for(let e=0;e<this._model.drawables.count;++e)if(!(this._model.drawables.maskCounts[e]<=0))return!0;return!1}getDrawableDynamicFlagIsVisible(e){let t=this._model.drawables.dynamicFlags;return Live2DCubismCore.Utils.hasIsVisibleBit(t[e])}getDrawableDynamicFlagVisibilityDidChange(e){let t=this._model.drawables.dynamicFlags;return Live2DCubismCore.Utils.hasVisibilityDidChangeBit(t[e])}getDrawableDynamicFlagOpacityDidChange(e){let t=this._model.drawables.dynamicFlags;return Live2DCubismCore.Utils.hasOpacityDidChangeBit(t[e])}getDrawableDynamicFlagRenderOrderDidChange(e){let t=this._model.drawables.dynamicFlags;return Live2DCubismCore.Utils.hasRenderOrderDidChangeBit(t[e])}getDrawableDynamicFlagBlendColorDidChange(e){let t=this._model.drawables.dynamicFlags;return Live2DCubismCore.Utils.hasBlendColorDidChangeBit(t[e])}loadParameters(){let e=this._model.parameters.count,t=this._savedParameters.getSize();e>t&&(e=t);for(let i=0;i<e;++i)this._parameterValues[i]=this._savedParameters.at(i)}initialize(){ee(this._model),this._parameterValues=this._model.parameters.values,this._partOpacities=this._model.parts.opacities,this._parameterMaximumValues=this._model.parameters.maximumValues,this._parameterMinimumValues=this._model.parameters.minimumValues;{let e=this._model.parameters.ids,t=this._model.parameters.count;this._parameterIds.prepareCapacity(t);for(let i=0;i<t;++i)this._parameterIds.pushBack(V.getIdManager().getId(e[i]))}{let e=this._model.parts.ids,t=this._model.parts.count;this._partIds.prepareCapacity(t);for(let i=0;i<t;++i)this._partIds.pushBack(V.getIdManager().getId(e[i]))}{let e=this._model.drawables.ids,t=this._model.drawables.count;this._userMultiplyColors=new w,this._userMultiplyColors.updateSize(t,ks,!0),this._userScreenColors=new w,this._userScreenColors.updateSize(t,ks,!0),this._drawableIds.prepareCapacity(t);for(let i=0;i<t;++i)this._drawableIds.pushBack(V.getIdManager().getId(e[i])),this.setMultiplyColorByRGBA(i,1,1,1,1),this.setScreenColorByRGBA(i,0,0,0,1)}}constructor(e){this._model=e,this._parameterValues=null,this._parameterMaximumValues=null,this._parameterMinimumValues=null,this._partOpacities=null,this._savedParameters=new w,this._parameterIds=new w,this._drawableIds=new w,this._partIds=new w,this._isOverwrittenModelMultiplyColors=!1,this._isOverwrittenModelScreenColors=!1,this._userMultiplyColors=null,this._userScreenColors=null,this._notExistPartId=new H,this._notExistParameterId=new H,this._notExistParameterValues=new H,this._notExistPartOpacities=new H}release(){this._model.release(),this._model=null}_notExistPartOpacities;_notExistPartId;_notExistParameterValues;_notExistParameterId;_savedParameters;_isOverwrittenModelMultiplyColors;_isOverwrittenModelScreenColors;_userMultiplyColors;_userScreenColors;_model;_parameterValues;_parameterMaximumValues;_parameterMinimumValues;_partOpacities;_parameterIds;_partIds;_drawableIds},Fm;(e=>e.CubismModel=$i)(Fm||={});var Pt=class{static create(e){let t=null,i=Live2DCubismCore.Moc.fromArrayBuffer(e);return i&&(t=new Pt(i),t._mocVersion=Live2DCubismCore.Version.csmGetMocVersion(i,e)),t}static delete(e){e._moc._release(),e._moc=null,e=null}createModel(){let e=null,t=Live2DCubismCore.Model.fromMoc(this._moc);return t&&(e=new $i(t),e.initialize(),++this._modelCount),e}deleteModel(e){e!=null&&(e.release(),e=null,--this._modelCount)}constructor(e){this._moc=e,this._modelCount=0,this._mocVersion=0}release(){ee(this._modelCount==0),this._moc._release(),this._moc=null}getLatestMocVersion(){return Live2DCubismCore.Version.csmGetLatestMocVersion()}getMocVersion(){return this._mocVersion}_moc;_modelCount;_mocVersion},Om;(e=>e.CubismMoc=Pt)(Om||={});var Ra="Meta",$m="UserDataCount",Um="TotalUserDataSize",zn="UserData",zm="Target",jm="Id",Wm="Value",Ui=class{constructor(e,t){this._json=O.create(e,t)}release(){O.delete(this._json)}getUserDataCount(){return this._json.getRoot().getValueByString(Ra).getValueByString($m).toInt()}getTotalUserDataSize(){return this._json.getRoot().getValueByString(Ra).getValueByString(Um).toInt()}getUserDataTargetType(e){return this._json.getRoot().getValueByString(zn).getValueByIndex(e).getValueByString(zm).getRawString()}getUserDataId(e){return V.getIdManager().getId(this._json.getRoot().getValueByString(zn).getValueByIndex(e).getValueByString(jm).getRawString())}getUserDataValue(e){return this._json.getRoot().getValueByString(zn).getValueByIndex(e).getValueByString(Wm).getRawString()}_json},qm;(e=>e.CubismModelUserDataJson=Ui)(qm||={});var Gm="ArtMesh",Br=class{targetType;targetId;value},lt=class{static create(e,t){let i=new lt;return i.parseUserData(e,t),i}static delete(e){e!=null&&(e.release(),e=null)}getArtMeshUserDatas(){return this._artMeshUserDataNode}parseUserData(e,t){let i=new Ui(e,t),s=V.getIdManager().getId(Gm),n=i.getUserDataCount();for(let o=0;o<n;o++){let a=new Br;a.targetId=i.getUserDataId(o),a.targetType=V.getIdManager().getId(i.getUserDataTargetType(o)),a.value=new j(i.getUserDataValue(o)),this._userDataNodes.pushBack(a),a.targetType==s&&this._artMeshUserDataNode.pushBack(a)}i.release(),i=void 0}constructor(){this._userDataNodes=new w,this._artMeshUserDataNode=new w}release(){for(let e=0;e<this._userDataNodes.getSize();++e)this._userDataNodes.set(e,null);this._userDataNodes=null}_userDataNodes;_artMeshUserDataNode},Ym;(t=>(t.CubismModelUserData=lt,t.CubismModelUserDataNode=Br))(Ym||={});var It=class{isInitialized(){return this._initialized}setInitialized(e){this._initialized=e}isUpdating(){return this._updating}setUpdating(e){this._updating=e}setDragging(e,t){this._dragManager.set(e,t)}setAcceleration(e,t,i){this._accelerationX=e,this._accelerationY=t,this._accelerationZ=i}getModelMatrix(){return this._modelMatrix}setOpacity(e){this._opacity=e}getOpacity(){return this._opacity}loadModel(e){if(this._moc=Pt.create(e),this._moc==null){Z("Failed to CubismMoc.create().");return}if(this._model=this._moc.createModel(),this._model==null){Z("Failed to CreateModel().");return}this._model.saveParameters(),this._modelMatrix=new Ci(this._model.getCanvasWidth(),this._model.getCanvasHeight())}loadMotion=(e,t,i,s)=>He.create(e,t,s);loadExpression(e,t,i){return vt.create(e,t)}loadPose(e,t){this._pose=st.create(e,t)}loadUserData(e,t){this._modelUserData=lt.create(e,t)}loadPhysics(e,t){this._physics=ot.create(e,t)}isHit(e,t,i){let s=this._model.getDrawableIndex(e);if(s<0)return!1;let n=this._model.getDrawableVertexCount(s),o=this._model.getDrawableVertices(s),a=o[0],l=o[0],u=o[1],c=o[1];for(let d=1;d<n;++d){let f=o[Ie.vertexOffset+d*Ie.vertexStep],g=o[Ie.vertexOffset+d*Ie.vertexStep+1];f<a&&(a=f),f>l&&(l=f),g<u&&(u=g),g>c&&(c=g)}let m=this._modelMatrix.invertTransformX(t),h=this._modelMatrix.invertTransformY(i);return a<=m&&m<=l&&u<=h&&h<=c}getModel(){return this._model}getRenderer(){return this._renderer}createRenderer(){this._renderer&&this.deleteRenderer(),this._renderer=new Gt,this._renderer.initialize(this._model)}deleteRenderer(){this._renderer!=null&&(this._renderer.release(),this._renderer=null)}motionEventFired(e){ae("{0}",e.s)}static cubismDefaultMotionEventCallback(e,t,i){let s=i;s?.motionEventFired(t)}constructor(){this._moc=null,this._model=null,this._motionManager=null,this._expressionManager=null,this._eyeBlink=null,this._breath=null,this._modelMatrix=null,this._pose=null,this._dragManager=null,this._physics=null,this._modelUserData=null,this._initialized=!1,this._updating=!1,this._opacity=1,this._lipsync=!0,this._lastLipSyncValue=0,this._dragX=0,this._dragY=0,this._accelerationX=0,this._accelerationY=0,this._accelerationZ=0,this._debugMode=!1,this._renderer=null,this._motionManager=new Ut,this._motionManager.setEventCallback(It.cubismDefaultMotionEventCallback,this),this._expressionManager=new Ut,this._dragManager=new xi}release(){this._motionManager!=null&&(this._motionManager.release(),this._motionManager=null),this._expressionManager!=null&&(this._expressionManager.release(),this._expressionManager=null),this._moc!=null&&(this._moc.deleteModel(this._model),this._moc.release(),this._moc=null),this._modelMatrix=null,st.delete(this._pose),rt.delete(this._eyeBlink),je.delete(this._breath),this._dragManager=null,ot.delete(this._physics),lt.delete(this._modelUserData),this.deleteRenderer()}_moc;_model;_motionManager;_expressionManager;_eyeBlink;_breath;_modelMatrix;_pose;_dragManager;_physics;_modelUserData;_initialized;_updating;_opacity;_lipsync;_lastLipSyncValue;_dragX;_dragY;_accelerationX;_accelerationY;_accelerationZ;_debugMode;_renderer},Xm;(e=>e.CubismUserModel=It)(Xm||={});var ue=Uint8Array,Yt=Uint16Array,Na=Uint32Array,Fa=new ue([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),ka=new ue([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),Qm=new ue([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),Oa=function(r,e){for(var t=new Yt(31),i=0;i<31;++i)t[i]=e+=1<<r[i-1];for(var s=new Na(t[30]),i=1;i<30;++i)for(var n=t[i];n<t[i+1];++n)s[n]=n-t[i]<<5|i;return[t,s]},Da=Oa(Fa,2),$a=Da[0],Zm=Da[1];$a[28]=258,Zm[258]=28;var Ua=Oa(ka,0),eh=Ua[0],P0=Ua[1],Hn=new Yt(32768);for(N=0;N<32768;++N)ut=(N&43690)>>>1|(N&21845)<<1,ut=(ut&52428)>>>2|(ut&13107)<<2,ut=(ut&61680)>>>4|(ut&3855)<<4,Hn[N]=((ut&65280)>>>8|(ut&255)<<8)>>>1;var ut,N,Vr=function(r,e,t){for(var i=r.length,s=0,n=new Yt(e);s<i;++s)r[s]&&++n[r[s]-1];var o=new Yt(e);for(s=0;s<e;++s)o[s]=o[s-1]+n[s-1]<<1;var a;if(t){a=new Yt(1<<e);var l=15-e;for(s=0;s<i;++s)if(r[s])for(var u=s<<4|r[s],c=e-r[s],m=o[r[s]-1]++<<c,h=m|(1<<c)-1;m<=h;++m)a[Hn[m]>>>l]=u}else for(a=new Yt(i),s=0;s<i;++s)r[s]&&(a[s]=Hn[o[r[s]-1]++]>>>15-r[s]);return a},Ar=new ue(288);for(N=0;N<144;++N)Ar[N]=8;var N;for(N=144;N<256;++N)Ar[N]=9;var N;for(N=256;N<280;++N)Ar[N]=7;var N;for(N=280;N<288;++N)Ar[N]=8;var N,za=new ue(32);for(N=0;N<32;++N)za[N]=5;var N;var th=Vr(Ar,9,1);var ih=Vr(za,5,1),jn=function(r){for(var e=r[0],t=1;t<r.length;++t)r[t]>e&&(e=r[t]);return e},Te=function(r,e,t){var i=e/8|0;return(r[i]|r[i+1]<<8)>>(e&7)&t},Wn=function(r,e){var t=e/8|0;return(r[t]|r[t+1]<<8|r[t+2]<<16)>>(e&7)},rh=function(r){return(r+7)/8|0},Yn=function(r,e,t){(e==null||e<0)&&(e=0),(t==null||t>r.length)&&(t=r.length);var i=new(r.BYTES_PER_ELEMENT==2?Yt:r.BYTES_PER_ELEMENT==4?Na:ue)(t-e);return i.set(r.subarray(e,t)),i};var sh=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],Be=function(r,e,t){var i=new Error(e||sh[r]);if(i.code=r,Error.captureStackTrace&&Error.captureStackTrace(i,Be),!t)throw i;return i},nh=function(r,e,t){var i=r.length;if(!i||t&&t.f&&!t.l)return e||new ue(0);var s=!e||t,n=!t||t.i;t||(t={}),e||(e=new ue(i*3));var o=function(zs){var js=e.length;if(zs>js){var Ws=new ue(Math.max(js*2,zs));Ws.set(e),e=Ws}},a=t.f||0,l=t.p||0,u=t.b||0,c=t.l,m=t.d,h=t.m,d=t.n,f=i*8;do{if(!c){a=Te(r,l,1);var g=Te(r,l+1,3);if(l+=3,g)if(g==1)c=th,m=ih,h=9,d=5;else if(g==2){var _=Te(r,l,31)+257,y=Te(r,l+10,15)+4,S=_+Te(r,l+5,31)+1;l+=14;for(var C=new ue(S),A=new ue(19),k=0;k<y;++k)A[Qm[k]]=Te(r,l+k*3,7);l+=y*3;for(var G=jn(A),z=(1<<G)-1,ji=Vr(A,G,1),k=0;k<S;){var Xt=ji[Te(r,l,z)];l+=Xt&15;var p=Xt>>>4;if(p<16)C[k++]=p;else{var Ye=0,Wi=0;for(p==16?(Wi=3+Te(r,l,3),l+=2,Ye=C[k-1]):p==17?(Wi=3+Te(r,l,7),l+=3):p==18&&(Wi=11+Te(r,l,127),l+=7);Wi--;)C[k++]=Ye}}var Ds=C.subarray(0,_),Ke=C.subarray(_);h=jn(Ds),d=jn(Ke),c=Vr(Ds,h,1),m=Vr(Ke,d,1)}else Be(1);else{var p=rh(l)+4,b=r[p-4]|r[p-3]<<8,x=p+b;if(x>i){n&&Be(0);break}s&&o(u+b),e.set(r.subarray(p,x),u),t.b=u+=b,t.p=l=x*8,t.f=a;continue}if(l>f){n&&Be(0);break}}s&&o(u+131072);for(var Kn=(1<<h)-1,Xn=(1<<d)-1,Er=l;;Er=l){var Ye=c[Wn(r,l)&Kn],Tt=Ye>>>4;if(l+=Ye&15,l>f){n&&Be(0);break}if(Ye||Be(2),Tt<256)e[u++]=Tt;else if(Tt==256){Er=l,c=null;break}else{var $s=Tt-254;if(Tt>264){var k=Tt-257,Jt=Fa[k];$s=Te(r,l,(1<<Jt)-1)+$a[k],l+=Jt}var Lr=m[Wn(r,l)&Xn],Rr=Lr>>>4;Lr||Be(3),l+=Lr&15;var Ke=eh[Rr];if(Rr>3){var Jt=ka[Rr];Ke+=Wn(r,l)&(1<<Jt)-1,l+=Jt}if(l>f){n&&Be(0);break}s&&o(u+131072);for(var Us=u+$s;u<Us;u+=4)e[u]=e[u-Ke],e[u+1]=e[u+1-Ke],e[u+2]=e[u+2-Ke],e[u+3]=e[u+3-Ke];u=Us}}t.l=c,t.p=Er,t.b=u,t.f=a,c&&(a=1,t.m=h,t.d=m,t.n=d)}while(!a);return u==e.length?e:Yn(e,0,u)};var oh=new ue(0);var Ge=function(r,e){return r[e]|r[e+1]<<8},Ve=function(r,e){return(r[e]|r[e+1]<<8|r[e+2]<<16|r[e+3]<<24)>>>0},qn=function(r,e){return Ve(r,e)+Ve(r,e+4)*4294967296};function ah(r,e){return nh(r,e)}var Gn=typeof TextDecoder<"u"&&new TextDecoder,lh=0;try{Gn.decode(oh,{stream:!0}),lh=1}catch{}var uh=function(r){for(var e="",t=0;;){var i=r[t++],s=(i>127)+(i>223)+(i>239);if(t+s>r.length)return[e,Yn(r,t-1)];s?s==3?(i=((i&15)<<18|(r[t++]&63)<<12|(r[t++]&63)<<6|r[t++]&63)-65536,e+=String.fromCharCode(55296|i>>10,56320|i&1023)):s&1?e+=String.fromCharCode((i&31)<<6|r[t++]&63):e+=String.fromCharCode((i&15)<<12|(r[t++]&63)<<6|r[t++]&63):e+=String.fromCharCode(i)}};function ch(r,e){if(e){for(var t="",i=0;i<r.length;i+=16384)t+=String.fromCharCode.apply(null,r.subarray(i,i+16384));return t}else{if(Gn)return Gn.decode(r);var s=uh(r),n=s[0],o=s[1];return o.length&&Be(8),n}}var mh=function(r,e){return e+30+Ge(r,e+26)+Ge(r,e+28)},hh=function(r,e,t){var i=Ge(r,e+28),s=ch(r.subarray(e+46,e+46+i),!(Ge(r,e+8)&2048)),n=e+46+i,o=Ve(r,e+20),a=t&&o==4294967295?ph(r,n):[o,Ve(r,e+24),Ve(r,e+42)],l=a[0],u=a[1],c=a[2];return[Ge(r,e+10),l,u,s,n+Ge(r,e+30)+Ge(r,e+32),c]},ph=function(r,e){for(;Ge(r,e)!=1;e+=4+Ge(r,e+2));return[qn(r,e+12),qn(r,e+4),qn(r,e+20)]};function ja(r,e){for(var t={},i=r.length-22;Ve(r,i)!=101010256;--i)(!i||r.length-i>65558)&&Be(13);var s=Ge(r,i+8);if(!s)return{};var n=Ve(r,i+16),o=n==4294967295||s==65535;if(o){var a=Ve(r,i-12);o=Ve(r,a)==101075792,o&&(s=Ve(r,a+32),n=Ve(r,a+48))}for(var l=e&&e.filter,u=0;u<s;++u){var c=hh(r,n,o),m=c[0],h=c[1],d=c[2],f=c[3],g=c[4],p=c[5],b=mh(r,p);n=g,(!l||l({name:f,size:h,originalSize:d,compression:m}))&&(m?m==8?t[f]=ah(r.subarray(b,b+h),new ue(d)):Be(14,"unknown compression type "+m):t[f]=Yn(r,b,b+h))}return t}var Kt={currentFrame:Date.now(),lastFrame:0,deltaTime:0};function Wa(r){return r.replace(/[?#][^/]*$/,"")}function dh(r){let e=Array.from(r.keys()).map(s=>s.split("/")),t=0,i="";for(;;){let s=e[0][t];if(!e.every(n=>n[t]===s))return i;t+=1,i=s}}async function qa(r){let e=ja(r,{filter:t=>!t.name.endsWith("/")});return new Map(Object.entries(e))}var zi=class extends It{settings;glContext;expresssionsMap=new H;eyeblinkIds=new w;lipsyncIds=new w;motionsMap=new H;contentBufferMap=new Map;parentDir="";motionHandle=null;cacheBucketName="";hitTest;isRunning=!1;constructor(){super()}static async init({path:e,hitTest:t},i,s){V.startUp({logFunction:a=>{},loggingLevel:5}),V.initialize();let n=new zi;n.cacheBucketName=`${Fr}-v${i}`,await n.deleteOldCaches(),n.glContext=s,n.setupWebglFeatures(),n.hitTest=t;let o;if(Wa(e).endsWith(".json"))n.parentDir=Wa(e).replace(/\/[^/]*$/,""),o=await n.getBuffer(e,!0);else{await n.fetchZip(e),n.parentDir=dh(n.contentBufferMap);let a=Array.from(n.contentBufferMap.keys()).filter(l=>l.endsWith(".model3.json"))[0];o=await n.getBuffer(a,!0)}return n.settings=new yi(o,o.byteLength),n}flushWebglContext(){this.glContext.flush()}setupWebglFeatures(){this.glContext.clearColor(0,0,0,1),this.glContext.enable(this.glContext.DEPTH_TEST),this.glContext.depthFunc(this.glContext.LEQUAL),this.glContext.clear(this.glContext.COLOR_BUFFER_BIT|this.glContext.DEPTH_BUFFER_BIT),this.glContext.clearDepth(1),this.glContext.enable(this.glContext.BLEND),this.glContext.blendFunc(this.glContext.SRC_ALPHA,this.glContext.ONE_MINUS_SRC_ALPHA)}async load(){await this.loadModelImpl(),await this.loadExpressionImpl(),await this.loadPhysicsImpl(),await this.loadPoseImpl(),this.setupEyeblinking(),this.setupBreathing(),this.setupEyeblinkIds(),this.setupLayout(),super.createRenderer(),await this.setupTextures(),this.getRenderer().setIsPremultipliedAlpha(!0),this.getRenderer().startUp(this.glContext)}async deleteOldCaches(){(await caches.keys()).filter(t=>t.startsWith(Fr)).filter(t=>t<this.cacheBucketName).forEach(async t=>await caches.delete(t))}async getBuffer(e,t=!1){let i=t?e:`${this.parentDir}/${e}`,s=this.contentBufferMap.get(i);if(s!=null)return s;let n=await caches.open(this.cacheBucketName),o=await n.match(i);return o==null?(await n.add(i),this.contentBufferMap.set(i,await(await n.match(i)).arrayBuffer())):this.contentBufferMap.get(i)==null&&this.contentBufferMap.set(i,await o.arrayBuffer()),this.contentBufferMap.get(i)}async fetchZip(e){let t=await caches.open(Fr),i=await t.match(e);if(i==null){await t.add(e);let s=await t.match(e);this.contentBufferMap=await qa(new Uint8Array(await s.arrayBuffer()))}else Object.keys(this.contentBufferMap).length===0&&(this.contentBufferMap=await qa(new Uint8Array(await i.arrayBuffer())))}async loadModelImpl(){let e=this.settings.getModelFileName();if(e==="")return;let t=await this.getBuffer(e);super.loadModel(t)}async loadExpressionImpl(){let e=this.settings.getExpressionCount();if(!(e<1))for(let t=0;t<e;t++){let i=this.settings.getExpressionName(t),s=this.settings.getExpressionFileName(t),n=await this.getBuffer(s),o=this.loadExpression(n,n.byteLength,i);this.expresssionsMap.setValue(i,o)}}async loadPhysicsImpl(){let e=this.settings.getPhysicsFileName();if(e==="")return;let t=await this.getBuffer(e);super.loadPhysics(t,t.byteLength)}async loadPoseImpl(){let e=this.settings.getPoseFileName();if(e==="")return;let t=await this.getBuffer(e);super.loadPose(t,t.byteLength)}setupEyeblinking(){this.settings.getEyeBlinkParameterCount()<1||(this._eyeBlink=rt.create(this.settings))}setupBreathing(){let e=i=>V.getIdManager().getId(i),t=new w;[{id:M.ParamAngleX,offset:0,peak:15,cycle:6.5345,weight:.5},{id:M.ParamAngleY,offset:0,peak:8,cycle:3.5345,weight:.5},{id:M.ParamAngleZ,offset:0,peak:10,cycle:5.5345,weight:.5},{id:M.ParamBodyAngleX,offset:0,peak:4,cycle:15.5345,weight:.5},{id:M.ParamBreath,offset:.5,peak:.5,cycle:3.2345,weight:1}].forEach(({id:i,offset:s,peak:n,cycle:o,weight:a})=>t.pushBack(new _i(e(i),s,n,o,a))),this._breath=je.create(),this._breath.setParameters(t)}setupEyeblinkIds(){let e=this.settings.getEyeBlinkParameterCount();for(let t=0;t<e;t++)Object.defineProperty(this.eyeblinkIds,t,this.settings.getEyeBlinkParameterId(t))}setupLayout(){let e=new H;this._modelMatrix!=null&&(this.settings.getLayoutMap(e),this._modelMatrix.setupFromLayout(e))}async startMotion(e,t,i,s){if(i===Ki.Force)this._motionManager.setReservePriority(i);else if(!this._motionManager.reserveMotion(i))return Bi;let n=`${e}_${t}`,o=this.motionsMap.getValue(n);if(o!=null&&s!=null)return o.setFinishedMotionHandler(s),this._motionManager.startMotionPriority(o,!1,i);let a=this.settings.getMotionFileName(e,t),l=await this.getBuffer(a);o=He.create(l,l.byteLength,s);let u=this.settings.getMotionFadeInTimeValue(e,t);u>=0&&o.setFadeInTime(u);let c=this.settings.getMotionFadeOutTimeValue(e,t);return c>=0&&o.setFadeOutTime(c),o.setEffectIds(this.eyeblinkIds,this.lipsyncIds),this._motionManager.startMotionPriority(o,!1,i)}async startRandomMotion(e,t,i){if(this.settings.getMotionCount(e)===0)return Bi;let s=Math.floor(Math.random()*this.settings.getMotionCount(e));return await this.startMotion(e,s,t,i)}async setupTextures(){let e=this.settings.getTextureCount();for(let t=0;t<e;t++){let i=this.settings.getTextureFileName(t);i!==""&&await this.createTextureFromPngFile(i,t)}}async createTextureFromPngFile(e,t){let i=o=>{let a=this.glContext.createTexture();return this.glContext.bindTexture(this.glContext.TEXTURE_2D,a),this.glContext.texParameteri(this.glContext.TEXTURE_2D,this.glContext.TEXTURE_MIN_FILTER,this.glContext.LINEAR_MIPMAP_LINEAR),this.glContext.texParameteri(this.glContext.TEXTURE_2D,this.glContext.TEXTURE_MAG_FILTER,this.glContext.LINEAR),this.glContext.pixelStorei(this.glContext.UNPACK_PREMULTIPLY_ALPHA_WEBGL,1),this.glContext.texImage2D(this.glContext.TEXTURE_2D,0,this.glContext.RGBA,this.glContext.RGBA,this.glContext.UNSIGNED_BYTE,o),this.glContext.generateMipmap(this.glContext.TEXTURE_2D),this.glContext.bindTexture(this.glContext.TEXTURE_2D,null),a},s=await this.getBuffer(e),n=new Blob([new Uint8Array(s)],{type:"image/png"});this.getRenderer().bindTexture(t,i(await createImageBitmap(n)))}setExpression(e){let t=this.expresssionsMap.getValue(e);return t==null?-1:this._expressionManager.startMotionPriority(t,!1,Ki.Force)}setRandomExpression(){if(this.expresssionsMap.getSize()===0)return-1;let e=Math.floor(Math.random()*this.expresssionsMap.getSize()),t=this.expresssionsMap._keyValues[e].first;return this.setExpression(t)}getDefaultExpressionName(){if(this.expresssionsMap.getSize()!==0)return this.expresssionsMap._keyValues[0].first}async touchAt(e,t){if(this.motionHandle!=null||this.hitTest==null)return;let{head:i,body:s}=this.hitTest;if(this.didHitIn(i.name,e,t))return this.motionHandle=this.setRandomExpression(),setTimeout(()=>{let n=this.getDefaultExpressionName();n!=null&&this.setExpression(n),this.motionHandle=null},2e3),i.name;if(this.didHitIn(s.name,e,t))return this.motionHandle=await this.startRandomMotion(s.group,Ki.Normal,()=>this.motionHandle=null),s.name}didHitIn(e,t,i){if(this._opacity<1)return!1;for(let s=0;s<this.settings.getHitAreasCount();s++)if(this.settings.getHitAreaName(s)===e)return super.isHit(this.settings.getHitAreaId(s),t,i);return!1}async startLoop(){this.isRunning=!0,await this.loop(0)}stopLoop(){this.isRunning=!1}async loop(e){if(!this.isRunning)return;requestAnimationFrame(async n=>await this.loop(n)),Kt.currentFrame=e,Kt.deltaTime=(Kt.currentFrame-Kt.lastFrame)/1e3,Kt.lastFrame=Kt.currentFrame,this.flushWebglContext();let t=new F,{width:i,height:s}=this.glContext.canvas;(this.getModel().getCanvasWidth()??1)>1&&i<s?(this.getModelMatrix().setWidth(2),t.scale(1,i/s)):t.scale(s/i,1),this.draw(t,{width:i,height:s}),await this.update(Kt.deltaTime)}draw(e,{width:t,height:i}){let s=super.getRenderer();e.multiplyByMatrix(this._modelMatrix),s.setMvpMatrix(e);let n=this.glContext.getParameter(this.glContext.FRAMEBUFFER_BINDING),o=[0,0,t,i];s.setRenderState(n,o),s.drawModel()}async update(e){await this._updateParameters(e),this._model.update()}addParameterValueById(e,t){return this._model.addParameterValueById(V.getIdManager().getId(e),t)}async _updateParameters(e){this._dragManager.update(e),this._dragX=this._dragManager.getX(),this._dragY=this._dragManager.getY(),this._model.loadParameters(),this._motionManager.isFinished()?await this.startRandomMotion($r.Idle,Ki.Idle):!this._motionManager.updateMotion(this._model,e)&&this._eyeBlink!=null&&this._eyeBlink.updateParameters(this._model,e),this._model.saveParameters(),this._expressionManager?.updateMotion(this._model,e),this.addParameterValueById(M.ParamAngleX,this._dragX*30),this.addParameterValueById(M.ParamAngleY,this._dragY*30),this.addParameterValueById(M.ParamAngleZ,this._dragX*this._dragY*30),this.addParameterValueById(M.ParamBodyAngleX,this._dragX*10),this.addParameterValueById(M.ParamEyeBallX,this._dragX),this.addParameterValueById(M.ParamEyeBallY,this._dragY),this._breath?.updateParameters(this._model,e),this._physics?.evaluate(this._model,e),this._pose?.updateParameters(this._model,e)}};var Os=class extends Cs{modelManager;async init(e=!1){let{clientWidth:t,clientHeight:i}=this.elemAppRoot;this.resizeCanvas(t,i),e&&this.release();let s=this.CANVAS.getContext("webgl");this.modelManager=await zi.init(this.models[this.currentModelIndex],this.version,s),await this.modelManager.load()}async main(){await this.init(),this.refreshViewpointMatrix(this.modelCoordInitial),await super.main(),await this.modelManager?.startLoop()}registerEvents(){document.addEventListener("pointermove",async e=>await this.onPointerMove(e)),super.registerEvents()}resizeCanvas(e,t){this.CANVAS.width=e,this.CANVAS.height=t}release(){this.modelManager?.stopLoop(),this.modelManager?.release(),this.modelManager=void 0}async switchModel(e){await super.switchModel(e),await this.init(!0)}async onPointerMove(e){let t=this.transformViewX(e.x),i=this.transformViewY(e.y);this.modelManager?.setDragging(t,i);let s=await this.modelManager?.touchAt(t,i);s!=null&&this.sayWhenTouched(s),super.onPointerMove(e)}onPointerLeave(){this.modelManager?.setDragging(0,0),super.onPointerLeave()}onWindowResize(){let{clientWidth:e,clientHeight:t}=this.elemAppRoot;this.resizeCanvas(e,t),super.onWindowResize()}};if(!Object.prototype.hasOwnProperty.call(window,"fetch")||!Object.prototype.hasOwnProperty.call(window,"caches"))throw new Error(eo);function fh(r){na(),new Os(r).main()}fh(companionOption);})();
